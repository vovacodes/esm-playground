const React=window.React;const{Children:Children,Component:Component,Fragment:Fragment,Profiler:Profiler,PureComponent:PureComponent,StrictMode:StrictMode,Suspense:Suspense,cloneElement:cloneElement,createContext:createContext,createElement:createElement,createFactory:createFactory,createRef:createRef,forwardRef:forwardRef,isValidElement:isValidElement,lazy:lazy,memo:memo,useCallback:useCallback,useContext:useContext,useDebugValue:useDebugValue,useEffect:useEffect,useImperativeHandle:useImperativeHandle,useLayoutEffect:useLayoutEffect,useMemo:useMemo,useReducer:useReducer,useRef:useRef,useState:useState,version:version}=React;const ReactDOM=window.ReactDOM;var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t={};(function(e,r){r(t);})(t,(function(t){void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(e){return "number"===typeof e&&isFinite(e)&&Math.floor(e)===e});void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e});"name"in Function.prototype===false&&Object.defineProperty(Function.prototype,"name",{get:function get(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");var t=Object(e);for(var r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);}return t});var r="121";var i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};var n={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};var a=0;var o=1;var s=2;var l=3;var u=0;var c=1;var h=2;var d=3;var f=0;var p=1;var m=2;var g=1;var y=2;var x=0;var b=1;var _=2;var M=3;var w=4;var S=5;var T=100;var A=101;var L=102;var E=103;var C=104;var P=200;var R=201;var B=202;var I=203;var D=204;var G=205;var O=206;var N=207;var F=208;var U=209;var z=210;var H=0;var V=1;var k=2;var W=3;var j=4;var q=5;var X=6;var Y=7;var J=0;var Z=1;var Q=2;var K=0;var $=1;var ee=2;var te=3;var re=4;var ie=5;var ne=300;var ae=301;var oe=302;var se=303;var le=304;var ue=306;var ce=307;var he=1e3;var de=1001;var fe=1002;var pe=1003;var me=1004;var ve=1004;var ge=1005;var ye=1005;var xe=1006;var be=1007;var _e=1007;var Me=1008;var we=1008;var Se=1009;var Te=1010;var Ae=1011;var Le=1012;var Ee=1013;var Ce=1014;var Pe=1015;var Re=1016;var Be=1017;var Ie=1018;var De=1019;var Ge=1020;var Oe=1021;var Ne=1022;var Fe=1023;var Ue=1024;var ze=1025;var He=Fe;var Ve=1026;var ke=1027;var We=1028;var je=1029;var qe=1030;var Xe=1031;var Ye=1032;var Je=1033;var Ze=33776;var Qe=33777;var Ke=33778;var $e=33779;var et=35840;var tt=35841;var rt=35842;var it=35843;var nt=36196;var ot=37492;var st=37496;var lt=37808;var ut=37809;var ct=37810;var ht=37811;var dt=37812;var ft=37813;var pt=37814;var mt=37815;var vt=37816;var gt=37817;var yt=37818;var xt=37819;var bt=37820;var _t=37821;var Mt=36492;var wt=37840;var St=37841;var Tt=37842;var At=37843;var Lt=37844;var Et=37845;var Ct=37846;var Pt=37847;var Rt=37848;var Bt=37849;var It=37850;var Dt=37851;var Gt=37852;var Ot=37853;var Nt=2200;var Ft=2201;var Ut=2202;var zt=2300;var Ht=2301;var Vt=2302;var kt=2400;var Wt=2401;var jt=2402;var qt=2500;var Xt=2501;var Yt=0;var Jt=1;var Zt=2;var Qt=3e3;var Kt=3001;var $t=3007;var er=3002;var tr=3003;var rr=3004;var ir=3005;var nr=3006;var ar=3200;var or=3201;var sr=0;var lr=1;var ur=0;var cr=7680;var hr=7681;var dr=7682;var fr=7683;var pr=34055;var mr=34056;var vr=5386;var gr=512;var yr=513;var xr=514;var br=515;var _r=516;var Mr=517;var wr=518;var Sr=519;var Tr=35044;var Ar=35048;var Lr=35040;var Er=35045;var Cr=35049;var Pr=35041;var Rr=35046;var Br=35050;var Ir=35042;var Dr="100";var Gr="300 es";function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function addEventListener(t,r){void 0===(this||e)._listeners&&((this||e)._listeners={});var i=(this||e)._listeners;void 0===i[t]&&(i[t]=[]);-1===i[t].indexOf(r)&&i[t].push(r);},hasEventListener:function hasEventListener(t,r){if(void 0===(this||e)._listeners)return false;var i=(this||e)._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(r)},removeEventListener:function removeEventListener(t,r){if(void 0!==(this||e)._listeners){var i=(this||e)._listeners;var n=i[t];if(void 0!==n){var a=n.indexOf(r);-1!==a&&n.splice(a,1);}}},dispatchEvent:function dispatchEvent(t){if(void 0!==(this||e)._listeners){var r=(this||e)._listeners;var i=r[t.type];if(void 0!==i){t.target=this||e;var n=i.slice(0);for(var a=0,o=n.length;a<o;a++)n[a].call(this||e,t);}}}});var Or=[];for(var Nr=0;Nr<256;Nr++)Or[Nr]=(Nr<16?"0":"")+Nr.toString(16);var Fr=1234567;var Ur={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function generateUUID(){var e=4294967295*Math.random()|0;var t=4294967295*Math.random()|0;var r=4294967295*Math.random()|0;var i=4294967295*Math.random()|0;var n=Or[255&e]+Or[e>>8&255]+Or[e>>16&255]+Or[e>>24&255]+"-"+Or[255&t]+Or[t>>8&255]+"-"+Or[t>>16&15|64]+Or[t>>24&255]+"-"+Or[63&r|128]+Or[r>>8&255]+"-"+Or[r>>16&255]+Or[r>>24&255]+Or[255&i]+Or[i>>8&255]+Or[i>>16&255]+Or[i>>24&255];return n.toUpperCase()},clamp:function clamp(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function euclideanModulo(e,t){return (e%t+t)%t},mapLinear:function mapLinear(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)},lerp:function lerp(e,t,r){return (1-r)*e+r*t},smoothstep:function smoothstep(e,t,r){if(e<=t)return 0;if(e>=r)return 1;e=(e-t)/(r-t);return e*e*(3-2*e)},smootherstep:function smootherstep(e,t,r){if(e<=t)return 0;if(e>=r)return 1;e=(e-t)/(r-t);return e*e*e*(e*(6*e-15)+10)},randInt:function randInt(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function randFloat(e,t){return e+Math.random()*(t-e)},randFloatSpread:function randFloatSpread(e){return e*(.5-Math.random())},seededRandom:function seededRandom(e){void 0!==e&&(Fr=e%2147483647);Fr=16807*Fr%2147483647;return (Fr-1)/2147483646},degToRad:function degToRad(e){return e*Ur.DEG2RAD},radToDeg:function radToDeg(e){return e*Ur.RAD2DEG},isPowerOfTwo:function isPowerOfTwo(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function ceilPowerOfTwo(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function floorPowerOfTwo(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function setQuaternionFromProperEuler(e,t,r,i,n){var a=Math.cos;var o=Math.sin;var s=a(r/2);var l=o(r/2);var u=a((t+i)/2);var c=o((t+i)/2);var h=a((t-i)/2);var d=o((t-i)/2);var f=a((i-t)/2);var p=o((i-t)/2);switch(n){case"XYX":e.set(s*c,l*h,l*d,s*u);break;case"YZY":e.set(l*d,s*c,l*h,s*u);break;case"ZXZ":e.set(l*h,l*d,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n);}}};function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;"value"in i&&(i.writable=true);Object.defineProperty(e,i.key,i);}}function _createClass(e,t,r){t&&_defineProperties(e.prototype,t);r&&_defineProperties(e,r);return e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t;}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var zr=function(){function Vector2(t,r){void 0===t&&(t=0);void 0===r&&(r=0);Object.defineProperty(this||e,"isVector2",{value:true});(this||e).x=t;(this||e).y=r;}var t=Vector2.prototype;t.set=function set(t,r){(this||e).x=t;(this||e).y=r;return this||e};t.setScalar=function setScalar(t){(this||e).x=t;(this||e).y=t;return this||e};t.setX=function setX(t){(this||e).x=t;return this||e};t.setY=function setY(t){(this||e).y=t;return this||e};t.setComponent=function setComponent(t,r){switch(t){case 0:(this||e).x=r;break;case 1:(this||e).y=r;break;default:throw new Error("index is out of range: "+t)}return this||e};t.getComponent=function getComponent(t){switch(t){case 0:return (this||e).x;case 1:return (this||e).y;default:throw new Error("index is out of range: "+t)}};t.clone=function clone(){return new(this||e).constructor((this||e).x,(this||e).y)};t.copy=function copy(t){(this||e).x=t.x;(this||e).y=t.y;return this||e};t.add=function add(t,r){if(void 0!==r){console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(t,r)}(this||e).x+=t.x;(this||e).y+=t.y;return this||e};t.addScalar=function addScalar(t){(this||e).x+=t;(this||e).y+=t;return this||e};t.addVectors=function addVectors(t,r){(this||e).x=t.x+r.x;(this||e).y=t.y+r.y;return this||e};t.addScaledVector=function addScaledVector(t,r){(this||e).x+=t.x*r;(this||e).y+=t.y*r;return this||e};t.sub=function sub(t,r){if(void 0!==r){console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(t,r)}(this||e).x-=t.x;(this||e).y-=t.y;return this||e};t.subScalar=function subScalar(t){(this||e).x-=t;(this||e).y-=t;return this||e};t.subVectors=function subVectors(t,r){(this||e).x=t.x-r.x;(this||e).y=t.y-r.y;return this||e};t.multiply=function multiply(t){(this||e).x*=t.x;(this||e).y*=t.y;return this||e};t.multiplyScalar=function multiplyScalar(t){(this||e).x*=t;(this||e).y*=t;return this||e};t.divide=function divide(t){(this||e).x/=t.x;(this||e).y/=t.y;return this||e};t.divideScalar=function divideScalar(e){return this.multiplyScalar(1/e)};t.applyMatrix3=function applyMatrix3(t){var r=(this||e).x,i=(this||e).y;var n=t.elements;(this||e).x=n[0]*r+n[3]*i+n[6];(this||e).y=n[1]*r+n[4]*i+n[7];return this||e};t.min=function min(t){(this||e).x=Math.min((this||e).x,t.x);(this||e).y=Math.min((this||e).y,t.y);return this||e};t.max=function max(t){(this||e).x=Math.max((this||e).x,t.x);(this||e).y=Math.max((this||e).y,t.y);return this||e};t.clamp=function clamp(t,r){(this||e).x=Math.max(t.x,Math.min(r.x,(this||e).x));(this||e).y=Math.max(t.y,Math.min(r.y,(this||e).y));return this||e};t.clampScalar=function clampScalar(t,r){(this||e).x=Math.max(t,Math.min(r,(this||e).x));(this||e).y=Math.max(t,Math.min(r,(this||e).y));return this||e};t.clampLength=function clampLength(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))};t.floor=function floor(){(this||e).x=Math.floor((this||e).x);(this||e).y=Math.floor((this||e).y);return this||e};t.ceil=function ceil(){(this||e).x=Math.ceil((this||e).x);(this||e).y=Math.ceil((this||e).y);return this||e};t.round=function round(){(this||e).x=Math.round((this||e).x);(this||e).y=Math.round((this||e).y);return this||e};t.roundToZero=function roundToZero(){(this||e).x=(this||e).x<0?Math.ceil((this||e).x):Math.floor((this||e).x);(this||e).y=(this||e).y<0?Math.ceil((this||e).y):Math.floor((this||e).y);return this||e};t.negate=function negate(){(this||e).x=-(this||e).x;(this||e).y=-(this||e).y;return this||e};t.dot=function dot(t){return (this||e).x*t.x+(this||e).y*t.y};t.cross=function cross(t){return (this||e).x*t.y-(this||e).y*t.x};t.lengthSq=function lengthSq(){return (this||e).x*(this||e).x+(this||e).y*(this||e).y};t.length=function length(){return Math.sqrt((this||e).x*(this||e).x+(this||e).y*(this||e).y)};t.manhattanLength=function manhattanLength(){return Math.abs((this||e).x)+Math.abs((this||e).y)};t.normalize=function normalize(){return this.divideScalar(this.length()||1)};t.angle=function angle(){var angle=Math.atan2(-(this||e).y,-(this||e).x)+Math.PI;return angle};t.distanceTo=function distanceTo(e){return Math.sqrt(this.distanceToSquared(e))};t.distanceToSquared=function distanceToSquared(t){var r=(this||e).x-t.x,i=(this||e).y-t.y;return r*r+i*i};t.manhattanDistanceTo=function manhattanDistanceTo(t){return Math.abs((this||e).x-t.x)+Math.abs((this||e).y-t.y)};t.setLength=function setLength(e){return this.normalize().multiplyScalar(e)};t.lerp=function lerp(t,r){(this||e).x+=(t.x-(this||e).x)*r;(this||e).y+=(t.y-(this||e).y)*r;return this||e};t.lerpVectors=function lerpVectors(t,r,i){(this||e).x=t.x+(r.x-t.x)*i;(this||e).y=t.y+(r.y-t.y)*i;return this||e};t.equals=function equals(t){return t.x===(this||e).x&&t.y===(this||e).y};t.fromArray=function fromArray(t,r){void 0===r&&(r=0);(this||e).x=t[r];(this||e).y=t[r+1];return this||e};t.toArray=function toArray(t,r){void 0===t&&(t=[]);void 0===r&&(r=0);t[r]=(this||e).x;t[r+1]=(this||e).y;return t};t.fromBufferAttribute=function fromBufferAttribute(t,r,i){void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");(this||e).x=t.getX(r);(this||e).y=t.getY(r);return this||e};t.rotateAround=function rotateAround(t,r){var i=Math.cos(r),n=Math.sin(r);var a=(this||e).x-t.x;var o=(this||e).y-t.y;(this||e).x=a*i-o*n+t.x;(this||e).y=a*n+o*i+t.y;return this||e};t.random=function random(){(this||e).x=Math.random();(this||e).y=Math.random();return this||e};_createClass(Vector2,[{key:"width",get:function get(){return (this||e).x},set:function set(t){(this||e).x=t;}},{key:"height",get:function get(){return (this||e).y},set:function set(t){(this||e).y=t;}}]);return Vector2}();var Hr=function(){function Matrix3(){Object.defineProperty(this||e,"isMatrix3",{value:true});(this||e).elements=[1,0,0,0,1,0,0,0,1];arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.");}var t=Matrix3.prototype;t.set=function set(t,r,i,n,a,o,s,l,u){var c=(this||e).elements;c[0]=t;c[1]=n;c[2]=s;c[3]=r;c[4]=a;c[5]=l;c[6]=i;c[7]=o;c[8]=u;return this||e};t.identity=function identity(){this.set(1,0,0,0,1,0,0,0,1);return this||e};t.clone=function clone(){return (new(this||e).constructor).fromArray((this||e).elements)};t.copy=function copy(t){var r=(this||e).elements;var i=t.elements;r[0]=i[0];r[1]=i[1];r[2]=i[2];r[3]=i[3];r[4]=i[4];r[5]=i[5];r[6]=i[6];r[7]=i[7];r[8]=i[8];return this||e};t.extractBasis=function extractBasis(t,r,i){t.setFromMatrix3Column(this||e,0);r.setFromMatrix3Column(this||e,1);i.setFromMatrix3Column(this||e,2);return this||e};t.setFromMatrix4=function setFromMatrix4(t){var r=t.elements;this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]);return this||e};t.multiply=function multiply(t){return this.multiplyMatrices(this||e,t)};t.premultiply=function premultiply(t){return this.multiplyMatrices(t,this||e)};t.multiplyMatrices=function multiplyMatrices(t,r){var i=t.elements;var n=r.elements;var a=(this||e).elements;var o=i[0],s=i[3],l=i[6];var u=i[1],c=i[4],h=i[7];var d=i[2],f=i[5],p=i[8];var m=n[0],g=n[3],y=n[6];var x=n[1],b=n[4],_=n[7];var M=n[2],w=n[5],S=n[8];a[0]=o*m+s*x+l*M;a[3]=o*g+s*b+l*w;a[6]=o*y+s*_+l*S;a[1]=u*m+c*x+h*M;a[4]=u*g+c*b+h*w;a[7]=u*y+c*_+h*S;a[2]=d*m+f*x+p*M;a[5]=d*g+f*b+p*w;a[8]=d*y+f*_+p*S;return this||e};t.multiplyScalar=function multiplyScalar(t){var r=(this||e).elements;r[0]*=t;r[3]*=t;r[6]*=t;r[1]*=t;r[4]*=t;r[7]*=t;r[2]*=t;r[5]*=t;r[8]*=t;return this||e};t.determinant=function determinant(){var t=(this||e).elements;var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return r*o*c-r*s*u-i*a*c+i*s*l+n*a*u-n*o*l};t.getInverse=function getInverse(t,r){void 0!==r&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var i=t.elements,n=(this||e).elements,a=i[0],o=i[1],s=i[2],l=i[3],u=i[4],c=i[5],h=i[6],d=i[7],f=i[8],p=f*u-c*d,m=c*h-f*l,g=d*l-u*h,y=a*p+o*m+s*g;if(0===y)return this.set(0,0,0,0,0,0,0,0,0);var x=1/y;n[0]=p*x;n[1]=(s*d-f*o)*x;n[2]=(c*o-s*u)*x;n[3]=m*x;n[4]=(f*a-s*h)*x;n[5]=(s*l-c*a)*x;n[6]=g*x;n[7]=(o*h-d*a)*x;n[8]=(u*a-o*l)*x;return this||e};t.transpose=function transpose(){var t;var r=(this||e).elements;t=r[1];r[1]=r[3];r[3]=t;t=r[2];r[2]=r[6];r[6]=t;t=r[5];r[5]=r[7];r[7]=t;return this||e};t.getNormalMatrix=function getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this||e).transpose()};t.transposeIntoArray=function transposeIntoArray(t){var r=(this||e).elements;t[0]=r[0];t[1]=r[3];t[2]=r[6];t[3]=r[1];t[4]=r[4];t[5]=r[7];t[6]=r[2];t[7]=r[5];t[8]=r[8];return this||e};t.setUvTransform=function setUvTransform(e,t,r,i,n,a,o){var s=Math.cos(n);var l=Math.sin(n);this.set(r*s,r*l,-r*(s*a+l*o)+a+e,-i*l,i*s,-i*(-l*a+s*o)+o+t,0,0,1);};t.scale=function scale(t,r){var i=(this||e).elements;i[0]*=t;i[3]*=t;i[6]*=t;i[1]*=r;i[4]*=r;i[7]*=r;return this||e};t.rotate=function rotate(t){var r=Math.cos(t);var i=Math.sin(t);var n=(this||e).elements;var a=n[0],o=n[3],s=n[6];var l=n[1],u=n[4],c=n[7];n[0]=r*a+i*l;n[3]=r*o+i*u;n[6]=r*s+i*c;n[1]=-i*a+r*l;n[4]=-i*o+r*u;n[7]=-i*s+r*c;return this||e};t.translate=function translate(t,r){var i=(this||e).elements;i[0]+=t*i[2];i[3]+=t*i[5];i[6]+=t*i[8];i[1]+=r*i[2];i[4]+=r*i[5];i[7]+=r*i[8];return this||e};t.equals=function equals(t){var r=(this||e).elements;var i=t.elements;for(var n=0;n<9;n++)if(r[n]!==i[n])return false;return true};t.fromArray=function fromArray(t,r){void 0===r&&(r=0);for(var i=0;i<9;i++)(this||e).elements[i]=t[i+r];return this||e};t.toArray=function toArray(t,r){void 0===t&&(t=[]);void 0===r&&(r=0);var i=(this||e).elements;t[r]=i[0];t[r+1]=i[1];t[r+2]=i[2];t[r+3]=i[3];t[r+4]=i[4];t[r+5]=i[5];t[r+6]=i[6];t[r+7]=i[7];t[r+8]=i[8];return t};return Matrix3}();var Vr;var kr={getDataURL:function getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else {void 0===Vr&&(Vr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));Vr.width=e.width;Vr.height=e.height;var r=Vr.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height);t=Vr;}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};var Wr=0;function Texture(t,r,i,n,a,o,s,l,u,c){Object.defineProperty(this||e,"id",{value:Wr++});(this||e).uuid=Ur.generateUUID();(this||e).name="";(this||e).image=void 0!==t?t:Texture.DEFAULT_IMAGE;(this||e).mipmaps=[];(this||e).mapping=void 0!==r?r:Texture.DEFAULT_MAPPING;(this||e).wrapS=void 0!==i?i:de;(this||e).wrapT=void 0!==n?n:de;(this||e).magFilter=void 0!==a?a:xe;(this||e).minFilter=void 0!==o?o:Me;(this||e).anisotropy=void 0!==u?u:1;(this||e).format=void 0!==s?s:Fe;(this||e).internalFormat=null;(this||e).type=void 0!==l?l:Se;(this||e).offset=new zr(0,0);(this||e).repeat=new zr(1,1);(this||e).center=new zr(0,0);(this||e).rotation=0;(this||e).matrixAutoUpdate=true;(this||e).matrix=new Hr;(this||e).generateMipmaps=true;(this||e).premultiplyAlpha=false;(this||e).flipY=true;(this||e).unpackAlignment=4;(this||e).encoding=void 0!==c?c:Qt;(this||e).version=0;(this||e).onUpdate=null;}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=ne;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:true,updateMatrix:function updateMatrix(){(this||e).matrix.setUvTransform((this||e).offset.x,(this||e).offset.y,(this||e).repeat.x,(this||e).repeat.y,(this||e).rotation,(this||e).center.x,(this||e).center.y);},clone:function clone(){return (new(this||e).constructor).copy(this||e)},copy:function copy(t){(this||e).name=t.name;(this||e).image=t.image;(this||e).mipmaps=t.mipmaps.slice(0);(this||e).mapping=t.mapping;(this||e).wrapS=t.wrapS;(this||e).wrapT=t.wrapT;(this||e).magFilter=t.magFilter;(this||e).minFilter=t.minFilter;(this||e).anisotropy=t.anisotropy;(this||e).format=t.format;(this||e).internalFormat=t.internalFormat;(this||e).type=t.type;(this||e).offset.copy(t.offset);(this||e).repeat.copy(t.repeat);(this||e).center.copy(t.center);(this||e).rotation=t.rotation;(this||e).matrixAutoUpdate=t.matrixAutoUpdate;(this||e).matrix.copy(t.matrix);(this||e).generateMipmaps=t.generateMipmaps;(this||e).premultiplyAlpha=t.premultiplyAlpha;(this||e).flipY=t.flipY;(this||e).unpackAlignment=t.unpackAlignment;(this||e).encoding=t.encoding;return this||e},toJSON:function toJSON(t){var r=void 0===t||"string"===typeof t;if(!r&&void 0!==t.textures[(this||e).uuid])return t.textures[(this||e).uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:(this||e).uuid,name:(this||e).name,mapping:(this||e).mapping,repeat:[(this||e).repeat.x,(this||e).repeat.y],offset:[(this||e).offset.x,(this||e).offset.y],center:[(this||e).center.x,(this||e).center.y],rotation:(this||e).rotation,wrap:[(this||e).wrapS,(this||e).wrapT],format:(this||e).format,type:(this||e).type,encoding:(this||e).encoding,minFilter:(this||e).minFilter,magFilter:(this||e).magFilter,anisotropy:(this||e).anisotropy,flipY:(this||e).flipY,premultiplyAlpha:(this||e).premultiplyAlpha,unpackAlignment:(this||e).unpackAlignment};if(void 0!==(this||e).image){var n=(this||e).image;void 0===n.uuid&&(n.uuid=Ur.generateUUID());if(!r&&void 0===t.images[n.uuid]){var a;if(Array.isArray(n)){a=[];for(var o=0,s=n.length;o<s;o++)a.push(kr.getDataURL(n[o]));}else a=kr.getDataURL(n);t.images[n.uuid]={uuid:n.uuid,url:a};}i.image=n.uuid;}r||(t.textures[(this||e).uuid]=i);return i},dispose:function dispose(){this.dispatchEvent({type:"dispose"});},transformUv:function transformUv(t){if((this||e).mapping!==ne)return t;t.applyMatrix3((this||e).matrix);if(t.x<0||t.x>1)switch((this||e).wrapS){case he:t.x=t.x-Math.floor(t.x);break;case de:t.x=t.x<0?0:1;break;case fe:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch((this||e).wrapT){case he:t.y=t.y-Math.floor(t.y);break;case de:t.y=t.y<0?0:1;break;case fe:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}(this||e).flipY&&(t.y=1-t.y);return t}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function set(t){true===t&&(this||e).version++;}});var jr=function(){function Vector4(t,r,i,n){void 0===t&&(t=0);void 0===r&&(r=0);void 0===i&&(i=0);void 0===n&&(n=1);Object.defineProperty(this||e,"isVector4",{value:true});(this||e).x=t;(this||e).y=r;(this||e).z=i;(this||e).w=n;}var t=Vector4.prototype;t.set=function set(t,r,i,n){(this||e).x=t;(this||e).y=r;(this||e).z=i;(this||e).w=n;return this||e};t.setScalar=function setScalar(t){(this||e).x=t;(this||e).y=t;(this||e).z=t;(this||e).w=t;return this||e};t.setX=function setX(t){(this||e).x=t;return this||e};t.setY=function setY(t){(this||e).y=t;return this||e};t.setZ=function setZ(t){(this||e).z=t;return this||e};t.setW=function setW(t){(this||e).w=t;return this||e};t.setComponent=function setComponent(t,r){switch(t){case 0:(this||e).x=r;break;case 1:(this||e).y=r;break;case 2:(this||e).z=r;break;case 3:(this||e).w=r;break;default:throw new Error("index is out of range: "+t)}return this||e};t.getComponent=function getComponent(t){switch(t){case 0:return (this||e).x;case 1:return (this||e).y;case 2:return (this||e).z;case 3:return (this||e).w;default:throw new Error("index is out of range: "+t)}};t.clone=function clone(){return new(this||e).constructor((this||e).x,(this||e).y,(this||e).z,(this||e).w)};t.copy=function copy(t){(this||e).x=t.x;(this||e).y=t.y;(this||e).z=t.z;(this||e).w=void 0!==t.w?t.w:1;return this||e};t.add=function add(t,r){if(void 0!==r){console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(t,r)}(this||e).x+=t.x;(this||e).y+=t.y;(this||e).z+=t.z;(this||e).w+=t.w;return this||e};t.addScalar=function addScalar(t){(this||e).x+=t;(this||e).y+=t;(this||e).z+=t;(this||e).w+=t;return this||e};t.addVectors=function addVectors(t,r){(this||e).x=t.x+r.x;(this||e).y=t.y+r.y;(this||e).z=t.z+r.z;(this||e).w=t.w+r.w;return this||e};t.addScaledVector=function addScaledVector(t,r){(this||e).x+=t.x*r;(this||e).y+=t.y*r;(this||e).z+=t.z*r;(this||e).w+=t.w*r;return this||e};t.sub=function sub(t,r){if(void 0!==r){console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(t,r)}(this||e).x-=t.x;(this||e).y-=t.y;(this||e).z-=t.z;(this||e).w-=t.w;return this||e};t.subScalar=function subScalar(t){(this||e).x-=t;(this||e).y-=t;(this||e).z-=t;(this||e).w-=t;return this||e};t.subVectors=function subVectors(t,r){(this||e).x=t.x-r.x;(this||e).y=t.y-r.y;(this||e).z=t.z-r.z;(this||e).w=t.w-r.w;return this||e};t.multiplyScalar=function multiplyScalar(t){(this||e).x*=t;(this||e).y*=t;(this||e).z*=t;(this||e).w*=t;return this||e};t.applyMatrix4=function applyMatrix4(t){var r=(this||e).x,i=(this||e).y,n=(this||e).z,a=(this||e).w;var o=t.elements;(this||e).x=o[0]*r+o[4]*i+o[8]*n+o[12]*a;(this||e).y=o[1]*r+o[5]*i+o[9]*n+o[13]*a;(this||e).z=o[2]*r+o[6]*i+o[10]*n+o[14]*a;(this||e).w=o[3]*r+o[7]*i+o[11]*n+o[15]*a;return this||e};t.divideScalar=function divideScalar(e){return this.multiplyScalar(1/e)};t.setAxisAngleFromQuaternion=function setAxisAngleFromQuaternion(t){(this||e).w=2*Math.acos(t.w);var r=Math.sqrt(1-t.w*t.w);if(r<1e-4){(this||e).x=1;(this||e).y=0;(this||e).z=0;}else {(this||e).x=t.x/r;(this||e).y=t.y/r;(this||e).z=t.z/r;}return this||e};t.setAxisAngleFromRotationMatrix=function setAxisAngleFromRotationMatrix(t){var r,i,n,a;var o=.01,s=.1,l=t.elements,u=l[0],c=l[4],h=l[8],d=l[1],f=l[5],p=l[9],m=l[2],g=l[6],y=l[10];if(Math.abs(c-d)<o&&Math.abs(h-m)<o&&Math.abs(p-g)<o){if(Math.abs(c+d)<s&&Math.abs(h+m)<s&&Math.abs(p+g)<s&&Math.abs(u+f+y-3)<s){this.set(1,0,0,0);return this||e}r=Math.PI;var x=(u+1)/2;var b=(f+1)/2;var _=(y+1)/2;var M=(c+d)/4;var w=(h+m)/4;var S=(p+g)/4;if(x>b&&x>_)if(x<o){i=0;n=.707106781;a=.707106781;}else {i=Math.sqrt(x);n=M/i;a=w/i;}else if(b>_)if(b<o){i=.707106781;n=0;a=.707106781;}else {n=Math.sqrt(b);i=M/n;a=S/n;}else if(_<o){i=.707106781;n=.707106781;a=0;}else {a=Math.sqrt(_);i=w/a;n=S/a;}this.set(i,n,a,r);return this||e}var T=Math.sqrt((g-p)*(g-p)+(h-m)*(h-m)+(d-c)*(d-c));Math.abs(T)<.001&&(T=1);(this||e).x=(g-p)/T;(this||e).y=(h-m)/T;(this||e).z=(d-c)/T;(this||e).w=Math.acos((u+f+y-1)/2);return this||e};t.min=function min(t){(this||e).x=Math.min((this||e).x,t.x);(this||e).y=Math.min((this||e).y,t.y);(this||e).z=Math.min((this||e).z,t.z);(this||e).w=Math.min((this||e).w,t.w);return this||e};t.max=function max(t){(this||e).x=Math.max((this||e).x,t.x);(this||e).y=Math.max((this||e).y,t.y);(this||e).z=Math.max((this||e).z,t.z);(this||e).w=Math.max((this||e).w,t.w);return this||e};t.clamp=function clamp(t,r){(this||e).x=Math.max(t.x,Math.min(r.x,(this||e).x));(this||e).y=Math.max(t.y,Math.min(r.y,(this||e).y));(this||e).z=Math.max(t.z,Math.min(r.z,(this||e).z));(this||e).w=Math.max(t.w,Math.min(r.w,(this||e).w));return this||e};t.clampScalar=function clampScalar(t,r){(this||e).x=Math.max(t,Math.min(r,(this||e).x));(this||e).y=Math.max(t,Math.min(r,(this||e).y));(this||e).z=Math.max(t,Math.min(r,(this||e).z));(this||e).w=Math.max(t,Math.min(r,(this||e).w));return this||e};t.clampLength=function clampLength(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))};t.floor=function floor(){(this||e).x=Math.floor((this||e).x);(this||e).y=Math.floor((this||e).y);(this||e).z=Math.floor((this||e).z);(this||e).w=Math.floor((this||e).w);return this||e};t.ceil=function ceil(){(this||e).x=Math.ceil((this||e).x);(this||e).y=Math.ceil((this||e).y);(this||e).z=Math.ceil((this||e).z);(this||e).w=Math.ceil((this||e).w);return this||e};t.round=function round(){(this||e).x=Math.round((this||e).x);(this||e).y=Math.round((this||e).y);(this||e).z=Math.round((this||e).z);(this||e).w=Math.round((this||e).w);return this||e};t.roundToZero=function roundToZero(){(this||e).x=(this||e).x<0?Math.ceil((this||e).x):Math.floor((this||e).x);(this||e).y=(this||e).y<0?Math.ceil((this||e).y):Math.floor((this||e).y);(this||e).z=(this||e).z<0?Math.ceil((this||e).z):Math.floor((this||e).z);(this||e).w=(this||e).w<0?Math.ceil((this||e).w):Math.floor((this||e).w);return this||e};t.negate=function negate(){(this||e).x=-(this||e).x;(this||e).y=-(this||e).y;(this||e).z=-(this||e).z;(this||e).w=-(this||e).w;return this||e};t.dot=function dot(t){return (this||e).x*t.x+(this||e).y*t.y+(this||e).z*t.z+(this||e).w*t.w};t.lengthSq=function lengthSq(){return (this||e).x*(this||e).x+(this||e).y*(this||e).y+(this||e).z*(this||e).z+(this||e).w*(this||e).w};t.length=function length(){return Math.sqrt((this||e).x*(this||e).x+(this||e).y*(this||e).y+(this||e).z*(this||e).z+(this||e).w*(this||e).w)};t.manhattanLength=function manhattanLength(){return Math.abs((this||e).x)+Math.abs((this||e).y)+Math.abs((this||e).z)+Math.abs((this||e).w)};t.normalize=function normalize(){return this.divideScalar(this.length()||1)};t.setLength=function setLength(e){return this.normalize().multiplyScalar(e)};t.lerp=function lerp(t,r){(this||e).x+=(t.x-(this||e).x)*r;(this||e).y+=(t.y-(this||e).y)*r;(this||e).z+=(t.z-(this||e).z)*r;(this||e).w+=(t.w-(this||e).w)*r;return this||e};t.lerpVectors=function lerpVectors(t,r,i){(this||e).x=t.x+(r.x-t.x)*i;(this||e).y=t.y+(r.y-t.y)*i;(this||e).z=t.z+(r.z-t.z)*i;(this||e).w=t.w+(r.w-t.w)*i;return this||e};t.equals=function equals(t){return t.x===(this||e).x&&t.y===(this||e).y&&t.z===(this||e).z&&t.w===(this||e).w};t.fromArray=function fromArray(t,r){void 0===r&&(r=0);(this||e).x=t[r];(this||e).y=t[r+1];(this||e).z=t[r+2];(this||e).w=t[r+3];return this||e};t.toArray=function toArray(t,r){void 0===t&&(t=[]);void 0===r&&(r=0);t[r]=(this||e).x;t[r+1]=(this||e).y;t[r+2]=(this||e).z;t[r+3]=(this||e).w;return t};t.fromBufferAttribute=function fromBufferAttribute(t,r,i){void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");(this||e).x=t.getX(r);(this||e).y=t.getY(r);(this||e).z=t.getZ(r);(this||e).w=t.getW(r);return this||e};t.random=function random(){(this||e).x=Math.random();(this||e).y=Math.random();(this||e).z=Math.random();(this||e).w=Math.random();return this||e};_createClass(Vector4,[{key:"width",get:function get(){return (this||e).z},set:function set(t){(this||e).z=t;}},{key:"height",get:function get(){return (this||e).w},set:function set(t){(this||e).w=t;}}]);return Vector4}();function WebGLRenderTarget(t,r,i){(this||e).width=t;(this||e).height=r;(this||e).scissor=new jr(0,0,t,r);(this||e).scissorTest=false;(this||e).viewport=new jr(0,0,t,r);i=i||{};(this||e).texture=new Texture(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding);(this||e).texture.image={};(this||e).texture.image.width=t;(this||e).texture.image.height=r;(this||e).texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps;(this||e).texture.minFilter=void 0!==i.minFilter?i.minFilter:xe;(this||e).depthBuffer=void 0===i.depthBuffer||i.depthBuffer;(this||e).stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer;(this||e).depthTexture=void 0!==i.depthTexture?i.depthTexture:null;}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:true,setSize:function setSize(t,r){if((this||e).width!==t||(this||e).height!==r){(this||e).width=t;(this||e).height=r;(this||e).texture.image.width=t;(this||e).texture.image.height=r;this.dispose();}(this||e).viewport.set(0,0,t,r);(this||e).scissor.set(0,0,t,r);},clone:function clone(){return (new(this||e).constructor).copy(this||e)},copy:function copy(t){(this||e).width=t.width;(this||e).height=t.height;(this||e).viewport.copy(t.viewport);(this||e).texture=t.texture.clone();(this||e).depthBuffer=t.depthBuffer;(this||e).stencilBuffer=t.stencilBuffer;(this||e).depthTexture=t.depthTexture;return this||e},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}});function WebGLMultisampleRenderTarget(t,r,i){WebGLRenderTarget.call(this||e,t,r,i);(this||e).samples=4;}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:true,copy:function copy(t){WebGLRenderTarget.prototype.copy.call(this||e,t);(this||e).samples=t.samples;return this||e}});var qr=function(){function Quaternion(t,r,i,n){void 0===t&&(t=0);void 0===r&&(r=0);void 0===i&&(i=0);void 0===n&&(n=1);Object.defineProperty(this||e,"isQuaternion",{value:true});(this||e)._x=t;(this||e)._y=r;(this||e)._z=i;(this||e)._w=n;}Quaternion.slerp=function slerp(e,t,r,i){return r.copy(e).slerp(t,i)};Quaternion.slerpFlat=function slerpFlat(e,t,r,i,n,a,o){var s=r[i+0],l=r[i+1],u=r[i+2],c=r[i+3];var h=n[a+0],d=n[a+1],f=n[a+2],p=n[a+3];if(c!==p||s!==h||l!==d||u!==f){var m=1-o;var g=s*h+l*d+u*f+c*p,y=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){var b=Math.sqrt(x),_=Math.atan2(b,g*y);m=Math.sin(m*_)/b;o=Math.sin(o*_)/b;}var M=o*y;s=s*m+h*M;l=l*m+d*M;u=u*m+f*M;c=c*m+p*M;if(m===1-o){var w=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=w;l*=w;u*=w;c*=w;}}e[t]=s;e[t+1]=l;e[t+2]=u;e[t+3]=c;};Quaternion.multiplyQuaternionsFlat=function multiplyQuaternionsFlat(e,t,r,i,n,a){var o=r[i];var s=r[i+1];var l=r[i+2];var u=r[i+3];var c=n[a];var h=n[a+1];var d=n[a+2];var f=n[a+3];e[t]=o*f+u*c+s*d-l*h;e[t+1]=s*f+u*h+l*c-o*d;e[t+2]=l*f+u*d+o*h-s*c;e[t+3]=u*f-o*c-s*h-l*d;return e};var t=Quaternion.prototype;t.set=function set(t,r,i,n){(this||e)._x=t;(this||e)._y=r;(this||e)._z=i;(this||e)._w=n;this._onChangeCallback();return this||e};t.clone=function clone(){return new(this||e).constructor((this||e)._x,(this||e)._y,(this||e)._z,(this||e)._w)};t.copy=function copy(t){(this||e)._x=t.x;(this||e)._y=t.y;(this||e)._z=t.z;(this||e)._w=t.w;this._onChangeCallback();return this||e};t.setFromEuler=function setFromEuler(t,r){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,n=t._y,a=t._z,o=t._order;var s=Math.cos;var l=Math.sin;var u=s(i/2);var c=s(n/2);var h=s(a/2);var d=l(i/2);var f=l(n/2);var p=l(a/2);switch(o){case"XYZ":(this||e)._x=d*c*h+u*f*p;(this||e)._y=u*f*h-d*c*p;(this||e)._z=u*c*p+d*f*h;(this||e)._w=u*c*h-d*f*p;break;case"YXZ":(this||e)._x=d*c*h+u*f*p;(this||e)._y=u*f*h-d*c*p;(this||e)._z=u*c*p-d*f*h;(this||e)._w=u*c*h+d*f*p;break;case"ZXY":(this||e)._x=d*c*h-u*f*p;(this||e)._y=u*f*h+d*c*p;(this||e)._z=u*c*p+d*f*h;(this||e)._w=u*c*h-d*f*p;break;case"ZYX":(this||e)._x=d*c*h-u*f*p;(this||e)._y=u*f*h+d*c*p;(this||e)._z=u*c*p-d*f*h;(this||e)._w=u*c*h+d*f*p;break;case"YZX":(this||e)._x=d*c*h+u*f*p;(this||e)._y=u*f*h+d*c*p;(this||e)._z=u*c*p-d*f*h;(this||e)._w=u*c*h-d*f*p;break;case"XZY":(this||e)._x=d*c*h-u*f*p;(this||e)._y=u*f*h-d*c*p;(this||e)._z=u*c*p+d*f*h;(this||e)._w=u*c*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o);}false!==r&&this._onChangeCallback();return this||e};t.setFromAxisAngle=function setFromAxisAngle(t,r){var i=r/2,n=Math.sin(i);(this||e)._x=t.x*n;(this||e)._y=t.y*n;(this||e)._z=t.z*n;(this||e)._w=Math.cos(i);this._onChangeCallback();return this||e};t.setFromRotationMatrix=function setFromRotationMatrix(t){var r=t.elements,i=r[0],n=r[4],a=r[8],o=r[1],s=r[5],l=r[9],u=r[2],c=r[6],h=r[10],d=i+s+h;if(d>0){var f=.5/Math.sqrt(d+1);(this||e)._w=.25/f;(this||e)._x=(c-l)*f;(this||e)._y=(a-u)*f;(this||e)._z=(o-n)*f;}else if(i>s&&i>h){var p=2*Math.sqrt(1+i-s-h);(this||e)._w=(c-l)/p;(this||e)._x=.25*p;(this||e)._y=(n+o)/p;(this||e)._z=(a+u)/p;}else if(s>h){var m=2*Math.sqrt(1+s-i-h);(this||e)._w=(a-u)/m;(this||e)._x=(n+o)/m;(this||e)._y=.25*m;(this||e)._z=(l+c)/m;}else {var g=2*Math.sqrt(1+h-i-s);(this||e)._w=(o-n)/g;(this||e)._x=(a+u)/g;(this||e)._y=(l+c)/g;(this||e)._z=.25*g;}this._onChangeCallback();return this||e};t.setFromUnitVectors=function setFromUnitVectors(t,r){var i=1e-6;var n=t.dot(r)+1;if(n<i){n=0;if(Math.abs(t.x)>Math.abs(t.z)){(this||e)._x=-t.y;(this||e)._y=t.x;(this||e)._z=0;(this||e)._w=n;}else {(this||e)._x=0;(this||e)._y=-t.z;(this||e)._z=t.y;(this||e)._w=n;}}else {(this||e)._x=t.y*r.z-t.z*r.y;(this||e)._y=t.z*r.x-t.x*r.z;(this||e)._z=t.x*r.y-t.y*r.x;(this||e)._w=n;}return this.normalize()};t.angleTo=function angleTo(e){return 2*Math.acos(Math.abs(Ur.clamp(this.dot(e),-1,1)))};t.rotateTowards=function rotateTowards(t,r){var i=this.angleTo(t);if(0===i)return this||e;var n=Math.min(1,r/i);this.slerp(t,n);return this||e};t.identity=function identity(){return this.set(0,0,0,1)};t.inverse=function inverse(){return this.conjugate()};t.conjugate=function conjugate(){(this||e)._x*=-1;(this||e)._y*=-1;(this||e)._z*=-1;this._onChangeCallback();return this||e};t.dot=function dot(t){return (this||e)._x*t._x+(this||e)._y*t._y+(this||e)._z*t._z+(this||e)._w*t._w};t.lengthSq=function lengthSq(){return (this||e)._x*(this||e)._x+(this||e)._y*(this||e)._y+(this||e)._z*(this||e)._z+(this||e)._w*(this||e)._w};t.length=function length(){return Math.sqrt((this||e)._x*(this||e)._x+(this||e)._y*(this||e)._y+(this||e)._z*(this||e)._z+(this||e)._w*(this||e)._w)};t.normalize=function normalize(){var t=this.length();if(0===t){(this||e)._x=0;(this||e)._y=0;(this||e)._z=0;(this||e)._w=1;}else {t=1/t;(this||e)._x=(this||e)._x*t;(this||e)._y=(this||e)._y*t;(this||e)._z=(this||e)._z*t;(this||e)._w=(this||e)._w*t;}this._onChangeCallback();return this||e};t.multiply=function multiply(t,r){if(void 0!==r){console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(t,r)}return this.multiplyQuaternions(this||e,t)};t.premultiply=function premultiply(t){return this.multiplyQuaternions(t,this||e)};t.multiplyQuaternions=function multiplyQuaternions(t,r){var i=t._x,n=t._y,a=t._z,o=t._w;var s=r._x,l=r._y,u=r._z,c=r._w;(this||e)._x=i*c+o*s+n*u-a*l;(this||e)._y=n*c+o*l+a*s-i*u;(this||e)._z=a*c+o*u+i*l-n*s;(this||e)._w=o*c-i*s-n*l-a*u;this._onChangeCallback();return this||e};t.slerp=function slerp(t,r){if(0===r)return this||e;if(1===r)return this.copy(t);var i=(this||e)._x,n=(this||e)._y,a=(this||e)._z,o=(this||e)._w;var s=o*t._w+i*t._x+n*t._y+a*t._z;if(s<0){(this||e)._w=-t._w;(this||e)._x=-t._x;(this||e)._y=-t._y;(this||e)._z=-t._z;s=-s;}else this.copy(t);if(s>=1){(this||e)._w=o;(this||e)._x=i;(this||e)._y=n;(this||e)._z=a;return this||e}var l=1-s*s;if(l<=Number.EPSILON){var u=1-r;(this||e)._w=u*o+r*(this||e)._w;(this||e)._x=u*i+r*(this||e)._x;(this||e)._y=u*n+r*(this||e)._y;(this||e)._z=u*a+r*(this||e)._z;this.normalize();this._onChangeCallback();return this||e}var c=Math.sqrt(l);var h=Math.atan2(c,s);var d=Math.sin((1-r)*h)/c,f=Math.sin(r*h)/c;(this||e)._w=o*d+(this||e)._w*f;(this||e)._x=i*d+(this||e)._x*f;(this||e)._y=n*d+(this||e)._y*f;(this||e)._z=a*d+(this||e)._z*f;this._onChangeCallback();return this||e};t.equals=function equals(t){return t._x===(this||e)._x&&t._y===(this||e)._y&&t._z===(this||e)._z&&t._w===(this||e)._w};t.fromArray=function fromArray(t,r){void 0===r&&(r=0);(this||e)._x=t[r];(this||e)._y=t[r+1];(this||e)._z=t[r+2];(this||e)._w=t[r+3];this._onChangeCallback();return this||e};t.toArray=function toArray(t,r){void 0===t&&(t=[]);void 0===r&&(r=0);t[r]=(this||e)._x;t[r+1]=(this||e)._y;t[r+2]=(this||e)._z;t[r+3]=(this||e)._w;return t};t.fromBufferAttribute=function fromBufferAttribute(t,r){(this||e)._x=t.getX(r);(this||e)._y=t.getY(r);(this||e)._z=t.getZ(r);(this||e)._w=t.getW(r);return this||e};t._onChange=function _onChange(t){(this||e)._onChangeCallback=t;return this||e};t._onChangeCallback=function _onChangeCallback(){};_createClass(Quaternion,[{key:"x",get:function get(){return (this||e)._x},set:function set(t){(this||e)._x=t;this._onChangeCallback();}},{key:"y",get:function get(){return (this||e)._y},set:function set(t){(this||e)._y=t;this._onChangeCallback();}},{key:"z",get:function get(){return (this||e)._z},set:function set(t){(this||e)._z=t;this._onChangeCallback();}},{key:"w",get:function get(){return (this||e)._w},set:function set(t){(this||e)._w=t;this._onChangeCallback();}}]);return Quaternion}();var Xr=function(){function Vector3(t,r,i){void 0===t&&(t=0);void 0===r&&(r=0);void 0===i&&(i=0);Object.defineProperty(this||e,"isVector3",{value:true});(this||e).x=t;(this||e).y=r;(this||e).z=i;}var t=Vector3.prototype;t.set=function set(t,r,i){void 0===i&&(i=(this||e).z);(this||e).x=t;(this||e).y=r;(this||e).z=i;return this||e};t.setScalar=function setScalar(t){(this||e).x=t;(this||e).y=t;(this||e).z=t;return this||e};t.setX=function setX(t){(this||e).x=t;return this||e};t.setY=function setY(t){(this||e).y=t;return this||e};t.setZ=function setZ(t){(this||e).z=t;return this||e};t.setComponent=function setComponent(t,r){switch(t){case 0:(this||e).x=r;break;case 1:(this||e).y=r;break;case 2:(this||e).z=r;break;default:throw new Error("index is out of range: "+t)}return this||e};t.getComponent=function getComponent(t){switch(t){case 0:return (this||e).x;case 1:return (this||e).y;case 2:return (this||e).z;default:throw new Error("index is out of range: "+t)}};t.clone=function clone(){return new(this||e).constructor((this||e).x,(this||e).y,(this||e).z)};t.copy=function copy(t){(this||e).x=t.x;(this||e).y=t.y;(this||e).z=t.z;return this||e};t.add=function add(t,r){if(void 0!==r){console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(t,r)}(this||e).x+=t.x;(this||e).y+=t.y;(this||e).z+=t.z;return this||e};t.addScalar=function addScalar(t){(this||e).x+=t;(this||e).y+=t;(this||e).z+=t;return this||e};t.addVectors=function addVectors(t,r){(this||e).x=t.x+r.x;(this||e).y=t.y+r.y;(this||e).z=t.z+r.z;return this||e};t.addScaledVector=function addScaledVector(t,r){(this||e).x+=t.x*r;(this||e).y+=t.y*r;(this||e).z+=t.z*r;return this||e};t.sub=function sub(t,r){if(void 0!==r){console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(t,r)}(this||e).x-=t.x;(this||e).y-=t.y;(this||e).z-=t.z;return this||e};t.subScalar=function subScalar(t){(this||e).x-=t;(this||e).y-=t;(this||e).z-=t;return this||e};t.subVectors=function subVectors(t,r){(this||e).x=t.x-r.x;(this||e).y=t.y-r.y;(this||e).z=t.z-r.z;return this||e};t.multiply=function multiply(t,r){if(void 0!==r){console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(t,r)}(this||e).x*=t.x;(this||e).y*=t.y;(this||e).z*=t.z;return this||e};t.multiplyScalar=function multiplyScalar(t){(this||e).x*=t;(this||e).y*=t;(this||e).z*=t;return this||e};t.multiplyVectors=function multiplyVectors(t,r){(this||e).x=t.x*r.x;(this||e).y=t.y*r.y;(this||e).z=t.z*r.z;return this||e};t.applyEuler=function applyEuler(e){e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(Jr.setFromEuler(e))};t.applyAxisAngle=function applyAxisAngle(e,t){return this.applyQuaternion(Jr.setFromAxisAngle(e,t))};t.applyMatrix3=function applyMatrix3(t){var r=(this||e).x,i=(this||e).y,n=(this||e).z;var a=t.elements;(this||e).x=a[0]*r+a[3]*i+a[6]*n;(this||e).y=a[1]*r+a[4]*i+a[7]*n;(this||e).z=a[2]*r+a[5]*i+a[8]*n;return this||e};t.applyNormalMatrix=function applyNormalMatrix(e){return this.applyMatrix3(e).normalize()};t.applyMatrix4=function applyMatrix4(t){var r=(this||e).x,i=(this||e).y,n=(this||e).z;var a=t.elements;var o=1/(a[3]*r+a[7]*i+a[11]*n+a[15]);(this||e).x=(a[0]*r+a[4]*i+a[8]*n+a[12])*o;(this||e).y=(a[1]*r+a[5]*i+a[9]*n+a[13])*o;(this||e).z=(a[2]*r+a[6]*i+a[10]*n+a[14])*o;return this||e};t.applyQuaternion=function applyQuaternion(t){var r=(this||e).x,i=(this||e).y,n=(this||e).z;var a=t.x,o=t.y,s=t.z,l=t.w;var u=l*r+o*n-s*i;var c=l*i+s*r-a*n;var h=l*n+a*i-o*r;var d=-a*r-o*i-s*n;(this||e).x=u*l+d*-a+c*-s-h*-o;(this||e).y=c*l+d*-o+h*-a-u*-s;(this||e).z=h*l+d*-s+u*-o-c*-a;return this||e};t.project=function project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)};t.unproject=function unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)};t.transformDirection=function transformDirection(t){var r=(this||e).x,i=(this||e).y,n=(this||e).z;var a=t.elements;(this||e).x=a[0]*r+a[4]*i+a[8]*n;(this||e).y=a[1]*r+a[5]*i+a[9]*n;(this||e).z=a[2]*r+a[6]*i+a[10]*n;return this.normalize()};t.divide=function divide(t){(this||e).x/=t.x;(this||e).y/=t.y;(this||e).z/=t.z;return this||e};t.divideScalar=function divideScalar(e){return this.multiplyScalar(1/e)};t.min=function min(t){(this||e).x=Math.min((this||e).x,t.x);(this||e).y=Math.min((this||e).y,t.y);(this||e).z=Math.min((this||e).z,t.z);return this||e};t.max=function max(t){(this||e).x=Math.max((this||e).x,t.x);(this||e).y=Math.max((this||e).y,t.y);(this||e).z=Math.max((this||e).z,t.z);return this||e};t.clamp=function clamp(t,r){(this||e).x=Math.max(t.x,Math.min(r.x,(this||e).x));(this||e).y=Math.max(t.y,Math.min(r.y,(this||e).y));(this||e).z=Math.max(t.z,Math.min(r.z,(this||e).z));return this||e};t.clampScalar=function clampScalar(t,r){(this||e).x=Math.max(t,Math.min(r,(this||e).x));(this||e).y=Math.max(t,Math.min(r,(this||e).y));(this||e).z=Math.max(t,Math.min(r,(this||e).z));return this||e};t.clampLength=function clampLength(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))};t.floor=function floor(){(this||e).x=Math.floor((this||e).x);(this||e).y=Math.floor((this||e).y);(this||e).z=Math.floor((this||e).z);return this||e};t.ceil=function ceil(){(this||e).x=Math.ceil((this||e).x);(this||e).y=Math.ceil((this||e).y);(this||e).z=Math.ceil((this||e).z);return this||e};t.round=function round(){(this||e).x=Math.round((this||e).x);(this||e).y=Math.round((this||e).y);(this||e).z=Math.round((this||e).z);return this||e};t.roundToZero=function roundToZero(){(this||e).x=(this||e).x<0?Math.ceil((this||e).x):Math.floor((this||e).x);(this||e).y=(this||e).y<0?Math.ceil((this||e).y):Math.floor((this||e).y);(this||e).z=(this||e).z<0?Math.ceil((this||e).z):Math.floor((this||e).z);return this||e};t.negate=function negate(){(this||e).x=-(this||e).x;(this||e).y=-(this||e).y;(this||e).z=-(this||e).z;return this||e};t.dot=function dot(t){return (this||e).x*t.x+(this||e).y*t.y+(this||e).z*t.z};t.lengthSq=function lengthSq(){return (this||e).x*(this||e).x+(this||e).y*(this||e).y+(this||e).z*(this||e).z};t.length=function length(){return Math.sqrt((this||e).x*(this||e).x+(this||e).y*(this||e).y+(this||e).z*(this||e).z)};t.manhattanLength=function manhattanLength(){return Math.abs((this||e).x)+Math.abs((this||e).y)+Math.abs((this||e).z)};t.normalize=function normalize(){return this.divideScalar(this.length()||1)};t.setLength=function setLength(e){return this.normalize().multiplyScalar(e)};t.lerp=function lerp(t,r){(this||e).x+=(t.x-(this||e).x)*r;(this||e).y+=(t.y-(this||e).y)*r;(this||e).z+=(t.z-(this||e).z)*r;return this||e};t.lerpVectors=function lerpVectors(t,r,i){(this||e).x=t.x+(r.x-t.x)*i;(this||e).y=t.y+(r.y-t.y)*i;(this||e).z=t.z+(r.z-t.z)*i;return this||e};t.cross=function cross(t,r){if(void 0!==r){console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(t,r)}return this.crossVectors(this||e,t)};t.crossVectors=function crossVectors(t,r){var i=t.x,n=t.y,a=t.z;var o=r.x,s=r.y,l=r.z;(this||e).x=n*l-a*s;(this||e).y=a*o-i*l;(this||e).z=i*s-n*o;return this||e};t.projectOnVector=function projectOnVector(t){var r=t.lengthSq();if(0===r)return this.set(0,0,0);var i=t.dot(this||e)/r;return this.copy(t).multiplyScalar(i)};t.projectOnPlane=function projectOnPlane(t){Yr.copy(this||e).projectOnVector(t);return this.sub(Yr)};t.reflect=function reflect(e){return this.sub(Yr.copy(e).multiplyScalar(2*this.dot(e)))};t.angleTo=function angleTo(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var r=this.dot(e)/t;return Math.acos(Ur.clamp(r,-1,1))};t.distanceTo=function distanceTo(e){return Math.sqrt(this.distanceToSquared(e))};t.distanceToSquared=function distanceToSquared(t){var r=(this||e).x-t.x,i=(this||e).y-t.y,n=(this||e).z-t.z;return r*r+i*i+n*n};t.manhattanDistanceTo=function manhattanDistanceTo(t){return Math.abs((this||e).x-t.x)+Math.abs((this||e).y-t.y)+Math.abs((this||e).z-t.z)};t.setFromSpherical=function setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)};t.setFromSphericalCoords=function setFromSphericalCoords(t,r,i){var n=Math.sin(r)*t;(this||e).x=n*Math.sin(i);(this||e).y=Math.cos(r)*t;(this||e).z=n*Math.cos(i);return this||e};t.setFromCylindrical=function setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)};t.setFromCylindricalCoords=function setFromCylindricalCoords(t,r,i){(this||e).x=t*Math.sin(r);(this||e).y=i;(this||e).z=t*Math.cos(r);return this||e};t.setFromMatrixPosition=function setFromMatrixPosition(t){var r=t.elements;(this||e).x=r[12];(this||e).y=r[13];(this||e).z=r[14];return this||e};t.setFromMatrixScale=function setFromMatrixScale(t){var r=this.setFromMatrixColumn(t,0).length();var i=this.setFromMatrixColumn(t,1).length();var n=this.setFromMatrixColumn(t,2).length();(this||e).x=r;(this||e).y=i;(this||e).z=n;return this||e};t.setFromMatrixColumn=function setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)};t.setFromMatrix3Column=function setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)};t.equals=function equals(t){return t.x===(this||e).x&&t.y===(this||e).y&&t.z===(this||e).z};t.fromArray=function fromArray(t,r){void 0===r&&(r=0);(this||e).x=t[r];(this||e).y=t[r+1];(this||e).z=t[r+2];return this||e};t.toArray=function toArray(t,r){void 0===t&&(t=[]);void 0===r&&(r=0);t[r]=(this||e).x;t[r+1]=(this||e).y;t[r+2]=(this||e).z;return t};t.fromBufferAttribute=function fromBufferAttribute(t,r,i){void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");(this||e).x=t.getX(r);(this||e).y=t.getY(r);(this||e).z=t.getZ(r);return this||e};t.random=function random(){(this||e).x=Math.random();(this||e).y=Math.random();(this||e).z=Math.random();return this||e};return Vector3}();var Yr=new Xr;var Jr=new qr;var Zr=function(){function Box3(t,r){Object.defineProperty(this||e,"isBox3",{value:true});(this||e).min=void 0!==t?t:new Xr(+Infinity,+Infinity,+Infinity);(this||e).max=void 0!==r?r:new Xr(-Infinity,-Infinity,-Infinity);}var t=Box3.prototype;t.set=function set(t,r){(this||e).min.copy(t);(this||e).max.copy(r);return this||e};t.setFromArray=function setFromArray(t){var r=+Infinity;var i=+Infinity;var n=+Infinity;var a=-Infinity;var o=-Infinity;var s=-Infinity;for(var l=0,u=t.length;l<u;l+=3){var c=t[l];var h=t[l+1];var d=t[l+2];c<r&&(r=c);h<i&&(i=h);d<n&&(n=d);c>a&&(a=c);h>o&&(o=h);d>s&&(s=d);}(this||e).min.set(r,i,n);(this||e).max.set(a,o,s);return this||e};t.setFromBufferAttribute=function setFromBufferAttribute(t){var r=+Infinity;var i=+Infinity;var n=+Infinity;var a=-Infinity;var o=-Infinity;var s=-Infinity;for(var l=0,u=t.count;l<u;l++){var c=t.getX(l);var h=t.getY(l);var d=t.getZ(l);c<r&&(r=c);h<i&&(i=h);d<n&&(n=d);c>a&&(a=c);h>o&&(o=h);d>s&&(s=d);}(this||e).min.set(r,i,n);(this||e).max.set(a,o,s);return this||e};t.setFromPoints=function setFromPoints(t){this.makeEmpty();for(var r=0,i=t.length;r<i;r++)this.expandByPoint(t[r]);return this||e};t.setFromCenterAndSize=function setFromCenterAndSize(t,r){var i=Kr.copy(r).multiplyScalar(.5);(this||e).min.copy(t).sub(i);(this||e).max.copy(t).add(i);return this||e};t.setFromObject=function setFromObject(e){this.makeEmpty();return this.expandByObject(e)};t.clone=function clone(){return (new(this||e).constructor).copy(this||e)};t.copy=function copy(t){(this||e).min.copy(t.min);(this||e).max.copy(t.max);return this||e};t.makeEmpty=function makeEmpty(){(this||e).min.x=(this||e).min.y=(this||e).min.z=+Infinity;(this||e).max.x=(this||e).max.y=(this||e).max.z=-Infinity;return this||e};t.isEmpty=function isEmpty(){return (this||e).max.x<(this||e).min.x||(this||e).max.y<(this||e).min.y||(this||e).max.z<(this||e).min.z};t.getCenter=function getCenter(t){if(void 0===t){console.warn("THREE.Box3: .getCenter() target is now required");t=new Xr;}return this.isEmpty()?t.set(0,0,0):t.addVectors((this||e).min,(this||e).max).multiplyScalar(.5)};t.getSize=function getSize(t){if(void 0===t){console.warn("THREE.Box3: .getSize() target is now required");t=new Xr;}return this.isEmpty()?t.set(0,0,0):t.subVectors((this||e).max,(this||e).min)};t.expandByPoint=function expandByPoint(t){(this||e).min.min(t);(this||e).max.max(t);return this||e};t.expandByVector=function expandByVector(t){(this||e).min.sub(t);(this||e).max.add(t);return this||e};t.expandByScalar=function expandByScalar(t){(this||e).min.addScalar(-t);(this||e).max.addScalar(t);return this||e};t.expandByObject=function expandByObject(t){t.updateWorldMatrix(false,false);var r=t.geometry;if(void 0!==r){null===r.boundingBox&&r.computeBoundingBox();$r.copy(r.boundingBox);$r.applyMatrix4(t.matrixWorld);this.union($r);}var i=t.children;for(var n=0,a=i.length;n<a;n++)this.expandByObject(i[n]);return this||e};t.containsPoint=function containsPoint(t){return !(t.x<(this||e).min.x||t.x>(this||e).max.x||t.y<(this||e).min.y||t.y>(this||e).max.y||t.z<(this||e).min.z||t.z>(this||e).max.z)};t.containsBox=function containsBox(t){return (this||e).min.x<=t.min.x&&t.max.x<=(this||e).max.x&&(this||e).min.y<=t.min.y&&t.max.y<=(this||e).max.y&&(this||e).min.z<=t.min.z&&t.max.z<=(this||e).max.z};t.getParameter=function getParameter(t,r){if(void 0===r){console.warn("THREE.Box3: .getParameter() target is now required");r=new Xr;}return r.set((t.x-(this||e).min.x)/((this||e).max.x-(this||e).min.x),(t.y-(this||e).min.y)/((this||e).max.y-(this||e).min.y),(t.z-(this||e).min.z)/((this||e).max.z-(this||e).min.z))};t.intersectsBox=function intersectsBox(t){return !(t.max.x<(this||e).min.x||t.min.x>(this||e).max.x||t.max.y<(this||e).min.y||t.min.y>(this||e).max.y||t.max.z<(this||e).min.z||t.min.z>(this||e).max.z)};t.intersectsSphere=function intersectsSphere(e){this.clampPoint(e.center,Kr);return Kr.distanceToSquared(e.center)<=e.radius*e.radius};t.intersectsPlane=function intersectsPlane(t){var r,i;if(t.normal.x>0){r=t.normal.x*(this||e).min.x;i=t.normal.x*(this||e).max.x;}else {r=t.normal.x*(this||e).max.x;i=t.normal.x*(this||e).min.x;}if(t.normal.y>0){r+=t.normal.y*(this||e).min.y;i+=t.normal.y*(this||e).max.y;}else {r+=t.normal.y*(this||e).max.y;i+=t.normal.y*(this||e).min.y;}if(t.normal.z>0){r+=t.normal.z*(this||e).min.z;i+=t.normal.z*(this||e).max.z;}else {r+=t.normal.z*(this||e).max.z;i+=t.normal.z*(this||e).min.z;}return r<=-t.constant&&i>=-t.constant};t.intersectsTriangle=function intersectsTriangle(t){if(this.isEmpty())return false;this.getCenter(oi);si.subVectors((this||e).max,oi);ei.subVectors(t.a,oi);ti.subVectors(t.b,oi);ri.subVectors(t.c,oi);ii.subVectors(ti,ei);ni.subVectors(ri,ti);ai.subVectors(ei,ri);var r=[0,-ii.z,ii.y,0,-ni.z,ni.y,0,-ai.z,ai.y,ii.z,0,-ii.x,ni.z,0,-ni.x,ai.z,0,-ai.x,-ii.y,ii.x,0,-ni.y,ni.x,0,-ai.y,ai.x,0];if(!satForAxes(r,ei,ti,ri,si))return false;r=[1,0,0,0,1,0,0,0,1];if(!satForAxes(r,ei,ti,ri,si))return false;li.crossVectors(ii,ni);r=[li.x,li.y,li.z];return satForAxes(r,ei,ti,ri,si)};t.clampPoint=function clampPoint(t,r){if(void 0===r){console.warn("THREE.Box3: .clampPoint() target is now required");r=new Xr;}return r.copy(t).clamp((this||e).min,(this||e).max)};t.distanceToPoint=function distanceToPoint(t){var r=Kr.copy(t).clamp((this||e).min,(this||e).max);return r.sub(t).length()};t.getBoundingSphere=function getBoundingSphere(e){void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required");this.getCenter(e.center);e.radius=.5*this.getSize(Kr).length();return e};t.intersect=function intersect(t){(this||e).min.max(t.min);(this||e).max.min(t.max);this.isEmpty()&&this.makeEmpty();return this||e};t.union=function union(t){(this||e).min.min(t.min);(this||e).max.max(t.max);return this||e};t.applyMatrix4=function applyMatrix4(t){if(this.isEmpty())return this||e;Qr[0].set((this||e).min.x,(this||e).min.y,(this||e).min.z).applyMatrix4(t);Qr[1].set((this||e).min.x,(this||e).min.y,(this||e).max.z).applyMatrix4(t);Qr[2].set((this||e).min.x,(this||e).max.y,(this||e).min.z).applyMatrix4(t);Qr[3].set((this||e).min.x,(this||e).max.y,(this||e).max.z).applyMatrix4(t);Qr[4].set((this||e).max.x,(this||e).min.y,(this||e).min.z).applyMatrix4(t);Qr[5].set((this||e).max.x,(this||e).min.y,(this||e).max.z).applyMatrix4(t);Qr[6].set((this||e).max.x,(this||e).max.y,(this||e).min.z).applyMatrix4(t);Qr[7].set((this||e).max.x,(this||e).max.y,(this||e).max.z).applyMatrix4(t);this.setFromPoints(Qr);return this||e};t.translate=function translate(t){(this||e).min.add(t);(this||e).max.add(t);return this||e};t.equals=function equals(t){return t.min.equals((this||e).min)&&t.max.equals((this||e).max)};return Box3}();function satForAxes(e,t,r,i,n){for(var a=0,o=e.length-3;a<=o;a+=3){ui.fromArray(e,a);var s=n.x*Math.abs(ui.x)+n.y*Math.abs(ui.y)+n.z*Math.abs(ui.z);var l=t.dot(ui);var u=r.dot(ui);var c=i.dot(ui);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return false}return true}var Qr=[new Xr,new Xr,new Xr,new Xr,new Xr,new Xr,new Xr,new Xr];var Kr=new Xr;var $r=new Zr;var ei=new Xr;var ti=new Xr;var ri=new Xr;var ii=new Xr;var ni=new Xr;var ai=new Xr;var oi=new Xr;var si=new Xr;var li=new Xr;var ui=new Xr;var ci=new Zr;var hi=function(){function Sphere(t,r){(this||e).center=void 0!==t?t:new Xr;(this||e).radius=void 0!==r?r:-1;}var t=Sphere.prototype;t.set=function set(t,r){(this||e).center.copy(t);(this||e).radius=r;return this||e};t.setFromPoints=function setFromPoints(t,r){var i=(this||e).center;void 0!==r?i.copy(r):ci.setFromPoints(t).getCenter(i);var n=0;for(var a=0,o=t.length;a<o;a++)n=Math.max(n,i.distanceToSquared(t[a]));(this||e).radius=Math.sqrt(n);return this||e};t.clone=function clone(){return (new(this||e).constructor).copy(this||e)};t.copy=function copy(t){(this||e).center.copy(t.center);(this||e).radius=t.radius;return this||e};t.isEmpty=function isEmpty(){return (this||e).radius<0};t.makeEmpty=function makeEmpty(){(this||e).center.set(0,0,0);(this||e).radius=-1;return this||e};t.containsPoint=function containsPoint(t){return t.distanceToSquared((this||e).center)<=(this||e).radius*(this||e).radius};t.distanceToPoint=function distanceToPoint(t){return t.distanceTo((this||e).center)-(this||e).radius};t.intersectsSphere=function intersectsSphere(t){var r=(this||e).radius+t.radius;return t.center.distanceToSquared((this||e).center)<=r*r};t.intersectsBox=function intersectsBox(t){return t.intersectsSphere(this||e)};t.intersectsPlane=function intersectsPlane(t){return Math.abs(t.distanceToPoint((this||e).center))<=(this||e).radius};t.clampPoint=function clampPoint(t,r){var i=(this||e).center.distanceToSquared(t);if(void 0===r){console.warn("THREE.Sphere: .clampPoint() target is now required");r=new Xr;}r.copy(t);if(i>(this||e).radius*(this||e).radius){r.sub((this||e).center).normalize();r.multiplyScalar((this||e).radius).add((this||e).center);}return r};t.getBoundingBox=function getBoundingBox(t){if(void 0===t){console.warn("THREE.Sphere: .getBoundingBox() target is now required");t=new Zr;}if(this.isEmpty()){t.makeEmpty();return t}t.set((this||e).center,(this||e).center);t.expandByScalar((this||e).radius);return t};t.applyMatrix4=function applyMatrix4(t){(this||e).center.applyMatrix4(t);(this||e).radius=(this||e).radius*t.getMaxScaleOnAxis();return this||e};t.translate=function translate(t){(this||e).center.add(t);return this||e};t.equals=function equals(t){return t.center.equals((this||e).center)&&t.radius===(this||e).radius};return Sphere}();var di=new Xr;var fi=new Xr;var pi=new Xr;var mi=new Xr;var vi=new Xr;var gi=new Xr;var yi=new Xr;var xi=function(){function Ray(t,r){(this||e).origin=void 0!==t?t:new Xr;(this||e).direction=void 0!==r?r:new Xr(0,0,-1);}var t=Ray.prototype;t.set=function set(t,r){(this||e).origin.copy(t);(this||e).direction.copy(r);return this||e};t.clone=function clone(){return (new(this||e).constructor).copy(this||e)};t.copy=function copy(t){(this||e).origin.copy(t.origin);(this||e).direction.copy(t.direction);return this||e};t.at=function at(t,r){if(void 0===r){console.warn("THREE.Ray: .at() target is now required");r=new Xr;}return r.copy((this||e).direction).multiplyScalar(t).add((this||e).origin)};t.lookAt=function lookAt(t){(this||e).direction.copy(t).sub((this||e).origin).normalize();return this||e};t.recast=function recast(t){(this||e).origin.copy(this.at(t,di));return this||e};t.closestPointToPoint=function closestPointToPoint(t,r){if(void 0===r){console.warn("THREE.Ray: .closestPointToPoint() target is now required");r=new Xr;}r.subVectors(t,(this||e).origin);var i=r.dot((this||e).direction);return i<0?r.copy((this||e).origin):r.copy((this||e).direction).multiplyScalar(i).add((this||e).origin)};t.distanceToPoint=function distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))};t.distanceSqToPoint=function distanceSqToPoint(t){var r=di.subVectors(t,(this||e).origin).dot((this||e).direction);if(r<0)return (this||e).origin.distanceToSquared(t);di.copy((this||e).direction).multiplyScalar(r).add((this||e).origin);return di.distanceToSquared(t)};t.distanceSqToSegment=function distanceSqToSegment(t,r,i,n){fi.copy(t).add(r).multiplyScalar(.5);pi.copy(r).sub(t).normalize();mi.copy((this||e).origin).sub(fi);var a=.5*t.distanceTo(r);var o=-(this||e).direction.dot(pi);var s=mi.dot((this||e).direction);var l=-mi.dot(pi);var u=mi.lengthSq();var c=Math.abs(1-o*o);var h,d,f,p;if(c>0){h=o*l-s;d=o*s-l;p=a*c;if(h>=0)if(d>=-p)if(d<=p){var m=1/c;h*=m;d*=m;f=h*(h+o*d+2*s)+d*(o*h+d+2*l)+u;}else {d=a;h=Math.max(0,-(o*d+s));f=-h*h+d*(d+2*l)+u;}else {d=-a;h=Math.max(0,-(o*d+s));f=-h*h+d*(d+2*l)+u;}else if(d<=-p){h=Math.max(0,-(-o*a+s));d=h>0?-a:Math.min(Math.max(-a,-l),a);f=-h*h+d*(d+2*l)+u;}else if(d<=p){h=0;d=Math.min(Math.max(-a,-l),a);f=d*(d+2*l)+u;}else {h=Math.max(0,-(o*a+s));d=h>0?a:Math.min(Math.max(-a,-l),a);f=-h*h+d*(d+2*l)+u;}}else {d=o>0?-a:a;h=Math.max(0,-(o*d+s));f=-h*h+d*(d+2*l)+u;}i&&i.copy((this||e).direction).multiplyScalar(h).add((this||e).origin);n&&n.copy(pi).multiplyScalar(d).add(fi);return f};t.intersectSphere=function intersectSphere(t,r){di.subVectors(t.center,(this||e).origin);var i=di.dot((this||e).direction);var n=di.dot(di)-i*i;var a=t.radius*t.radius;if(n>a)return null;var o=Math.sqrt(a-n);var s=i-o;var l=i+o;return s<0&&l<0?null:s<0?this.at(l,r):this.at(s,r)};t.intersectsSphere=function intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius};t.distanceToPlane=function distanceToPlane(t){var r=t.normal.dot((this||e).direction);if(0===r)return 0===t.distanceToPoint((this||e).origin)?0:null;var i=-((this||e).origin.dot(t.normal)+t.constant)/r;return i>=0?i:null};t.intersectPlane=function intersectPlane(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)};t.intersectsPlane=function intersectsPlane(t){var r=t.distanceToPoint((this||e).origin);if(0===r)return true;var i=t.normal.dot((this||e).direction);return i*r<0};t.intersectBox=function intersectBox(t,r){var i,n,a,o,s,l;var u=1/(this||e).direction.x,c=1/(this||e).direction.y,h=1/(this||e).direction.z;var d=(this||e).origin;if(u>=0){i=(t.min.x-d.x)*u;n=(t.max.x-d.x)*u;}else {i=(t.max.x-d.x)*u;n=(t.min.x-d.x)*u;}if(c>=0){a=(t.min.y-d.y)*c;o=(t.max.y-d.y)*c;}else {a=(t.max.y-d.y)*c;o=(t.min.y-d.y)*c;}if(i>o||a>n)return null;(a>i||i!==i)&&(i=a);(o<n||n!==n)&&(n=o);if(h>=0){s=(t.min.z-d.z)*h;l=(t.max.z-d.z)*h;}else {s=(t.max.z-d.z)*h;l=(t.min.z-d.z)*h;}if(i>l||s>n)return null;(s>i||i!==i)&&(i=s);(l<n||n!==n)&&(n=l);return n<0?null:this.at(i>=0?i:n,r)};t.intersectsBox=function intersectsBox(e){return null!==this.intersectBox(e,di)};t.intersectTriangle=function intersectTriangle(t,r,i,n,a){vi.subVectors(r,t);gi.subVectors(i,t);yi.crossVectors(vi,gi);var o=(this||e).direction.dot(yi);var s;if(o>0){if(n)return null;s=1;}else {if(!(o<0))return null;s=-1;o=-o;}mi.subVectors((this||e).origin,t);var l=s*(this||e).direction.dot(gi.crossVectors(mi,gi));if(l<0)return null;var u=s*(this||e).direction.dot(vi.cross(mi));if(u<0)return null;if(l+u>o)return null;var c=-s*mi.dot(yi);return c<0?null:this.at(c/o,a)};t.applyMatrix4=function applyMatrix4(t){(this||e).origin.applyMatrix4(t);(this||e).direction.transformDirection(t);return this||e};t.equals=function equals(t){return t.origin.equals((this||e).origin)&&t.direction.equals((this||e).direction)};return Ray}();var bi=function(){function Matrix4(){Object.defineProperty(this||e,"isMatrix4",{value:true});(this||e).elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.");}var t=Matrix4.prototype;t.set=function set(t,r,i,n,a,o,s,l,u,c,h,d,f,p,m,g){var y=(this||e).elements;y[0]=t;y[4]=r;y[8]=i;y[12]=n;y[1]=a;y[5]=o;y[9]=s;y[13]=l;y[2]=u;y[6]=c;y[10]=h;y[14]=d;y[3]=f;y[7]=p;y[11]=m;y[15]=g;return this||e};t.identity=function identity(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this||e};t.clone=function clone(){return (new Matrix4).fromArray((this||e).elements)};t.copy=function copy(t){var r=(this||e).elements;var i=t.elements;r[0]=i[0];r[1]=i[1];r[2]=i[2];r[3]=i[3];r[4]=i[4];r[5]=i[5];r[6]=i[6];r[7]=i[7];r[8]=i[8];r[9]=i[9];r[10]=i[10];r[11]=i[11];r[12]=i[12];r[13]=i[13];r[14]=i[14];r[15]=i[15];return this||e};t.copyPosition=function copyPosition(t){var r=(this||e).elements,i=t.elements;r[12]=i[12];r[13]=i[13];r[14]=i[14];return this||e};t.extractBasis=function extractBasis(t,r,i){t.setFromMatrixColumn(this||e,0);r.setFromMatrixColumn(this||e,1);i.setFromMatrixColumn(this||e,2);return this||e};t.makeBasis=function makeBasis(t,r,i){this.set(t.x,r.x,i.x,0,t.y,r.y,i.y,0,t.z,r.z,i.z,0,0,0,0,1);return this||e};t.extractRotation=function extractRotation(t){var r=(this||e).elements;var i=t.elements;var n=1/_i.setFromMatrixColumn(t,0).length();var a=1/_i.setFromMatrixColumn(t,1).length();var o=1/_i.setFromMatrixColumn(t,2).length();r[0]=i[0]*n;r[1]=i[1]*n;r[2]=i[2]*n;r[3]=0;r[4]=i[4]*a;r[5]=i[5]*a;r[6]=i[6]*a;r[7]=0;r[8]=i[8]*o;r[9]=i[9]*o;r[10]=i[10]*o;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return this||e};t.makeRotationFromEuler=function makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var r=(this||e).elements;var i=t.x,n=t.y,a=t.z;var o=Math.cos(i),s=Math.sin(i);var l=Math.cos(n),u=Math.sin(n);var c=Math.cos(a),h=Math.sin(a);if("XYZ"===t.order){var d=o*c,f=o*h,p=s*c,m=s*h;r[0]=l*c;r[4]=-l*h;r[8]=u;r[1]=f+p*u;r[5]=d-m*u;r[9]=-s*l;r[2]=m-d*u;r[6]=p+f*u;r[10]=o*l;}else if("YXZ"===t.order){var g=l*c,y=l*h,x=u*c,b=u*h;r[0]=g+b*s;r[4]=x*s-y;r[8]=o*u;r[1]=o*h;r[5]=o*c;r[9]=-s;r[2]=y*s-x;r[6]=b+g*s;r[10]=o*l;}else if("ZXY"===t.order){var _=l*c,M=l*h,w=u*c,S=u*h;r[0]=_-S*s;r[4]=-o*h;r[8]=w+M*s;r[1]=M+w*s;r[5]=o*c;r[9]=S-_*s;r[2]=-o*u;r[6]=s;r[10]=o*l;}else if("ZYX"===t.order){var T=o*c,A=o*h,L=s*c,E=s*h;r[0]=l*c;r[4]=L*u-A;r[8]=T*u+E;r[1]=l*h;r[5]=E*u+T;r[9]=A*u-L;r[2]=-u;r[6]=s*l;r[10]=o*l;}else if("YZX"===t.order){var C=o*l,P=o*u,R=s*l,B=s*u;r[0]=l*c;r[4]=B-C*h;r[8]=R*h+P;r[1]=h;r[5]=o*c;r[9]=-s*c;r[2]=-u*c;r[6]=P*h+R;r[10]=C-B*h;}else if("XZY"===t.order){var I=o*l,D=o*u,G=s*l,O=s*u;r[0]=l*c;r[4]=-h;r[8]=u*c;r[1]=I*h+O;r[5]=o*c;r[9]=D*h-G;r[2]=G*h-D;r[6]=s*c;r[10]=O*h+I;}r[3]=0;r[7]=0;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return this||e};t.makeRotationFromQuaternion=function makeRotationFromQuaternion(e){return this.compose(wi,e,Si)};t.lookAt=function lookAt(t,r,i){var n=(this||e).elements;Li.subVectors(t,r);0===Li.lengthSq()&&(Li.z=1);Li.normalize();Ti.crossVectors(i,Li);if(0===Ti.lengthSq()){1===Math.abs(i.z)?Li.x+=1e-4:Li.z+=1e-4;Li.normalize();Ti.crossVectors(i,Li);}Ti.normalize();Ai.crossVectors(Li,Ti);n[0]=Ti.x;n[4]=Ai.x;n[8]=Li.x;n[1]=Ti.y;n[5]=Ai.y;n[9]=Li.y;n[2]=Ti.z;n[6]=Ai.z;n[10]=Li.z;return this||e};t.multiply=function multiply(t,r){if(void 0!==r){console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(t,r)}return this.multiplyMatrices(this||e,t)};t.premultiply=function premultiply(t){return this.multiplyMatrices(t,this||e)};t.multiplyMatrices=function multiplyMatrices(t,r){var i=t.elements;var n=r.elements;var a=(this||e).elements;var o=i[0],s=i[4],l=i[8],u=i[12];var c=i[1],h=i[5],d=i[9],f=i[13];var p=i[2],m=i[6],g=i[10],y=i[14];var x=i[3],b=i[7],_=i[11],M=i[15];var w=n[0],S=n[4],T=n[8],A=n[12];var L=n[1],E=n[5],C=n[9],P=n[13];var R=n[2],B=n[6],I=n[10],D=n[14];var G=n[3],O=n[7],N=n[11],F=n[15];a[0]=o*w+s*L+l*R+u*G;a[4]=o*S+s*E+l*B+u*O;a[8]=o*T+s*C+l*I+u*N;a[12]=o*A+s*P+l*D+u*F;a[1]=c*w+h*L+d*R+f*G;a[5]=c*S+h*E+d*B+f*O;a[9]=c*T+h*C+d*I+f*N;a[13]=c*A+h*P+d*D+f*F;a[2]=p*w+m*L+g*R+y*G;a[6]=p*S+m*E+g*B+y*O;a[10]=p*T+m*C+g*I+y*N;a[14]=p*A+m*P+g*D+y*F;a[3]=x*w+b*L+_*R+M*G;a[7]=x*S+b*E+_*B+M*O;a[11]=x*T+b*C+_*I+M*N;a[15]=x*A+b*P+_*D+M*F;return this||e};t.multiplyScalar=function multiplyScalar(t){var r=(this||e).elements;r[0]*=t;r[4]*=t;r[8]*=t;r[12]*=t;r[1]*=t;r[5]*=t;r[9]*=t;r[13]*=t;r[2]*=t;r[6]*=t;r[10]*=t;r[14]*=t;r[3]*=t;r[7]*=t;r[11]*=t;r[15]*=t;return this||e};t.determinant=function determinant(){var t=(this||e).elements;var r=t[0],i=t[4],n=t[8],a=t[12];var o=t[1],s=t[5],l=t[9],u=t[13];var c=t[2],h=t[6],d=t[10],f=t[14];var p=t[3],m=t[7],g=t[11],y=t[15];return p*(+a*l*h-n*u*h-a*s*d+i*u*d+n*s*f-i*l*f)+m*(+r*l*f-r*u*d+a*o*d-n*o*f+n*u*c-a*l*c)+g*(+r*u*h-r*s*f-a*o*h+i*o*f+a*s*c-i*u*c)+y*(-n*s*c-r*l*h+r*s*d+n*o*h-i*o*d+i*l*c)};t.transpose=function transpose(){var t=(this||e).elements;var r;r=t[1];t[1]=t[4];t[4]=r;r=t[2];t[2]=t[8];t[8]=r;r=t[6];t[6]=t[9];t[9]=r;r=t[3];t[3]=t[12];t[12]=r;r=t[7];t[7]=t[13];t[13]=r;r=t[11];t[11]=t[14];t[14]=r;return this||e};t.setPosition=function setPosition(t,r,i){var n=(this||e).elements;if(t.isVector3){n[12]=t.x;n[13]=t.y;n[14]=t.z;}else {n[12]=t;n[13]=r;n[14]=i;}return this||e};t.getInverse=function getInverse(t,r){void 0!==r&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var i=(this||e).elements,n=t.elements,a=n[0],o=n[1],s=n[2],l=n[3],u=n[4],c=n[5],h=n[6],d=n[7],f=n[8],p=n[9],m=n[10],g=n[11],y=n[12],x=n[13],b=n[14],_=n[15],M=p*b*d-x*m*d+x*h*g-c*b*g-p*h*_+c*m*_,w=y*m*d-f*b*d-y*h*g+u*b*g+f*h*_-u*m*_,S=f*x*d-y*p*d+y*c*g-u*x*g-f*c*_+u*p*_,T=y*p*h-f*x*h-y*c*m+u*x*m+f*c*b-u*p*b;var A=a*M+o*w+s*S+l*T;if(0===A)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var L=1/A;i[0]=M*L;i[1]=(x*m*l-p*b*l-x*s*g+o*b*g+p*s*_-o*m*_)*L;i[2]=(c*b*l-x*h*l+x*s*d-o*b*d-c*s*_+o*h*_)*L;i[3]=(p*h*l-c*m*l-p*s*d+o*m*d+c*s*g-o*h*g)*L;i[4]=w*L;i[5]=(f*b*l-y*m*l+y*s*g-a*b*g-f*s*_+a*m*_)*L;i[6]=(y*h*l-u*b*l-y*s*d+a*b*d+u*s*_-a*h*_)*L;i[7]=(u*m*l-f*h*l+f*s*d-a*m*d-u*s*g+a*h*g)*L;i[8]=S*L;i[9]=(y*p*l-f*x*l-y*o*g+a*x*g+f*o*_-a*p*_)*L;i[10]=(u*x*l-y*c*l+y*o*d-a*x*d-u*o*_+a*c*_)*L;i[11]=(f*c*l-u*p*l-f*o*d+a*p*d+u*o*g-a*c*g)*L;i[12]=T*L;i[13]=(f*x*s-y*p*s+y*o*m-a*x*m-f*o*b+a*p*b)*L;i[14]=(y*c*s-u*x*s-y*o*h+a*x*h+u*o*b-a*c*b)*L;i[15]=(u*p*s-f*c*s+f*o*h-a*p*h-u*o*m+a*c*m)*L;return this||e};t.scale=function scale(t){var r=(this||e).elements;var i=t.x,n=t.y,a=t.z;r[0]*=i;r[4]*=n;r[8]*=a;r[1]*=i;r[5]*=n;r[9]*=a;r[2]*=i;r[6]*=n;r[10]*=a;r[3]*=i;r[7]*=n;r[11]*=a;return this||e};t.getMaxScaleOnAxis=function getMaxScaleOnAxis(){var t=(this||e).elements;var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];var i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6];var n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(r,i,n))};t.makeTranslation=function makeTranslation(t,r,i){this.set(1,0,0,t,0,1,0,r,0,0,1,i,0,0,0,1);return this||e};t.makeRotationX=function makeRotationX(t){var r=Math.cos(t),i=Math.sin(t);this.set(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1);return this||e};t.makeRotationY=function makeRotationY(t){var r=Math.cos(t),i=Math.sin(t);this.set(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1);return this||e};t.makeRotationZ=function makeRotationZ(t){var r=Math.cos(t),i=Math.sin(t);this.set(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1);return this||e};t.makeRotationAxis=function makeRotationAxis(t,r){var i=Math.cos(r);var n=Math.sin(r);var a=1-i;var o=t.x,s=t.y,l=t.z;var u=a*o,c=a*s;this.set(u*o+i,u*s-n*l,u*l+n*s,0,u*s+n*l,c*s+i,c*l-n*o,0,u*l-n*s,c*l+n*o,a*l*l+i,0,0,0,0,1);return this||e};t.makeScale=function makeScale(t,r,i){this.set(t,0,0,0,0,r,0,0,0,0,i,0,0,0,0,1);return this||e};t.makeShear=function makeShear(t,r,i){this.set(1,r,i,0,t,1,i,0,t,r,1,0,0,0,0,1);return this||e};t.compose=function compose(t,r,i){var n=(this||e).elements;var a=r._x,o=r._y,s=r._z,l=r._w;var u=a+a,c=o+o,h=s+s;var d=a*u,f=a*c,p=a*h;var m=o*c,g=o*h,y=s*h;var x=l*u,b=l*c,_=l*h;var M=i.x,w=i.y,S=i.z;n[0]=(1-(m+y))*M;n[1]=(f+_)*M;n[2]=(p-b)*M;n[3]=0;n[4]=(f-_)*w;n[5]=(1-(d+y))*w;n[6]=(g+x)*w;n[7]=0;n[8]=(p+b)*S;n[9]=(g-x)*S;n[10]=(1-(d+m))*S;n[11]=0;n[12]=t.x;n[13]=t.y;n[14]=t.z;n[15]=1;return this||e};t.decompose=function decompose(t,r,i){var n=(this||e).elements;var a=_i.set(n[0],n[1],n[2]).length();var o=_i.set(n[4],n[5],n[6]).length();var s=_i.set(n[8],n[9],n[10]).length();var l=this.determinant();l<0&&(a=-a);t.x=n[12];t.y=n[13];t.z=n[14];Mi.copy(this||e);var u=1/a;var c=1/o;var h=1/s;Mi.elements[0]*=u;Mi.elements[1]*=u;Mi.elements[2]*=u;Mi.elements[4]*=c;Mi.elements[5]*=c;Mi.elements[6]*=c;Mi.elements[8]*=h;Mi.elements[9]*=h;Mi.elements[10]*=h;r.setFromRotationMatrix(Mi);i.x=a;i.y=o;i.z=s;return this||e};t.makePerspective=function makePerspective(t,r,i,n,a,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=(this||e).elements;var l=2*a/(r-t);var u=2*a/(i-n);var c=(r+t)/(r-t);var h=(i+n)/(i-n);var d=-(o+a)/(o-a);var f=-2*o*a/(o-a);s[0]=l;s[4]=0;s[8]=c;s[12]=0;s[1]=0;s[5]=u;s[9]=h;s[13]=0;s[2]=0;s[6]=0;s[10]=d;s[14]=f;s[3]=0;s[7]=0;s[11]=-1;s[15]=0;return this||e};t.makeOrthographic=function makeOrthographic(t,r,i,n,a,o){var s=(this||e).elements;var l=1/(r-t);var u=1/(i-n);var c=1/(o-a);var h=(r+t)*l;var d=(i+n)*u;var f=(o+a)*c;s[0]=2*l;s[4]=0;s[8]=0;s[12]=-h;s[1]=0;s[5]=2*u;s[9]=0;s[13]=-d;s[2]=0;s[6]=0;s[10]=-2*c;s[14]=-f;s[3]=0;s[7]=0;s[11]=0;s[15]=1;return this||e};t.equals=function equals(t){var r=(this||e).elements;var i=t.elements;for(var n=0;n<16;n++)if(r[n]!==i[n])return false;return true};t.fromArray=function fromArray(t,r){void 0===r&&(r=0);for(var i=0;i<16;i++)(this||e).elements[i]=t[i+r];return this||e};t.toArray=function toArray(t,r){void 0===t&&(t=[]);void 0===r&&(r=0);var i=(this||e).elements;t[r]=i[0];t[r+1]=i[1];t[r+2]=i[2];t[r+3]=i[3];t[r+4]=i[4];t[r+5]=i[5];t[r+6]=i[6];t[r+7]=i[7];t[r+8]=i[8];t[r+9]=i[9];t[r+10]=i[10];t[r+11]=i[11];t[r+12]=i[12];t[r+13]=i[13];t[r+14]=i[14];t[r+15]=i[15];return t};return Matrix4}();var _i=new Xr;var Mi=new bi;var wi=new Xr(0,0,0);var Si=new Xr(1,1,1);var Ti=new Xr;var Ai=new Xr;var Li=new Xr;var Ei=function(){function Euler(t,r,i,n){void 0===t&&(t=0);void 0===r&&(r=0);void 0===i&&(i=0);void 0===n&&(n=Euler.DefaultOrder);Object.defineProperty(this||e,"isEuler",{value:true});(this||e)._x=t;(this||e)._y=r;(this||e)._z=i;(this||e)._order=n;}var t=Euler.prototype;t.set=function set(t,r,i,n){(this||e)._x=t;(this||e)._y=r;(this||e)._z=i;(this||e)._order=n||(this||e)._order;this._onChangeCallback();return this||e};t.clone=function clone(){return new(this||e).constructor((this||e)._x,(this||e)._y,(this||e)._z,(this||e)._order)};t.copy=function copy(t){(this||e)._x=t._x;(this||e)._y=t._y;(this||e)._z=t._z;(this||e)._order=t._order;this._onChangeCallback();return this||e};t.setFromRotationMatrix=function setFromRotationMatrix(t,r,i){var n=Ur.clamp;var a=t.elements;var o=a[0],s=a[4],l=a[8];var u=a[1],c=a[5],h=a[9];var d=a[2],f=a[6],p=a[10];r=r||(this||e)._order;switch(r){case"XYZ":(this||e)._y=Math.asin(n(l,-1,1));if(Math.abs(l)<.9999999){(this||e)._x=Math.atan2(-h,p);(this||e)._z=Math.atan2(-s,o);}else {(this||e)._x=Math.atan2(f,c);(this||e)._z=0;}break;case"YXZ":(this||e)._x=Math.asin(-n(h,-1,1));if(Math.abs(h)<.9999999){(this||e)._y=Math.atan2(l,p);(this||e)._z=Math.atan2(u,c);}else {(this||e)._y=Math.atan2(-d,o);(this||e)._z=0;}break;case"ZXY":(this||e)._x=Math.asin(n(f,-1,1));if(Math.abs(f)<.9999999){(this||e)._y=Math.atan2(-d,p);(this||e)._z=Math.atan2(-s,c);}else {(this||e)._y=0;(this||e)._z=Math.atan2(u,o);}break;case"ZYX":(this||e)._y=Math.asin(-n(d,-1,1));if(Math.abs(d)<.9999999){(this||e)._x=Math.atan2(f,p);(this||e)._z=Math.atan2(u,o);}else {(this||e)._x=0;(this||e)._z=Math.atan2(-s,c);}break;case"YZX":(this||e)._z=Math.asin(n(u,-1,1));if(Math.abs(u)<.9999999){(this||e)._x=Math.atan2(-h,c);(this||e)._y=Math.atan2(-d,o);}else {(this||e)._x=0;(this||e)._y=Math.atan2(l,p);}break;case"XZY":(this||e)._z=Math.asin(-n(s,-1,1));if(Math.abs(s)<.9999999){(this||e)._x=Math.atan2(f,c);(this||e)._y=Math.atan2(l,o);}else {(this||e)._x=Math.atan2(-h,p);(this||e)._y=0;}break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r);}(this||e)._order=r;false!==i&&this._onChangeCallback();return this||e};t.setFromQuaternion=function setFromQuaternion(e,t,r){Ci.makeRotationFromQuaternion(e);return this.setFromRotationMatrix(Ci,t,r)};t.setFromVector3=function setFromVector3(t,r){return this.set(t.x,t.y,t.z,r||(this||e)._order)};t.reorder=function reorder(t){Pi.setFromEuler(this||e);return this.setFromQuaternion(Pi,t)};t.equals=function equals(t){return t._x===(this||e)._x&&t._y===(this||e)._y&&t._z===(this||e)._z&&t._order===(this||e)._order};t.fromArray=function fromArray(t){(this||e)._x=t[0];(this||e)._y=t[1];(this||e)._z=t[2];void 0!==t[3]&&((this||e)._order=t[3]);this._onChangeCallback();return this||e};t.toArray=function toArray(t,r){void 0===t&&(t=[]);void 0===r&&(r=0);t[r]=(this||e)._x;t[r+1]=(this||e)._y;t[r+2]=(this||e)._z;t[r+3]=(this||e)._order;return t};t.toVector3=function toVector3(t){return t?t.set((this||e)._x,(this||e)._y,(this||e)._z):new Xr((this||e)._x,(this||e)._y,(this||e)._z)};t._onChange=function _onChange(t){(this||e)._onChangeCallback=t;return this||e};t._onChangeCallback=function _onChangeCallback(){};_createClass(Euler,[{key:"x",get:function get(){return (this||e)._x},set:function set(t){(this||e)._x=t;this._onChangeCallback();}},{key:"y",get:function get(){return (this||e)._y},set:function set(t){(this||e)._y=t;this._onChangeCallback();}},{key:"z",get:function get(){return (this||e)._z},set:function set(t){(this||e)._z=t;this._onChangeCallback();}},{key:"order",get:function get(){return (this||e)._order},set:function set(t){(this||e)._order=t;this._onChangeCallback();}}]);return Euler}();Ei.DefaultOrder="XYZ";Ei.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Ci=new bi;var Pi=new qr;var Ri=function(){function Layers(){(this||e).mask=1|0;}var t=Layers.prototype;t.set=function set(t){(this||e).mask=1<<t|0;};t.enable=function enable(t){(this||e).mask|=1<<t|0;};t.enableAll=function enableAll(){(this||e).mask=4294967295|0;};t.toggle=function toggle(t){(this||e).mask^=1<<t|0;};t.disable=function disable(t){(this||e).mask&=~(1<<t|0);};t.disableAll=function disableAll(){(this||e).mask=0;};t.test=function test(t){return 0!==((this||e).mask&t.mask)};return Layers}();var Bi=0;var Ii=new Xr;var Di=new qr;var Gi=new bi;var Oi=new Xr;var Ni=new Xr;var Fi=new Xr;var Ui=new qr;var zi=new Xr(1,0,0);var Hi=new Xr(0,1,0);var Vi=new Xr(0,0,1);var ki={type:"added"};var Wi={type:"removed"};function Object3D(){Object.defineProperty(this||e,"id",{value:Bi++});(this||e).uuid=Ur.generateUUID();(this||e).name="";(this||e).type="Object3D";(this||e).parent=null;(this||e).children=[];(this||e).up=Object3D.DefaultUp.clone();var t=new Xr;var r=new Ei;var i=new qr;var n=new Xr(1,1,1);function onRotationChange(){i.setFromEuler(r,false);}function onQuaternionChange(){r.setFromQuaternion(i,void 0,false);}r._onChange(onRotationChange);i._onChange(onQuaternionChange);Object.defineProperties(this||e,{position:{configurable:true,enumerable:true,value:t},rotation:{configurable:true,enumerable:true,value:r},quaternion:{configurable:true,enumerable:true,value:i},scale:{configurable:true,enumerable:true,value:n},modelViewMatrix:{value:new bi},normalMatrix:{value:new Hr}});(this||e).matrix=new bi;(this||e).matrixWorld=new bi;(this||e).matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate;(this||e).matrixWorldNeedsUpdate=false;(this||e).layers=new Ri;(this||e).visible=true;(this||e).castShadow=false;(this||e).receiveShadow=false;(this||e).frustumCulled=true;(this||e).renderOrder=0;(this||e).userData={};}Object3D.DefaultUp=new Xr(0,1,0);Object3D.DefaultMatrixAutoUpdate=true;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:true,onBeforeRender:function onBeforeRender(){},onAfterRender:function onAfterRender(){},applyMatrix4:function applyMatrix4(t){(this||e).matrixAutoUpdate&&this.updateMatrix();(this||e).matrix.premultiply(t);(this||e).matrix.decompose((this||e).position,(this||e).quaternion,(this||e).scale);},applyQuaternion:function applyQuaternion(t){(this||e).quaternion.premultiply(t);return this||e},setRotationFromAxisAngle:function setRotationFromAxisAngle(t,r){(this||e).quaternion.setFromAxisAngle(t,r);},setRotationFromEuler:function setRotationFromEuler(t){(this||e).quaternion.setFromEuler(t,true);},setRotationFromMatrix:function setRotationFromMatrix(t){(this||e).quaternion.setFromRotationMatrix(t);},setRotationFromQuaternion:function setRotationFromQuaternion(t){(this||e).quaternion.copy(t);},rotateOnAxis:function rotateOnAxis(t,r){Di.setFromAxisAngle(t,r);(this||e).quaternion.multiply(Di);return this||e},rotateOnWorldAxis:function rotateOnWorldAxis(t,r){Di.setFromAxisAngle(t,r);(this||e).quaternion.premultiply(Di);return this||e},rotateX:function rotateX(e){return this.rotateOnAxis(zi,e)},rotateY:function rotateY(e){return this.rotateOnAxis(Hi,e)},rotateZ:function rotateZ(e){return this.rotateOnAxis(Vi,e)},translateOnAxis:function translateOnAxis(t,r){Ii.copy(t).applyQuaternion((this||e).quaternion);(this||e).position.add(Ii.multiplyScalar(r));return this||e},translateX:function translateX(e){return this.translateOnAxis(zi,e)},translateY:function translateY(e){return this.translateOnAxis(Hi,e)},translateZ:function translateZ(e){return this.translateOnAxis(Vi,e)},localToWorld:function localToWorld(t){return t.applyMatrix4((this||e).matrixWorld)},worldToLocal:function worldToLocal(t){return t.applyMatrix4(Gi.getInverse((this||e).matrixWorld))},lookAt:function lookAt(t,r,i){t.isVector3?Oi.copy(t):Oi.set(t,r,i);var n=(this||e).parent;this.updateWorldMatrix(true,false);Ni.setFromMatrixPosition((this||e).matrixWorld);(this||e).isCamera||(this||e).isLight?Gi.lookAt(Ni,Oi,(this||e).up):Gi.lookAt(Oi,Ni,(this||e).up);(this||e).quaternion.setFromRotationMatrix(Gi);if(n){Gi.extractRotation(n.matrixWorld);Di.setFromRotationMatrix(Gi);(this||e).quaternion.premultiply(Di.inverse());}},add:function add(t){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this||e}if(t===(this||e)){console.error("THREE.Object3D.add: object can't be added as a child of itself.",t);return this||e}if(t&&t.isObject3D){null!==t.parent&&t.parent.remove(t);t.parent=this||e;(this||e).children.push(t);t.dispatchEvent(ki);}else console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t);return this||e},remove:function remove(t){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.remove(arguments[r]);return this||e}var i=(this||e).children.indexOf(t);if(-1!==i){t.parent=null;(this||e).children.splice(i,1);t.dispatchEvent(Wi);}return this||e},attach:function attach(t){this.updateWorldMatrix(true,false);Gi.getInverse((this||e).matrixWorld);if(null!==t.parent){t.parent.updateWorldMatrix(true,false);Gi.multiply(t.parent.matrixWorld);}t.applyMatrix4(Gi);t.updateWorldMatrix(false,false);this.add(t);return this||e},getObjectById:function getObjectById(e){return this.getObjectByProperty("id",e)},getObjectByName:function getObjectByName(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function getObjectByProperty(t,r){if((this||e)[t]===r)return this||e;for(var i=0,n=(this||e).children.length;i<n;i++){var a=(this||e).children[i];var o=a.getObjectByProperty(t,r);if(void 0!==o)return o}},getWorldPosition:function getWorldPosition(t){if(void 0===t){console.warn("THREE.Object3D: .getWorldPosition() target is now required");t=new Xr;}this.updateWorldMatrix(true,false);return t.setFromMatrixPosition((this||e).matrixWorld)},getWorldQuaternion:function getWorldQuaternion(t){if(void 0===t){console.warn("THREE.Object3D: .getWorldQuaternion() target is now required");t=new qr;}this.updateWorldMatrix(true,false);(this||e).matrixWorld.decompose(Ni,t,Fi);return t},getWorldScale:function getWorldScale(t){if(void 0===t){console.warn("THREE.Object3D: .getWorldScale() target is now required");t=new Xr;}this.updateWorldMatrix(true,false);(this||e).matrixWorld.decompose(Ni,Ui,t);return t},getWorldDirection:function getWorldDirection(t){if(void 0===t){console.warn("THREE.Object3D: .getWorldDirection() target is now required");t=new Xr;}this.updateWorldMatrix(true,false);var r=(this||e).matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()},raycast:function raycast(){},traverse:function traverse(t){t(this||e);var r=(this||e).children;for(var i=0,n=r.length;i<n;i++)r[i].traverse(t);},traverseVisible:function traverseVisible(t){if(false!==(this||e).visible){t(this||e);var r=(this||e).children;for(var i=0,n=r.length;i<n;i++)r[i].traverseVisible(t);}},traverseAncestors:function traverseAncestors(t){var r=(this||e).parent;if(null!==r){t(r);r.traverseAncestors(t);}},updateMatrix:function updateMatrix(){(this||e).matrix.compose((this||e).position,(this||e).quaternion,(this||e).scale);(this||e).matrixWorldNeedsUpdate=true;},updateMatrixWorld:function updateMatrixWorld(t){(this||e).matrixAutoUpdate&&this.updateMatrix();if((this||e).matrixWorldNeedsUpdate||t){null===(this||e).parent?(this||e).matrixWorld.copy((this||e).matrix):(this||e).matrixWorld.multiplyMatrices((this||e).parent.matrixWorld,(this||e).matrix);(this||e).matrixWorldNeedsUpdate=false;t=true;}var r=(this||e).children;for(var i=0,n=r.length;i<n;i++)r[i].updateMatrixWorld(t);},updateWorldMatrix:function updateWorldMatrix(t,r){var i=(this||e).parent;true===t&&null!==i&&i.updateWorldMatrix(true,false);(this||e).matrixAutoUpdate&&this.updateMatrix();null===(this||e).parent?(this||e).matrixWorld.copy((this||e).matrix):(this||e).matrixWorld.multiplyMatrices((this||e).parent.matrixWorld,(this||e).matrix);if(true===r){var n=(this||e).children;for(var a=0,o=n.length;a<o;a++)n[a].updateWorldMatrix(false,true);}},toJSON:function toJSON(t){var r=void 0===t||"string"===typeof t;var i={};if(r){t={geometries:{},materials:{},textures:{},images:{},shapes:{}};i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"};}var n={};n.uuid=(this||e).uuid;n.type=(this||e).type;""!==(this||e).name&&(n.name=(this||e).name);true===(this||e).castShadow&&(n.castShadow=true);true===(this||e).receiveShadow&&(n.receiveShadow=true);false===(this||e).visible&&(n.visible=false);false===(this||e).frustumCulled&&(n.frustumCulled=false);0!==(this||e).renderOrder&&(n.renderOrder=(this||e).renderOrder);"{}"!==JSON.stringify((this||e).userData)&&(n.userData=(this||e).userData);n.layers=(this||e).layers.mask;n.matrix=(this||e).matrix.toArray();false===(this||e).matrixAutoUpdate&&(n.matrixAutoUpdate=false);if((this||e).isInstancedMesh){n.type="InstancedMesh";n.count=(this||e).count;n.instanceMatrix=(this||e).instanceMatrix.toJSON();}function serialize(e,r){void 0===e[r.uuid]&&(e[r.uuid]=r.toJSON(t));return r.uuid}if((this||e).isMesh||(this||e).isLine||(this||e).isPoints){n.geometry=serialize(t.geometries,(this||e).geometry);var a=(this||e).geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];serialize(t.shapes,u);}else serialize(t.shapes,o);}}if(void 0!==(this||e).material)if(Array.isArray((this||e).material)){var c=[];for(var h=0,d=(this||e).material.length;h<d;h++)c.push(serialize(t.materials,(this||e).material[h]));n.material=c;}else n.material=serialize(t.materials,(this||e).material);if((this||e).children.length>0){n.children=[];for(var f=0;f<(this||e).children.length;f++)n.children.push((this||e).children[f].toJSON(t).object);}if(r){var p=extractFromCache(t.geometries);var m=extractFromCache(t.materials);var g=extractFromCache(t.textures);var y=extractFromCache(t.images);var x=extractFromCache(t.shapes);p.length>0&&(i.geometries=p);m.length>0&&(i.materials=m);g.length>0&&(i.textures=g);y.length>0&&(i.images=y);x.length>0&&(i.shapes=x);}i.object=n;return i;function extractFromCache(e){var t=[];for(var r in e){var i=e[r];delete i.metadata;t.push(i);}return t}},clone:function clone(t){return (new(this||e).constructor).copy(this||e,t)},copy:function copy(t,r){void 0===r&&(r=true);(this||e).name=t.name;(this||e).up.copy(t.up);(this||e).position.copy(t.position);(this||e).rotation.order=t.rotation.order;(this||e).quaternion.copy(t.quaternion);(this||e).scale.copy(t.scale);(this||e).matrix.copy(t.matrix);(this||e).matrixWorld.copy(t.matrixWorld);(this||e).matrixAutoUpdate=t.matrixAutoUpdate;(this||e).matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate;(this||e).layers.mask=t.layers.mask;(this||e).visible=t.visible;(this||e).castShadow=t.castShadow;(this||e).receiveShadow=t.receiveShadow;(this||e).frustumCulled=t.frustumCulled;(this||e).renderOrder=t.renderOrder;(this||e).userData=JSON.parse(JSON.stringify(t.userData));if(true===r)for(var i=0;i<t.children.length;i++){var n=t.children[i];this.add(n.clone());}return this||e}});var ji=new Xr;var qi=new Xr;var Xi=new Hr;var Yi=function(){function Plane(t,r){Object.defineProperty(this||e,"isPlane",{value:true});(this||e).normal=void 0!==t?t:new Xr(1,0,0);(this||e).constant=void 0!==r?r:0;}var t=Plane.prototype;t.set=function set(t,r){(this||e).normal.copy(t);(this||e).constant=r;return this||e};t.setComponents=function setComponents(t,r,i,n){(this||e).normal.set(t,r,i);(this||e).constant=n;return this||e};t.setFromNormalAndCoplanarPoint=function setFromNormalAndCoplanarPoint(t,r){(this||e).normal.copy(t);(this||e).constant=-r.dot((this||e).normal);return this||e};t.setFromCoplanarPoints=function setFromCoplanarPoints(t,r,i){var n=ji.subVectors(i,r).cross(qi.subVectors(t,r)).normalize();this.setFromNormalAndCoplanarPoint(n,t);return this||e};t.clone=function clone(){return (new(this||e).constructor).copy(this||e)};t.copy=function copy(t){(this||e).normal.copy(t.normal);(this||e).constant=t.constant;return this||e};t.normalize=function normalize(){var t=1/(this||e).normal.length();(this||e).normal.multiplyScalar(t);(this||e).constant*=t;return this||e};t.negate=function negate(){(this||e).constant*=-1;(this||e).normal.negate();return this||e};t.distanceToPoint=function distanceToPoint(t){return (this||e).normal.dot(t)+(this||e).constant};t.distanceToSphere=function distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius};t.projectPoint=function projectPoint(t,r){if(void 0===r){console.warn("THREE.Plane: .projectPoint() target is now required");r=new Xr;}return r.copy((this||e).normal).multiplyScalar(-this.distanceToPoint(t)).add(t)};t.intersectLine=function intersectLine(t,r){if(void 0===r){console.warn("THREE.Plane: .intersectLine() target is now required");r=new Xr;}var i=t.delta(ji);var n=(this||e).normal.dot(i);if(0===n)return 0===this.distanceToPoint(t.start)?r.copy(t.start):void 0;var a=-(t.start.dot((this||e).normal)+(this||e).constant)/n;return a<0||a>1?void 0:r.copy(i).multiplyScalar(a).add(t.start)};t.intersectsLine=function intersectsLine(e){var t=this.distanceToPoint(e.start);var r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0};t.intersectsBox=function intersectsBox(t){return t.intersectsPlane(this||e)};t.intersectsSphere=function intersectsSphere(t){return t.intersectsPlane(this||e)};t.coplanarPoint=function coplanarPoint(t){if(void 0===t){console.warn("THREE.Plane: .coplanarPoint() target is now required");t=new Xr;}return t.copy((this||e).normal).multiplyScalar(-(this||e).constant)};t.applyMatrix4=function applyMatrix4(t,r){var i=r||Xi.getNormalMatrix(t);var n=this.coplanarPoint(ji).applyMatrix4(t);var a=(this||e).normal.applyMatrix3(i).normalize();(this||e).constant=-n.dot(a);return this||e};t.translate=function translate(t){(this||e).constant-=t.dot((this||e).normal);return this||e};t.equals=function equals(t){return t.normal.equals((this||e).normal)&&t.constant===(this||e).constant};return Plane}();var Ji=new Xr;var Zi=new Xr;var Qi=new Xr;var Ki=new Xr;var $i=new Xr;var en=new Xr;var tn=new Xr;var rn=new Xr;var nn=new Xr;var an=new Xr;var on=function(){function Triangle(t,r,i){(this||e).a=void 0!==t?t:new Xr;(this||e).b=void 0!==r?r:new Xr;(this||e).c=void 0!==i?i:new Xr;}Triangle.getNormal=function getNormal(e,t,r,i){if(void 0===i){console.warn("THREE.Triangle: .getNormal() target is now required");i=new Xr;}i.subVectors(r,t);Ji.subVectors(e,t);i.cross(Ji);var n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)};Triangle.getBarycoord=function getBarycoord(e,t,r,i,n){Ji.subVectors(i,t);Zi.subVectors(r,t);Qi.subVectors(e,t);var a=Ji.dot(Ji);var o=Ji.dot(Zi);var s=Ji.dot(Qi);var l=Zi.dot(Zi);var u=Zi.dot(Qi);var c=a*l-o*o;if(void 0===n){console.warn("THREE.Triangle: .getBarycoord() target is now required");n=new Xr;}if(0===c)return n.set(-2,-1,-1);var h=1/c;var d=(l*s-o*u)*h;var f=(a*u-o*s)*h;return n.set(1-d-f,f,d)};Triangle.containsPoint=function containsPoint(e,t,r,i){this.getBarycoord(e,t,r,i,Ki);return Ki.x>=0&&Ki.y>=0&&Ki.x+Ki.y<=1};Triangle.getUV=function getUV(e,t,r,i,n,a,o,s){this.getBarycoord(e,t,r,i,Ki);s.set(0,0);s.addScaledVector(n,Ki.x);s.addScaledVector(a,Ki.y);s.addScaledVector(o,Ki.z);return s};Triangle.isFrontFacing=function isFrontFacing(e,t,r,i){Ji.subVectors(r,t);Zi.subVectors(e,t);return Ji.cross(Zi).dot(i)<0};var t=Triangle.prototype;t.set=function set(t,r,i){(this||e).a.copy(t);(this||e).b.copy(r);(this||e).c.copy(i);return this||e};t.setFromPointsAndIndices=function setFromPointsAndIndices(t,r,i,n){(this||e).a.copy(t[r]);(this||e).b.copy(t[i]);(this||e).c.copy(t[n]);return this||e};t.clone=function clone(){return (new(this||e).constructor).copy(this||e)};t.copy=function copy(t){(this||e).a.copy(t.a);(this||e).b.copy(t.b);(this||e).c.copy(t.c);return this||e};t.getArea=function getArea(){Ji.subVectors((this||e).c,(this||e).b);Zi.subVectors((this||e).a,(this||e).b);return .5*Ji.cross(Zi).length()};t.getMidpoint=function getMidpoint(t){if(void 0===t){console.warn("THREE.Triangle: .getMidpoint() target is now required");t=new Xr;}return t.addVectors((this||e).a,(this||e).b).add((this||e).c).multiplyScalar(1/3)};t.getNormal=function getNormal(t){return Triangle.getNormal((this||e).a,(this||e).b,(this||e).c,t)};t.getPlane=function getPlane(t){if(void 0===t){console.warn("THREE.Triangle: .getPlane() target is now required");t=new Yi;}return t.setFromCoplanarPoints((this||e).a,(this||e).b,(this||e).c)};t.getBarycoord=function getBarycoord(t,r){return Triangle.getBarycoord(t,(this||e).a,(this||e).b,(this||e).c,r)};t.getUV=function getUV(t,r,i,n,a){return Triangle.getUV(t,(this||e).a,(this||e).b,(this||e).c,r,i,n,a)};t.containsPoint=function containsPoint(t){return Triangle.containsPoint(t,(this||e).a,(this||e).b,(this||e).c)};t.isFrontFacing=function isFrontFacing(t){return Triangle.isFrontFacing((this||e).a,(this||e).b,(this||e).c,t)};t.intersectsBox=function intersectsBox(t){return t.intersectsTriangle(this||e)};t.closestPointToPoint=function closestPointToPoint(t,r){if(void 0===r){console.warn("THREE.Triangle: .closestPointToPoint() target is now required");r=new Xr;}var i=(this||e).a,n=(this||e).b,a=(this||e).c;var o,s;$i.subVectors(n,i);en.subVectors(a,i);rn.subVectors(t,i);var l=$i.dot(rn);var u=en.dot(rn);if(l<=0&&u<=0)return r.copy(i);nn.subVectors(t,n);var c=$i.dot(nn);var h=en.dot(nn);if(c>=0&&h<=c)return r.copy(n);var d=l*h-c*u;if(d<=0&&l>=0&&c<=0){o=l/(l-c);return r.copy(i).addScaledVector($i,o)}an.subVectors(t,a);var f=$i.dot(an);var p=en.dot(an);if(p>=0&&f<=p)return r.copy(a);var m=f*u-l*p;if(m<=0&&u>=0&&p<=0){s=u/(u-p);return r.copy(i).addScaledVector(en,s)}var g=c*p-f*h;if(g<=0&&h-c>=0&&f-p>=0){tn.subVectors(a,n);s=(h-c)/(h-c+(f-p));return r.copy(n).addScaledVector(tn,s)}var y=1/(g+m+d);o=m*y;s=d*y;return r.copy(i).addScaledVector($i,o).addScaledVector(en,s)};t.equals=function equals(t){return t.a.equals((this||e).a)&&t.b.equals((this||e).b)&&t.c.equals((this||e).c)};return Triangle}();var sn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};var ln={h:0,s:0,l:0};var un={h:0,s:0,l:0};function hue2rgb(e,t,r){r<0&&(r+=1);r>1&&(r-=1);return r<1/6?e+6*(t-e)*r:r<1/2?t:r<2/3?e+6*(t-e)*(2/3-r):e}function SRGBToLinear(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function LinearToSRGB(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var cn=function(){function Color(t,r,i){Object.defineProperty(this||e,"isColor",{value:true});return void 0===r&&void 0===i?this.set(t):this.setRGB(t,r,i)}var t=Color.prototype;t.set=function set(t){t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t);return this||e};t.setScalar=function setScalar(t){(this||e).r=t;(this||e).g=t;(this||e).b=t;return this||e};t.setHex=function setHex(t){t=Math.floor(t);(this||e).r=(t>>16&255)/255;(this||e).g=(t>>8&255)/255;(this||e).b=(255&t)/255;return this||e};t.setRGB=function setRGB(t,r,i){(this||e).r=t;(this||e).g=r;(this||e).b=i;return this||e};t.setHSL=function setHSL(t,r,i){t=Ur.euclideanModulo(t,1);r=Ur.clamp(r,0,1);i=Ur.clamp(i,0,1);if(0===r)(this||e).r=(this||e).g=(this||e).b=i;else {var n=i<=.5?i*(1+r):i+r-i*r;var a=2*i-n;(this||e).r=hue2rgb(a,n,t+1/3);(this||e).g=hue2rgb(a,n,t);(this||e).b=hue2rgb(a,n,t-1/3);}return this||e};t.setStyle=function setStyle(t){function handleAlpha(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.");}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i;var n=r[1];var a=r[2];switch(n){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){(this||e).r=Math.min(255,parseInt(i[1],10))/255;(this||e).g=Math.min(255,parseInt(i[2],10))/255;(this||e).b=Math.min(255,parseInt(i[3],10))/255;handleAlpha(i[5]);return this||e}if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){(this||e).r=Math.min(100,parseInt(i[1],10))/100;(this||e).g=Math.min(100,parseInt(i[2],10))/100;(this||e).b=Math.min(100,parseInt(i[3],10))/100;handleAlpha(i[5]);return this||e}break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360;var s=parseInt(i[2],10)/100;var l=parseInt(i[3],10)/100;handleAlpha(i[5]);return this.setHSL(o,s,l)}break}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u=r[1];var c=u.length;if(3===c){(this||e).r=parseInt(u.charAt(0)+u.charAt(0),16)/255;(this||e).g=parseInt(u.charAt(1)+u.charAt(1),16)/255;(this||e).b=parseInt(u.charAt(2)+u.charAt(2),16)/255;return this||e}if(6===c){(this||e).r=parseInt(u.charAt(0)+u.charAt(1),16)/255;(this||e).g=parseInt(u.charAt(2)+u.charAt(3),16)/255;(this||e).b=parseInt(u.charAt(4)+u.charAt(5),16)/255;return this||e}}return t&&t.length>0?this.setColorName(t):this||e};t.setColorName=function setColorName(t){var r=sn[t];void 0!==r?this.setHex(r):console.warn("THREE.Color: Unknown color "+t);return this||e};t.clone=function clone(){return new(this||e).constructor((this||e).r,(this||e).g,(this||e).b)};t.copy=function copy(t){(this||e).r=t.r;(this||e).g=t.g;(this||e).b=t.b;return this||e};t.copyGammaToLinear=function copyGammaToLinear(t,r){void 0===r&&(r=2);(this||e).r=Math.pow(t.r,r);(this||e).g=Math.pow(t.g,r);(this||e).b=Math.pow(t.b,r);return this||e};t.copyLinearToGamma=function copyLinearToGamma(t,r){void 0===r&&(r=2);var i=r>0?1/r:1;(this||e).r=Math.pow(t.r,i);(this||e).g=Math.pow(t.g,i);(this||e).b=Math.pow(t.b,i);return this||e};t.convertGammaToLinear=function convertGammaToLinear(t){this.copyGammaToLinear(this||e,t);return this||e};t.convertLinearToGamma=function convertLinearToGamma(t){this.copyLinearToGamma(this||e,t);return this||e};t.copySRGBToLinear=function copySRGBToLinear(t){(this||e).r=SRGBToLinear(t.r);(this||e).g=SRGBToLinear(t.g);(this||e).b=SRGBToLinear(t.b);return this||e};t.copyLinearToSRGB=function copyLinearToSRGB(t){(this||e).r=LinearToSRGB(t.r);(this||e).g=LinearToSRGB(t.g);(this||e).b=LinearToSRGB(t.b);return this||e};t.convertSRGBToLinear=function convertSRGBToLinear(){this.copySRGBToLinear(this||e);return this||e};t.convertLinearToSRGB=function convertLinearToSRGB(){this.copyLinearToSRGB(this||e);return this||e};t.getHex=function getHex(){return 255*(this||e).r<<16^255*(this||e).g<<8^255*(this||e).b<<0};t.getHexString=function getHexString(){return ("000000"+this.getHex().toString(16)).slice(-6)};t.getHSL=function getHSL(t){if(void 0===t){console.warn("THREE.Color: .getHSL() target is now required");t={h:0,s:0,l:0};}var r=(this||e).r,i=(this||e).g,n=(this||e).b;var a=Math.max(r,i,n);var o=Math.min(r,i,n);var s,l;var u=(o+a)/2;if(o===a){s=0;l=0;}else {var c=a-o;l=u<=.5?c/(a+o):c/(2-a-o);switch(a){case r:s=(i-n)/c+(i<n?6:0);break;case i:s=(n-r)/c+2;break;case n:s=(r-i)/c+4;break}s/=6;}t.h=s;t.s=l;t.l=u;return t};t.getStyle=function getStyle(){return "rgb("+(255*(this||e).r|0)+","+(255*(this||e).g|0)+","+(255*(this||e).b|0)+")"};t.offsetHSL=function offsetHSL(t,r,i){this.getHSL(ln);ln.h+=t;ln.s+=r;ln.l+=i;this.setHSL(ln.h,ln.s,ln.l);return this||e};t.add=function add(t){(this||e).r+=t.r;(this||e).g+=t.g;(this||e).b+=t.b;return this||e};t.addColors=function addColors(t,r){(this||e).r=t.r+r.r;(this||e).g=t.g+r.g;(this||e).b=t.b+r.b;return this||e};t.addScalar=function addScalar(t){(this||e).r+=t;(this||e).g+=t;(this||e).b+=t;return this||e};t.sub=function sub(t){(this||e).r=Math.max(0,(this||e).r-t.r);(this||e).g=Math.max(0,(this||e).g-t.g);(this||e).b=Math.max(0,(this||e).b-t.b);return this||e};t.multiply=function multiply(t){(this||e).r*=t.r;(this||e).g*=t.g;(this||e).b*=t.b;return this||e};t.multiplyScalar=function multiplyScalar(t){(this||e).r*=t;(this||e).g*=t;(this||e).b*=t;return this||e};t.lerp=function lerp(t,r){(this||e).r+=(t.r-(this||e).r)*r;(this||e).g+=(t.g-(this||e).g)*r;(this||e).b+=(t.b-(this||e).b)*r;return this||e};t.lerpHSL=function lerpHSL(t,r){this.getHSL(ln);t.getHSL(un);var i=Ur.lerp(ln.h,un.h,r);var n=Ur.lerp(ln.s,un.s,r);var a=Ur.lerp(ln.l,un.l,r);this.setHSL(i,n,a);return this||e};t.equals=function equals(t){return t.r===(this||e).r&&t.g===(this||e).g&&t.b===(this||e).b};t.fromArray=function fromArray(t,r){void 0===r&&(r=0);(this||e).r=t[r];(this||e).g=t[r+1];(this||e).b=t[r+2];return this||e};t.toArray=function toArray(t,r){void 0===t&&(t=[]);void 0===r&&(r=0);t[r]=(this||e).r;t[r+1]=(this||e).g;t[r+2]=(this||e).b;return t};t.fromBufferAttribute=function fromBufferAttribute(t,r){(this||e).r=t.getX(r);(this||e).g=t.getY(r);(this||e).b=t.getZ(r);if(true===t.normalized){(this||e).r/=255;(this||e).g/=255;(this||e).b/=255;}return this||e};t.toJSON=function toJSON(){return this.getHex()};return Color}();cn.NAMES=sn;cn.prototype.r=1;cn.prototype.g=1;cn.prototype.b=1;var hn=function(){function Face3(t,r,i,n,a,o){(this||e).a=t;(this||e).b=r;(this||e).c=i;(this||e).normal=n&&n.isVector3?n:new Xr;(this||e).vertexNormals=Array.isArray(n)?n:[];(this||e).color=a&&a.isColor?a:new cn;(this||e).vertexColors=Array.isArray(a)?a:[];(this||e).materialIndex=void 0!==o?o:0;}var t=Face3.prototype;t.clone=function clone(){return (new(this||e).constructor).copy(this||e)};t.copy=function copy(t){(this||e).a=t.a;(this||e).b=t.b;(this||e).c=t.c;(this||e).normal.copy(t.normal);(this||e).color.copy(t.color);(this||e).materialIndex=t.materialIndex;for(var r=0,i=t.vertexNormals.length;r<i;r++)(this||e).vertexNormals[r]=t.vertexNormals[r].clone();for(var n=0,a=t.vertexColors.length;n<a;n++)(this||e).vertexColors[n]=t.vertexColors[n].clone();return this||e};return Face3}();var dn=0;function Material(){Object.defineProperty(this||e,"id",{value:dn++});(this||e).uuid=Ur.generateUUID();(this||e).name="";(this||e).type="Material";(this||e).fog=true;(this||e).blending=b;(this||e).side=f;(this||e).flatShading=false;(this||e).vertexColors=false;(this||e).opacity=1;(this||e).transparent=false;(this||e).blendSrc=D;(this||e).blendDst=G;(this||e).blendEquation=T;(this||e).blendSrcAlpha=null;(this||e).blendDstAlpha=null;(this||e).blendEquationAlpha=null;(this||e).depthFunc=W;(this||e).depthTest=true;(this||e).depthWrite=true;(this||e).stencilWriteMask=255;(this||e).stencilFunc=Sr;(this||e).stencilRef=0;(this||e).stencilFuncMask=255;(this||e).stencilFail=cr;(this||e).stencilZFail=cr;(this||e).stencilZPass=cr;(this||e).stencilWrite=false;(this||e).clippingPlanes=null;(this||e).clipIntersection=false;(this||e).clipShadows=false;(this||e).shadowSide=null;(this||e).colorWrite=true;(this||e).precision=null;(this||e).polygonOffset=false;(this||e).polygonOffsetFactor=0;(this||e).polygonOffsetUnits=0;(this||e).dithering=false;(this||e).alphaTest=0;(this||e).premultipliedAlpha=false;(this||e).visible=true;(this||e).toneMapped=true;(this||e).userData={};(this||e).version=0;}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:true,onBeforeCompile:function onBeforeCompile(){},customProgramCacheKey:function customProgramCacheKey(){return (this||e).onBeforeCompile.toString()},setValues:function setValues(t){if(void 0!==t)for(var r in t){var i=t[r];if(void 0!==i)if("shading"!==r){var n=(this||e)[r];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):(this||e)[r]=i:console.warn("THREE."+(this||e).type+": '"+r+"' is not a property of this material.");}else {console.warn("THREE."+(this||e).type+": .shading has been removed. Use the boolean .flatShading instead.");(this||e).flatShading=i===g;}else console.warn("THREE.Material: '"+r+"' parameter is undefined.");}},toJSON:function toJSON(t){var r=void 0===t||"string"===typeof t;r&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=(this||e).uuid;i.type=(this||e).type;""!==(this||e).name&&(i.name=(this||e).name);(this||e).color&&(this||e).color.isColor&&(i.color=(this||e).color.getHex());void 0!==(this||e).roughness&&(i.roughness=(this||e).roughness);void 0!==(this||e).metalness&&(i.metalness=(this||e).metalness);(this||e).sheen&&(this||e).sheen.isColor&&(i.sheen=(this||e).sheen.getHex());(this||e).emissive&&(this||e).emissive.isColor&&(i.emissive=(this||e).emissive.getHex());(this||e).emissiveIntensity&&1!==(this||e).emissiveIntensity&&(i.emissiveIntensity=(this||e).emissiveIntensity);(this||e).specular&&(this||e).specular.isColor&&(i.specular=(this||e).specular.getHex());void 0!==(this||e).shininess&&(i.shininess=(this||e).shininess);void 0!==(this||e).clearcoat&&(i.clearcoat=(this||e).clearcoat);void 0!==(this||e).clearcoatRoughness&&(i.clearcoatRoughness=(this||e).clearcoatRoughness);(this||e).clearcoatMap&&(this||e).clearcoatMap.isTexture&&(i.clearcoatMap=(this||e).clearcoatMap.toJSON(t).uuid);(this||e).clearcoatRoughnessMap&&(this||e).clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=(this||e).clearcoatRoughnessMap.toJSON(t).uuid);if((this||e).clearcoatNormalMap&&(this||e).clearcoatNormalMap.isTexture){i.clearcoatNormalMap=(this||e).clearcoatNormalMap.toJSON(t).uuid;i.clearcoatNormalScale=(this||e).clearcoatNormalScale.toArray();}(this||e).map&&(this||e).map.isTexture&&(i.map=(this||e).map.toJSON(t).uuid);(this||e).matcap&&(this||e).matcap.isTexture&&(i.matcap=(this||e).matcap.toJSON(t).uuid);(this||e).alphaMap&&(this||e).alphaMap.isTexture&&(i.alphaMap=(this||e).alphaMap.toJSON(t).uuid);(this||e).lightMap&&(this||e).lightMap.isTexture&&(i.lightMap=(this||e).lightMap.toJSON(t).uuid);if((this||e).aoMap&&(this||e).aoMap.isTexture){i.aoMap=(this||e).aoMap.toJSON(t).uuid;i.aoMapIntensity=(this||e).aoMapIntensity;}if((this||e).bumpMap&&(this||e).bumpMap.isTexture){i.bumpMap=(this||e).bumpMap.toJSON(t).uuid;i.bumpScale=(this||e).bumpScale;}if((this||e).normalMap&&(this||e).normalMap.isTexture){i.normalMap=(this||e).normalMap.toJSON(t).uuid;i.normalMapType=(this||e).normalMapType;i.normalScale=(this||e).normalScale.toArray();}if((this||e).displacementMap&&(this||e).displacementMap.isTexture){i.displacementMap=(this||e).displacementMap.toJSON(t).uuid;i.displacementScale=(this||e).displacementScale;i.displacementBias=(this||e).displacementBias;}(this||e).roughnessMap&&(this||e).roughnessMap.isTexture&&(i.roughnessMap=(this||e).roughnessMap.toJSON(t).uuid);(this||e).metalnessMap&&(this||e).metalnessMap.isTexture&&(i.metalnessMap=(this||e).metalnessMap.toJSON(t).uuid);(this||e).emissiveMap&&(this||e).emissiveMap.isTexture&&(i.emissiveMap=(this||e).emissiveMap.toJSON(t).uuid);(this||e).specularMap&&(this||e).specularMap.isTexture&&(i.specularMap=(this||e).specularMap.toJSON(t).uuid);if((this||e).envMap&&(this||e).envMap.isTexture){i.envMap=(this||e).envMap.toJSON(t).uuid;i.reflectivity=(this||e).reflectivity;i.refractionRatio=(this||e).refractionRatio;void 0!==(this||e).combine&&(i.combine=(this||e).combine);void 0!==(this||e).envMapIntensity&&(i.envMapIntensity=(this||e).envMapIntensity);}(this||e).gradientMap&&(this||e).gradientMap.isTexture&&(i.gradientMap=(this||e).gradientMap.toJSON(t).uuid);void 0!==(this||e).size&&(i.size=(this||e).size);void 0!==(this||e).sizeAttenuation&&(i.sizeAttenuation=(this||e).sizeAttenuation);(this||e).blending!==b&&(i.blending=(this||e).blending);true===(this||e).flatShading&&(i.flatShading=(this||e).flatShading);(this||e).side!==f&&(i.side=(this||e).side);(this||e).vertexColors&&(i.vertexColors=true);(this||e).opacity<1&&(i.opacity=(this||e).opacity);true===(this||e).transparent&&(i.transparent=(this||e).transparent);i.depthFunc=(this||e).depthFunc;i.depthTest=(this||e).depthTest;i.depthWrite=(this||e).depthWrite;i.stencilWrite=(this||e).stencilWrite;i.stencilWriteMask=(this||e).stencilWriteMask;i.stencilFunc=(this||e).stencilFunc;i.stencilRef=(this||e).stencilRef;i.stencilFuncMask=(this||e).stencilFuncMask;i.stencilFail=(this||e).stencilFail;i.stencilZFail=(this||e).stencilZFail;i.stencilZPass=(this||e).stencilZPass;(this||e).rotation&&0!==(this||e).rotation&&(i.rotation=(this||e).rotation);true===(this||e).polygonOffset&&(i.polygonOffset=true);0!==(this||e).polygonOffsetFactor&&(i.polygonOffsetFactor=(this||e).polygonOffsetFactor);0!==(this||e).polygonOffsetUnits&&(i.polygonOffsetUnits=(this||e).polygonOffsetUnits);(this||e).linewidth&&1!==(this||e).linewidth&&(i.linewidth=(this||e).linewidth);void 0!==(this||e).dashSize&&(i.dashSize=(this||e).dashSize);void 0!==(this||e).gapSize&&(i.gapSize=(this||e).gapSize);void 0!==(this||e).scale&&(i.scale=(this||e).scale);true===(this||e).dithering&&(i.dithering=true);(this||e).alphaTest>0&&(i.alphaTest=(this||e).alphaTest);true===(this||e).premultipliedAlpha&&(i.premultipliedAlpha=(this||e).premultipliedAlpha);true===(this||e).wireframe&&(i.wireframe=(this||e).wireframe);(this||e).wireframeLinewidth>1&&(i.wireframeLinewidth=(this||e).wireframeLinewidth);"round"!==(this||e).wireframeLinecap&&(i.wireframeLinecap=(this||e).wireframeLinecap);"round"!==(this||e).wireframeLinejoin&&(i.wireframeLinejoin=(this||e).wireframeLinejoin);true===(this||e).morphTargets&&(i.morphTargets=true);true===(this||e).morphNormals&&(i.morphNormals=true);true===(this||e).skinning&&(i.skinning=true);false===(this||e).visible&&(i.visible=false);false===(this||e).toneMapped&&(i.toneMapped=false);"{}"!==JSON.stringify((this||e).userData)&&(i.userData=(this||e).userData);function extractFromCache(e){var t=[];for(var r in e){var i=e[r];delete i.metadata;t.push(i);}return t}if(r){var n=extractFromCache(t.textures);var a=extractFromCache(t.images);n.length>0&&(i.textures=n);a.length>0&&(i.images=a);}return i},clone:function clone(){return (new(this||e).constructor).copy(this||e)},copy:function copy(t){(this||e).name=t.name;(this||e).fog=t.fog;(this||e).blending=t.blending;(this||e).side=t.side;(this||e).flatShading=t.flatShading;(this||e).vertexColors=t.vertexColors;(this||e).opacity=t.opacity;(this||e).transparent=t.transparent;(this||e).blendSrc=t.blendSrc;(this||e).blendDst=t.blendDst;(this||e).blendEquation=t.blendEquation;(this||e).blendSrcAlpha=t.blendSrcAlpha;(this||e).blendDstAlpha=t.blendDstAlpha;(this||e).blendEquationAlpha=t.blendEquationAlpha;(this||e).depthFunc=t.depthFunc;(this||e).depthTest=t.depthTest;(this||e).depthWrite=t.depthWrite;(this||e).stencilWriteMask=t.stencilWriteMask;(this||e).stencilFunc=t.stencilFunc;(this||e).stencilRef=t.stencilRef;(this||e).stencilFuncMask=t.stencilFuncMask;(this||e).stencilFail=t.stencilFail;(this||e).stencilZFail=t.stencilZFail;(this||e).stencilZPass=t.stencilZPass;(this||e).stencilWrite=t.stencilWrite;var r=t.clippingPlanes;var i=null;if(null!==r){var n=r.length;i=new Array(n);for(var a=0;a!==n;++a)i[a]=r[a].clone();}(this||e).clippingPlanes=i;(this||e).clipIntersection=t.clipIntersection;(this||e).clipShadows=t.clipShadows;(this||e).shadowSide=t.shadowSide;(this||e).colorWrite=t.colorWrite;(this||e).precision=t.precision;(this||e).polygonOffset=t.polygonOffset;(this||e).polygonOffsetFactor=t.polygonOffsetFactor;(this||e).polygonOffsetUnits=t.polygonOffsetUnits;(this||e).dithering=t.dithering;(this||e).alphaTest=t.alphaTest;(this||e).premultipliedAlpha=t.premultipliedAlpha;(this||e).visible=t.visible;(this||e).toneMapped=t.toneMapped;(this||e).userData=JSON.parse(JSON.stringify(t.userData));return this||e},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function set(t){true===t&&(this||e).version++;}});function MeshBasicMaterial(t){Material.call(this||e);(this||e).type="MeshBasicMaterial";(this||e).color=new cn(16777215);(this||e).map=null;(this||e).lightMap=null;(this||e).lightMapIntensity=1;(this||e).aoMap=null;(this||e).aoMapIntensity=1;(this||e).specularMap=null;(this||e).alphaMap=null;(this||e).envMap=null;(this||e).combine=J;(this||e).reflectivity=1;(this||e).refractionRatio=.98;(this||e).wireframe=false;(this||e).wireframeLinewidth=1;(this||e).wireframeLinecap="round";(this||e).wireframeLinejoin="round";(this||e).skinning=false;(this||e).morphTargets=false;this.setValues(t);}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=true;MeshBasicMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).color.copy(t.color);(this||e).map=t.map;(this||e).lightMap=t.lightMap;(this||e).lightMapIntensity=t.lightMapIntensity;(this||e).aoMap=t.aoMap;(this||e).aoMapIntensity=t.aoMapIntensity;(this||e).specularMap=t.specularMap;(this||e).alphaMap=t.alphaMap;(this||e).envMap=t.envMap;(this||e).combine=t.combine;(this||e).reflectivity=t.reflectivity;(this||e).refractionRatio=t.refractionRatio;(this||e).wireframe=t.wireframe;(this||e).wireframeLinewidth=t.wireframeLinewidth;(this||e).wireframeLinecap=t.wireframeLinecap;(this||e).wireframeLinejoin=t.wireframeLinejoin;(this||e).skinning=t.skinning;(this||e).morphTargets=t.morphTargets;return this||e};var fn=new Xr;var pn=new zr;function BufferAttribute(t,r,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");(this||e).name="";(this||e).array=t;(this||e).itemSize=r;(this||e).count=void 0!==t?t.length/r:0;(this||e).normalized=true===i;(this||e).usage=Tr;(this||e).updateRange={offset:0,count:-1};(this||e).version=0;}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function set(t){true===t&&(this||e).version++;}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:true,onUploadCallback:function onUploadCallback(){},setUsage:function setUsage(t){(this||e).usage=t;return this||e},copy:function copy(t){(this||e).name=t.name;(this||e).array=new t.array.constructor(t.array);(this||e).itemSize=t.itemSize;(this||e).count=t.count;(this||e).normalized=t.normalized;(this||e).usage=t.usage;return this||e},copyAt:function copyAt(t,r,i){t*=(this||e).itemSize;i*=r.itemSize;for(var n=0,a=(this||e).itemSize;n<a;n++)(this||e).array[t+n]=r.array[i+n];return this||e},copyArray:function copyArray(t){(this||e).array.set(t);return this||e},copyColorsArray:function copyColorsArray(t){var r=(this||e).array;var i=0;for(var n=0,a=t.length;n<a;n++){var o=t[n];if(void 0===o){console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n);o=new cn;}r[i++]=o.r;r[i++]=o.g;r[i++]=o.b;}return this||e},copyVector2sArray:function copyVector2sArray(t){var r=(this||e).array;var i=0;for(var n=0,a=t.length;n<a;n++){var o=t[n];if(void 0===o){console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n);o=new zr;}r[i++]=o.x;r[i++]=o.y;}return this||e},copyVector3sArray:function copyVector3sArray(t){var r=(this||e).array;var i=0;for(var n=0,a=t.length;n<a;n++){var o=t[n];if(void 0===o){console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n);o=new Xr;}r[i++]=o.x;r[i++]=o.y;r[i++]=o.z;}return this||e},copyVector4sArray:function copyVector4sArray(t){var r=(this||e).array;var i=0;for(var n=0,a=t.length;n<a;n++){var o=t[n];if(void 0===o){console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n);o=new jr;}r[i++]=o.x;r[i++]=o.y;r[i++]=o.z;r[i++]=o.w;}return this||e},applyMatrix3:function applyMatrix3(t){if(2===(this||e).itemSize)for(var r=0,i=(this||e).count;r<i;r++){pn.fromBufferAttribute(this||e,r);pn.applyMatrix3(t);this.setXY(r,pn.x,pn.y);}else if(3===(this||e).itemSize)for(var n=0,a=(this||e).count;n<a;n++){fn.fromBufferAttribute(this||e,n);fn.applyMatrix3(t);this.setXYZ(n,fn.x,fn.y,fn.z);}return this||e},applyMatrix4:function applyMatrix4(t){for(var r=0,i=(this||e).count;r<i;r++){fn.x=this.getX(r);fn.y=this.getY(r);fn.z=this.getZ(r);fn.applyMatrix4(t);this.setXYZ(r,fn.x,fn.y,fn.z);}return this||e},applyNormalMatrix:function applyNormalMatrix(t){for(var r=0,i=(this||e).count;r<i;r++){fn.x=this.getX(r);fn.y=this.getY(r);fn.z=this.getZ(r);fn.applyNormalMatrix(t);this.setXYZ(r,fn.x,fn.y,fn.z);}return this||e},transformDirection:function transformDirection(t){for(var r=0,i=(this||e).count;r<i;r++){fn.x=this.getX(r);fn.y=this.getY(r);fn.z=this.getZ(r);fn.transformDirection(t);this.setXYZ(r,fn.x,fn.y,fn.z);}return this||e},set:function set(t,r){void 0===r&&(r=0);(this||e).array.set(t,r);return this||e},getX:function getX(t){return (this||e).array[t*(this||e).itemSize]},setX:function setX(t,r){(this||e).array[t*(this||e).itemSize]=r;return this||e},getY:function getY(t){return (this||e).array[t*(this||e).itemSize+1]},setY:function setY(t,r){(this||e).array[t*(this||e).itemSize+1]=r;return this||e},getZ:function getZ(t){return (this||e).array[t*(this||e).itemSize+2]},setZ:function setZ(t,r){(this||e).array[t*(this||e).itemSize+2]=r;return this||e},getW:function getW(t){return (this||e).array[t*(this||e).itemSize+3]},setW:function setW(t,r){(this||e).array[t*(this||e).itemSize+3]=r;return this||e},setXY:function setXY(t,r,i){t*=(this||e).itemSize;(this||e).array[t+0]=r;(this||e).array[t+1]=i;return this||e},setXYZ:function setXYZ(t,r,i,n){t*=(this||e).itemSize;(this||e).array[t+0]=r;(this||e).array[t+1]=i;(this||e).array[t+2]=n;return this||e},setXYZW:function setXYZW(t,r,i,n,a){t*=(this||e).itemSize;(this||e).array[t+0]=r;(this||e).array[t+1]=i;(this||e).array[t+2]=n;(this||e).array[t+3]=a;return this||e},onUpload:function onUpload(t){(this||e).onUploadCallback=t;return this||e},clone:function clone(){return new(this||e).constructor((this||e).array,(this||e).itemSize).copy(this||e)},toJSON:function toJSON(){return {itemSize:(this||e).itemSize,type:(this||e).array.constructor.name,array:Array.prototype.slice.call((this||e).array),normalized:(this||e).normalized}}});function Int8BufferAttribute(t,r,i){BufferAttribute.call(this||e,new Int8Array(t),r,i);}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(t,r,i){BufferAttribute.call(this||e,new Uint8Array(t),r,i);}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(t,r,i){BufferAttribute.call(this||e,new Uint8ClampedArray(t),r,i);}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(t,r,i){BufferAttribute.call(this||e,new Int16Array(t),r,i);}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(t,r,i){BufferAttribute.call(this||e,new Uint16Array(t),r,i);}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(t,r,i){BufferAttribute.call(this||e,new Int32Array(t),r,i);}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(t,r,i){BufferAttribute.call(this||e,new Uint32Array(t),r,i);}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(t,r,i){BufferAttribute.call(this||e,new Float32Array(t),r,i);}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(t,r,i){BufferAttribute.call(this||e,new Float64Array(t),r,i);}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;var mn=function(){function DirectGeometry(){(this||e).vertices=[];(this||e).normals=[];(this||e).colors=[];(this||e).uvs=[];(this||e).uvs2=[];(this||e).groups=[];(this||e).morphTargets={};(this||e).skinWeights=[];(this||e).skinIndices=[];(this||e).boundingBox=null;(this||e).boundingSphere=null;(this||e).verticesNeedUpdate=false;(this||e).normalsNeedUpdate=false;(this||e).colorsNeedUpdate=false;(this||e).uvsNeedUpdate=false;(this||e).groupsNeedUpdate=false;}var t=DirectGeometry.prototype;t.computeGroups=function computeGroups(t){var r=[];var i,n;var a=void 0;var o=t.faces;for(n=0;n<o.length;n++){var s=o[n];if(s.materialIndex!==a){a=s.materialIndex;if(void 0!==i){i.count=3*n-i.start;r.push(i);}i={start:3*n,materialIndex:a};}}if(void 0!==i){i.count=3*n-i.start;r.push(i);}(this||e).groups=r;};t.fromGeometry=function fromGeometry(t){var r=t.faces;var i=t.vertices;var n=t.faceVertexUvs;var a=n[0]&&n[0].length>0;var o=n[1]&&n[1].length>0;var s=t.morphTargets;var l=s.length;var u;if(l>0){u=[];for(var c=0;c<l;c++)u[c]={name:s[c].name,data:[]};(this||e).morphTargets.position=u;}var h=t.morphNormals;var d=h.length;var f;if(d>0){f=[];for(var p=0;p<d;p++)f[p]={name:h[p].name,data:[]};(this||e).morphTargets.normal=f;}var m=t.skinIndices;var g=t.skinWeights;var y=m.length===i.length;var x=g.length===i.length;i.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var b=0;b<r.length;b++){var _=r[b];(this||e).vertices.push(i[_.a],i[_.b],i[_.c]);var M=_.vertexNormals;if(3===M.length)(this||e).normals.push(M[0],M[1],M[2]);else {var w=_.normal;(this||e).normals.push(w,w,w);}var S=_.vertexColors;if(3===S.length)(this||e).colors.push(S[0],S[1],S[2]);else {var T=_.color;(this||e).colors.push(T,T,T);}if(true===a){var A=n[0][b];if(void 0!==A)(this||e).uvs.push(A[0],A[1],A[2]);else {console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",b);(this||e).uvs.push(new zr,new zr,new zr);}}if(true===o){var L=n[1][b];if(void 0!==L)(this||e).uvs2.push(L[0],L[1],L[2]);else {console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",b);(this||e).uvs2.push(new zr,new zr,new zr);}}for(var E=0;E<l;E++){var C=s[E].vertices;u[E].data.push(C[_.a],C[_.b],C[_.c]);}for(var P=0;P<d;P++){var R=h[P].vertexNormals[b];f[P].data.push(R.a,R.b,R.c);}y&&(this||e).skinIndices.push(m[_.a],m[_.b],m[_.c]);x&&(this||e).skinWeights.push(g[_.a],g[_.b],g[_.c]);}this.computeGroups(t);(this||e).verticesNeedUpdate=t.verticesNeedUpdate;(this||e).normalsNeedUpdate=t.normalsNeedUpdate;(this||e).colorsNeedUpdate=t.colorsNeedUpdate;(this||e).uvsNeedUpdate=t.uvsNeedUpdate;(this||e).groupsNeedUpdate=t.groupsNeedUpdate;null!==t.boundingSphere&&((this||e).boundingSphere=t.boundingSphere.clone());null!==t.boundingBox&&((this||e).boundingBox=t.boundingBox.clone());return this||e};return DirectGeometry}();function arrayMax(e){if(0===e.length)return -Infinity;var t=e[0];for(var r=1,i=e.length;r<i;++r)e[r]>t&&(t=e[r]);return t}var vn=1;var gn=new bi;var yn=new Object3D;var xn=new Xr;var bn=new Zr;var _n=new Zr;var Mn=new Xr;function BufferGeometry(){Object.defineProperty(this||e,"id",{value:vn+=2});(this||e).uuid=Ur.generateUUID();(this||e).name="";(this||e).type="BufferGeometry";(this||e).index=null;(this||e).attributes={};(this||e).morphAttributes={};(this||e).morphTargetsRelative=false;(this||e).groups=[];(this||e).boundingBox=null;(this||e).boundingSphere=null;(this||e).drawRange={start:0,count:Infinity};(this||e).userData={};}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:true,getIndex:function getIndex(){return (this||e).index},setIndex:function setIndex(t){Array.isArray(t)?(this||e).index=new(arrayMax(t)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(t,1):(this||e).index=t;return this||e},getAttribute:function getAttribute(t){return (this||e).attributes[t]},setAttribute:function setAttribute(t,r){(this||e).attributes[t]=r;return this||e},deleteAttribute:function deleteAttribute(t){delete(this||e).attributes[t];return this||e},addGroup:function addGroup(t,r,i){(this||e).groups.push({start:t,count:r,materialIndex:void 0!==i?i:0});},clearGroups:function clearGroups(){(this||e).groups=[];},setDrawRange:function setDrawRange(t,r){(this||e).drawRange.start=t;(this||e).drawRange.count=r;},applyMatrix4:function applyMatrix4(t){var r=(this||e).attributes.position;if(void 0!==r){r.applyMatrix4(t);r.needsUpdate=true;}var i=(this||e).attributes.normal;if(void 0!==i){var n=(new Hr).getNormalMatrix(t);i.applyNormalMatrix(n);i.needsUpdate=true;}var a=(this||e).attributes.tangent;if(void 0!==a){a.transformDirection(t);a.needsUpdate=true;}null!==(this||e).boundingBox&&this.computeBoundingBox();null!==(this||e).boundingSphere&&this.computeBoundingSphere();return this||e},rotateX:function rotateX(t){gn.makeRotationX(t);this.applyMatrix4(gn);return this||e},rotateY:function rotateY(t){gn.makeRotationY(t);this.applyMatrix4(gn);return this||e},rotateZ:function rotateZ(t){gn.makeRotationZ(t);this.applyMatrix4(gn);return this||e},translate:function translate(t,r,i){gn.makeTranslation(t,r,i);this.applyMatrix4(gn);return this||e},scale:function scale(t,r,i){gn.makeScale(t,r,i);this.applyMatrix4(gn);return this||e},lookAt:function lookAt(t){yn.lookAt(t);yn.updateMatrix();this.applyMatrix4(yn.matrix);return this||e},center:function center(){this.computeBoundingBox();(this||e).boundingBox.getCenter(xn).negate();this.translate(xn.x,xn.y,xn.z);return this||e},setFromObject:function setFromObject(t){var r=t.geometry;if(t.isPoints||t.isLine){var i=new Float32BufferAttribute(3*r.vertices.length,3);var n=new Float32BufferAttribute(3*r.colors.length,3);this.setAttribute("position",i.copyVector3sArray(r.vertices));this.setAttribute("color",n.copyColorsArray(r.colors));if(r.lineDistances&&r.lineDistances.length===r.vertices.length){var a=new Float32BufferAttribute(r.lineDistances.length,1);this.setAttribute("lineDistance",a.copyArray(r.lineDistances));}null!==r.boundingSphere&&((this||e).boundingSphere=r.boundingSphere.clone());null!==r.boundingBox&&((this||e).boundingBox=r.boundingBox.clone());}else t.isMesh&&r&&r.isGeometry&&this.fromGeometry(r);return this||e},setFromPoints:function setFromPoints(t){var r=[];for(var i=0,n=t.length;i<n;i++){var a=t[i];r.push(a.x,a.y,a.z||0);}this.setAttribute("position",new Float32BufferAttribute(r,3));return this||e},updateFromObject:function updateFromObject(t){var r=t.geometry;if(t.isMesh){var i=r.__directGeometry;if(true===r.elementsNeedUpdate){i=void 0;r.elementsNeedUpdate=false;}if(void 0===i)return this.fromGeometry(r);i.verticesNeedUpdate=r.verticesNeedUpdate;i.normalsNeedUpdate=r.normalsNeedUpdate;i.colorsNeedUpdate=r.colorsNeedUpdate;i.uvsNeedUpdate=r.uvsNeedUpdate;i.groupsNeedUpdate=r.groupsNeedUpdate;r.verticesNeedUpdate=false;r.normalsNeedUpdate=false;r.colorsNeedUpdate=false;r.uvsNeedUpdate=false;r.groupsNeedUpdate=false;r=i;}if(true===r.verticesNeedUpdate){var n=(this||e).attributes.position;if(void 0!==n){n.copyVector3sArray(r.vertices);n.needsUpdate=true;}r.verticesNeedUpdate=false;}if(true===r.normalsNeedUpdate){var a=(this||e).attributes.normal;if(void 0!==a){a.copyVector3sArray(r.normals);a.needsUpdate=true;}r.normalsNeedUpdate=false;}if(true===r.colorsNeedUpdate){var o=(this||e).attributes.color;if(void 0!==o){o.copyColorsArray(r.colors);o.needsUpdate=true;}r.colorsNeedUpdate=false;}if(r.uvsNeedUpdate){var s=(this||e).attributes.uv;if(void 0!==s){s.copyVector2sArray(r.uvs);s.needsUpdate=true;}r.uvsNeedUpdate=false;}if(r.lineDistancesNeedUpdate){var l=(this||e).attributes.lineDistance;if(void 0!==l){l.copyArray(r.lineDistances);l.needsUpdate=true;}r.lineDistancesNeedUpdate=false;}if(r.groupsNeedUpdate){r.computeGroups(t.geometry);(this||e).groups=r.groups;r.groupsNeedUpdate=false;}return this||e},fromGeometry:function fromGeometry(e){e.__directGeometry=(new mn).fromGeometry(e);return this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function fromDirectGeometry(t){var r=new Float32Array(3*t.vertices.length);this.setAttribute("position",new BufferAttribute(r,3).copyVector3sArray(t.vertices));if(t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.setAttribute("normal",new BufferAttribute(i,3).copyVector3sArray(t.normals));}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.setAttribute("color",new BufferAttribute(n,3).copyColorsArray(t.colors));}if(t.uvs.length>0){var a=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new BufferAttribute(a,2).copyVector2sArray(t.uvs));}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new BufferAttribute(o,2).copyVector2sArray(t.uvs2));}(this||e).groups=t.groups;for(var s in t.morphTargets){var l=[];var u=t.morphTargets[s];for(var c=0,h=u.length;c<h;c++){var d=u[c];var f=new Float32BufferAttribute(3*d.data.length,3);f.name=d.name;l.push(f.copyVector3sArray(d.data));}(this||e).morphAttributes[s]=l;}if(t.skinIndices.length>0){var p=new Float32BufferAttribute(4*t.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(t.skinIndices));}if(t.skinWeights.length>0){var m=new Float32BufferAttribute(4*t.skinWeights.length,4);this.setAttribute("skinWeight",m.copyVector4sArray(t.skinWeights));}null!==t.boundingSphere&&((this||e).boundingSphere=t.boundingSphere.clone());null!==t.boundingBox&&((this||e).boundingBox=t.boundingBox.clone());return this||e},computeBoundingBox:function computeBoundingBox(){null===(this||e).boundingBox&&((this||e).boundingBox=new Zr);var t=(this||e).attributes.position;var r=(this||e).morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this||e);(this||e).boundingBox.set(new Xr(-Infinity,-Infinity,-Infinity),new Xr(+Infinity,+Infinity,+Infinity));}else {if(void 0!==t){(this||e).boundingBox.setFromBufferAttribute(t);if(r)for(var i=0,n=r.length;i<n;i++){var a=r[i];bn.setFromBufferAttribute(a);if((this||e).morphTargetsRelative){Mn.addVectors((this||e).boundingBox.min,bn.min);(this||e).boundingBox.expandByPoint(Mn);Mn.addVectors((this||e).boundingBox.max,bn.max);(this||e).boundingBox.expandByPoint(Mn);}else {(this||e).boundingBox.expandByPoint(bn.min);(this||e).boundingBox.expandByPoint(bn.max);}}}else (this||e).boundingBox.makeEmpty();(isNaN((this||e).boundingBox.min.x)||isNaN((this||e).boundingBox.min.y)||isNaN((this||e).boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this||e);}},computeBoundingSphere:function computeBoundingSphere(){null===(this||e).boundingSphere&&((this||e).boundingSphere=new hi);var t=(this||e).attributes.position;var r=(this||e).morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this||e);(this||e).boundingSphere.set(new Xr,Infinity);}else if(t){var i=(this||e).boundingSphere.center;bn.setFromBufferAttribute(t);if(r)for(var n=0,a=r.length;n<a;n++){var o=r[n];_n.setFromBufferAttribute(o);if((this||e).morphTargetsRelative){Mn.addVectors(bn.min,_n.min);bn.expandByPoint(Mn);Mn.addVectors(bn.max,_n.max);bn.expandByPoint(Mn);}else {bn.expandByPoint(_n.min);bn.expandByPoint(_n.max);}}bn.getCenter(i);var s=0;for(var l=0,u=t.count;l<u;l++){Mn.fromBufferAttribute(t,l);s=Math.max(s,i.distanceToSquared(Mn));}if(r)for(var c=0,h=r.length;c<h;c++){var d=r[c];var f=(this||e).morphTargetsRelative;for(var p=0,m=d.count;p<m;p++){Mn.fromBufferAttribute(d,p);if(f){xn.fromBufferAttribute(t,p);Mn.add(xn);}s=Math.max(s,i.distanceToSquared(Mn));}}(this||e).boundingSphere.radius=Math.sqrt(s);isNaN((this||e).boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this||e);}},computeFaceNormals:function computeFaceNormals(){},computeVertexNormals:function computeVertexNormals(){var t=(this||e).index;var r=this.getAttribute("position");if(void 0!==r){var i=this.getAttribute("normal");if(void 0===i){i=new BufferAttribute(new Float32Array(3*r.count),3);this.setAttribute("normal",i);}else for(var n=0,a=i.count;n<a;n++)i.setXYZ(n,0,0,0);var o=new Xr,s=new Xr,l=new Xr;var u=new Xr,c=new Xr,h=new Xr;var d=new Xr,f=new Xr;if(t)for(var p=0,m=t.count;p<m;p+=3){var g=t.getX(p+0);var y=t.getX(p+1);var x=t.getX(p+2);o.fromBufferAttribute(r,g);s.fromBufferAttribute(r,y);l.fromBufferAttribute(r,x);d.subVectors(l,s);f.subVectors(o,s);d.cross(f);u.fromBufferAttribute(i,g);c.fromBufferAttribute(i,y);h.fromBufferAttribute(i,x);u.add(d);c.add(d);h.add(d);i.setXYZ(g,u.x,u.y,u.z);i.setXYZ(y,c.x,c.y,c.z);i.setXYZ(x,h.x,h.y,h.z);}else for(var b=0,_=r.count;b<_;b+=3){o.fromBufferAttribute(r,b+0);s.fromBufferAttribute(r,b+1);l.fromBufferAttribute(r,b+2);d.subVectors(l,s);f.subVectors(o,s);d.cross(f);i.setXYZ(b+0,d.x,d.y,d.z);i.setXYZ(b+1,d.x,d.y,d.z);i.setXYZ(b+2,d.x,d.y,d.z);}this.normalizeNormals();i.needsUpdate=true;}},merge:function merge(t,r){if(t&&t.isBufferGeometry){if(void 0===r){r=0;console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. "+"Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.");}var i=(this||e).attributes;for(var n in i)if(void 0!==t.attributes[n]){var a=i[n];var o=a.array;var s=t.attributes[n];var l=s.array;var u=s.itemSize*r;var c=Math.min(l.length,o.length-u);for(var h=0,d=u;h<c;h++,d++)o[d]=l[h];}return this||e}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);},normalizeNormals:function normalizeNormals(){var t=(this||e).attributes.normal;for(var r=0,i=t.count;r<i;r++){Mn.fromBufferAttribute(t,r);Mn.normalize();t.setXYZ(r,Mn.x,Mn.y,Mn.z);}},toNonIndexed:function toNonIndexed(){function convertBufferAttribute(e,t){var r=e.array;var i=e.itemSize;var n=e.normalized;var a=new r.constructor(t.length*i);var o=0,s=0;for(var l=0,u=t.length;l<u;l++){o=t[l]*i;for(var c=0;c<i;c++)a[s++]=r[o++];}return new BufferAttribute(a,i,n)}if(null===(this||e).index){console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.");return this||e}var t=new BufferGeometry;var r=(this||e).index.array;var i=(this||e).attributes;for(var n in i){var a=i[n];var o=convertBufferAttribute(a,r);t.setAttribute(n,o);}var s=(this||e).morphAttributes;for(var l in s){var u=[];var c=s[l];for(var h=0,d=c.length;h<d;h++){var f=c[h];var p=convertBufferAttribute(f,r);u.push(p);}t.morphAttributes[l]=u;}t.morphTargetsRelative=(this||e).morphTargetsRelative;var m=(this||e).groups;for(var g=0,y=m.length;g<y;g++){var x=m[g];t.addGroup(x.start,x.count,x.materialIndex);}return t},toJSON:function toJSON(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};t.uuid=(this||e).uuid;t.type=(this||e).type;""!==(this||e).name&&(t.name=(this||e).name);Object.keys((this||e).userData).length>0&&(t.userData=(this||e).userData);if(void 0!==(this||e).parameters){var r=(this||e).parameters;for(var i in r)void 0!==r[i]&&(t[i]=r[i]);return t}t.data={attributes:{}};var n=(this||e).index;null!==n&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});var a=(this||e).attributes;for(var o in a){var s=a[o];var l=s.toJSON(t.data);""!==s.name&&(l.name=s.name);t.data.attributes[o]=l;}var u={};var c=false;for(var h in (this||e).morphAttributes){var d=(this||e).morphAttributes[h];var f=[];for(var p=0,m=d.length;p<m;p++){var g=d[p];var y=g.toJSON(t.data);""!==g.name&&(y.name=g.name);f.push(y);}if(f.length>0){u[h]=f;c=true;}}if(c){t.data.morphAttributes=u;t.data.morphTargetsRelative=(this||e).morphTargetsRelative;}var x=(this||e).groups;x.length>0&&(t.data.groups=JSON.parse(JSON.stringify(x)));var b=(this||e).boundingSphere;null!==b&&(t.data.boundingSphere={center:b.center.toArray(),radius:b.radius});return t},clone:function clone(){return (new BufferGeometry).copy(this||e)},copy:function copy(t){(this||e).index=null;(this||e).attributes={};(this||e).morphAttributes={};(this||e).groups=[];(this||e).boundingBox=null;(this||e).boundingSphere=null;var r={};(this||e).name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone(r));var n=t.attributes;for(var a in n){var o=n[a];this.setAttribute(a,o.clone(r));}var s=t.morphAttributes;for(var l in s){var u=[];var c=s[l];for(var h=0,d=c.length;h<d;h++)u.push(c[h].clone(r));(this||e).morphAttributes[l]=u;}(this||e).morphTargetsRelative=t.morphTargetsRelative;var f=t.groups;for(var p=0,m=f.length;p<m;p++){var g=f[p];this.addGroup(g.start,g.count,g.materialIndex);}var y=t.boundingBox;null!==y&&((this||e).boundingBox=y.clone());var x=t.boundingSphere;null!==x&&((this||e).boundingSphere=x.clone());(this||e).drawRange.start=t.drawRange.start;(this||e).drawRange.count=t.drawRange.count;(this||e).userData=t.userData;return this||e},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}});var wn=new bi;var Sn=new xi;var Tn=new hi;var An=new Xr;var Ln=new Xr;var En=new Xr;var Cn=new Xr;var Pn=new Xr;var Rn=new Xr;var Bn=new Xr;var In=new Xr;var Dn=new Xr;var Gn=new zr;var On=new zr;var Nn=new zr;var Fn=new Xr;var Un=new Xr;function Mesh(t,r){Object3D.call(this||e);(this||e).type="Mesh";(this||e).geometry=void 0!==t?t:new BufferGeometry;(this||e).material=void 0!==r?r:new MeshBasicMaterial;this.updateMorphTargets();}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:true,copy:function copy(t){Object3D.prototype.copy.call(this||e,t);void 0!==t.morphTargetInfluences&&((this||e).morphTargetInfluences=t.morphTargetInfluences.slice());void 0!==t.morphTargetDictionary&&((this||e).morphTargetDictionary=Object.assign({},t.morphTargetDictionary));(this||e).material=t.material;(this||e).geometry=t.geometry;return this||e},updateMorphTargets:function updateMorphTargets(){var t=(this||e).geometry;if(t.isBufferGeometry){var r=t.morphAttributes;var i=Object.keys(r);if(i.length>0){var n=r[i[0]];if(void 0!==n){(this||e).morphTargetInfluences=[];(this||e).morphTargetDictionary={};for(var a=0,o=n.length;a<o;a++){var s=n[a].name||String(a);(this||e).morphTargetInfluences.push(0);(this||e).morphTargetDictionary[s]=a;}}}}else {var l=t.morphTargets;void 0!==l&&l.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");}},raycast:function raycast(t,r){var i=(this||e).geometry;var n=(this||e).material;var a=(this||e).matrixWorld;if(void 0!==n){null===i.boundingSphere&&i.computeBoundingSphere();Tn.copy(i.boundingSphere);Tn.applyMatrix4(a);if(false!==t.ray.intersectsSphere(Tn)){wn.getInverse(a);Sn.copy(t.ray).applyMatrix4(wn);if(null===i.boundingBox||false!==Sn.intersectsBox(i.boundingBox)){var o;if(i.isBufferGeometry){var s=i.index;var l=i.attributes.position;var u=i.morphAttributes.position;var c=i.morphTargetsRelative;var h=i.attributes.uv;var d=i.attributes.uv2;var f=i.groups;var p=i.drawRange;if(null!==s)if(Array.isArray(n))for(var m=0,g=f.length;m<g;m++){var y=f[m];var x=n[y.materialIndex];var b=Math.max(y.start,p.start);var _=Math.min(y.start+y.count,p.start+p.count);for(var M=b,w=_;M<w;M+=3){var S=s.getX(M);var T=s.getX(M+1);var A=s.getX(M+2);o=checkBufferGeometryIntersection(this||e,x,t,Sn,l,u,c,h,d,S,T,A);if(o){o.faceIndex=Math.floor(M/3);o.face.materialIndex=y.materialIndex;r.push(o);}}}else {var L=Math.max(0,p.start);var E=Math.min(s.count,p.start+p.count);for(var C=L,P=E;C<P;C+=3){var R=s.getX(C);var B=s.getX(C+1);var I=s.getX(C+2);o=checkBufferGeometryIntersection(this||e,n,t,Sn,l,u,c,h,d,R,B,I);if(o){o.faceIndex=Math.floor(C/3);r.push(o);}}}else if(void 0!==l)if(Array.isArray(n))for(var D=0,G=f.length;D<G;D++){var O=f[D];var N=n[O.materialIndex];var F=Math.max(O.start,p.start);var U=Math.min(O.start+O.count,p.start+p.count);for(var z=F,H=U;z<H;z+=3){var V=z;var k=z+1;var W=z+2;o=checkBufferGeometryIntersection(this||e,N,t,Sn,l,u,c,h,d,V,k,W);if(o){o.faceIndex=Math.floor(z/3);o.face.materialIndex=O.materialIndex;r.push(o);}}}else {var j=Math.max(0,p.start);var q=Math.min(l.count,p.start+p.count);for(var X=j,Y=q;X<Y;X+=3){var J=X;var Z=X+1;var Q=X+2;o=checkBufferGeometryIntersection(this||e,n,t,Sn,l,u,c,h,d,J,Z,Q);if(o){o.faceIndex=Math.floor(X/3);r.push(o);}}}}else if(i.isGeometry){var K=Array.isArray(n);var $=i.vertices;var ee=i.faces;var te;var re=i.faceVertexUvs[0];re.length>0&&(te=re);for(var ie=0,ne=ee.length;ie<ne;ie++){var ae=ee[ie];var oe=K?n[ae.materialIndex]:n;if(void 0!==oe){var se=$[ae.a];var le=$[ae.b];var ue=$[ae.c];o=checkIntersection(this||e,oe,t,Sn,se,le,ue,Fn);if(o){if(te&&te[ie]){var ce=te[ie];Gn.copy(ce[0]);On.copy(ce[1]);Nn.copy(ce[2]);o.uv=on.getUV(Fn,se,le,ue,Gn,On,Nn,new zr);}o.face=ae;o.faceIndex=ie;r.push(o);}}}}}}}}});function checkIntersection(e,t,r,i,n,a,o,s){var l;l=t.side===p?i.intersectTriangle(o,a,n,true,s):i.intersectTriangle(n,a,o,t.side!==m,s);if(null===l)return null;Un.copy(s);Un.applyMatrix4(e.matrixWorld);var u=r.ray.origin.distanceTo(Un);return u<r.near||u>r.far?null:{distance:u,point:Un.clone(),object:e}}function checkBufferGeometryIntersection(e,t,r,i,n,a,o,s,l,u,c,h){An.fromBufferAttribute(n,u);Ln.fromBufferAttribute(n,c);En.fromBufferAttribute(n,h);var d=e.morphTargetInfluences;if(t.morphTargets&&a&&d){Bn.set(0,0,0);In.set(0,0,0);Dn.set(0,0,0);for(var f=0,p=a.length;f<p;f++){var m=d[f];var g=a[f];if(0!==m){Cn.fromBufferAttribute(g,u);Pn.fromBufferAttribute(g,c);Rn.fromBufferAttribute(g,h);if(o){Bn.addScaledVector(Cn,m);In.addScaledVector(Pn,m);Dn.addScaledVector(Rn,m);}else {Bn.addScaledVector(Cn.sub(An),m);In.addScaledVector(Pn.sub(Ln),m);Dn.addScaledVector(Rn.sub(En),m);}}}An.add(Bn);Ln.add(In);En.add(Dn);}if(e.isSkinnedMesh){e.boneTransform(u,An);e.boneTransform(c,Ln);e.boneTransform(h,En);}var y=checkIntersection(e,t,r,i,An,Ln,En,Fn);if(y){if(s){Gn.fromBufferAttribute(s,u);On.fromBufferAttribute(s,c);Nn.fromBufferAttribute(s,h);y.uv=on.getUV(Fn,An,Ln,En,Gn,On,Nn,new zr);}if(l){Gn.fromBufferAttribute(l,u);On.fromBufferAttribute(l,c);Nn.fromBufferAttribute(l,h);y.uv2=on.getUV(Fn,An,Ln,En,Gn,On,Nn,new zr);}var x=new hn(u,c,h);on.getNormal(An,Ln,En,x.normal);y.face=x;}return y}var zn=function(t){_inheritsLoose(BoxBufferGeometry,t);function BoxBufferGeometry(r,i,n,a,o,s){var l;void 0===r&&(r=1);void 0===i&&(i=1);void 0===n&&(n=1);void 0===a&&(a=1);void 0===o&&(o=1);void 0===s&&(s=1);l=t.call(this||e)||this||e;l.type="BoxBufferGeometry";l.parameters={width:r,height:i,depth:n,widthSegments:a,heightSegments:o,depthSegments:s};var u=_assertThisInitialized(l);a=Math.floor(a);o=Math.floor(o);s=Math.floor(s);var c=[];var h=[];var d=[];var f=[];var p=0;var m=0;buildPlane("z","y","x",-1,-1,n,i,r,s,o,0);buildPlane("z","y","x",1,-1,n,i,-r,s,o,1);buildPlane("x","z","y",1,1,r,n,i,a,s,2);buildPlane("x","z","y",1,-1,r,n,-i,a,s,3);buildPlane("x","y","z",1,-1,r,i,n,a,o,4);buildPlane("x","y","z",-1,-1,r,i,-n,a,o,5);l.setIndex(c);l.setAttribute("position",new Float32BufferAttribute(h,3));l.setAttribute("normal",new Float32BufferAttribute(d,3));l.setAttribute("uv",new Float32BufferAttribute(f,2));function buildPlane(e,t,r,i,n,a,o,s,l,g,y){var x=a/l;var b=o/g;var _=a/2;var M=o/2;var w=s/2;var S=l+1;var T=g+1;var A=0;var L=0;var E=new Xr;for(var C=0;C<T;C++){var P=C*b-M;for(var R=0;R<S;R++){var B=R*x-_;E[e]=B*i;E[t]=P*n;E[r]=w;h.push(E.x,E.y,E.z);E[e]=0;E[t]=0;E[r]=s>0?1:-1;d.push(E.x,E.y,E.z);f.push(R/l);f.push(1-C/g);A+=1;}}for(var I=0;I<g;I++)for(var D=0;D<l;D++){var G=p+D+S*I;var O=p+D+S*(I+1);var N=p+(D+1)+S*(I+1);var F=p+(D+1)+S*I;c.push(G,O,F);c.push(O,N,F);L+=6;}u.addGroup(m,L,y);m+=L;p+=A;}return l}return BoxBufferGeometry}(BufferGeometry);function cloneUniforms(e){var t={};for(var r in e){t[r]={};for(var i in e[r]){var n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n;}}return t}function mergeUniforms(e){var t={};for(var r=0;r<e.length;r++){var i=cloneUniforms(e[r]);for(var n in i)t[n]=i[n];}return t}var Hn={clone:cloneUniforms,merge:mergeUniforms};var Vn="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";var kn="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function ShaderMaterial(t){Material.call(this||e);(this||e).type="ShaderMaterial";(this||e).defines={};(this||e).uniforms={};(this||e).vertexShader=Vn;(this||e).fragmentShader=kn;(this||e).linewidth=1;(this||e).wireframe=false;(this||e).wireframeLinewidth=1;(this||e).fog=false;(this||e).lights=false;(this||e).clipping=false;(this||e).skinning=false;(this||e).morphTargets=false;(this||e).morphNormals=false;(this||e).extensions={derivatives:false,fragDepth:false,drawBuffers:false,shaderTextureLOD:false};(this||e).defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};(this||e).index0AttributeName=void 0;(this||e).uniformsNeedUpdate=false;(this||e).glslVersion=null;if(void 0!==t){void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.");this.setValues(t);}}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=true;ShaderMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).fragmentShader=t.fragmentShader;(this||e).vertexShader=t.vertexShader;(this||e).uniforms=cloneUniforms(t.uniforms);(this||e).defines=Object.assign({},t.defines);(this||e).wireframe=t.wireframe;(this||e).wireframeLinewidth=t.wireframeLinewidth;(this||e).lights=t.lights;(this||e).clipping=t.clipping;(this||e).skinning=t.skinning;(this||e).morphTargets=t.morphTargets;(this||e).morphNormals=t.morphNormals;(this||e).extensions=Object.assign({},t.extensions);(this||e).glslVersion=t.glslVersion;return this||e};ShaderMaterial.prototype.toJSON=function(t){var r=Material.prototype.toJSON.call(this||e,t);r.glslVersion=(this||e).glslVersion;r.uniforms={};for(var i in (this||e).uniforms){var n=(this||e).uniforms[i];var a=n.value;a&&a.isTexture?r.uniforms[i]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?r.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?r.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?r.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?r.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?r.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?r.uniforms[i]={type:"m4",value:a.toArray()}:r.uniforms[i]={value:a};}Object.keys((this||e).defines).length>0&&(r.defines=(this||e).defines);r.vertexShader=(this||e).vertexShader;r.fragmentShader=(this||e).fragmentShader;var o={};for(var s in (this||e).extensions)true===(this||e).extensions[s]&&(o[s]=true);Object.keys(o).length>0&&(r.extensions=o);return r};function Camera(){Object3D.call(this||e);(this||e).type="Camera";(this||e).matrixWorldInverse=new bi;(this||e).projectionMatrix=new bi;(this||e).projectionMatrixInverse=new bi;}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:true,copy:function copy(t,r){Object3D.prototype.copy.call(this||e,t,r);(this||e).matrixWorldInverse.copy(t.matrixWorldInverse);(this||e).projectionMatrix.copy(t.projectionMatrix);(this||e).projectionMatrixInverse.copy(t.projectionMatrixInverse);return this||e},getWorldDirection:function getWorldDirection(t){if(void 0===t){console.warn("THREE.Camera: .getWorldDirection() target is now required");t=new Xr;}this.updateMatrixWorld(true);var r=(this||e).matrixWorld.elements;return t.set(-r[8],-r[9],-r[10]).normalize()},updateMatrixWorld:function updateMatrixWorld(t){Object3D.prototype.updateMatrixWorld.call(this||e,t);(this||e).matrixWorldInverse.getInverse((this||e).matrixWorld);},updateWorldMatrix:function updateWorldMatrix(t,r){Object3D.prototype.updateWorldMatrix.call(this||e,t,r);(this||e).matrixWorldInverse.getInverse((this||e).matrixWorld);},clone:function clone(){return (new(this||e).constructor).copy(this||e)}});function PerspectiveCamera(t,r,i,n){Camera.call(this||e);(this||e).type="PerspectiveCamera";(this||e).fov=void 0!==t?t:50;(this||e).zoom=1;(this||e).near=void 0!==i?i:.1;(this||e).far=void 0!==n?n:2e3;(this||e).focus=10;(this||e).aspect=void 0!==r?r:1;(this||e).view=null;(this||e).filmGauge=35;(this||e).filmOffset=0;this.updateProjectionMatrix();}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:true,copy:function copy(t,r){Camera.prototype.copy.call(this||e,t,r);(this||e).fov=t.fov;(this||e).zoom=t.zoom;(this||e).near=t.near;(this||e).far=t.far;(this||e).focus=t.focus;(this||e).aspect=t.aspect;(this||e).view=null===t.view?null:Object.assign({},t.view);(this||e).filmGauge=t.filmGauge;(this||e).filmOffset=t.filmOffset;return this||e},setFocalLength:function setFocalLength(t){var r=.5*this.getFilmHeight()/t;(this||e).fov=2*Ur.RAD2DEG*Math.atan(r);this.updateProjectionMatrix();},getFocalLength:function getFocalLength(){var t=Math.tan(.5*Ur.DEG2RAD*(this||e).fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function getEffectiveFOV(){return 2*Ur.RAD2DEG*Math.atan(Math.tan(.5*Ur.DEG2RAD*(this||e).fov)/(this||e).zoom)},getFilmWidth:function getFilmWidth(){return (this||e).filmGauge*Math.min((this||e).aspect,1)},getFilmHeight:function getFilmHeight(){return (this||e).filmGauge/Math.max((this||e).aspect,1)},setViewOffset:function setViewOffset(t,r,i,n,a,o){(this||e).aspect=t/r;null===(this||e).view&&((this||e).view={enabled:true,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||e).view.enabled=true;(this||e).view.fullWidth=t;(this||e).view.fullHeight=r;(this||e).view.offsetX=i;(this||e).view.offsetY=n;(this||e).view.width=a;(this||e).view.height=o;this.updateProjectionMatrix();},clearViewOffset:function clearViewOffset(){null!==(this||e).view&&((this||e).view.enabled=false);this.updateProjectionMatrix();},updateProjectionMatrix:function updateProjectionMatrix(){var t=(this||e).near;var r=t*Math.tan(.5*Ur.DEG2RAD*(this||e).fov)/(this||e).zoom;var i=2*r;var n=(this||e).aspect*i;var a=-.5*n;var o=(this||e).view;if(null!==(this||e).view&&(this||e).view.enabled){var s=o.fullWidth,l=o.fullHeight;a+=o.offsetX*n/s;r-=o.offsetY*i/l;n*=o.width/s;i*=o.height/l;}var u=(this||e).filmOffset;0!==u&&(a+=t*u/this.getFilmWidth());(this||e).projectionMatrix.makePerspective(a,a+n,r,r-i,t,(this||e).far);(this||e).projectionMatrixInverse.getInverse((this||e).projectionMatrix);},toJSON:function toJSON(t){var r=Object3D.prototype.toJSON.call(this||e,t);r.object.fov=(this||e).fov;r.object.zoom=(this||e).zoom;r.object.near=(this||e).near;r.object.far=(this||e).far;r.object.focus=(this||e).focus;r.object.aspect=(this||e).aspect;null!==(this||e).view&&(r.object.view=Object.assign({},(this||e).view));r.object.filmGauge=(this||e).filmGauge;r.object.filmOffset=(this||e).filmOffset;return r}});var Wn=90,jn=1;function CubeCamera(t,r,i){Object3D.call(this||e);(this||e).type="CubeCamera";if(true===i.isWebGLCubeRenderTarget){(this||e).renderTarget=i;var n=new PerspectiveCamera(Wn,jn,t,r);n.layers=(this||e).layers;n.up.set(0,-1,0);n.lookAt(new Xr(1,0,0));this.add(n);var a=new PerspectiveCamera(Wn,jn,t,r);a.layers=(this||e).layers;a.up.set(0,-1,0);a.lookAt(new Xr(-1,0,0));this.add(a);var o=new PerspectiveCamera(Wn,jn,t,r);o.layers=(this||e).layers;o.up.set(0,0,1);o.lookAt(new Xr(0,1,0));this.add(o);var s=new PerspectiveCamera(Wn,jn,t,r);s.layers=(this||e).layers;s.up.set(0,0,-1);s.lookAt(new Xr(0,-1,0));this.add(s);var l=new PerspectiveCamera(Wn,jn,t,r);l.layers=(this||e).layers;l.up.set(0,-1,0);l.lookAt(new Xr(0,0,1));this.add(l);var u=new PerspectiveCamera(Wn,jn,t,r);u.layers=(this||e).layers;u.up.set(0,-1,0);u.lookAt(new Xr(0,0,-1));this.add(u);(this||e).update=function(t,r){null===(this||e).parent&&this.updateMatrixWorld();var c=t.xr.enabled;var h=t.getRenderTarget();t.xr.enabled=false;var d=i.texture.generateMipmaps;i.texture.generateMipmaps=false;t.setRenderTarget(i,0);t.render(r,n);t.setRenderTarget(i,1);t.render(r,a);t.setRenderTarget(i,2);t.render(r,o);t.setRenderTarget(i,3);t.render(r,s);t.setRenderTarget(i,4);t.render(r,l);i.texture.generateMipmaps=d;t.setRenderTarget(i,5);t.render(r,u);t.setRenderTarget(h);t.xr.enabled=c;};(this||e).clear=function(e,t,r,n){var a=e.getRenderTarget();for(var o=0;o<6;o++){e.setRenderTarget(i,o);e.clear(t,r,n);}e.setRenderTarget(a);};}else console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function CubeTexture(t,r,i,n,a,o,s,l,u,c){t=void 0!==t?t:[];r=void 0!==r?r:ae;s=void 0!==s?s:Ne;Texture.call(this||e,t,r,i,n,a,o,s,l,u,c);(this||e).flipY=false;(this||e)._needsFlipEnvMap=true;}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=true;Object.defineProperty(CubeTexture.prototype,"images",{get:function get(){return (this||e).image},set:function set(t){(this||e).image=t;}});function WebGLCubeRenderTarget(t,r,i){if(Number.isInteger(r)){console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )");r=i;}WebGLRenderTarget.call(this||e,t,t,r);r=r||{};(this||e).texture=new CubeTexture(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding);(this||e).texture._needsFlipEnvMap=false;}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=true;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(t,r){(this||e).texture.type=r.type;(this||e).texture.format=Fe;(this||e).texture.encoding=r.encoding;(this||e).texture.generateMipmaps=r.generateMipmaps;(this||e).texture.minFilter=r.minFilter;(this||e).texture.magFilter=r.magFilter;var i={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"};var n=new zn(5,5,5);var a=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:p,blending:x});a.uniforms.tEquirect.value=r;var o=new Mesh(n,a);var s=r.minFilter;r.minFilter===Me&&(r.minFilter=xe);var l=new CubeCamera(1,10,this||e);l.update(t,o);r.minFilter=s;o.geometry.dispose();o.material.dispose();return this||e};function DataTexture(t,r,i,n,a,o,s,l,u,c,h,d){Texture.call(this||e,null,o,s,l,u,c,n,a,h,d);(this||e).image={data:t||null,width:r||1,height:i||1};(this||e).magFilter=void 0!==u?u:pe;(this||e).minFilter=void 0!==c?c:pe;(this||e).generateMipmaps=false;(this||e).flipY=false;(this||e).unpackAlignment=1;(this||e).needsUpdate=true;}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=true;var qn=new hi;var Xn=new Xr;var Yn=function(){function Frustum(t,r,i,n,a,o){(this||e).planes=[void 0!==t?t:new Yi,void 0!==r?r:new Yi,void 0!==i?i:new Yi,void 0!==n?n:new Yi,void 0!==a?a:new Yi,void 0!==o?o:new Yi];}var t=Frustum.prototype;t.set=function set(t,r,i,n,a,o){var s=(this||e).planes;s[0].copy(t);s[1].copy(r);s[2].copy(i);s[3].copy(n);s[4].copy(a);s[5].copy(o);return this||e};t.clone=function clone(){return (new(this||e).constructor).copy(this||e)};t.copy=function copy(t){var r=(this||e).planes;for(var i=0;i<6;i++)r[i].copy(t.planes[i]);return this||e};t.setFromProjectionMatrix=function setFromProjectionMatrix(t){var r=(this||e).planes;var i=t.elements;var n=i[0],a=i[1],o=i[2],s=i[3];var l=i[4],u=i[5],c=i[6],h=i[7];var d=i[8],f=i[9],p=i[10],m=i[11];var g=i[12],y=i[13],x=i[14],b=i[15];r[0].setComponents(s-n,h-l,m-d,b-g).normalize();r[1].setComponents(s+n,h+l,m+d,b+g).normalize();r[2].setComponents(s+a,h+u,m+f,b+y).normalize();r[3].setComponents(s-a,h-u,m-f,b-y).normalize();r[4].setComponents(s-o,h-c,m-p,b-x).normalize();r[5].setComponents(s+o,h+c,m+p,b+x).normalize();return this||e};t.intersectsObject=function intersectsObject(e){var t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere();qn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld);return this.intersectsSphere(qn)};t.intersectsSprite=function intersectsSprite(e){qn.center.set(0,0,0);qn.radius=.7071067811865476;qn.applyMatrix4(e.matrixWorld);return this.intersectsSphere(qn)};t.intersectsSphere=function intersectsSphere(t){var r=(this||e).planes;var i=t.center;var n=-t.radius;for(var a=0;a<6;a++){var o=r[a].distanceToPoint(i);if(o<n)return false}return true};t.intersectsBox=function intersectsBox(t){var r=(this||e).planes;for(var i=0;i<6;i++){var n=r[i];Xn.x=n.normal.x>0?t.max.x:t.min.x;Xn.y=n.normal.y>0?t.max.y:t.min.y;Xn.z=n.normal.z>0?t.max.z:t.min.z;if(n.distanceToPoint(Xn)<0)return false}return true};t.containsPoint=function containsPoint(t){var r=(this||e).planes;for(var i=0;i<6;i++)if(r[i].distanceToPoint(t)<0)return false;return true};return Frustum}();function WebGLAnimation(){var e=null;var t=false;var r=null;var i=null;function onAnimationFrame(t,n){r(t,n);i=e.requestAnimationFrame(onAnimationFrame);}return {start:function start(){if(true!==t&&null!==r){i=e.requestAnimationFrame(onAnimationFrame);t=true;}},stop:function stop(){e.cancelAnimationFrame(i);t=false;},setAnimationLoop:function setAnimationLoop(e){r=e;},setContext:function setContext(t){e=t;}}}function WebGLAttributes(e,t){var r=t.isWebGL2;var i=new WeakMap;function createBuffer(t,r){var i=t.array;var n=t.usage;var a=e.createBuffer();e.bindBuffer(r,a);e.bufferData(r,i,n);t.onUploadCallback();var o=5126;i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121);return {buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}function updateBuffer(t,i,n){var a=i.array;var o=i.updateRange;e.bindBuffer(n,t);if(-1===o.count)e.bufferSubData(n,0,a);else {r?e.bufferSubData(n,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(n,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count));o.count=-1;}}function get(e){e.isInterleavedBufferAttribute&&(e=e.data);return i.get(e)}function remove(t){t.isInterleavedBufferAttribute&&(t=t.data);var r=i.get(t);if(r){e.deleteBuffer(r.buffer);i.delete(t);}}function update(e,t){if(e.isGLBufferAttribute){var r=i.get(e);(!r||r.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version});}else {e.isInterleavedBufferAttribute&&(e=e.data);var n=i.get(e);if(void 0===n)i.set(e,createBuffer(e,t));else if(n.version<e.version){updateBuffer(n.buffer,e,t);n.version=e.version;}}}return {get:get,remove:remove,update:update}}var Jn=function(t){_inheritsLoose(PlaneBufferGeometry,t);function PlaneBufferGeometry(r,i,n,a){var o;o=t.call(this||e)||this||e;o.type="PlaneBufferGeometry";o.parameters={width:r,height:i,widthSegments:n,heightSegments:a};r=r||1;i=i||1;var s=r/2;var l=i/2;var u=Math.floor(n)||1;var c=Math.floor(a)||1;var h=u+1;var d=c+1;var f=r/u;var p=i/c;var m=[];var g=[];var y=[];var x=[];for(var b=0;b<d;b++){var _=b*p-l;for(var M=0;M<h;M++){var w=M*f-s;g.push(w,-_,0);y.push(0,0,1);x.push(M/u);x.push(1-b/c);}}for(var S=0;S<c;S++)for(var T=0;T<u;T++){var A=T+h*S;var L=T+h*(S+1);var E=T+1+h*(S+1);var C=T+1+h*S;m.push(A,L,C);m.push(L,E,C);}o.setIndex(m);o.setAttribute("position",new Float32BufferAttribute(g,3));o.setAttribute("normal",new Float32BufferAttribute(y,3));o.setAttribute("uv",new Float32BufferAttribute(x,2));return o}return PlaneBufferGeometry}(BufferGeometry);var Zn="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif";var Qn="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif";var Kn="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif";var $n="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif";var ea="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";var ta="vec3 transformed = vec3( position );";var ra="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif";var ia="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif";var na="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif";var aa="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif";var oa="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif";var sa="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif";var la="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif";var ua="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif";var ca="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";var ha="#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif";var da="#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif";var fa="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}";var pa="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif";var ma="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif";var va="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif";var ga="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif";var ya="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif";var xa="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif";var ba="gl_FragColor = linearToOutputTexel( gl_FragColor );";var _a="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}";var Ma="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif";var wa="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif";var Sa="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif";var Ta="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif";var Aa="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif";var La="#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif";var Ea="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif";var Ca="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif";var Pa="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif";var Ra="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}";var Ba="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif";var Ia="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";var Da="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif";var Ga="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif";var Oa="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif";var Na="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;";var Fa="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)";var Ua="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;";var za="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)";var Ha="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif";var Va="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}";var ka="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif";var Wa="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif";var ja="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif";var qa="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif";var Xa="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif";var Ya="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif";var Ja="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif";var Za="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif";var Qa="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif";var Ka="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif";var $a="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif";var eo="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif";var to="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";var ro="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif";var io="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";var no="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif";var ao="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;";var oo="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif";var so="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif";var lo="#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif";var uo="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif";var co="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif";var ho="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}";var fo="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif";var po="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;";var mo="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif";var vo="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif";var go="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif";var yo="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";var xo="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif";var bo="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif";var _o="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif";var Mo="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}";var wo="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif";var So="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif";var To="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif";var Ao="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif";var Lo="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif";var Eo="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";var Co="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif";var Po="#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }";var Ro="#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif";var Bo="#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif";var Io="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif";var Do="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif";var Go="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif";var Oo="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";var No="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif";var Fo="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif";var Uo="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";var zo="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}";var Ho="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}";var Vo="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}";var ko="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}";var Wo="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}";var jo="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}";var qo="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}";var Xo="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}";var Yo="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}";var Jo="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}";var Zo="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}";var Qo="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}";var Ko="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}";var $o="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}";var es="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}";var ts="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var rs="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}";var is="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}";var ns="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}";var as="#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var os="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}";var ss="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var ls="#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}";var us="#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var cs="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}";var hs="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}";var ds="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}";var fs="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}";var ps="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}";var ms="#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}";var vs="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}";var gs="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}";var ys={alphamap_fragment:Zn,alphamap_pars_fragment:Qn,alphatest_fragment:Kn,aomap_fragment:$n,aomap_pars_fragment:ea,begin_vertex:ta,beginnormal_vertex:ra,bsdfs:ia,bumpmap_pars_fragment:na,clipping_planes_fragment:aa,clipping_planes_pars_fragment:oa,clipping_planes_pars_vertex:sa,clipping_planes_vertex:la,color_fragment:ua,color_pars_fragment:ca,color_pars_vertex:ha,color_vertex:da,common:fa,cube_uv_reflection_fragment:pa,defaultnormal_vertex:ma,displacementmap_pars_vertex:va,displacementmap_vertex:ga,emissivemap_fragment:ya,emissivemap_pars_fragment:xa,encodings_fragment:ba,encodings_pars_fragment:_a,envmap_fragment:Ma,envmap_common_pars_fragment:wa,envmap_pars_fragment:Sa,envmap_pars_vertex:Ta,envmap_physical_pars_fragment:Oa,envmap_vertex:Aa,fog_vertex:La,fog_pars_vertex:Ea,fog_fragment:Ca,fog_pars_fragment:Pa,gradientmap_pars_fragment:Ra,lightmap_fragment:Ba,lightmap_pars_fragment:Ia,lights_lambert_vertex:Da,lights_pars_begin:Ga,lights_toon_fragment:Na,lights_toon_pars_fragment:Fa,lights_phong_fragment:Ua,lights_phong_pars_fragment:za,lights_physical_fragment:Ha,lights_physical_pars_fragment:Va,lights_fragment_begin:ka,lights_fragment_maps:Wa,lights_fragment_end:ja,logdepthbuf_fragment:qa,logdepthbuf_pars_fragment:Xa,logdepthbuf_pars_vertex:Ya,logdepthbuf_vertex:Ja,map_fragment:Za,map_pars_fragment:Qa,map_particle_fragment:Ka,map_particle_pars_fragment:$a,metalnessmap_fragment:eo,metalnessmap_pars_fragment:to,morphnormal_vertex:ro,morphtarget_pars_vertex:io,morphtarget_vertex:no,normal_fragment_begin:ao,normal_fragment_maps:oo,normalmap_pars_fragment:so,clearcoat_normal_fragment_begin:lo,clearcoat_normal_fragment_maps:uo,clearcoat_pars_fragment:co,packing:ho,premultiplied_alpha_fragment:fo,project_vertex:po,dithering_fragment:mo,dithering_pars_fragment:vo,roughnessmap_fragment:go,roughnessmap_pars_fragment:yo,shadowmap_pars_fragment:xo,shadowmap_pars_vertex:bo,shadowmap_vertex:_o,shadowmask_pars_fragment:Mo,skinbase_vertex:wo,skinning_pars_vertex:So,skinning_vertex:To,skinnormal_vertex:Ao,specularmap_fragment:Lo,specularmap_pars_fragment:Eo,tonemapping_fragment:Co,tonemapping_pars_fragment:Po,transmissionmap_fragment:Ro,transmissionmap_pars_fragment:Bo,uv_pars_fragment:Io,uv_pars_vertex:Do,uv_vertex:Go,uv2_pars_fragment:Oo,uv2_pars_vertex:No,uv2_vertex:Fo,worldpos_vertex:Uo,background_frag:zo,background_vert:Ho,cube_frag:Vo,cube_vert:ko,depth_frag:Wo,depth_vert:jo,distanceRGBA_frag:qo,distanceRGBA_vert:Xo,equirect_frag:Yo,equirect_vert:Jo,linedashed_frag:Zo,linedashed_vert:Qo,meshbasic_frag:Ko,meshbasic_vert:$o,meshlambert_frag:es,meshlambert_vert:ts,meshmatcap_frag:rs,meshmatcap_vert:is,meshtoon_frag:ns,meshtoon_vert:as,meshphong_frag:os,meshphong_vert:ss,meshphysical_frag:ls,meshphysical_vert:us,normal_frag:cs,normal_vert:hs,points_frag:ds,points_vert:fs,shadow_frag:ps,shadow_vert:ms,sprite_frag:vs,sprite_vert:gs};var xs={common:{diffuse:{value:new cn(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Hr},uv2Transform:{value:new Hr},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new zr(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new cn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new cn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Hr}},sprite:{diffuse:{value:new cn(15658734)},opacity:{value:1},center:{value:new zr(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Hr}}};var bs={basic:{uniforms:mergeUniforms([xs.common,xs.specularmap,xs.envmap,xs.aomap,xs.lightmap,xs.fog]),vertexShader:ys.meshbasic_vert,fragmentShader:ys.meshbasic_frag},lambert:{uniforms:mergeUniforms([xs.common,xs.specularmap,xs.envmap,xs.aomap,xs.lightmap,xs.emissivemap,xs.fog,xs.lights,{emissive:{value:new cn(0)}}]),vertexShader:ys.meshlambert_vert,fragmentShader:ys.meshlambert_frag},phong:{uniforms:mergeUniforms([xs.common,xs.specularmap,xs.envmap,xs.aomap,xs.lightmap,xs.emissivemap,xs.bumpmap,xs.normalmap,xs.displacementmap,xs.fog,xs.lights,{emissive:{value:new cn(0)},specular:{value:new cn(1118481)},shininess:{value:30}}]),vertexShader:ys.meshphong_vert,fragmentShader:ys.meshphong_frag},standard:{uniforms:mergeUniforms([xs.common,xs.envmap,xs.aomap,xs.lightmap,xs.emissivemap,xs.bumpmap,xs.normalmap,xs.displacementmap,xs.roughnessmap,xs.metalnessmap,xs.fog,xs.lights,{emissive:{value:new cn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ys.meshphysical_vert,fragmentShader:ys.meshphysical_frag},toon:{uniforms:mergeUniforms([xs.common,xs.aomap,xs.lightmap,xs.emissivemap,xs.bumpmap,xs.normalmap,xs.displacementmap,xs.gradientmap,xs.fog,xs.lights,{emissive:{value:new cn(0)}}]),vertexShader:ys.meshtoon_vert,fragmentShader:ys.meshtoon_frag},matcap:{uniforms:mergeUniforms([xs.common,xs.bumpmap,xs.normalmap,xs.displacementmap,xs.fog,{matcap:{value:null}}]),vertexShader:ys.meshmatcap_vert,fragmentShader:ys.meshmatcap_frag},points:{uniforms:mergeUniforms([xs.points,xs.fog]),vertexShader:ys.points_vert,fragmentShader:ys.points_frag},dashed:{uniforms:mergeUniforms([xs.common,xs.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ys.linedashed_vert,fragmentShader:ys.linedashed_frag},depth:{uniforms:mergeUniforms([xs.common,xs.displacementmap]),vertexShader:ys.depth_vert,fragmentShader:ys.depth_frag},normal:{uniforms:mergeUniforms([xs.common,xs.bumpmap,xs.normalmap,xs.displacementmap,{opacity:{value:1}}]),vertexShader:ys.normal_vert,fragmentShader:ys.normal_frag},sprite:{uniforms:mergeUniforms([xs.sprite,xs.fog]),vertexShader:ys.sprite_vert,fragmentShader:ys.sprite_frag},background:{uniforms:{uvTransform:{value:new Hr},t2D:{value:null}},vertexShader:ys.background_vert,fragmentShader:ys.background_frag},cube:{uniforms:mergeUniforms([xs.envmap,{opacity:{value:1}}]),vertexShader:ys.cube_vert,fragmentShader:ys.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ys.equirect_vert,fragmentShader:ys.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([xs.common,xs.displacementmap,{referencePosition:{value:new Xr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ys.distanceRGBA_vert,fragmentShader:ys.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([xs.lights,xs.fog,{color:{value:new cn(0)},opacity:{value:1}}]),vertexShader:ys.shadow_vert,fragmentShader:ys.shadow_frag}};bs.physical={uniforms:mergeUniforms([bs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new zr(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new cn(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:ys.meshphysical_vert,fragmentShader:ys.meshphysical_frag};function WebGLBackground(t,r,i,n,a){var o=new cn(0);var s=0;var l;var u;var c=null;var h=0;var d=null;function render(i,a,m,g){var y=true===a.isScene?a.background:null;y&&y.isTexture&&(y=r.get(y));var x=t.xr;var b=x.getSession&&x.getSession();b&&"additive"===b.environmentBlendMode&&(y=null);if(null===y)setClear(o,s);else if(y&&y.isColor){setClear(y,1);g=true;}(t.autoClear||g)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil);if(y&&(y.isCubeTexture||y.isWebGLCubeRenderTarget||y.mapping===ue)){if(void 0===u){u=new Mesh(new zn(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(bs.cube.uniforms),vertexShader:bs.cube.vertexShader,fragmentShader:bs.cube.fragmentShader,side:p,depthTest:false,depthWrite:false,fog:false}));u.geometry.deleteAttribute("normal");u.geometry.deleteAttribute("uv");u.onBeforeRender=function(t,r,i){(this||e).matrixWorld.copyPosition(i.matrixWorld);};Object.defineProperty(u.material,"envMap",{get:function get(){return (this||e).uniforms.envMap.value}});n.update(u);}y.isWebGLCubeRenderTarget&&(y=y.texture);u.material.uniforms.envMap.value=y;u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y._needsFlipEnvMap?-1:1;if(c!==y||h!==y.version||d!==t.toneMapping){u.material.needsUpdate=true;c=y;h=y.version;d=t.toneMapping;}i.unshift(u,u.geometry,u.material,0,0,null);}else if(y&&y.isTexture){if(void 0===l){l=new Mesh(new Jn(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(bs.background.uniforms),vertexShader:bs.background.vertexShader,fragmentShader:bs.background.fragmentShader,side:f,depthTest:false,depthWrite:false,fog:false}));l.geometry.deleteAttribute("normal");Object.defineProperty(l.material,"map",{get:function get(){return (this||e).uniforms.t2D.value}});n.update(l);}l.material.uniforms.t2D.value=y;true===y.matrixAutoUpdate&&y.updateMatrix();l.material.uniforms.uvTransform.value.copy(y.matrix);if(c!==y||h!==y.version||d!==t.toneMapping){l.material.needsUpdate=true;c=y;h=y.version;d=t.toneMapping;}i.unshift(l,l.geometry,l.material,0,0,null);}}function setClear(e,t){i.buffers.color.setClear(e.r,e.g,e.b,t,a);}return {getClearColor:function getClearColor(){return o},setClearColor:function setClearColor(e,t){o.set(e);s=void 0!==t?t:1;setClear(o,s);},getClearAlpha:function getClearAlpha(){return s},setClearAlpha:function setClearAlpha(e){s=e;setClear(o,s);},render:render}}function WebGLBindingStates(e,t,r,i){var n=e.getParameter(34921);var a=i.isWebGL2?null:t.get("OES_vertex_array_object");var o=i.isWebGL2||null!==a;var s={};var l=createBindingState(null);var u=l;function setup(t,i,n,a,s){var l=false;if(o){var c=getBindingState(a,n,i);if(u!==c){u=c;bindVertexArrayObject(u.object);}l=needsUpdate(a,s);l&&saveCache(a,s);}else {var h=true===i.wireframe;if(u.geometry!==a.id||u.program!==n.id||u.wireframe!==h){u.geometry=a.id;u.program=n.id;u.wireframe=h;l=true;}}true===t.isInstancedMesh&&(l=true);null!==s&&r.update(s,34963);if(l){setupVertexAttributes(t,i,n,a);null!==s&&e.bindBuffer(34963,r.get(s).buffer);}}function createVertexArrayObject(){return i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()}function bindVertexArrayObject(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function deleteVertexArrayObject(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function getBindingState(e,t,r){var i=true===r.wireframe;var n=s[e.id];if(void 0===n){n={};s[e.id]=n;}var a=n[t.id];if(void 0===a){a={};n[t.id]=a;}var o=a[i];if(void 0===o){o=createBindingState(createVertexArrayObject());a[i]=o;}return o}function createBindingState(e){var t=[];var r=[];var i=[];for(var a=0;a<n;a++){t[a]=0;r[a]=0;i[a]=0;}return {geometry:null,program:null,wireframe:false,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function needsUpdate(e,t){var r=u.attributes;var i=e.attributes;if(Object.keys(r).length!==Object.keys(i).length)return true;for(var n in i){var a=r[n];var o=i[n];if(void 0===a)return true;if(a.attribute!==o)return true;if(a.data!==o.data)return true}return u.index!==t}function saveCache(e,t){var r={};var i=e.attributes;for(var n in i){var a=i[n];var o={};o.attribute=a;a.data&&(o.data=a.data);r[n]=o;}u.attributes=r;u.index=t;}function initAttributes(){var e=u.newAttributes;for(var t=0,r=e.length;t<r;t++)e[t]=0;}function enableAttribute(e){enableAttributeAndDivisor(e,0);}function enableAttributeAndDivisor(r,n){var a=u.newAttributes;var o=u.enabledAttributes;var s=u.attributeDivisors;a[r]=1;if(0===o[r]){e.enableVertexAttribArray(r);o[r]=1;}if(s[r]!==n){var l=i.isWebGL2?e:t.get("ANGLE_instanced_arrays");l[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](r,n);s[r]=n;}}function disableUnusedAttributes(){var t=u.newAttributes;var r=u.enabledAttributes;for(var i=0,n=r.length;i<n;i++)if(r[i]!==t[i]){e.disableVertexAttribArray(i);r[i]=0;}}function vertexAttribPointer(t,r,n,a,o,s){true!==i.isWebGL2||5124!==n&&5125!==n?e.vertexAttribPointer(t,r,n,a,o,s):e.vertexAttribIPointer(t,r,n,o,s);}function setupVertexAttributes(n,a,o,s){if(false!==i.isWebGL2||!n.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){initAttributes();var l=s.attributes;var u=o.getAttributes();var c=a.defaultAttributeValues;for(var h in u){var d=u[h];if(d>=0){var f=l[h];if(void 0!==f){var p=f.normalized;var m=f.itemSize;var g=r.get(f);if(void 0===g)continue;var y=g.buffer;var x=g.type;var b=g.bytesPerElement;if(f.isInterleavedBufferAttribute){var _=f.data;var M=_.stride;var w=f.offset;if(_&&_.isInstancedInterleavedBuffer){enableAttributeAndDivisor(d,_.meshPerAttribute);void 0===s._maxInstanceCount&&(s._maxInstanceCount=_.meshPerAttribute*_.count);}else enableAttribute(d);e.bindBuffer(34962,y);vertexAttribPointer(d,m,x,p,M*b,w*b);}else {if(f.isInstancedBufferAttribute){enableAttributeAndDivisor(d,f.meshPerAttribute);void 0===s._maxInstanceCount&&(s._maxInstanceCount=f.meshPerAttribute*f.count);}else enableAttribute(d);e.bindBuffer(34962,y);vertexAttribPointer(d,m,x,p,0,0);}}else if("instanceMatrix"===h){var S=r.get(n.instanceMatrix);if(void 0===S)continue;var T=S.buffer;var A=S.type;enableAttributeAndDivisor(d+0,1);enableAttributeAndDivisor(d+1,1);enableAttributeAndDivisor(d+2,1);enableAttributeAndDivisor(d+3,1);e.bindBuffer(34962,T);e.vertexAttribPointer(d+0,4,A,false,64,0);e.vertexAttribPointer(d+1,4,A,false,64,16);e.vertexAttribPointer(d+2,4,A,false,64,32);e.vertexAttribPointer(d+3,4,A,false,64,48);}else if("instanceColor"===h){var L=r.get(n.instanceColor);if(void 0===L)continue;var E=L.buffer;var C=L.type;enableAttributeAndDivisor(d,1);e.bindBuffer(34962,E);e.vertexAttribPointer(d,3,C,false,12,0);}else if(void 0!==c){var P=c[h];if(void 0!==P)switch(P.length){case 2:e.vertexAttrib2fv(d,P);break;case 3:e.vertexAttrib3fv(d,P);break;case 4:e.vertexAttrib4fv(d,P);break;default:e.vertexAttrib1fv(d,P);}}}}disableUnusedAttributes();}}function dispose(){reset();for(var e in s){var t=s[e];for(var r in t){var i=t[r];for(var n in i){deleteVertexArrayObject(i[n].object);delete i[n];}delete t[r];}delete s[e];}}function releaseStatesOfGeometry(e){if(void 0!==s[e.id]){var t=s[e.id];for(var r in t){var i=t[r];for(var n in i){deleteVertexArrayObject(i[n].object);delete i[n];}delete t[r];}delete s[e.id];}}function releaseStatesOfProgram(e){for(var t in s){var r=s[t];if(void 0!==r[e.id]){var i=r[e.id];for(var n in i){deleteVertexArrayObject(i[n].object);delete i[n];}delete r[e.id];}}}function reset(){resetDefaultState();if(u!==l){u=l;bindVertexArrayObject(u.object);}}function resetDefaultState(){l.geometry=null;l.program=null;l.wireframe=false;}return {setup:setup,reset:reset,resetDefaultState:resetDefaultState,dispose:dispose,releaseStatesOfGeometry:releaseStatesOfGeometry,releaseStatesOfProgram:releaseStatesOfProgram,initAttributes:initAttributes,enableAttribute:enableAttribute,disableUnusedAttributes:disableUnusedAttributes}}function WebGLBufferRenderer(t,r,i,n){var a=n.isWebGL2;var o;function setMode(e){o=e;}function render(e,r){t.drawArrays(o,e,r);i.update(r,o,1);}function renderInstances(e,n,s){if(0!==s){var l,u;if(a){l=t;u="drawArraysInstanced";}else {l=r.get("ANGLE_instanced_arrays");u="drawArraysInstancedANGLE";if(null===l){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}l[u](o,e,n,s);i.update(n,o,s);}}(this||e).setMode=setMode;(this||e).render=render;(this||e).renderInstances=renderInstances;}function WebGLCapabilities(e,t,r){var i;function getMaxAnisotropy(){if(void 0!==i)return i;var r=t.get("EXT_texture_filter_anisotropic");i=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0;return i}function getMaxPrecision(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return "highp";t="mediump";}return "mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var n="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;var a=void 0!==r.precision?r.precision:"highp";var o=getMaxPrecision(a);if(o!==a){console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead.");a=o;}var s=true===r.logarithmicDepthBuffer;var l=e.getParameter(34930);var u=e.getParameter(35660);var c=e.getParameter(3379);var h=e.getParameter(34076);var d=e.getParameter(34921);var f=e.getParameter(36347);var p=e.getParameter(36348);var m=e.getParameter(36349);var g=u>0;var y=n||!!t.get("OES_texture_float");var x=g&&y;var b=n?e.getParameter(36183):0;return {isWebGL2:n,getMaxAnisotropy:getMaxAnisotropy,getMaxPrecision:getMaxPrecision,precision:a,logarithmicDepthBuffer:s,maxTextures:l,maxVertexTextures:u,maxTextureSize:c,maxCubemapSize:h,maxAttributes:d,maxVertexUniforms:f,maxVaryings:p,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:x,maxSamples:b}}function WebGLClipping(t){var r=this||e;var i=null,n=0,a=false,o=false;var s=new Yi,l=new Hr,u={value:null,needsUpdate:false};(this||e).uniform=u;(this||e).numPlanes=0;(this||e).numIntersection=0;(this||e).init=function(e,t,r){var o=0!==e.length||t||0!==n||a;a=t;i=projectPlanes(e,r,0);n=e.length;return o};(this||e).beginShadows=function(){o=true;projectPlanes(null);};(this||e).endShadows=function(){o=false;resetGlobalState();};(this||e).setState=function(r,s,l){var c=r.clippingPlanes,h=r.clipIntersection,d=r.clipShadows;var f=t.get(r);if(!a||null===c||0===c.length||o&&!d)o?projectPlanes(null):resetGlobalState();else {var p=o?0:n,m=4*p;var g=f.clippingState||null;u.value=g;g=projectPlanes(c,s,m,l);for(var y=0;y!==m;++y)g[y]=i[y];f.clippingState=g;(this||e).numIntersection=h?(this||e).numPlanes:0;(this||e).numPlanes+=p;}};function resetGlobalState(){if(u.value!==i){u.value=i;u.needsUpdate=n>0;}r.numPlanes=n;r.numIntersection=0;}function projectPlanes(e,t,i,n){var a=null!==e?e.length:0;var o=null;if(0!==a){o=u.value;if(true!==n||null===o){var c=i+4*a,h=t.matrixWorldInverse;l.getNormalMatrix(h);(null===o||o.length<c)&&(o=new Float32Array(c));for(var d=0,f=i;d!==a;++d,f+=4){s.copy(e[d]).applyMatrix4(h,l);s.normal.toArray(o,f);o[f+3]=s.constant;}}u.value=o;u.needsUpdate=true;}r.numPlanes=a;r.numIntersection=0;return o}}function WebGLCubeMaps(e){var t=new WeakMap;function mapTextureMapping(e,t){t===se?e.mapping=ae:t===le&&(e.mapping=oe);return e}function get(r){if(r&&r.isTexture){var i=r.mapping;if(i===se||i===le){if(t.has(r)){var n=t.get(r).texture;return mapTextureMapping(n,r.mapping)}var a=r.image;if(a&&a.height>0){var o=e.getRenderList();var s=e.getRenderTarget();var l=e.getRenderState();var u=new WebGLCubeRenderTarget(a.height/2);u.fromEquirectangularTexture(e,r);t.set(r,u);e.setRenderTarget(s);e.setRenderList(o);e.setRenderState(l);return mapTextureMapping(u.texture,r.mapping)}return null}}return r}function dispose(){t=new WeakMap;}return {get:get,dispose:dispose}}function WebGLExtensions(e){var t={};return {has:function has(r){if(void 0!==t[r])return null!==t[r];var i;switch(r){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(r);}t[r]=i;return null!==i},get:function get(e){this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported.");return t[e]}}}function WebGLGeometries(e,t,r,i){var n=new WeakMap;var a=new WeakMap;function onGeometryDispose(e){var o=e.target;var s=n.get(o);null!==s.index&&t.remove(s.index);for(var l in s.attributes)t.remove(s.attributes[l]);o.removeEventListener("dispose",onGeometryDispose);n.delete(o);var u=a.get(s);if(u){t.remove(u);a.delete(s);}i.releaseStatesOfGeometry(o);true===o.isInstancedBufferGeometry&&delete o._maxInstanceCount;r.memory.geometries--;}function get(e,t){var i=n.get(t);if(i)return i;t.addEventListener("dispose",onGeometryDispose);if(t.isBufferGeometry)i=t;else if(t.isGeometry){void 0===t._bufferGeometry&&(t._bufferGeometry=(new BufferGeometry).setFromObject(e));i=t._bufferGeometry;}n.set(t,i);r.memory.geometries++;return i}function update(e){var r=e.attributes;for(var i in r)t.update(r[i],34962);var n=e.morphAttributes;for(var a in n){var o=n[a];for(var s=0,l=o.length;s<l;s++)t.update(o[s],34962);}}function updateWireframeAttribute(e){var r=[];var i=e.index;var n=e.attributes.position;var o=0;if(null!==i){var s=i.array;o=i.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0];var h=s[l+1];var d=s[l+2];r.push(c,h,h,d,d,c);}}else {var f=n.array;o=n.version;for(var p=0,m=f.length/3-1;p<m;p+=3){var g=p+0;var y=p+1;var x=p+2;r.push(g,y,y,x,x,g);}}var b=new(arrayMax(r)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(r,1);b.version=o;var _=a.get(e);_&&t.remove(_);a.set(e,b);}function getWireframeAttribute(e){var t=a.get(e);if(t){var r=e.index;null!==r&&t.version<r.version&&updateWireframeAttribute(e);}else updateWireframeAttribute(e);return a.get(e)}return {get:get,update:update,getWireframeAttribute:getWireframeAttribute}}function WebGLIndexedBufferRenderer(t,r,i,n){var a=n.isWebGL2;var o;function setMode(e){o=e;}var s,l;function setIndex(e){s=e.type;l=e.bytesPerElement;}function render(e,r){t.drawElements(o,r,s,e*l);i.update(r,o,1);}function renderInstances(e,n,u){if(0!==u){var c,h;if(a){c=t;h="drawElementsInstanced";}else {c=r.get("ANGLE_instanced_arrays");h="drawElementsInstancedANGLE";if(null===c){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}c[h](o,n,s,e*l,u);i.update(n,o,u);}}(this||e).setMode=setMode;(this||e).setIndex=setIndex;(this||e).render=render;(this||e).renderInstances=renderInstances;}function WebGLInfo(e){var t={geometries:0,textures:0};var r={frame:0,calls:0,triangles:0,points:0,lines:0};function update(e,t,i){r.calls++;switch(t){case 4:r.triangles+=i*(e/3);break;case 1:r.lines+=i*(e/2);break;case 3:r.lines+=i*(e-1);break;case 2:r.lines+=i*e;break;case 0:r.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t);break}}function reset(){r.frame++;r.calls=0;r.triangles=0;r.points=0;r.lines=0;}return {memory:t,render:r,programs:null,autoReset:true,reset:reset,update:update}}function numericalSort(e,t){return e[0]-t[0]}function absNumericalSort(e,t){return Math.abs(t[1])-Math.abs(e[1])}function WebGLMorphtargets(e){var t={};var r=new Float32Array(8);var i=[];for(var n=0;n<8;n++)i[n]=[n,0];function update(n,a,o,s){var l=n.morphTargetInfluences;var u=void 0===l?0:l.length;var c=t[a.id];if(void 0===c){c=[];for(var h=0;h<u;h++)c[h]=[h,0];t[a.id]=c;}for(var d=0;d<u;d++){var f=c[d];f[0]=d;f[1]=l[d];}c.sort(absNumericalSort);for(var p=0;p<8;p++)if(p<u&&c[p][1]){i[p][0]=c[p][0];i[p][1]=c[p][1];}else {i[p][0]=Number.MAX_SAFE_INTEGER;i[p][1]=0;}i.sort(numericalSort);var m=o.morphTargets&&a.morphAttributes.position;var g=o.morphNormals&&a.morphAttributes.normal;var y=0;for(var x=0;x<8;x++){var b=i[x];var _=b[0];var M=b[1];if(_!==Number.MAX_SAFE_INTEGER&&M){m&&a.getAttribute("morphTarget"+x)!==m[_]&&a.setAttribute("morphTarget"+x,m[_]);g&&a.getAttribute("morphNormal"+x)!==g[_]&&a.setAttribute("morphNormal"+x,g[_]);r[x]=M;y+=M;}else {m&&void 0!==a.getAttribute("morphTarget"+x)&&a.deleteAttribute("morphTarget"+x);g&&void 0!==a.getAttribute("morphNormal"+x)&&a.deleteAttribute("morphNormal"+x);r[x]=0;}}var w=a.morphTargetsRelative?1:1-y;s.getUniforms().setValue(e,"morphTargetBaseInfluence",w);s.getUniforms().setValue(e,"morphTargetInfluences",r);}return {update:update}}function WebGLObjects(e,t,r,i){var n=new WeakMap;function update(e){var a=i.render.frame;var o=e.geometry;var s=t.get(e,o);if(n.get(s)!==a){o.isGeometry&&s.updateFromObject(e);t.update(s);n.set(s,a);}if(e.isInstancedMesh){r.update(e.instanceMatrix,34962);null!==e.instanceColor&&r.update(e.instanceColor,34962);}return s}function dispose(){n=new WeakMap;}return {update:update,dispose:dispose}}function DataTexture2DArray(t,r,i,n){Texture.call(this||e,null);(this||e).image={data:t||null,width:r||1,height:i||1,depth:n||1};(this||e).magFilter=pe;(this||e).minFilter=pe;(this||e).wrapR=de;(this||e).generateMipmaps=false;(this||e).flipY=false;(this||e).needsUpdate=true;}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=true;function DataTexture3D(t,r,i,n){Texture.call(this||e,null);(this||e).image={data:t||null,width:r||1,height:i||1,depth:n||1};(this||e).magFilter=pe;(this||e).minFilter=pe;(this||e).wrapR=de;(this||e).generateMipmaps=false;(this||e).flipY=false;(this||e).needsUpdate=true;}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=true;var _s=new Texture;var Ms=new DataTexture2DArray;var ws=new DataTexture3D;var Ss=new CubeTexture;var Ts=[];var As=[];var Ls=new Float32Array(16);var Es=new Float32Array(9);var Cs=new Float32Array(4);function flatten(e,t,r){var i=e[0];if(i<=0||i>0)return e;var n=t*r;var a=Ts[n];if(void 0===a){a=new Float32Array(n);Ts[n]=a;}if(0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o){s+=r;e[o].toArray(a,s);}}return a}function arraysEqual(e,t){if(e.length!==t.length)return false;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return false;return true}function copyArray(e,t){for(var r=0,i=t.length;r<i;r++)e[r]=t[r];}function allocTexUnits(e,t){var r=As[t];if(void 0===r){r=new Int32Array(t);As[t]=r;}for(var i=0;i!==t;++i)r[i]=e.allocateTextureUnit();return r}function setValueV1f(t,r){var i=(this||e).cache;if(i[0]!==r){t.uniform1f((this||e).addr,r);i[0]=r;}}function setValueV2f(t,r){var i=(this||e).cache;if(void 0!==r.x){if(i[0]!==r.x||i[1]!==r.y){t.uniform2f((this||e).addr,r.x,r.y);i[0]=r.x;i[1]=r.y;}}else {if(arraysEqual(i,r))return;t.uniform2fv((this||e).addr,r);copyArray(i,r);}}function setValueV3f(t,r){var i=(this||e).cache;if(void 0!==r.x){if(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z){t.uniform3f((this||e).addr,r.x,r.y,r.z);i[0]=r.x;i[1]=r.y;i[2]=r.z;}}else if(void 0!==r.r){if(i[0]!==r.r||i[1]!==r.g||i[2]!==r.b){t.uniform3f((this||e).addr,r.r,r.g,r.b);i[0]=r.r;i[1]=r.g;i[2]=r.b;}}else {if(arraysEqual(i,r))return;t.uniform3fv((this||e).addr,r);copyArray(i,r);}}function setValueV4f(t,r){var i=(this||e).cache;if(void 0!==r.x){if(i[0]!==r.x||i[1]!==r.y||i[2]!==r.z||i[3]!==r.w){t.uniform4f((this||e).addr,r.x,r.y,r.z,r.w);i[0]=r.x;i[1]=r.y;i[2]=r.z;i[3]=r.w;}}else {if(arraysEqual(i,r))return;t.uniform4fv((this||e).addr,r);copyArray(i,r);}}function setValueM2(t,r){var i=(this||e).cache;var n=r.elements;if(void 0===n){if(arraysEqual(i,r))return;t.uniformMatrix2fv((this||e).addr,false,r);copyArray(i,r);}else {if(arraysEqual(i,n))return;Cs.set(n);t.uniformMatrix2fv((this||e).addr,false,Cs);copyArray(i,n);}}function setValueM3(t,r){var i=(this||e).cache;var n=r.elements;if(void 0===n){if(arraysEqual(i,r))return;t.uniformMatrix3fv((this||e).addr,false,r);copyArray(i,r);}else {if(arraysEqual(i,n))return;Es.set(n);t.uniformMatrix3fv((this||e).addr,false,Es);copyArray(i,n);}}function setValueM4(t,r){var i=(this||e).cache;var n=r.elements;if(void 0===n){if(arraysEqual(i,r))return;t.uniformMatrix4fv((this||e).addr,false,r);copyArray(i,r);}else {if(arraysEqual(i,n))return;Ls.set(n);t.uniformMatrix4fv((this||e).addr,false,Ls);copyArray(i,n);}}function setValueT1(t,r,i){var n=(this||e).cache;var a=i.allocateTextureUnit();if(n[0]!==a){t.uniform1i((this||e).addr,a);n[0]=a;}i.safeSetTexture2D(r||_s,a);}function setValueT2DArray1(t,r,i){var n=(this||e).cache;var a=i.allocateTextureUnit();if(n[0]!==a){t.uniform1i((this||e).addr,a);n[0]=a;}i.setTexture2DArray(r||Ms,a);}function setValueT3D1(t,r,i){var n=(this||e).cache;var a=i.allocateTextureUnit();if(n[0]!==a){t.uniform1i((this||e).addr,a);n[0]=a;}i.setTexture3D(r||ws,a);}function setValueT6(t,r,i){var n=(this||e).cache;var a=i.allocateTextureUnit();if(n[0]!==a){t.uniform1i((this||e).addr,a);n[0]=a;}i.safeSetTextureCube(r||Ss,a);}function setValueV1i(t,r){var i=(this||e).cache;if(i[0]!==r){t.uniform1i((this||e).addr,r);i[0]=r;}}function setValueV2i(t,r){var i=(this||e).cache;if(!arraysEqual(i,r)){t.uniform2iv((this||e).addr,r);copyArray(i,r);}}function setValueV3i(t,r){var i=(this||e).cache;if(!arraysEqual(i,r)){t.uniform3iv((this||e).addr,r);copyArray(i,r);}}function setValueV4i(t,r){var i=(this||e).cache;if(!arraysEqual(i,r)){t.uniform4iv((this||e).addr,r);copyArray(i,r);}}function setValueV1ui(t,r){var i=(this||e).cache;if(i[0]!==r){t.uniform1ui((this||e).addr,r);i[0]=r;}}function getSingularSetter(e){switch(e){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(t,r){t.uniform1fv((this||e).addr,r);}function setValueV1iArray(t,r){t.uniform1iv((this||e).addr,r);}function setValueV2iArray(t,r){t.uniform2iv((this||e).addr,r);}function setValueV3iArray(t,r){t.uniform3iv((this||e).addr,r);}function setValueV4iArray(t,r){t.uniform4iv((this||e).addr,r);}function setValueV2fArray(t,r){var i=flatten(r,(this||e).size,2);t.uniform2fv((this||e).addr,i);}function setValueV3fArray(t,r){var i=flatten(r,(this||e).size,3);t.uniform3fv((this||e).addr,i);}function setValueV4fArray(t,r){var i=flatten(r,(this||e).size,4);t.uniform4fv((this||e).addr,i);}function setValueM2Array(t,r){var i=flatten(r,(this||e).size,4);t.uniformMatrix2fv((this||e).addr,false,i);}function setValueM3Array(t,r){var i=flatten(r,(this||e).size,9);t.uniformMatrix3fv((this||e).addr,false,i);}function setValueM4Array(t,r){var i=flatten(r,(this||e).size,16);t.uniformMatrix4fv((this||e).addr,false,i);}function setValueT1Array(t,r,i){var n=r.length;var a=allocTexUnits(i,n);t.uniform1iv((this||e).addr,a);for(var o=0;o!==n;++o)i.safeSetTexture2D(r[o]||_s,a[o]);}function setValueT6Array(t,r,i){var n=r.length;var a=allocTexUnits(i,n);t.uniform1iv((this||e).addr,a);for(var o=0;o!==n;++o)i.safeSetTextureCube(r[o]||Ss,a[o]);}function getPureArraySetter(e){switch(e){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(t,r,i){(this||e).id=t;(this||e).addr=i;(this||e).cache=[];(this||e).setValue=getSingularSetter(r.type);}function PureArrayUniform(t,r,i){(this||e).id=t;(this||e).addr=i;(this||e).cache=[];(this||e).size=r.size;(this||e).setValue=getPureArraySetter(r.type);}PureArrayUniform.prototype.updateCache=function(t){var r=(this||e).cache;t instanceof Float32Array&&r.length!==t.length&&((this||e).cache=new Float32Array(t.length));copyArray(r,t);};function StructuredUniform(t){(this||e).id=t;(this||e).seq=[];(this||e).map={};}StructuredUniform.prototype.setValue=function(t,r,i){var n=(this||e).seq;for(var a=0,o=n.length;a!==o;++a){var s=n[a];s.setValue(t,r[s.id],i);}};var Ps=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(e,t){e.seq.push(t);e.map[t.id]=t;}function parseUniform(e,t,r){var i=e.name,n=i.length;Ps.lastIndex=0;while(true){var a=Ps.exec(i),o=Ps.lastIndex;var s=a[1];var l="]"===a[2],u=a[3];l&&(s|=0);if(void 0===u||"["===u&&o+2===n){addUniform(r,void 0===u?new SingleUniform(s,e,t):new PureArrayUniform(s,e,t));break}var c=r.map;var h=c[s];if(void 0===h){h=new StructuredUniform(s);addUniform(r,h);}r=h;}}function WebGLUniforms(t,r){(this||e).seq=[];(this||e).map={};var i=t.getProgramParameter(r,35718);for(var n=0;n<i;++n){var a=t.getActiveUniform(r,n),o=t.getUniformLocation(r,a.name);parseUniform(a,o,this||e);}}WebGLUniforms.prototype.setValue=function(t,r,i,n){var a=(this||e).map[r];void 0!==a&&a.setValue(t,i,n);};WebGLUniforms.prototype.setOptional=function(e,t,r){var i=t[r];void 0!==i&&this.setValue(e,r,i);};WebGLUniforms.upload=function(e,t,r,i){for(var n=0,a=t.length;n!==a;++n){var o=t[n],s=r[o.id];false!==s.needsUpdate&&o.setValue(e,s.value,i);}};WebGLUniforms.seqWithValue=function(e,t){var r=[];for(var i=0,n=e.length;i!==n;++i){var a=e[i];a.id in t&&r.push(a);}return r};function WebGLShader(e,t,r){var i=e.createShader(t);e.shaderSource(i,r);e.compileShader(i);return i}var Rs=0;function addLineNumbers(e){var t=e.split("\n");for(var r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}function getEncodingComponents(e){switch(e){case Qt:return ["Linear","( value )"];case Kt:return ["sRGB","( value )"];case er:return ["RGBE","( value )"];case rr:return ["RGBM","( value, 7.0 )"];case ir:return ["RGBM","( value, 16.0 )"];case nr:return ["RGBD","( value, 256.0 )"];case $t:return ["Gamma","( value, float( GAMMA_FACTOR ) )"];case tr:return ["LogLuv","( value )"];default:console.warn("THREE.WebGLProgram: Unsupported encoding:",e);return ["Linear","( value )"]}}function getShaderErrors(e,t,r){var i=e.getShaderParameter(t,35713);var n=e.getShaderInfoLog(t).trim();if(i&&""===n)return "";var a=e.getShaderSource(t);return "THREE.WebGLShader: gl.getShaderInfoLog() "+r+"\n"+n+addLineNumbers(a)}function getTexelDecodingFunction(e,t){var r=getEncodingComponents(t);return "vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function getTexelEncodingFunction(e,t){var r=getEncodingComponents(t);return "vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function getToneMappingFunction(e,t){var r;switch(t){case $:r="Linear";break;case ee:r="Reinhard";break;case te:r="OptimizedCineon";break;case re:r="ACESFilmic";break;case ie:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t);r="Linear";}return "vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function generateExtensions(e){var t=[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(filterEmptyLine).join("\n")}function generateDefines(e){var t=[];for(var r in e){var i=e[r];false!==i&&t.push("#define "+r+" "+i);}return t.join("\n")}function fetchAttributeLocations(e,t){var r={};var i=e.getProgramParameter(t,35721);for(var n=0;n<i;n++){var a=e.getActiveAttrib(t,n);var o=a.name;r[o]=e.getAttribLocation(t,o);}return r}function filterEmptyLine(e){return ""!==e}function replaceLightNums(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function replaceClippingPlaneNums(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Bs=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(e){return e.replace(Bs,includeReplacer)}function includeReplacer(e,t){var r=ys[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return resolveIncludes(r)}var Is=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;var Ds=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(e){return e.replace(Ds,loopReplacer).replace(Is,deprecatedLoopReplacer)}function deprecatedLoopReplacer(e,t,r,i){console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.");return loopReplacer(e,t,r,i)}function loopReplacer(e,t,r,i){var n="";for(var a=parseInt(t);a<parseInt(r);a++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return n}function generatePrecision(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION");return t}function generateShadowMapTypeDefine(e){var t="SHADOWMAP_TYPE_BASIC";e.shadowMapType===c?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===d&&(t="SHADOWMAP_TYPE_VSM");return t}function generateEnvMapTypeDefine(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ae:case oe:t="ENVMAP_TYPE_CUBE";break;case ue:case ce:t="ENVMAP_TYPE_CUBE_UV";break}return t}function generateEnvMapModeDefine(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case oe:case ce:t="ENVMAP_MODE_REFRACTION";break}return t}function generateEnvMapBlendingDefine(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case J:t="ENVMAP_BLENDING_MULTIPLY";break;case Z:t="ENVMAP_BLENDING_MIX";break;case Q:t="ENVMAP_BLENDING_ADD";break}return t}function WebGLProgram(t,r,i,n){var a=t.getContext();var o=i.defines;var s=i.vertexShader;var l=i.fragmentShader;var u=generateShadowMapTypeDefine(i);var c=generateEnvMapTypeDefine(i);var h=generateEnvMapModeDefine(i);var d=generateEnvMapBlendingDefine(i);var f=t.gammaFactor>0?t.gammaFactor:1;var p=i.isWebGL2?"":generateExtensions(i);var m=generateDefines(o);var g=a.createProgram();var y,x;var b=i.glslVersion?"#version "+i.glslVersion+"\n":"";if(i.isRawShaderMaterial){y=[m].filter(filterEmptyLine).join("\n");y.length>0&&(y+="\n");x=[p,m].filter(filterEmptyLine).join("\n");x.length>0&&(x+="\n");}else {y=[generatePrecision(i),"#define SHADER_NAME "+i.shaderName,m,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+h:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&false===i.flatShading?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+u:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n");x=[p,generatePrecision(i),"#define SHADER_NAME "+i.shaderName,m,i.alphaTest?"#define ALPHATEST "+i.alphaTest+(i.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+h:"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.sheen?"#define USE_SHEEN":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+u:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==K?"#define TONE_MAPPING":"",i.toneMapping!==K?ys["tonemapping_pars_fragment"]:"",i.toneMapping!==K?getToneMappingFunction("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",ys["encodings_pars_fragment"],i.map?getTexelDecodingFunction("mapTexelToLinear",i.mapEncoding):"",i.matcap?getTexelDecodingFunction("matcapTexelToLinear",i.matcapEncoding):"",i.envMap?getTexelDecodingFunction("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMap?getTexelDecodingFunction("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.lightMap?getTexelDecodingFunction("lightMapTexelToLinear",i.lightMapEncoding):"",getTexelEncodingFunction("linearToOutputTexel",i.outputEncoding),i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(filterEmptyLine).join("\n");}s=resolveIncludes(s);s=replaceLightNums(s,i);s=replaceClippingPlaneNums(s,i);l=resolveIncludes(l);l=replaceLightNums(l,i);l=replaceClippingPlaneNums(l,i);s=unrollLoops(s);l=unrollLoops(l);if(i.isWebGL2&&true!==i.isRawShaderMaterial){b="#version 300 es\n";y=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y;x=["#define varying in",i.glslVersion===Gr?"":"out highp vec4 pc_fragColor;",i.glslVersion===Gr?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x;}var _=b+y+s;var M=b+x+l;var w=WebGLShader(a,35633,_);var S=WebGLShader(a,35632,M);a.attachShader(g,w);a.attachShader(g,S);void 0!==i.index0AttributeName?a.bindAttribLocation(g,0,i.index0AttributeName):true===i.morphTargets&&a.bindAttribLocation(g,0,"position");a.linkProgram(g);if(t.debug.checkShaderErrors){var T=a.getProgramInfoLog(g).trim();var A=a.getShaderInfoLog(w).trim();var L=a.getShaderInfoLog(S).trim();var E=true;var C=true;if(false===a.getProgramParameter(g,35714)){E=false;var P=getShaderErrors(a,w,"vertex");var R=getShaderErrors(a,S,"fragment");console.error("THREE.WebGLProgram: shader error: ",a.getError(),"35715",a.getProgramParameter(g,35715),"gl.getProgramInfoLog",T,P,R);}else ""!==T?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):""!==A&&""!==L||(C=false);C&&((this||e).diagnostics={runnable:E,programLog:T,vertexShader:{log:A,prefix:y},fragmentShader:{log:L,prefix:x}});}a.deleteShader(w);a.deleteShader(S);var B;(this||e).getUniforms=function(){void 0===B&&(B=new WebGLUniforms(a,g));return B};var I;(this||e).getAttributes=function(){void 0===I&&(I=fetchAttributeLocations(a,g));return I};(this||e).destroy=function(){n.releaseStatesOfProgram(this||e);a.deleteProgram(g);(this||e).program=void 0;};(this||e).name=i.shaderName;(this||e).id=Rs++;(this||e).cacheKey=r;(this||e).usedTimes=1;(this||e).program=g;(this||e).vertexShader=w;(this||e).fragmentShader=S;return this||e}function WebGLPrograms(e,t,r,i,n,a){var o=[];var s=i.isWebGL2;var l=i.logarithmicDepthBuffer;var u=i.floatVertexTextures;var c=i.maxVertexUniforms;var h=i.vertexTextures;var d=i.precision;var f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};var g=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function getMaxBones(e){var t=e.skeleton;var r=t.bones;if(u)return 1024;var i=c;var n=Math.floor((i-20)/4);var a=Math.min(n,r.length);if(a<r.length){console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+a+".");return 0}return a}function getTextureEncodingFromMap(e){var t;if(e){if(e.isTexture)t=e.encoding;else if(e.isWebGLRenderTarget){console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.");t=e.texture.encoding;}}else t=Qt;return t}function getParameters(n,o,c,g,y){var x=g.fog;var b=n.isMeshStandardMaterial?g.environment:null;var _=t.get(n.envMap||b);var M=f[n.type];var w=y.isSkinnedMesh?getMaxBones(y):0;if(null!==n.precision){d=i.getMaxPrecision(n.precision);d!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",d,"instead.");}var S,T;if(M){var A=bs[M];S=A.vertexShader;T=A.fragmentShader;}else {S=n.vertexShader;T=n.fragmentShader;}var L=e.getRenderTarget();var E={isWebGL2:s,shaderID:M,shaderName:n.type,vertexShader:S,fragmentShader:T,defines:n.defines,isRawShaderMaterial:true===n.isRawShaderMaterial,glslVersion:n.glslVersion,precision:d,instancing:true===y.isInstancedMesh,instancingColor:true===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:h,outputEncoding:null!==L?getTextureEncodingFromMap(L.texture):e.outputEncoding,map:!!n.map,mapEncoding:getTextureEncodingFromMap(n.map),matcap:!!n.matcap,matcapEncoding:getTextureEncodingFromMap(n.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:getTextureEncodingFromMap(_),envMapCubeUV:!!_&&(_.mapping===ue||_.mapping===ce),lightMap:!!n.lightMap,lightMapEncoding:getTextureEncodingFromMap(n.lightMap),aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:getTextureEncodingFromMap(n.emissiveMap),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,objectSpaceNormalMap:n.normalMapType===lr,tangentSpaceNormalMap:n.normalMapType===sr,clearcoatMap:!!n.clearcoatMap,clearcoatRoughnessMap:!!n.clearcoatRoughnessMap,clearcoatNormalMap:!!n.clearcoatNormalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,gradientMap:!!n.gradientMap,sheen:!!n.sheen,transmissionMap:!!n.transmissionMap,combine:n.combine,vertexTangents:n.normalMap&&n.vertexTangents,vertexColors:n.vertexColors,vertexUvs:!!n.map||!!n.bumpMap||!!n.normalMap||!!n.specularMap||!!n.alphaMap||!!n.emissiveMap||!!n.roughnessMap||!!n.metalnessMap||!!n.clearcoatMap||!!n.clearcoatRoughnessMap||!!n.clearcoatNormalMap||!!n.displacementMap||!!n.transmissionMap,uvsVertexOnly:!(!!n.map||!!n.bumpMap||!!n.normalMap||!!n.specularMap||!!n.alphaMap||!!n.emissiveMap||!!n.roughnessMap||!!n.metalnessMap||!!n.clearcoatNormalMap||!!n.transmissionMap)&&!!n.displacementMap,fog:!!x,useFog:n.fog,fogExp2:x&&x.isFogExp2,flatShading:n.flatShading,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:l,skinning:n.skinning&&w>0,maxBones:w,useVertexTexture:u,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:n.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:n.toneMapped?e.toneMapping:K,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:n.side===m,flipSided:n.side===p,depthPacking:void 0!==n.depthPacking&&n.depthPacking,index0AttributeName:n.index0AttributeName,extensionDerivatives:n.extensions&&n.extensions.derivatives,extensionFragDepth:n.extensions&&n.extensions.fragDepth,extensionDrawBuffers:n.extensions&&n.extensions.drawBuffers,extensionShaderTextureLOD:n.extensions&&n.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||r.has("EXT_shader_texture_lod"),customProgramCacheKey:n.customProgramCacheKey()};return E}function getProgramCacheKey(t){var r=[];if(t.shaderID)r.push(t.shaderID);else {r.push(t.fragmentShader);r.push(t.vertexShader);}if(void 0!==t.defines)for(var i in t.defines){r.push(i);r.push(t.defines[i]);}if(false===t.isRawShaderMaterial){for(var n=0;n<g.length;n++)r.push(t[g[n]]);r.push(e.outputEncoding);r.push(e.gammaFactor);}r.push(t.customProgramCacheKey);return r.join()}function getUniforms(e){var t=f[e.type];var r;if(t){var i=bs[t];r=Hn.clone(i.uniforms);}else r=e.uniforms;return r}function acquireProgram(t,r){var i;for(var a=0,s=o.length;a<s;a++){var l=o[a];if(l.cacheKey===r){i=l;++i.usedTimes;break}}if(void 0===i){i=new WebGLProgram(e,r,t,n);o.push(i);}return i}function releaseProgram(e){if(0===--e.usedTimes){var t=o.indexOf(e);o[t]=o[o.length-1];o.pop();e.destroy();}}return {getParameters:getParameters,getProgramCacheKey:getProgramCacheKey,getUniforms:getUniforms,acquireProgram:acquireProgram,releaseProgram:releaseProgram,programs:o}}function WebGLProperties(){var e=new WeakMap;function get(t){var r=e.get(t);if(void 0===r){r={};e.set(t,r);}return r}function remove(t){e.delete(t);}function update(t,r,i){e.get(t)[r]=i;}function dispose(){e=new WeakMap;}return {get:get,remove:remove,update:update,dispose:dispose}}function painterSortStable(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function reversePainterSortStable(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function WebGLRenderList(e){var t=[];var r=0;var i=[];var n=[];var a={id:-1};function init(){r=0;i.length=0;n.length=0;}function getNextRenderItem(i,n,o,s,l,u){var c=t[r];var h=e.get(o);if(void 0===c){c={id:i.id,object:i,geometry:n,material:o,program:h.program||a,groupOrder:s,renderOrder:i.renderOrder,z:l,group:u};t[r]=c;}else {c.id=i.id;c.object=i;c.geometry=n;c.material=o;c.program=h.program||a;c.groupOrder=s;c.renderOrder=i.renderOrder;c.z=l;c.group=u;}r++;return c}function push(e,t,r,a,o,s){var l=getNextRenderItem(e,t,r,a,o,s);(true===r.transparent?n:i).push(l);}function unshift(e,t,r,a,o,s){var l=getNextRenderItem(e,t,r,a,o,s);(true===r.transparent?n:i).unshift(l);}function sort(e,t){i.length>1&&i.sort(e||painterSortStable);n.length>1&&n.sort(t||reversePainterSortStable);}function finish(){for(var e=r,i=t.length;e<i;e++){var n=t[e];if(null===n.id)break;n.id=null;n.object=null;n.geometry=null;n.material=null;n.program=null;n.group=null;}}return {opaque:i,transparent:n,init:init,push:push,unshift:unshift,finish:finish,sort:sort}}function WebGLRenderLists(e){var t=new WeakMap;function get(r,i){var n=t.get(r);var a;if(void 0===n){a=new WebGLRenderList(e);t.set(r,new WeakMap);t.get(r).set(i,a);}else {a=n.get(i);if(void 0===a){a=new WebGLRenderList(e);n.set(i,a);}}return a}function dispose(){t=new WeakMap;}return {get:get,dispose:dispose}}function UniformsCache(){var e={};return {get:function get(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new Xr,color:new cn};break;case"SpotLight":r={position:new Xr,direction:new Xr,color:new cn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Xr,color:new cn,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Xr,skyColor:new cn,groundColor:new cn};break;case"RectAreaLight":r={color:new cn,position:new Xr,halfWidth:new Xr,halfHeight:new Xr};break}e[t.id]=r;return r}}}function ShadowUniformsCache(){var e={};return {get:function get(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zr};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zr};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zr,shadowCameraNear:1,shadowCameraFar:1e3};break}e[t.id]=r;return r}}}var Gs=0;function shadowCastingLightsFirst(e,t){return (t.castShadow?1:0)-(e.castShadow?1:0)}function WebGLLights(){var e=new UniformsCache;var t=ShadowUniformsCache();var r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(var i=0;i<9;i++)r.probe.push(new Xr);var n=new Xr;var a=new bi;var o=new bi;function setup(i,s,l){var u=0,c=0,h=0;for(var d=0;d<9;d++)r.probe[d].set(0,0,0);var f=0;var p=0;var m=0;var g=0;var y=0;var x=0;var b=0;var _=0;var M=l.matrixWorldInverse;i.sort(shadowCastingLightsFirst);for(var w=0,S=i.length;w<S;w++){var T=i[w];var A=T.color;var L=T.intensity;var E=T.distance;var C=T.shadow&&T.shadow.map?T.shadow.map.texture:null;if(T.isAmbientLight){u+=A.r*L;c+=A.g*L;h+=A.b*L;}else if(T.isLightProbe)for(var P=0;P<9;P++)r.probe[P].addScaledVector(T.sh.coefficients[P],L);else if(T.isDirectionalLight){var R=e.get(T);R.color.copy(T.color).multiplyScalar(T.intensity);R.direction.setFromMatrixPosition(T.matrixWorld);n.setFromMatrixPosition(T.target.matrixWorld);R.direction.sub(n);R.direction.transformDirection(M);if(T.castShadow){var B=T.shadow;var I=t.get(T);I.shadowBias=B.bias;I.shadowNormalBias=B.normalBias;I.shadowRadius=B.radius;I.shadowMapSize=B.mapSize;r.directionalShadow[f]=I;r.directionalShadowMap[f]=C;r.directionalShadowMatrix[f]=T.shadow.matrix;x++;}r.directional[f]=R;f++;}else if(T.isSpotLight){var D=e.get(T);D.position.setFromMatrixPosition(T.matrixWorld);D.position.applyMatrix4(M);D.color.copy(A).multiplyScalar(L);D.distance=E;D.direction.setFromMatrixPosition(T.matrixWorld);n.setFromMatrixPosition(T.target.matrixWorld);D.direction.sub(n);D.direction.transformDirection(M);D.coneCos=Math.cos(T.angle);D.penumbraCos=Math.cos(T.angle*(1-T.penumbra));D.decay=T.decay;if(T.castShadow){var G=T.shadow;var O=t.get(T);O.shadowBias=G.bias;O.shadowNormalBias=G.normalBias;O.shadowRadius=G.radius;O.shadowMapSize=G.mapSize;r.spotShadow[m]=O;r.spotShadowMap[m]=C;r.spotShadowMatrix[m]=T.shadow.matrix;_++;}r.spot[m]=D;m++;}else if(T.isRectAreaLight){var N=e.get(T);N.color.copy(A).multiplyScalar(L);N.position.setFromMatrixPosition(T.matrixWorld);N.position.applyMatrix4(M);o.identity();a.copy(T.matrixWorld);a.premultiply(M);o.extractRotation(a);N.halfWidth.set(.5*T.width,0,0);N.halfHeight.set(0,.5*T.height,0);N.halfWidth.applyMatrix4(o);N.halfHeight.applyMatrix4(o);r.rectArea[g]=N;g++;}else if(T.isPointLight){var F=e.get(T);F.position.setFromMatrixPosition(T.matrixWorld);F.position.applyMatrix4(M);F.color.copy(T.color).multiplyScalar(T.intensity);F.distance=T.distance;F.decay=T.decay;if(T.castShadow){var U=T.shadow;var z=t.get(T);z.shadowBias=U.bias;z.shadowNormalBias=U.normalBias;z.shadowRadius=U.radius;z.shadowMapSize=U.mapSize;z.shadowCameraNear=U.camera.near;z.shadowCameraFar=U.camera.far;r.pointShadow[p]=z;r.pointShadowMap[p]=C;r.pointShadowMatrix[p]=T.shadow.matrix;b++;}r.point[p]=F;p++;}else if(T.isHemisphereLight){var H=e.get(T);H.direction.setFromMatrixPosition(T.matrixWorld);H.direction.transformDirection(M);H.direction.normalize();H.skyColor.copy(T.color).multiplyScalar(L);H.groundColor.copy(T.groundColor).multiplyScalar(L);r.hemi[y]=H;y++;}}if(g>0){r.rectAreaLTC1=xs.LTC_1;r.rectAreaLTC2=xs.LTC_2;}r.ambient[0]=u;r.ambient[1]=c;r.ambient[2]=h;var V=r.hash;if(V.directionalLength!==f||V.pointLength!==p||V.spotLength!==m||V.rectAreaLength!==g||V.hemiLength!==y||V.numDirectionalShadows!==x||V.numPointShadows!==b||V.numSpotShadows!==_){r.directional.length=f;r.spot.length=m;r.rectArea.length=g;r.point.length=p;r.hemi.length=y;r.directionalShadow.length=x;r.directionalShadowMap.length=x;r.pointShadow.length=b;r.pointShadowMap.length=b;r.spotShadow.length=_;r.spotShadowMap.length=_;r.directionalShadowMatrix.length=x;r.pointShadowMatrix.length=b;r.spotShadowMatrix.length=_;V.directionalLength=f;V.pointLength=p;V.spotLength=m;V.rectAreaLength=g;V.hemiLength=y;V.numDirectionalShadows=x;V.numPointShadows=b;V.numSpotShadows=_;r.version=Gs++;}}return {setup:setup,state:r}}function WebGLRenderState(){var e=new WebGLLights;var t=[];var r=[];function init(){t.length=0;r.length=0;}function pushLight(e){t.push(e);}function pushShadow(e){r.push(e);}function setupLights(i){e.setup(t,r,i);}var i={lightsArray:t,shadowsArray:r,lights:e};return {init:init,state:i,setupLights:setupLights,pushLight:pushLight,pushShadow:pushShadow}}function WebGLRenderStates(){var e=new WeakMap;function get(t,r){var i;if(false===e.has(t)){i=new WebGLRenderState;e.set(t,new WeakMap);e.get(t).set(r,i);}else if(false===e.get(t).has(r)){i=new WebGLRenderState;e.get(t).set(r,i);}else i=e.get(t).get(r);return i}function dispose(){e=new WeakMap;}return {get:get,dispose:dispose}}function MeshDepthMaterial(t){Material.call(this||e);(this||e).type="MeshDepthMaterial";(this||e).depthPacking=ar;(this||e).skinning=false;(this||e).morphTargets=false;(this||e).map=null;(this||e).alphaMap=null;(this||e).displacementMap=null;(this||e).displacementScale=1;(this||e).displacementBias=0;(this||e).wireframe=false;(this||e).wireframeLinewidth=1;(this||e).fog=false;this.setValues(t);}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=true;MeshDepthMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).depthPacking=t.depthPacking;(this||e).skinning=t.skinning;(this||e).morphTargets=t.morphTargets;(this||e).map=t.map;(this||e).alphaMap=t.alphaMap;(this||e).displacementMap=t.displacementMap;(this||e).displacementScale=t.displacementScale;(this||e).displacementBias=t.displacementBias;(this||e).wireframe=t.wireframe;(this||e).wireframeLinewidth=t.wireframeLinewidth;return this||e};function MeshDistanceMaterial(t){Material.call(this||e);(this||e).type="MeshDistanceMaterial";(this||e).referencePosition=new Xr;(this||e).nearDistance=1;(this||e).farDistance=1e3;(this||e).skinning=false;(this||e).morphTargets=false;(this||e).map=null;(this||e).alphaMap=null;(this||e).displacementMap=null;(this||e).displacementScale=1;(this||e).displacementBias=0;(this||e).fog=false;this.setValues(t);}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=true;MeshDistanceMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).referencePosition.copy(t.referencePosition);(this||e).nearDistance=t.nearDistance;(this||e).farDistance=t.farDistance;(this||e).skinning=t.skinning;(this||e).morphTargets=t.morphTargets;(this||e).map=t.map;(this||e).alphaMap=t.alphaMap;(this||e).displacementMap=t.displacementMap;(this||e).displacementScale=t.displacementScale;(this||e).displacementBias=t.displacementBias;return this||e};var Os="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";var Ns="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function WebGLShadowMap(t,r,i){var n=new Yn;var a=new zr,o=new zr,s=new jr,l=[],u=[],h={};var g={0:p,1:f,2:m};var y=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new zr},radius:{value:4}},vertexShader:Ns,fragmentShader:Os});var b=y.clone();b.defines.HORIZONAL_PASS=1;var _=new BufferGeometry;_.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var M=new Mesh(_,y);var w=this||e;(this||e).enabled=false;(this||e).autoUpdate=true;(this||e).needsUpdate=false;(this||e).type=c;(this||e).render=function(r,l,u){if(false!==w.enabled&&(false!==w.autoUpdate||false!==w.needsUpdate)&&0!==r.length){var c=t.getRenderTarget();var h=t.getActiveCubeFace();var f=t.getActiveMipmapLevel();var p=t.state;p.setBlending(x);p.buffers.color.setClear(1,1,1,1);p.buffers.depth.setTest(true);p.setScissorTest(false);for(var m=0,g=r.length;m<g;m++){var y=r[m];var b=y.shadow;if(void 0!==b){if(false!==b.autoUpdate||false!==b.needsUpdate){a.copy(b.mapSize);var _=b.getFrameExtents();a.multiply(_);o.copy(b.mapSize);if(a.x>i||a.y>i){if(a.x>i){o.x=Math.floor(i/_.x);a.x=o.x*_.x;b.mapSize.x=o.x;}if(a.y>i){o.y=Math.floor(i/_.y);a.y=o.y*_.y;b.mapSize.y=o.y;}}if(null===b.map&&!b.isPointLightShadow&&(this||e).type===d){var M={minFilter:xe,magFilter:xe,format:Fe};b.map=new WebGLRenderTarget(a.x,a.y,M);b.map.texture.name=y.name+".shadowMap";b.mapPass=new WebGLRenderTarget(a.x,a.y,M);b.camera.updateProjectionMatrix();}if(null===b.map){var S={minFilter:pe,magFilter:pe,format:Fe};b.map=new WebGLRenderTarget(a.x,a.y,S);b.map.texture.name=y.name+".shadowMap";b.camera.updateProjectionMatrix();}t.setRenderTarget(b.map);t.clear();var T=b.getViewportCount();for(var A=0;A<T;A++){var L=b.getViewport(A);s.set(o.x*L.x,o.y*L.y,o.x*L.z,o.y*L.w);p.viewport(s);b.updateMatrices(y,A);n=b.getFrustum();renderObject(l,u,b.camera,y,(this||e).type);}b.isPointLightShadow||(this||e).type!==d||VSMPass(b,u);b.needsUpdate=false;}}else console.warn("THREE.WebGLShadowMap:",y,"has no shadow.");}w.needsUpdate=false;t.setRenderTarget(c,h,f);}};function VSMPass(e,i){var n=r.update(M);y.uniforms.shadow_pass.value=e.map.texture;y.uniforms.resolution.value=e.mapSize;y.uniforms.radius.value=e.radius;t.setRenderTarget(e.mapPass);t.clear();t.renderBufferDirect(i,null,n,y,M,null);b.uniforms.shadow_pass.value=e.mapPass.texture;b.uniforms.resolution.value=e.mapSize;b.uniforms.radius.value=e.radius;t.setRenderTarget(e.map);t.clear();t.renderBufferDirect(i,null,n,b,M,null);}function getDepthMaterialVariant(e,t,r){var i=e<<0|t<<1|r<<2;var n=l[i];if(void 0===n){n=new MeshDepthMaterial({depthPacking:or,morphTargets:e,skinning:t});l[i]=n;}return n}function getDistanceMaterialVariant(e,t,r){var i=e<<0|t<<1|r<<2;var n=u[i];if(void 0===n){n=new MeshDistanceMaterial({morphTargets:e,skinning:t});u[i]=n;}return n}function getDepthMaterial(e,r,i,n,a,o,s){var l=null;var u=getDepthMaterialVariant;var c=e.customDepthMaterial;if(true===n.isPointLight){u=getDistanceMaterialVariant;c=e.customDistanceMaterial;}if(void 0===c){var f=false;true===i.morphTargets&&(f=r.morphAttributes&&r.morphAttributes.position&&r.morphAttributes.position.length>0);var p=false;true===e.isSkinnedMesh&&(true===i.skinning?p=true:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e));var m=true===e.isInstancedMesh;l=u(f,p,m);}else l=c;if(t.localClippingEnabled&&true===i.clipShadows&&0!==i.clippingPlanes.length){var y=l.uuid,x=i.uuid;var b=h[y];if(void 0===b){b={};h[y]=b;}var _=b[x];if(void 0===_){_=l.clone();b[x]=_;}l=_;}l.visible=i.visible;l.wireframe=i.wireframe;l.side=s===d?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:g[i.side];l.clipShadows=i.clipShadows;l.clippingPlanes=i.clippingPlanes;l.clipIntersection=i.clipIntersection;l.wireframeLinewidth=i.wireframeLinewidth;l.linewidth=i.linewidth;if(true===n.isPointLight&&true===l.isMeshDistanceMaterial){l.referencePosition.setFromMatrixPosition(n.matrixWorld);l.nearDistance=a;l.farDistance=o;}return l}function renderObject(e,i,a,o,s){if(false!==e.visible){var l=e.layers.test(i.layers);if(l&&(e.isMesh||e.isLine||e.isPoints)&&(e.castShadow||e.receiveShadow&&s===d)&&(!e.frustumCulled||n.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,e.matrixWorld);var u=r.update(e);var c=e.material;if(Array.isArray(c)){var h=u.groups;for(var f=0,p=h.length;f<p;f++){var m=h[f];var g=c[m.materialIndex];if(g&&g.visible){var y=getDepthMaterial(e,u,g,o,a.near,a.far,s);t.renderBufferDirect(a,null,u,y,e,m);}}}else if(c.visible){var x=getDepthMaterial(e,u,c,o,a.near,a.far,s);t.renderBufferDirect(a,null,u,x,e,null);}}var b=e.children;for(var _=0,M=b.length;_<M;_++)renderObject(b[_],i,a,o,s);}}}function WebGLState(e,t,r){var i,n;var l=r.isWebGL2;function ColorBuffer(){var t=false;var r=new jr;var i=null;var n=new jr(0,0,0,0);return {setMask:function setMask(r){if(i!==r&&!t){e.colorMask(r,r,r,r);i=r;}},setLocked:function setLocked(e){t=e;},setClear:function setClear(t,i,a,o,s){if(true===s){t*=o;i*=o;a*=o;}r.set(t,i,a,o);if(false===n.equals(r)){e.clearColor(t,i,a,o);n.copy(r);}},reset:function reset(){t=false;i=null;n.set(-1,0,0,0);}}}function DepthBuffer(){var t=false;var r=null;var i=null;var n=null;return {setTest:function setTest(e){e?enable(2929):disable(2929);},setMask:function setMask(i){if(r!==i&&!t){e.depthMask(i);r=i;}},setFunc:function setFunc(t){if(i!==t){if(t)switch(t){case H:e.depthFunc(512);break;case V:e.depthFunc(519);break;case k:e.depthFunc(513);break;case W:e.depthFunc(515);break;case j:e.depthFunc(514);break;case q:e.depthFunc(518);break;case X:e.depthFunc(516);break;case Y:e.depthFunc(517);break;default:e.depthFunc(515);}else e.depthFunc(515);i=t;}},setLocked:function setLocked(e){t=e;},setClear:function setClear(t){if(n!==t){e.clearDepth(t);n=t;}},reset:function reset(){t=false;r=null;i=null;n=null;}}}function StencilBuffer(){var t=false;var r=null;var i=null;var n=null;var a=null;var o=null;var s=null;var l=null;var u=null;return {setTest:function setTest(e){t||(e?enable(2960):disable(2960));},setMask:function setMask(i){if(r!==i&&!t){e.stencilMask(i);r=i;}},setFunc:function setFunc(t,r,o){if(i!==t||n!==r||a!==o){e.stencilFunc(t,r,o);i=t;n=r;a=o;}},setOp:function setOp(t,r,i){if(o!==t||s!==r||l!==i){e.stencilOp(t,r,i);o=t;s=r;l=i;}},setLocked:function setLocked(e){t=e;},setClear:function setClear(t){if(u!==t){e.clearStencil(t);u=t;}},reset:function reset(){t=false;r=null;i=null;n=null;a=null;o=null;s=null;l=null;u=null;}}}var u=new ColorBuffer;var c=new DepthBuffer;var h=new StencilBuffer;var d={};var f=null;var g=null;var y=null;var J=null;var Z=null;var Q=null;var K=null;var $=null;var ee=null;var te=false;var re=null;var ie=null;var ne=null;var ae=null;var oe=null;var se=e.getParameter(35661);var le=false;var ue=0;var ce=e.getParameter(7938);if(-1!==ce.indexOf("WebGL")){ue=parseFloat(/^WebGL\ ([0-9])/.exec(ce)[1]);le=ue>=1;}else if(-1!==ce.indexOf("OpenGL ES")){ue=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ce)[1]);le=ue>=2;}var he=null;var de={};var fe=new jr;var pe=new jr;function createTexture(t,r,i){var n=new Uint8Array(4);var a=e.createTexture();e.bindTexture(t,a);e.texParameteri(t,10241,9728);e.texParameteri(t,10240,9728);for(var o=0;o<i;o++)e.texImage2D(r+o,0,6408,1,1,0,6408,5121,n);return a}var me={};me[3553]=createTexture(3553,3553,1);me[34067]=createTexture(34067,34069,6);u.setClear(0,0,0,1);c.setClear(1);h.setClear(0);enable(2929);c.setFunc(W);setFlipSided(false);setCullFace(o);enable(2884);setBlending(x);function enable(t){if(true!==d[t]){e.enable(t);d[t]=true;}}function disable(t){if(false!==d[t]){e.disable(t);d[t]=false;}}function useProgram(t){if(f!==t){e.useProgram(t);f=t;return true}return false}var ve=(i={},i[T]=32774,i[A]=32778,i[L]=32779,i);if(l){ve[E]=32775;ve[C]=32776;}else {var ge=t.get("EXT_blend_minmax");if(null!==ge){ve[E]=ge.MIN_EXT;ve[C]=ge.MAX_EXT;}}var ye=(n={},n[P]=0,n[R]=1,n[B]=768,n[D]=770,n[z]=776,n[F]=774,n[O]=772,n[I]=769,n[G]=771,n[U]=775,n[N]=773,n);function setBlending(t,r,i,n,a,o,s,l){if(t!==x){if(!g){enable(3042);g=true;}if(t===S){a=a||r;o=o||i;s=s||n;if(r!==J||a!==K){e.blendEquationSeparate(ve[r],ve[a]);J=r;K=a;}if(i!==Z||n!==Q||o!==$||s!==ee){e.blendFuncSeparate(ye[i],ye[n],ye[o],ye[s]);Z=i;Q=n;$=o;ee=s;}y=t;te=null;}else if(t!==y||l!==te){if(J!==T||K!==T){e.blendEquation(32774);J=T;K=T;}if(l)switch(t){case b:e.blendFuncSeparate(1,771,1,771);break;case _:e.blendFunc(1,1);break;case M:e.blendFuncSeparate(0,0,769,771);break;case w:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}else switch(t){case b:e.blendFuncSeparate(770,771,1,771);break;case _:e.blendFunc(770,1);break;case M:e.blendFunc(0,769);break;case w:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}Z=null;Q=null;$=null;ee=null;y=t;te=l;}}else if(g){disable(3042);g=false;}}function setMaterial(e,t){e.side===m?disable(2884):enable(2884);var r=e.side===p;t&&(r=!r);setFlipSided(r);e.blending===b&&false===e.transparent?setBlending(x):setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha);c.setFunc(e.depthFunc);c.setTest(e.depthTest);c.setMask(e.depthWrite);u.setMask(e.colorWrite);var i=e.stencilWrite;h.setTest(i);if(i){h.setMask(e.stencilWriteMask);h.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask);h.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass);}setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits);}function setFlipSided(t){if(re!==t){t?e.frontFace(2304):e.frontFace(2305);re=t;}}function setCullFace(t){if(t!==a){enable(2884);t!==ie&&(t===o?e.cullFace(1029):t===s?e.cullFace(1028):e.cullFace(1032));}else disable(2884);ie=t;}function setLineWidth(t){if(t!==ne){le&&e.lineWidth(t);ne=t;}}function setPolygonOffset(t,r,i){if(t){enable(32823);if(ae!==r||oe!==i){e.polygonOffset(r,i);ae=r;oe=i;}}else disable(32823);}function setScissorTest(e){e?enable(3089):disable(3089);}function activeTexture(t){void 0===t&&(t=33984+se-1);if(he!==t){e.activeTexture(t);he=t;}}function bindTexture(t,r){null===he&&activeTexture();var i=de[he];if(void 0===i){i={type:void 0,texture:void 0};de[he]=i;}if(i.type!==t||i.texture!==r){e.bindTexture(t,r||me[t]);i.type=t;i.texture=r;}}function unbindTexture(){var t=de[he];if(void 0!==t&&void 0!==t.type){e.bindTexture(t.type,null);t.type=void 0;t.texture=void 0;}}function compressedTexImage2D(){try{e.compressedTexImage2D.apply(e,arguments);}catch(e){console.error("THREE.WebGLState:",e);}}function texImage2D(){try{e.texImage2D.apply(e,arguments);}catch(e){console.error("THREE.WebGLState:",e);}}function texImage3D(){try{e.texImage3D.apply(e,arguments);}catch(e){console.error("THREE.WebGLState:",e);}}function scissor(t){if(false===fe.equals(t)){e.scissor(t.x,t.y,t.z,t.w);fe.copy(t);}}function viewport(t){if(false===pe.equals(t)){e.viewport(t.x,t.y,t.z,t.w);pe.copy(t);}}function reset(){d={};he=null;de={};f=null;y=null;re=null;ie=null;u.reset();c.reset();h.reset();}return {buffers:{color:u,depth:c,stencil:h},enable:enable,disable:disable,useProgram:useProgram,setBlending:setBlending,setMaterial:setMaterial,setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:setLineWidth,setPolygonOffset:setPolygonOffset,setScissorTest:setScissorTest,activeTexture:activeTexture,bindTexture:bindTexture,unbindTexture:unbindTexture,compressedTexImage2D:compressedTexImage2D,texImage2D:texImage2D,texImage3D:texImage3D,scissor:scissor,viewport:viewport,reset:reset}}function WebGLTextures(t,r,i,n,a,o,s){var l,u;var c=a.isWebGL2;var h=a.maxTextures;var d=a.maxCubemapSize;var f=a.maxTextureSize;var p=a.maxSamples;var m=new WeakMap;var g;var y=false;try{y="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d");}catch(e){}function createCanvas(e,t){return y?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function resizeImage(e,t,r,i){var n=1;(e.width>i||e.height>i)&&(n=i/Math.max(e.width,e.height));if(n<1||true===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?Ur.floorPowerOfTwo:Math.floor;var o=a(n*e.width);var s=a(n*e.height);void 0===g&&(g=createCanvas(o,s));var l=r?createCanvas(o,s):g;l.width=o;l.height=s;var u=l.getContext("2d");u.drawImage(e,0,0,o,s);console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+").");return l}"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+").");return e}return e}function isPowerOfTwo(e){return Ur.isPowerOfTwo(e.width)&&Ur.isPowerOfTwo(e.height)}function textureNeedsPowerOfTwo(e){return !c&&(e.wrapS!==de||e.wrapT!==de||e.minFilter!==pe&&e.minFilter!==xe)}function textureNeedsGenerateMipmaps(e,t){return e.generateMipmaps&&t&&e.minFilter!==pe&&e.minFilter!==xe}function generateMipmap(e,r,i,a){t.generateMipmap(e);var o=n.get(r);o.__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E;}function getInternalFormat(e,i,n){if(false===c)return i;if(null!==e){if(void 0!==t[e])return t[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'");}var a=i;if(6403===i){5126===n&&(a=33326);5131===n&&(a=33325);5121===n&&(a=33321);}if(6407===i){5126===n&&(a=34837);5131===n&&(a=34843);5121===n&&(a=32849);}if(6408===i){5126===n&&(a=34836);5131===n&&(a=34842);5121===n&&(a=32856);}33325!==a&&33326!==a&&34842!==a&&34836!==a||r.get("EXT_color_buffer_float");return a}function filterFallback(e){return e===pe||e===me||e===ge?9728:9729}function onTextureDispose(e){var t=e.target;t.removeEventListener("dispose",onTextureDispose);deallocateTexture(t);t.isVideoTexture&&m.delete(t);s.memory.textures--;}function onRenderTargetDispose(e){var t=e.target;t.removeEventListener("dispose",onRenderTargetDispose);deallocateRenderTarget(t);s.memory.textures--;}function deallocateTexture(e){var r=n.get(e);if(void 0!==r.__webglInit){t.deleteTexture(r.__webglTexture);n.remove(e);}}function deallocateRenderTarget(e){var r=n.get(e);var i=n.get(e.texture);if(e){void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(var a=0;a<6;a++){t.deleteFramebuffer(r.__webglFramebuffer[a]);r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[a]);}else {t.deleteFramebuffer(r.__webglFramebuffer);r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer);r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer);r.__webglColorRenderbuffer&&t.deleteRenderbuffer(r.__webglColorRenderbuffer);r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer);}n.remove(e.texture);n.remove(e);}}var x=0;function resetTextureUnits(){x=0;}function allocateTextureUnit(){var e=x;e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h);x+=1;return e}function setTexture2D(e,t){var r=n.get(e);e.isVideoTexture&&updateVideoTexture(e);if(e.version>0&&r.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else {if(false!==a.complete){uploadTexture(r,e,t);return}console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");}}i.activeTexture(33984+t);i.bindTexture(3553,r.__webglTexture);}function setTexture2DArray(e,t){var r=n.get(e);if(e.version>0&&r.__version!==e.version)uploadTexture(r,e,t);else {i.activeTexture(33984+t);i.bindTexture(35866,r.__webglTexture);}}function setTexture3D(e,t){var r=n.get(e);if(e.version>0&&r.__version!==e.version)uploadTexture(r,e,t);else {i.activeTexture(33984+t);i.bindTexture(32879,r.__webglTexture);}}function setTextureCube(e,t){var r=n.get(e);if(e.version>0&&r.__version!==e.version)uploadCubeTexture(r,e,t);else {i.activeTexture(33984+t);i.bindTexture(34067,r.__webglTexture);}}var b=(l={},l[he]=10497,l[de]=33071,l[fe]=33648,l);var _=(u={},u[pe]=9728,u[me]=9984,u[ge]=9986,u[xe]=9729,u[be]=9985,u[Me]=9987,u);function setTextureParameters(e,i,o){if(o){t.texParameteri(e,10242,b[i.wrapS]);t.texParameteri(e,10243,b[i.wrapT]);32879!==e&&35866!==e||t.texParameteri(e,32882,b[i.wrapR]);t.texParameteri(e,10240,_[i.magFilter]);t.texParameteri(e,10241,_[i.minFilter]);}else {t.texParameteri(e,10242,33071);t.texParameteri(e,10243,33071);32879!==e&&35866!==e||t.texParameteri(e,32882,33071);i.wrapS===de&&i.wrapT===de||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.");t.texParameteri(e,10240,filterFallback(i.magFilter));t.texParameteri(e,10241,filterFallback(i.minFilter));i.minFilter!==pe&&i.minFilter!==xe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.");}var s=r.get("EXT_texture_filter_anisotropic");if(s){if(i.type===Pe&&null===r.get("OES_texture_float_linear"))return;if(i.type===Re&&null===(c||r.get("OES_texture_half_float_linear")))return;if(i.anisotropy>1||n.get(i).__currentAnisotropy){t.texParameterf(e,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,a.getMaxAnisotropy()));n.get(i).__currentAnisotropy=i.anisotropy;}}}function initTexture(e,r){if(void 0===e.__webglInit){e.__webglInit=true;r.addEventListener("dispose",onTextureDispose);e.__webglTexture=t.createTexture();s.memory.textures++;}}function uploadTexture(e,r,n){var a=3553;r.isDataTexture2DArray&&(a=35866);r.isDataTexture3D&&(a=32879);initTexture(e,r);i.activeTexture(33984+n);i.bindTexture(a,e.__webglTexture);t.pixelStorei(37440,r.flipY);t.pixelStorei(37441,r.premultiplyAlpha);t.pixelStorei(3317,r.unpackAlignment);var s=textureNeedsPowerOfTwo(r)&&false===isPowerOfTwo(r.image);var l=resizeImage(r.image,s,false,f);var u=isPowerOfTwo(l)||c,h=o.convert(r.format);var d=o.convert(r.type),p=getInternalFormat(r.internalFormat,h,d);setTextureParameters(a,r,u);var m;var g=r.mipmaps;if(r.isDepthTexture){p=6402;c?p=r.type===Pe?36012:r.type===Ce?33190:r.type===Ge?35056:33189:r.type===Pe&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2.");if(r.format===Ve&&6402===p&&r.type!==Le&&r.type!==Ce){console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.");r.type=Le;d=o.convert(r.type);}if(r.format===ke&&6402===p){p=34041;if(r.type!==Ge){console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.");r.type=Ge;d=o.convert(r.type);}}i.texImage2D(3553,0,p,l.width,l.height,0,h,d,null);}else if(r.isDataTexture)if(g.length>0&&u){for(var y=0,x=g.length;y<x;y++){m=g[y];i.texImage2D(3553,y,p,m.width,m.height,0,h,d,m.data);}r.generateMipmaps=false;e.__maxMipLevel=g.length-1;}else {i.texImage2D(3553,0,p,l.width,l.height,0,h,d,l.data);e.__maxMipLevel=0;}else if(r.isCompressedTexture){for(var b=0,_=g.length;b<_;b++){m=g[b];r.format!==Fe&&r.format!==Ne?null!==h?i.compressedTexImage2D(3553,b,p,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(3553,b,p,m.width,m.height,0,h,d,m.data);}e.__maxMipLevel=g.length-1;}else if(r.isDataTexture2DArray){i.texImage3D(35866,0,p,l.width,l.height,l.depth,0,h,d,l.data);e.__maxMipLevel=0;}else if(r.isDataTexture3D){i.texImage3D(32879,0,p,l.width,l.height,l.depth,0,h,d,l.data);e.__maxMipLevel=0;}else if(g.length>0&&u){for(var M=0,w=g.length;M<w;M++){m=g[M];i.texImage2D(3553,M,p,h,d,m);}r.generateMipmaps=false;e.__maxMipLevel=g.length-1;}else {i.texImage2D(3553,0,p,h,d,l);e.__maxMipLevel=0;}textureNeedsGenerateMipmaps(r,u)&&generateMipmap(a,r,l.width,l.height);e.__version=r.version;r.onUpdate&&r.onUpdate(r);}function uploadCubeTexture(e,r,n){if(6===r.image.length){initTexture(e,r);i.activeTexture(33984+n);i.bindTexture(34067,e.__webglTexture);t.pixelStorei(37440,r.flipY);var a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture);var s=r.image[0]&&r.image[0].isDataTexture;var l=[];for(var u=0;u<6;u++)l[u]=a||s?s?r.image[u].image:r.image[u]:resizeImage(r.image[u],false,true,d);var h=l[0],f=isPowerOfTwo(h)||c,p=o.convert(r.format),m=o.convert(r.type),g=getInternalFormat(r.internalFormat,p,m);setTextureParameters(34067,r,f);var y;if(a){for(var x=0;x<6;x++){y=l[x].mipmaps;for(var b=0;b<y.length;b++){var _=y[b];r.format!==Fe&&r.format!==Ne?null!==p?i.compressedTexImage2D(34069+x,b,g,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(34069+x,b,g,_.width,_.height,0,p,m,_.data);}}e.__maxMipLevel=y.length-1;}else {y=r.mipmaps;for(var M=0;M<6;M++)if(s){i.texImage2D(34069+M,0,g,l[M].width,l[M].height,0,p,m,l[M].data);for(var w=0;w<y.length;w++){var S=y[w];var T=S.image[M].image;i.texImage2D(34069+M,w+1,g,T.width,T.height,0,p,m,T.data);}}else {i.texImage2D(34069+M,0,g,p,m,l[M]);for(var A=0;A<y.length;A++){var L=y[A];i.texImage2D(34069+M,A+1,g,p,m,L.image[M]);}}e.__maxMipLevel=y.length;}textureNeedsGenerateMipmaps(r,f)&&generateMipmap(34067,r,h.width,h.height);e.__version=r.version;r.onUpdate&&r.onUpdate(r);}}function setupFrameBufferTexture(e,r,a,s){var l=o.convert(r.texture.format);var u=o.convert(r.texture.type);var c=getInternalFormat(r.texture.internalFormat,l,u);i.texImage2D(s,0,c,r.width,r.height,0,l,u,null);t.bindFramebuffer(36160,e);t.framebufferTexture2D(36160,a,s,n.get(r.texture).__webglTexture,0);t.bindFramebuffer(36160,null);}function setupRenderBufferStorage(e,r,i){t.bindRenderbuffer(36161,e);if(r.depthBuffer&&!r.stencilBuffer){var n=33189;if(i){var a=r.depthTexture;a&&a.isDepthTexture&&(a.type===Pe?n=36012:a.type===Ce&&(n=33190));var s=getRenderTargetSamples(r);t.renderbufferStorageMultisample(36161,s,n,r.width,r.height);}else t.renderbufferStorage(36161,n,r.width,r.height);t.framebufferRenderbuffer(36160,36096,36161,e);}else if(r.depthBuffer&&r.stencilBuffer){if(i){var l=getRenderTargetSamples(r);t.renderbufferStorageMultisample(36161,l,35056,r.width,r.height);}else t.renderbufferStorage(36161,34041,r.width,r.height);t.framebufferRenderbuffer(36160,33306,36161,e);}else {var u=o.convert(r.texture.format);var c=o.convert(r.texture.type);var h=getInternalFormat(r.texture.internalFormat,u,c);if(i){var d=getRenderTargetSamples(r);t.renderbufferStorageMultisample(36161,d,h,r.width,r.height);}else t.renderbufferStorage(36161,h,r.width,r.height);}t.bindRenderbuffer(36161,null);}function setupDepthTexture(e,r){var i=r&&r.isWebGLCubeRenderTarget;if(i)throw new Error("Depth Texture with cube render targets is not supported");t.bindFramebuffer(36160,e);if(!(r.depthTexture&&r.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(!n.get(r.depthTexture).__webglTexture||r.depthTexture.image.width!==r.width||r.depthTexture.image.height!==r.height){r.depthTexture.image.width=r.width;r.depthTexture.image.height=r.height;r.depthTexture.needsUpdate=true;}setTexture2D(r.depthTexture,0);var a=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Ve)t.framebufferTexture2D(36160,36096,3553,a,0);else {if(r.depthTexture.format!==ke)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,a,0);}}function setupDepthRenderbuffer(e){var r=n.get(e);var i=true===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");setupDepthTexture(r.__webglFramebuffer,e);}else if(i){r.__webglDepthbuffer=[];for(var a=0;a<6;a++){t.bindFramebuffer(36160,r.__webglFramebuffer[a]);r.__webglDepthbuffer[a]=t.createRenderbuffer();setupRenderBufferStorage(r.__webglDepthbuffer[a],e,false);}}else {t.bindFramebuffer(36160,r.__webglFramebuffer);r.__webglDepthbuffer=t.createRenderbuffer();setupRenderBufferStorage(r.__webglDepthbuffer,e,false);}t.bindFramebuffer(36160,null);}function setupRenderTarget(e){var r=n.get(e);var a=n.get(e.texture);e.addEventListener("dispose",onRenderTargetDispose);a.__webglTexture=t.createTexture();s.memory.textures++;var l=true===e.isWebGLCubeRenderTarget;var u=true===e.isWebGLMultisampleRenderTarget;var h=isPowerOfTwo(e)||c;if(c&&e.texture.format===Ne&&(e.texture.type===Pe||e.texture.type===Re)){e.texture.format=Fe;console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.");}if(l){r.__webglFramebuffer=[];for(var d=0;d<6;d++)r.__webglFramebuffer[d]=t.createFramebuffer();}else {r.__webglFramebuffer=t.createFramebuffer();if(u)if(c){r.__webglMultisampledFramebuffer=t.createFramebuffer();r.__webglColorRenderbuffer=t.createRenderbuffer();t.bindRenderbuffer(36161,r.__webglColorRenderbuffer);var f=o.convert(e.texture.format);var p=o.convert(e.texture.type);var m=getInternalFormat(e.texture.internalFormat,f,p);var g=getRenderTargetSamples(e);t.renderbufferStorageMultisample(36161,g,m,e.width,e.height);t.bindFramebuffer(36160,r.__webglMultisampledFramebuffer);t.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer);t.bindRenderbuffer(36161,null);if(e.depthBuffer){r.__webglDepthRenderbuffer=t.createRenderbuffer();setupRenderBufferStorage(r.__webglDepthRenderbuffer,e,true);}t.bindFramebuffer(36160,null);}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");}if(l){i.bindTexture(34067,a.__webglTexture);setTextureParameters(34067,e.texture,h);for(var y=0;y<6;y++)setupFrameBufferTexture(r.__webglFramebuffer[y],e,36064,34069+y);textureNeedsGenerateMipmaps(e.texture,h)&&generateMipmap(34067,e.texture,e.width,e.height);i.bindTexture(34067,null);}else {i.bindTexture(3553,a.__webglTexture);setTextureParameters(3553,e.texture,h);setupFrameBufferTexture(r.__webglFramebuffer,e,36064,3553);textureNeedsGenerateMipmaps(e.texture,h)&&generateMipmap(3553,e.texture,e.width,e.height);i.bindTexture(3553,null);}e.depthBuffer&&setupDepthRenderbuffer(e);}function updateRenderTargetMipmap(e){var t=e.texture;var r=isPowerOfTwo(e)||c;if(textureNeedsGenerateMipmaps(t,r)){var a=e.isWebGLCubeRenderTarget?34067:3553;var o=n.get(t).__webglTexture;i.bindTexture(a,o);generateMipmap(a,t,e.width,e.height);i.bindTexture(a,null);}}function updateMultisampleRenderTarget(e){if(e.isWebGLMultisampleRenderTarget)if(c){var r=n.get(e);t.bindFramebuffer(36008,r.__webglMultisampledFramebuffer);t.bindFramebuffer(36009,r.__webglFramebuffer);var i=e.width;var a=e.height;var o=16384;e.depthBuffer&&(o|=256);e.stencilBuffer&&(o|=1024);t.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728);t.bindFramebuffer(36160,r.__webglMultisampledFramebuffer);}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");}function getRenderTargetSamples(e){return c&&e.isWebGLMultisampleRenderTarget?Math.min(p,e.samples):0}function updateVideoTexture(e){var t=s.render.frame;if(m.get(e)!==t){m.set(e,t);e.update();}}var M=false;var w=false;function safeSetTexture2D(e,t){if(e&&e.isWebGLRenderTarget){if(false===M){console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.");M=true;}e=e.texture;}setTexture2D(e,t);}function safeSetTextureCube(e,t){if(e&&e.isWebGLCubeRenderTarget){if(false===w){console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.");w=true;}e=e.texture;}setTextureCube(e,t);}(this||e).allocateTextureUnit=allocateTextureUnit;(this||e).resetTextureUnits=resetTextureUnits;(this||e).setTexture2D=setTexture2D;(this||e).setTexture2DArray=setTexture2DArray;(this||e).setTexture3D=setTexture3D;(this||e).setTextureCube=setTextureCube;(this||e).setupRenderTarget=setupRenderTarget;(this||e).updateRenderTargetMipmap=updateRenderTargetMipmap;(this||e).updateMultisampleRenderTarget=updateMultisampleRenderTarget;(this||e).safeSetTexture2D=safeSetTexture2D;(this||e).safeSetTextureCube=safeSetTextureCube;}function WebGLUtils(e,t,r){var i=r.isWebGL2;function convert(e){var r;if(e===Se)return 5121;if(e===Be)return 32819;if(e===Ie)return 32820;if(e===De)return 33635;if(e===Te)return 5120;if(e===Ae)return 5122;if(e===Le)return 5123;if(e===Ee)return 5124;if(e===Ce)return 5125;if(e===Pe)return 5126;if(e===Re){if(i)return 5131;r=t.get("OES_texture_half_float");return null!==r?r.HALF_FLOAT_OES:null}if(e===Oe)return 6406;if(e===Ne)return 6407;if(e===Fe)return 6408;if(e===Ue)return 6409;if(e===ze)return 6410;if(e===Ve)return 6402;if(e===ke)return 34041;if(e===We)return 6403;if(e===je)return 36244;if(e===qe)return 33319;if(e===Xe)return 33320;if(e===Ye)return 36248;if(e===Je)return 36249;if(e===Ze||e===Qe||e===Ke||e===$e){r=t.get("WEBGL_compressed_texture_s3tc");if(null===r)return null;if(e===Ze)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Qe)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Ke)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===$e)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===et||e===tt||e===rt||e===it){r=t.get("WEBGL_compressed_texture_pvrtc");if(null===r)return null;if(e===et)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===tt)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===rt)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===it)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===nt){r=t.get("WEBGL_compressed_texture_etc1");return null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null}if(e===ot||e===st){r=t.get("WEBGL_compressed_texture_etc");if(null!==r){if(e===ot)return r.COMPRESSED_RGB8_ETC2;if(e===st)return r.COMPRESSED_RGBA8_ETC2_EAC}}if(e===lt||e===ut||e===ct||e===ht||e===dt||e===ft||e===pt||e===mt||e===vt||e===gt||e===yt||e===xt||e===bt||e===_t||e===wt||e===St||e===Tt||e===At||e===Lt||e===Et||e===Ct||e===Pt||e===Rt||e===Bt||e===It||e===Dt||e===Gt||e===Ot){r=t.get("WEBGL_compressed_texture_astc");return null!==r?e:null}if(e===Mt){r=t.get("EXT_texture_compression_bptc");return null!==r?e:null}if(e===Ge){if(i)return 34042;r=t.get("WEBGL_depth_texture");return null!==r?r.UNSIGNED_INT_24_8_WEBGL:null}}return {convert:convert}}function ArrayCamera(t){PerspectiveCamera.call(this||e);(this||e).cameras=t||[];}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:true});function Group(){Object3D.call(this||e);(this||e).type="Group";}Group.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group,isGroup:true});function WebXRController(){(this||e)._targetRay=null;(this||e)._grip=null;(this||e)._hand=null;}Object.assign(WebXRController.prototype,{constructor:WebXRController,getHandSpace:function getHandSpace(){if(null===(this||e)._hand){(this||e)._hand=new Group;(this||e)._hand.matrixAutoUpdate=false;(this||e)._hand.visible=false;(this||e)._hand.joints=[];(this||e)._hand.inputState={pinching:false};if(window.XRHand)for(var t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){var r=new Group;r.matrixAutoUpdate=false;r.visible=false;(this||e)._hand.joints.push(r);(this||e)._hand.add(r);}}return (this||e)._hand},getTargetRaySpace:function getTargetRaySpace(){if(null===(this||e)._targetRay){(this||e)._targetRay=new Group;(this||e)._targetRay.matrixAutoUpdate=false;(this||e)._targetRay.visible=false;}return (this||e)._targetRay},getGripSpace:function getGripSpace(){if(null===(this||e)._grip){(this||e)._grip=new Group;(this||e)._grip.matrixAutoUpdate=false;(this||e)._grip.visible=false;}return (this||e)._grip},dispatchEvent:function dispatchEvent(t){null!==(this||e)._targetRay&&(this||e)._targetRay.dispatchEvent(t);null!==(this||e)._grip&&(this||e)._grip.dispatchEvent(t);null!==(this||e)._hand&&(this||e)._hand.dispatchEvent(t);return this||e},disconnect:function disconnect(t){this.dispatchEvent({type:"disconnected",data:t});null!==(this||e)._targetRay&&((this||e)._targetRay.visible=false);null!==(this||e)._grip&&((this||e)._grip.visible=false);null!==(this||e)._hand&&((this||e)._hand.visible=false);return this||e},update:function update(t,r,i){var n=null;var a=null;var o=null;var s=(this||e)._targetRay;var l=(this||e)._grip;var u=(this||e)._hand;if(t)if(u&&t.hand){o=true;for(var c=0;c<=window.XRHand.LITTLE_PHALANX_TIP;c++)if(t.hand[c]){var h=r.getJointPose(t.hand[c],i);var d=u.joints[c];if(null!==h){d.matrix.fromArray(h.transform.matrix);d.matrix.decompose(d.position,d.rotation,d.scale);d.jointRadius=h.radius;}d.visible=null!==h;var f=u.joints[window.XRHand.INDEX_PHALANX_TIP];var p=u.joints[window.XRHand.THUMB_PHALANX_TIP];var m=f.position.distanceTo(p.position);var g=.02;var y=.005;if(u.inputState.pinching&&m>g+y){u.inputState.pinching=false;this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this||e});}else if(!u.inputState.pinching&&m<=g-y){u.inputState.pinching=true;this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this||e});}}}else {if(null!==s){n=r.getPose(t.targetRaySpace,i);if(null!==n){s.matrix.fromArray(n.transform.matrix);s.matrix.decompose(s.position,s.rotation,s.scale);}}if(null!==l&&t.gripSpace){a=r.getPose(t.gripSpace,i);if(null!==a){l.matrix.fromArray(a.transform.matrix);l.matrix.decompose(l.position,l.rotation,l.scale);}}}null!==s&&(s.visible=null!==n);null!==l&&(l.visible=null!==a);null!==u&&(u.visible=null!==o);return this||e}});function WebXRManager(t,r){var i=this||e;var n=null;var a=1;var o=null;var s="local-floor";var l=null;var u=[];var c=new Map;var h=new PerspectiveCamera;h.layers.enable(1);h.viewport=new jr;var d=new PerspectiveCamera;d.layers.enable(2);d.viewport=new jr;var f=[h,d];var p=new ArrayCamera;p.layers.enable(1);p.layers.enable(2);var m=null;var g=null;(this||e).enabled=false;(this||e).isPresenting=false;(this||e).getController=function(e){var t=u[e];if(void 0===t){t=new WebXRController;u[e]=t;}return t.getTargetRaySpace()};(this||e).getControllerGrip=function(e){var t=u[e];if(void 0===t){t=new WebXRController;u[e]=t;}return t.getGripSpace()};(this||e).getHand=function(e){var t=u[e];if(void 0===t){t=new WebXRController;u[e]=t;}return t.getHandSpace()};function onSessionEvent(e){var t=c.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource});}function onSessionEnd(){c.forEach((function(e,t){e.disconnect(t);}));c.clear();t.setFramebuffer(null);t.setRenderTarget(t.getRenderTarget());_.stop();i.isPresenting=false;i.dispatchEvent({type:"sessionend"});}function onRequestReferenceSpace(e){o=e;_.setContext(n);_.start();i.isPresenting=true;i.dispatchEvent({type:"sessionstart"});}(this||e).setFramebufferScaleFactor=function(e){a=e;true===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.");};(this||e).setReferenceSpaceType=function(e){s=e;true===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.");};(this||e).getReferenceSpace=function(){return o};(this||e).getSession=function(){return n};(this||e).setSession=function(e){n=e;if(null!==n){n.addEventListener("select",onSessionEvent);n.addEventListener("selectstart",onSessionEvent);n.addEventListener("selectend",onSessionEvent);n.addEventListener("squeeze",onSessionEvent);n.addEventListener("squeezestart",onSessionEvent);n.addEventListener("squeezeend",onSessionEvent);n.addEventListener("end",onSessionEnd);var t=r.getContextAttributes();true!==t.xrCompatible&&r.makeXRCompatible();var i={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:a};var o=new XRWebGLLayer(n,r,i);n.updateRenderState({baseLayer:o});n.requestReferenceSpace(s).then(onRequestReferenceSpace);n.addEventListener("inputsourceschange",updateInputSources);}};function updateInputSources(e){var t=n.inputSources;for(var r=0;r<u.length;r++)c.set(t[r],u[r]);for(var i=0;i<e.removed.length;i++){var a=e.removed[i];var o=c.get(a);if(o){o.dispatchEvent({type:"disconnected",data:a});c.delete(a);}}for(var s=0;s<e.added.length;s++){var l=e.added[s];var h=c.get(l);h&&h.dispatchEvent({type:"connected",data:l});}}var y=new Xr;var x=new Xr;function setProjectionFromUnion(e,t,r){y.setFromMatrixPosition(t.matrixWorld);x.setFromMatrixPosition(r.matrixWorld);var i=y.distanceTo(x);var n=t.projectionMatrix.elements;var a=r.projectionMatrix.elements;var o=n[14]/(n[10]-1);var s=n[14]/(n[10]+1);var l=(n[9]+1)/n[5];var u=(n[9]-1)/n[5];var c=(n[8]-1)/n[0];var h=(a[8]+1)/a[0];var d=o*c;var f=o*h;var p=i/(-c+h);var m=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale);e.translateX(m);e.translateZ(p);e.matrixWorld.compose(e.position,e.quaternion,e.scale);e.matrixWorldInverse.getInverse(e.matrixWorld);var g=o+p;var b=s+p;var _=d-m;var M=f+(i-m);var w=l*s/b*g;var S=u*s/b*g;e.projectionMatrix.makePerspective(_,M,w,S,g,b);}function updateCamera(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix);e.matrixWorldInverse.getInverse(e.matrixWorld);}(this||e).getCamera=function(e){p.near=d.near=h.near=e.near;p.far=d.far=h.far=e.far;if(m!==p.near||g!==p.far){n.updateRenderState({depthNear:p.near,depthFar:p.far});m=p.near;g=p.far;}var t=e.parent;var r=p.cameras;updateCamera(p,t);for(var i=0;i<r.length;i++)updateCamera(r[i],t);e.matrixWorld.copy(p.matrixWorld);var a=e.children;for(var o=0,s=a.length;o<s;o++)a[o].updateMatrixWorld(true);2===r.length?setProjectionFromUnion(p,h,d):p.projectionMatrix.copy(h.projectionMatrix);return p};var b=null;function onAnimationFrame(e,r){l=r.getViewerPose(o);if(null!==l){var i=l.views;var a=n.renderState.baseLayer;t.setFramebuffer(a.framebuffer);var s=false;if(i.length!==p.cameras.length){p.cameras.length=0;s=true;}for(var c=0;c<i.length;c++){var h=i[c];var d=a.getViewport(h);var m=f[c];m.matrix.fromArray(h.transform.matrix);m.projectionMatrix.fromArray(h.projectionMatrix);m.viewport.set(d.x,d.y,d.width,d.height);0===c&&p.matrix.copy(m.matrix);true===s&&p.cameras.push(m);}}var g=n.inputSources;for(var y=0;y<u.length;y++){var x=u[y];var _=g[y];x.update(_,r,o);}b&&b(e,r);}var _=new WebGLAnimation;_.setAnimationLoop(onAnimationFrame);(this||e).setAnimationLoop=function(e){b=e;};(this||e).dispose=function(){};}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(e){function refreshFogUniforms(e,t){e.fogColor.value.copy(t.color);if(t.isFog){e.fogNear.value=t.near;e.fogFar.value=t.far;}else t.isFogExp2&&(e.fogDensity.value=t.density);}function refreshMaterialUniforms(e,t,r,i){if(t.isMeshBasicMaterial)refreshUniformsCommon(e,t);else if(t.isMeshLambertMaterial){refreshUniformsCommon(e,t);refreshUniformsLambert(e,t);}else if(t.isMeshToonMaterial){refreshUniformsCommon(e,t);refreshUniformsToon(e,t);}else if(t.isMeshPhongMaterial){refreshUniformsCommon(e,t);refreshUniformsPhong(e,t);}else if(t.isMeshStandardMaterial){refreshUniformsCommon(e,t);t.isMeshPhysicalMaterial?refreshUniformsPhysical(e,t):refreshUniformsStandard(e,t);}else if(t.isMeshMatcapMaterial){refreshUniformsCommon(e,t);refreshUniformsMatcap(e,t);}else if(t.isMeshDepthMaterial){refreshUniformsCommon(e,t);refreshUniformsDepth(e,t);}else if(t.isMeshDistanceMaterial){refreshUniformsCommon(e,t);refreshUniformsDistance(e,t);}else if(t.isMeshNormalMaterial){refreshUniformsCommon(e,t);refreshUniformsNormal(e,t);}else if(t.isLineBasicMaterial){refreshUniformsLine(e,t);t.isLineDashedMaterial&&refreshUniformsDash(e,t);}else if(t.isPointsMaterial)refreshUniformsPoints(e,t,r,i);else if(t.isSpriteMaterial)refreshUniformsSprites(e,t);else if(t.isShadowMaterial){e.color.value.copy(t.color);e.opacity.value=t.opacity;}else t.isShaderMaterial&&(t.uniformsNeedUpdate=false);}function refreshUniformsCommon(t,r){t.opacity.value=r.opacity;r.color&&t.diffuse.value.copy(r.color);r.emissive&&t.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity);r.map&&(t.map.value=r.map);r.alphaMap&&(t.alphaMap.value=r.alphaMap);r.specularMap&&(t.specularMap.value=r.specularMap);var i=e.get(r).envMap;if(i){t.envMap.value=i;t.flipEnvMap.value=i.isCubeTexture&&i._needsFlipEnvMap?-1:1;t.reflectivity.value=r.reflectivity;t.refractionRatio.value=r.refractionRatio;var n=e.get(i).__maxMipLevel;void 0!==n&&(t.maxMipLevel.value=n);}if(r.lightMap){t.lightMap.value=r.lightMap;t.lightMapIntensity.value=r.lightMapIntensity;}if(r.aoMap){t.aoMap.value=r.aoMap;t.aoMapIntensity.value=r.aoMapIntensity;}var a;r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.roughnessMap?a=r.roughnessMap:r.metalnessMap?a=r.metalnessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap?a=r.emissiveMap:r.clearcoatMap?a=r.clearcoatMap:r.clearcoatNormalMap?a=r.clearcoatNormalMap:r.clearcoatRoughnessMap&&(a=r.clearcoatRoughnessMap);if(void 0!==a){a.isWebGLRenderTarget&&(a=a.texture);true===a.matrixAutoUpdate&&a.updateMatrix();t.uvTransform.value.copy(a.matrix);}var o;r.aoMap?o=r.aoMap:r.lightMap&&(o=r.lightMap);if(void 0!==o){o.isWebGLRenderTarget&&(o=o.texture);true===o.matrixAutoUpdate&&o.updateMatrix();t.uv2Transform.value.copy(o.matrix);}}function refreshUniformsLine(e,t){e.diffuse.value.copy(t.color);e.opacity.value=t.opacity;}function refreshUniformsDash(e,t){e.dashSize.value=t.dashSize;e.totalSize.value=t.dashSize+t.gapSize;e.scale.value=t.scale;}function refreshUniformsPoints(e,t,r,i){e.diffuse.value.copy(t.color);e.opacity.value=t.opacity;e.size.value=t.size*r;e.scale.value=.5*i;t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);if(void 0!==n){true===n.matrixAutoUpdate&&n.updateMatrix();e.uvTransform.value.copy(n.matrix);}}function refreshUniformsSprites(e,t){e.diffuse.value.copy(t.color);e.opacity.value=t.opacity;e.rotation.value=t.rotation;t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);if(void 0!==r){true===r.matrixAutoUpdate&&r.updateMatrix();e.uvTransform.value.copy(r.matrix);}}function refreshUniformsLambert(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);}function refreshUniformsPhong(e,t){e.specular.value.copy(t.specular);e.shininess.value=Math.max(t.shininess,1e-4);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale;t.side===p&&(e.bumpScale.value*=-1);}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale);t.side===p&&e.normalScale.value.negate();}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias;}}function refreshUniformsToon(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale;t.side===p&&(e.bumpScale.value*=-1);}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale);t.side===p&&e.normalScale.value.negate();}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias;}}function refreshUniformsStandard(t,r){t.roughness.value=r.roughness;t.metalness.value=r.metalness;r.roughnessMap&&(t.roughnessMap.value=r.roughnessMap);r.metalnessMap&&(t.metalnessMap.value=r.metalnessMap);r.emissiveMap&&(t.emissiveMap.value=r.emissiveMap);if(r.bumpMap){t.bumpMap.value=r.bumpMap;t.bumpScale.value=r.bumpScale;r.side===p&&(t.bumpScale.value*=-1);}if(r.normalMap){t.normalMap.value=r.normalMap;t.normalScale.value.copy(r.normalScale);r.side===p&&t.normalScale.value.negate();}if(r.displacementMap){t.displacementMap.value=r.displacementMap;t.displacementScale.value=r.displacementScale;t.displacementBias.value=r.displacementBias;}var i=e.get(r).envMap;i&&(t.envMapIntensity.value=r.envMapIntensity);}function refreshUniformsPhysical(e,t){refreshUniformsStandard(e,t);e.reflectivity.value=t.reflectivity;e.clearcoat.value=t.clearcoat;e.clearcoatRoughness.value=t.clearcoatRoughness;t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);if(t.clearcoatNormalMap){e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale);e.clearcoatNormalMap.value=t.clearcoatNormalMap;t.side===p&&e.clearcoatNormalScale.value.negate();}e.transmission.value=t.transmission;t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap);}function refreshUniformsMatcap(e,t){t.matcap&&(e.matcap.value=t.matcap);if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale;t.side===p&&(e.bumpScale.value*=-1);}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale);t.side===p&&e.normalScale.value.negate();}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias;}}function refreshUniformsDepth(e,t){if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias;}}function refreshUniformsDistance(e,t){if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias;}e.referencePosition.value.copy(t.referencePosition);e.nearDistance.value=t.nearDistance;e.farDistance.value=t.farDistance;}function refreshUniformsNormal(e,t){if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale;t.side===p&&(e.bumpScale.value*=-1);}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale);t.side===p&&e.normalScale.value.negate();}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias;}}return {refreshFogUniforms:refreshFogUniforms,refreshMaterialUniforms:refreshMaterialUniforms}}function WebGLRenderer(t){t=t||{};var r=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),i=void 0!==t.context?t.context:null,n=void 0!==t.alpha&&t.alpha,a=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,s=void 0!==t.antialias&&t.antialias,l=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",h=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;var d=null;var f=null;(this||e).domElement=r;(this||e).debug={
/**
       * Enables error checking and reporting when shader programs are being compiled
       * @type {boolean}
       */
checkShaderErrors:true};(this||e).autoClear=true;(this||e).autoClearColor=true;(this||e).autoClearDepth=true;(this||e).autoClearStencil=true;(this||e).sortObjects=true;(this||e).clippingPlanes=[];(this||e).localClippingEnabled=false;(this||e).gammaFactor=2;(this||e).outputEncoding=Qt;(this||e).physicallyCorrectLights=false;(this||e).toneMapping=K;(this||e).toneMappingExposure=1;(this||e).maxMorphTargets=8;(this||e).maxMorphNormals=4;var p=this||e;var m=false;var g=null;var y=0;var x=0;var b=null;var _=null;var M=-1;var w=null;var S=null;var T=new jr;var A=new jr;var L=null;var E=r.width;var C=r.height;var P=1;var R=null;var B=null;var I=new jr(0,0,E,C);var D=new jr(0,0,E,C);var G=false;var O=new Yn;var N=false;var F=false;var U=new bi;var z=new Xr;var H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:true};function getTargetPixelRatio(){return null===b?P:1}var V=i;function getContext(e,t){for(var i=0;i<e.length;i++){var n=e[i];var a=r.getContext(n,t);if(null!==a)return a}return null}try{var k={alpha:n,depth:a,stencil:o,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};r.addEventListener("webglcontextlost",onContextLost,false);r.addEventListener("webglcontextrestored",onContextRestore,false);if(null===V){var W=["webgl2","webgl","experimental-webgl"];true===p.isWebGL1Renderer&&W.shift();V=getContext(W,k);if(null===V)throw getContext(W)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===V.getShaderPrecisionFormat&&(V.getShaderPrecisionFormat=function(){return {rangeMin:1,rangeMax:1,precision:1}});}catch(e){console.error("THREE.WebGLRenderer: "+e.message);throw e}var j,q,X,Y;var J,Z,Q,$,ee,te;var re,ie,ne,ae,oe;var se,le,ue,ce;var he,de;function initGLContext(){j=new WebGLExtensions(V);q=new WebGLCapabilities(V,j,t);if(false===q.isWebGL2){j.get("WEBGL_depth_texture");j.get("OES_texture_float");j.get("OES_texture_half_float");j.get("OES_texture_half_float_linear");j.get("OES_standard_derivatives");j.get("OES_element_index_uint");j.get("OES_vertex_array_object");j.get("ANGLE_instanced_arrays");}j.get("OES_texture_float_linear");he=new WebGLUtils(V,j,q);X=new WebGLState(V,j,q);X.scissor(A.copy(D).multiplyScalar(P).floor());X.viewport(T.copy(I).multiplyScalar(P).floor());Y=new WebGLInfo(V);J=new WebGLProperties;Z=new WebGLTextures(V,j,X,J,q,he,Y);Q=new WebGLCubeMaps(p);$=new WebGLAttributes(V,q);de=new WebGLBindingStates(V,j,$,q);ee=new WebGLGeometries(V,$,Y,de);te=new WebGLObjects(V,ee,$,Y);le=new WebGLMorphtargets(V);oe=new WebGLClipping(J);re=new WebGLPrograms(p,Q,j,q,de,oe);ie=new WebGLMaterials(J);ne=new WebGLRenderLists(J);ae=new WebGLRenderStates;se=new WebGLBackground(p,Q,X,te,l);ue=new WebGLBufferRenderer(V,j,Y,q);ce=new WebGLIndexedBufferRenderer(V,j,Y,q);Y.programs=re.programs;p.capabilities=q;p.extensions=j;p.properties=J;p.renderLists=ne;p.state=X;p.info=Y;}initGLContext();var fe=new WebXRManager(p,V);(this||e).xr=fe;var pe=new WebGLShadowMap(p,te,q.maxTextureSize);(this||e).shadowMap=pe;(this||e).getContext=function(){return V};(this||e).getContextAttributes=function(){return V.getContextAttributes()};(this||e).forceContextLoss=function(){var e=j.get("WEBGL_lose_context");e&&e.loseContext();};(this||e).forceContextRestore=function(){var e=j.get("WEBGL_lose_context");e&&e.restoreContext();};(this||e).getPixelRatio=function(){return P};(this||e).setPixelRatio=function(e){if(void 0!==e){P=e;this.setSize(E,C,false);}};(this||e).getSize=function(e){if(void 0===e){console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument");e=new zr;}return e.set(E,C)};(this||e).setSize=function(e,t,i){if(fe.isPresenting)console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");else {E=e;C=t;r.width=Math.floor(e*P);r.height=Math.floor(t*P);if(false!==i){r.style.width=e+"px";r.style.height=t+"px";}this.setViewport(0,0,e,t);}};(this||e).getDrawingBufferSize=function(e){if(void 0===e){console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument");e=new zr;}return e.set(E*P,C*P).floor()};(this||e).setDrawingBufferSize=function(e,t,i){E=e;C=t;P=i;r.width=Math.floor(e*i);r.height=Math.floor(t*i);this.setViewport(0,0,e,t);};(this||e).getCurrentViewport=function(e){if(void 0===e){console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument");e=new jr;}return e.copy(T)};(this||e).getViewport=function(e){return e.copy(I)};(this||e).setViewport=function(e,t,r,i){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,r,i);X.viewport(T.copy(I).multiplyScalar(P).floor());};(this||e).getScissor=function(e){return e.copy(D)};(this||e).setScissor=function(e,t,r,i){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,r,i);X.scissor(A.copy(D).multiplyScalar(P).floor());};(this||e).getScissorTest=function(){return G};(this||e).setScissorTest=function(e){X.setScissorTest(G=e);};(this||e).setOpaqueSort=function(e){R=e;};(this||e).setTransparentSort=function(e){B=e;};(this||e).getClearColor=function(){return se.getClearColor()};(this||e).setClearColor=function(){se.setClearColor.apply(se,arguments);};(this||e).getClearAlpha=function(){return se.getClearAlpha()};(this||e).setClearAlpha=function(){se.setClearAlpha.apply(se,arguments);};(this||e).clear=function(e,t,r){var i=0;(void 0===e||e)&&(i|=16384);(void 0===t||t)&&(i|=256);(void 0===r||r)&&(i|=1024);V.clear(i);};(this||e).clearColor=function(){this.clear(true,false,false);};(this||e).clearDepth=function(){this.clear(false,true,false);};(this||e).clearStencil=function(){this.clear(false,false,true);};(this||e).dispose=function(){r.removeEventListener("webglcontextlost",onContextLost,false);r.removeEventListener("webglcontextrestored",onContextRestore,false);ne.dispose();ae.dispose();J.dispose();Q.dispose();te.dispose();de.dispose();fe.dispose();ve.stop();};function onContextLost(e){e.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");m=true;}function onContextRestore(){console.log("THREE.WebGLRenderer: Context Restored.");m=false;initGLContext();}function onMaterialDispose(e){var t=e.target;t.removeEventListener("dispose",onMaterialDispose);deallocateMaterial(t);}function deallocateMaterial(e){releaseMaterialProgramReference(e);J.remove(e);}function releaseMaterialProgramReference(e){var t=J.get(e).program;void 0!==t&&re.releaseProgram(t);}function renderObjectImmediate(e,t){e.render((function(e){p.renderBufferImmediate(e,t);}));}(this||e).renderBufferImmediate=function(e,t){de.initAttributes();var r=J.get(e);e.hasPositions&&!r.position&&(r.position=V.createBuffer());e.hasNormals&&!r.normal&&(r.normal=V.createBuffer());e.hasUvs&&!r.uv&&(r.uv=V.createBuffer());e.hasColors&&!r.color&&(r.color=V.createBuffer());var i=t.getAttributes();if(e.hasPositions){V.bindBuffer(34962,r.position);V.bufferData(34962,e.positionArray,35048);de.enableAttribute(i.position);V.vertexAttribPointer(i.position,3,5126,false,0,0);}if(e.hasNormals){V.bindBuffer(34962,r.normal);V.bufferData(34962,e.normalArray,35048);de.enableAttribute(i.normal);V.vertexAttribPointer(i.normal,3,5126,false,0,0);}if(e.hasUvs){V.bindBuffer(34962,r.uv);V.bufferData(34962,e.uvArray,35048);de.enableAttribute(i.uv);V.vertexAttribPointer(i.uv,2,5126,false,0,0);}if(e.hasColors){V.bindBuffer(34962,r.color);V.bufferData(34962,e.colorArray,35048);de.enableAttribute(i.color);V.vertexAttribPointer(i.color,3,5126,false,0,0);}de.disableUnusedAttributes();V.drawArrays(4,0,e.count);e.count=0;};(this||e).renderBufferDirect=function(e,t,r,i,n,a){null===t&&(t=H);var o=n.isMesh&&n.matrixWorld.determinant()<0;var s=setProgram(e,t,i,n);X.setMaterial(i,o);var l=r.index;var u=r.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;var c=1;if(true===i.wireframe){l=ee.getWireframeAttribute(r);c=2;}(i.morphTargets||i.morphNormals)&&le.update(n,r,i,s);de.setup(n,i,s,r,l);var h;var d=ue;if(null!==l){h=$.get(l);d=ce;d.setIndex(h);}var f=null!==l?l.count:u.count;var p=r.drawRange.start*c;var m=r.drawRange.count*c;var g=null!==a?a.start*c:0;var y=null!==a?a.count*c:Infinity;var x=Math.max(p,g);var b=Math.min(f,p+m,g+y)-1;var _=Math.max(0,b-x+1);if(0!==_){if(n.isMesh)if(true===i.wireframe){X.setLineWidth(i.wireframeLinewidth*getTargetPixelRatio());d.setMode(1);}else d.setMode(4);else if(n.isLine){var M=i.linewidth;void 0===M&&(M=1);X.setLineWidth(M*getTargetPixelRatio());n.isLineSegments?d.setMode(1):n.isLineLoop?d.setMode(2):d.setMode(3);}else n.isPoints?d.setMode(0):n.isSprite&&d.setMode(4);if(n.isInstancedMesh)d.renderInstances(x,_,n.count);else if(r.isInstancedBufferGeometry){var w=Math.min(r.instanceCount,r._maxInstanceCount);d.renderInstances(x,_,w);}else d.render(x,_);}};(this||e).compile=function(e,t){f=ae.get(e,t);f.init();e.traverse((function(e){if(e.isLight){f.pushLight(e);e.castShadow&&f.pushShadow(e);}}));f.setupLights(t);var r=new WeakMap;e.traverse((function(t){var i=t.material;if(i)if(Array.isArray(i))for(var n=0;n<i.length;n++){var a=i[n];if(false===r.has(a)){initMaterial(a,e,t);r.set(a);}}else if(false===r.has(i)){initMaterial(i,e,t);r.set(i);}}));};var me=null;function onAnimationFrame(e){fe.isPresenting||me&&me(e);}var ve=new WebGLAnimation;ve.setAnimationLoop(onAnimationFrame);"undefined"!==typeof window&&ve.setContext(window);(this||e).setAnimationLoop=function(e){me=e;fe.setAnimationLoop(e);null===e?ve.stop():ve.start();};(this||e).render=function(t,r){var i,n;if(void 0!==arguments[2]){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");i=arguments[2];}if(void 0!==arguments[3]){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");n=arguments[3];}if(void 0===r||true===r.isCamera){if(true!==m){de.resetDefaultState();M=-1;w=null;true===t.autoUpdate&&t.updateMatrixWorld();null===r.parent&&r.updateMatrixWorld();true===fe.enabled&&true===fe.isPresenting&&(r=fe.getCamera(r));true===t.isScene&&t.onBeforeRender(p,t,r,i||b);f=ae.get(t,r);f.init();U.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse);O.setFromProjectionMatrix(U);F=(this||e).localClippingEnabled;N=oe.init((this||e).clippingPlanes,F,r);d=ne.get(t,r);d.init();projectObject(t,r,0,p.sortObjects);d.finish();true===p.sortObjects&&d.sort(R,B);true===N&&oe.beginShadows();var a=f.state.shadowsArray;pe.render(a,t,r);f.setupLights(r);true===N&&oe.endShadows();true===(this||e).info.autoReset&&(this||e).info.reset();void 0!==i&&this.setRenderTarget(i);se.render(d,t,r,n);var o=d.opaque;var s=d.transparent;o.length>0&&renderObjects(o,t,r);s.length>0&&renderObjects(s,t,r);true===t.isScene&&t.onAfterRender(p,t,r);if(null!==b){Z.updateRenderTargetMipmap(b);Z.updateMultisampleRenderTarget(b);}X.buffers.depth.setTest(true);X.buffers.depth.setMask(true);X.buffers.color.setMask(true);X.setPolygonOffset(false);d=null;f=null;}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");};function projectObject(e,t,r,i){if(false!==e.visible){var n=e.layers.test(t.layers);if(n)if(e.isGroup)r=e.renderOrder;else if(e.isLOD)true===e.autoUpdate&&e.update(t);else if(e.isLight){f.pushLight(e);e.castShadow&&f.pushShadow(e);}else if(e.isSprite){if(!e.frustumCulled||O.intersectsSprite(e)){i&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);var a=te.update(e);var o=e.material;o.visible&&d.push(e,a,o,r,z.z,null);}}else if(e.isImmediateRenderObject){i&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);d.push(e,null,e.material,r,z.z,null);}else if(e.isMesh||e.isLine||e.isPoints){if(e.isSkinnedMesh&&e.skeleton.frame!==Y.render.frame){e.skeleton.update();e.skeleton.frame=Y.render.frame;}if(!e.frustumCulled||O.intersectsObject(e)){i&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(U);var s=te.update(e);var l=e.material;if(Array.isArray(l)){var u=s.groups;for(var c=0,h=u.length;c<h;c++){var p=u[c];var m=l[p.materialIndex];m&&m.visible&&d.push(e,s,m,r,z.z,p);}}else l.visible&&d.push(e,s,l,r,z.z,null);}}var g=e.children;for(var y=0,x=g.length;y<x;y++)projectObject(g[y],t,r,i);}}function renderObjects(e,t,r){var i=true===t.isScene?t.overrideMaterial:null;for(var n=0,a=e.length;n<a;n++){var o=e[n];var s=o.object;var l=o.geometry;var u=null===i?o.material:i;var c=o.group;if(r.isArrayCamera){S=r;var h=r.cameras;for(var d=0,p=h.length;d<p;d++){var m=h[d];if(s.layers.test(m.layers)){X.viewport(T.copy(m.viewport));f.setupLights(m);renderObject(s,t,m,l,u,c);}}}else {S=null;renderObject(s,t,r,l,u,c);}}}function renderObject(e,t,r,i,n,a){e.onBeforeRender(p,t,r,i,n,a);f=ae.get(t,S||r);e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld);e.normalMatrix.getNormalMatrix(e.modelViewMatrix);if(e.isImmediateRenderObject){var o=setProgram(r,t,n,e);X.setMaterial(n);de.reset();renderObjectImmediate(e,o);}else p.renderBufferDirect(r,t,i,n,e,a);e.onAfterRender(p,t,r,i,n,a);f=ae.get(t,S||r);}function initMaterial(e,t,r){true!==t.isScene&&(t=H);var i=J.get(e);var n=f.state.lights;var a=f.state.shadowsArray;var o=n.state.version;var s=re.getParameters(e,n.state,a,t,r);var l=re.getProgramCacheKey(s);var u=i.program;var c=true;if(void 0===u)e.addEventListener("dispose",onMaterialDispose);else if(u.cacheKey!==l)releaseMaterialProgramReference(e);else if(i.lightsStateVersion!==o)c=false;else {if(void 0!==s.shaderID){var h=e.isMeshStandardMaterial?t.environment:null;i.envMap=Q.get(e.envMap||h);return}c=false;}if(c){s.uniforms=re.getUniforms(e);e.onBeforeCompile(s,p);u=re.acquireProgram(s,l);i.program=u;i.uniforms=s.uniforms;i.outputEncoding=s.outputEncoding;}var d=i.uniforms;if(!e.isShaderMaterial&&!e.isRawShaderMaterial||true===e.clipping){i.numClippingPlanes=oe.numPlanes;i.numIntersection=oe.numIntersection;d.clippingPlanes=oe.uniform;}i.environment=e.isMeshStandardMaterial?t.environment:null;i.fog=t.fog;i.envMap=Q.get(e.envMap||i.environment);i.needsLights=materialNeedsLights(e);i.lightsStateVersion=o;if(i.needsLights){d.ambientLightColor.value=n.state.ambient;d.lightProbe.value=n.state.probe;d.directionalLights.value=n.state.directional;d.directionalLightShadows.value=n.state.directionalShadow;d.spotLights.value=n.state.spot;d.spotLightShadows.value=n.state.spotShadow;d.rectAreaLights.value=n.state.rectArea;d.ltc_1.value=n.state.rectAreaLTC1;d.ltc_2.value=n.state.rectAreaLTC2;d.pointLights.value=n.state.point;d.pointLightShadows.value=n.state.pointShadow;d.hemisphereLights.value=n.state.hemi;d.directionalShadowMap.value=n.state.directionalShadowMap;d.directionalShadowMatrix.value=n.state.directionalShadowMatrix;d.spotShadowMap.value=n.state.spotShadowMap;d.spotShadowMatrix.value=n.state.spotShadowMatrix;d.pointShadowMap.value=n.state.pointShadowMap;d.pointShadowMatrix.value=n.state.pointShadowMatrix;}var m=i.program.getUniforms();var g=WebGLUniforms.seqWithValue(m.seq,d);i.uniformsList=g;}function setProgram(e,t,r,i){true!==t.isScene&&(t=H);Z.resetTextureUnits();var n=t.fog;var a=r.isMeshStandardMaterial?t.environment:null;var o=null===b?p.outputEncoding:b.texture.encoding;var s=Q.get(r.envMap||a);var l=J.get(r);var u=f.state.lights;if(true===N&&(true===F||e!==w)){var c=e===w&&r.id===M;oe.setState(r,e,c);}if(r.version===l.__version)r.fog&&l.fog!==n||l.environment!==a||l.needsLights&&l.lightsStateVersion!==u.state.version?initMaterial(r,t,i):void 0===l.numClippingPlanes||l.numClippingPlanes===oe.numPlanes&&l.numIntersection===oe.numIntersection?(l.outputEncoding!==o||l.envMap!==s)&&initMaterial(r,t,i):initMaterial(r,t,i);else {initMaterial(r,t,i);l.__version=r.version;}var h=false;var d=false;var m=false;var g=l.program,y=g.getUniforms(),x=l.uniforms;if(X.useProgram(g.program)){h=true;d=true;m=true;}if(r.id!==M){M=r.id;d=true;}if(h||w!==e){y.setValue(V,"projectionMatrix",e.projectionMatrix);q.logarithmicDepthBuffer&&y.setValue(V,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2));if(w!==e){w=e;d=true;m=true;}if(r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var _=y.map.cameraPosition;void 0!==_&&_.setValue(V,z.setFromMatrixPosition(e.matrixWorld));}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&y.setValue(V,"isOrthographic",true===e.isOrthographicCamera);(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||r.skinning)&&y.setValue(V,"viewMatrix",e.matrixWorldInverse);}if(r.skinning){y.setOptional(V,i,"bindMatrix");y.setOptional(V,i,"bindMatrixInverse");var S=i.skeleton;if(S){var T=S.bones;if(q.floatVertexTextures){if(void 0===S.boneTexture){var A=Math.sqrt(4*T.length);A=Ur.ceilPowerOfTwo(A);A=Math.max(A,4);var L=new Float32Array(A*A*4);L.set(S.boneMatrices);var E=new DataTexture(L,A,A,Fe,Pe);S.boneMatrices=L;S.boneTexture=E;S.boneTextureSize=A;}y.setValue(V,"boneTexture",S.boneTexture,Z);y.setValue(V,"boneTextureSize",S.boneTextureSize);}else y.setOptional(V,S,"boneMatrices");}}if(d||l.receiveShadow!==i.receiveShadow){l.receiveShadow=i.receiveShadow;y.setValue(V,"receiveShadow",i.receiveShadow);}if(d){y.setValue(V,"toneMappingExposure",p.toneMappingExposure);l.needsLights&&markUniformsLightsNeedsUpdate(x,m);n&&r.fog&&ie.refreshFogUniforms(x,n);ie.refreshMaterialUniforms(x,r,P,C);WebGLUniforms.upload(V,l.uniformsList,x,Z);}if(r.isShaderMaterial&&true===r.uniformsNeedUpdate){WebGLUniforms.upload(V,l.uniformsList,x,Z);r.uniformsNeedUpdate=false;}r.isSpriteMaterial&&y.setValue(V,"center",i.center);y.setValue(V,"modelViewMatrix",i.modelViewMatrix);y.setValue(V,"normalMatrix",i.normalMatrix);y.setValue(V,"modelMatrix",i.matrixWorld);return g}function markUniformsLightsNeedsUpdate(e,t){e.ambientLightColor.needsUpdate=t;e.lightProbe.needsUpdate=t;e.directionalLights.needsUpdate=t;e.directionalLightShadows.needsUpdate=t;e.pointLights.needsUpdate=t;e.pointLightShadows.needsUpdate=t;e.spotLights.needsUpdate=t;e.spotLightShadows.needsUpdate=t;e.rectAreaLights.needsUpdate=t;e.hemisphereLights.needsUpdate=t;}function materialNeedsLights(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&true===e.lights}(this||e).setFramebuffer=function(e){g!==e&&null===b&&V.bindFramebuffer(36160,e);g=e;};(this||e).getActiveCubeFace=function(){return y};(this||e).getActiveMipmapLevel=function(){return x};(this||e).getRenderList=function(){return d};(this||e).setRenderList=function(e){d=e;};(this||e).getRenderState=function(){return f};(this||e).setRenderState=function(e){f=e;};(this||e).getRenderTarget=function(){return b};(this||e).setRenderTarget=function(e,t,r){void 0===t&&(t=0);void 0===r&&(r=0);b=e;y=t;x=r;e&&void 0===J.get(e).__webglFramebuffer&&Z.setupRenderTarget(e);var i=g;var n=false;if(e){var a=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget){i=a[t];n=true;}else i=e.isWebGLMultisampleRenderTarget?J.get(e).__webglMultisampledFramebuffer:a;T.copy(e.viewport);A.copy(e.scissor);L=e.scissorTest;}else {T.copy(I).multiplyScalar(P).floor();A.copy(D).multiplyScalar(P).floor();L=G;}if(_!==i){V.bindFramebuffer(36160,i);_=i;}X.viewport(T);X.scissor(A);X.setScissorTest(L);if(n){var o=J.get(e.texture);V.framebufferTexture2D(36160,36064,34069+t,o.__webglTexture,r);}};(this||e).readRenderTargetPixels=function(e,t,r,i,n,a,o){if(e&&e.isWebGLRenderTarget){var s=J.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]);if(s){var l=false;if(s!==_){V.bindFramebuffer(36160,s);l=true;}try{var u=e.texture;var c=u.format;var h=u.type;if(c!==Fe&&he.convert(c)!==V.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(h!==Se&&he.convert(h)!==V.getParameter(35738)&&!(h===Pe&&(q.isWebGL2||j.get("OES_texture_float")||j.get("WEBGL_color_buffer_float")))&&!(h===Re&&(q.isWebGL2?j.get("EXT_color_buffer_float"):j.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}36053===V.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&r>=0&&r<=e.height-n&&V.readPixels(t,r,i,n,he.convert(c),he.convert(h),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.");}finally{l&&V.bindFramebuffer(36160,_);}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");};(this||e).copyFramebufferToTexture=function(e,t,r){void 0===r&&(r=0);var i=Math.pow(2,-r);var n=Math.floor(t.image.width*i);var a=Math.floor(t.image.height*i);var o=he.convert(t.format);Z.setTexture2D(t,0);V.copyTexImage2D(3553,r,o,e.x,e.y,n,a,0);X.unbindTexture();};(this||e).copyTextureToTexture=function(e,t,r,i){void 0===i&&(i=0);var n=t.image.width;var a=t.image.height;var o=he.convert(r.format);var s=he.convert(r.type);Z.setTexture2D(r,0);V.pixelStorei(37440,r.flipY);V.pixelStorei(37441,r.premultiplyAlpha);V.pixelStorei(3317,r.unpackAlignment);t.isDataTexture?V.texSubImage2D(3553,i,e.x,e.y,n,a,o,s,t.image.data):t.isCompressedTexture?V.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):V.texSubImage2D(3553,i,e.x,e.y,o,s,t.image);0===i&&r.generateMipmaps&&V.generateMipmap(3553);X.unbindTexture();};(this||e).initTexture=function(e){Z.setTexture2D(e,0);X.unbindTexture();};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this||e}));}function WebGL1Renderer(t){WebGLRenderer.call(this||e,t);}WebGL1Renderer.prototype=Object.assign(Object.create(WebGLRenderer.prototype),{constructor:WebGL1Renderer,isWebGL1Renderer:true});var Fs=function(){function FogExp2(t,r){Object.defineProperty(this||e,"isFogExp2",{value:true});(this||e).name="";(this||e).color=new cn(t);(this||e).density=void 0!==r?r:25e-5;}var t=FogExp2.prototype;t.clone=function clone(){return new FogExp2((this||e).color,(this||e).density)};t.toJSON=function toJSON(){return {type:"FogExp2",color:(this||e).color.getHex(),density:(this||e).density}};return FogExp2}();var Us=function(){function Fog(t,r,i){Object.defineProperty(this||e,"isFog",{value:true});(this||e).name="";(this||e).color=new cn(t);(this||e).near=void 0!==r?r:1;(this||e).far=void 0!==i?i:1e3;}var t=Fog.prototype;t.clone=function clone(){return new Fog((this||e).color,(this||e).near,(this||e).far)};t.toJSON=function toJSON(){return {type:"Fog",color:(this||e).color.getHex(),near:(this||e).near,far:(this||e).far}};return Fog}();var zs=function(t){_inheritsLoose(Scene,t);function Scene(){var r;r=t.call(this||e)||this||e;Object.defineProperty(_assertThisInitialized(r),"isScene",{value:true});r.type="Scene";r.background=null;r.environment=null;r.fog=null;r.overrideMaterial=null;r.autoUpdate=true;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:_assertThisInitialized(r)}));return r}var r=Scene.prototype;r.copy=function copy(r,i){t.prototype.copy.call(this||e,r,i);null!==r.background&&((this||e).background=r.background.clone());null!==r.environment&&((this||e).environment=r.environment.clone());null!==r.fog&&((this||e).fog=r.fog.clone());null!==r.overrideMaterial&&((this||e).overrideMaterial=r.overrideMaterial.clone());(this||e).autoUpdate=r.autoUpdate;(this||e).matrixAutoUpdate=r.matrixAutoUpdate;return this||e};r.toJSON=function toJSON(r){var i=t.prototype.toJSON.call(this||e,r);null!==(this||e).background&&(i.object.background=(this||e).background.toJSON(r));null!==(this||e).environment&&(i.object.environment=(this||e).environment.toJSON(r));null!==(this||e).fog&&(i.object.fog=(this||e).fog.toJSON());return i};return Scene}(Object3D);function InterleavedBuffer(t,r){(this||e).array=t;(this||e).stride=r;(this||e).count=void 0!==t?t.length/r:0;(this||e).usage=Tr;(this||e).updateRange={offset:0,count:-1};(this||e).version=0;(this||e).uuid=Ur.generateUUID();}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function set(t){true===t&&(this||e).version++;}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:true,onUploadCallback:function onUploadCallback(){},setUsage:function setUsage(t){(this||e).usage=t;return this||e},copy:function copy(t){(this||e).array=new t.array.constructor(t.array);(this||e).count=t.count;(this||e).stride=t.stride;(this||e).usage=t.usage;return this||e},copyAt:function copyAt(t,r,i){t*=(this||e).stride;i*=r.stride;for(var n=0,a=(this||e).stride;n<a;n++)(this||e).array[t+n]=r.array[i+n];return this||e},set:function set(t,r){void 0===r&&(r=0);(this||e).array.set(t,r);return this||e},clone:function clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={});void 0===(this||e).array.buffer._uuid&&((this||e).array.buffer._uuid=Ur.generateUUID());void 0===t.arrayBuffers[(this||e).array.buffer._uuid]&&(t.arrayBuffers[(this||e).array.buffer._uuid]=(this||e).array.slice(0).buffer);var r=new(this||e).array.constructor(t.arrayBuffers[(this||e).array.buffer._uuid]);var i=new InterleavedBuffer(r,(this||e).stride);i.setUsage((this||e).usage);return i},onUpload:function onUpload(t){(this||e).onUploadCallback=t;return this||e},toJSON:function toJSON(t){void 0===t.arrayBuffers&&(t.arrayBuffers={});void 0===(this||e).array.buffer._uuid&&((this||e).array.buffer._uuid=Ur.generateUUID());void 0===t.arrayBuffers[(this||e).array.buffer._uuid]&&(t.arrayBuffers[(this||e).array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array((this||e).array.buffer)));return {uuid:(this||e).uuid,buffer:(this||e).array.buffer._uuid,type:(this||e).array.constructor.name,stride:(this||e).stride}}});var Hs=new Xr;function InterleavedBufferAttribute(t,r,i,n){(this||e).name="";(this||e).data=t;(this||e).itemSize=r;(this||e).offset=i;(this||e).normalized=true===n;}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function get(){return (this||e).data.count}},array:{get:function get(){return (this||e).data.array}},needsUpdate:{set:function set(t){(this||e).data.needsUpdate=t;}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:true,applyMatrix4:function applyMatrix4(t){for(var r=0,i=(this||e).data.count;r<i;r++){Hs.x=this.getX(r);Hs.y=this.getY(r);Hs.z=this.getZ(r);Hs.applyMatrix4(t);this.setXYZ(r,Hs.x,Hs.y,Hs.z);}return this||e},setX:function setX(t,r){(this||e).data.array[t*(this||e).data.stride+(this||e).offset]=r;return this||e},setY:function setY(t,r){(this||e).data.array[t*(this||e).data.stride+(this||e).offset+1]=r;return this||e},setZ:function setZ(t,r){(this||e).data.array[t*(this||e).data.stride+(this||e).offset+2]=r;return this||e},setW:function setW(t,r){(this||e).data.array[t*(this||e).data.stride+(this||e).offset+3]=r;return this||e},getX:function getX(t){return (this||e).data.array[t*(this||e).data.stride+(this||e).offset]},getY:function getY(t){return (this||e).data.array[t*(this||e).data.stride+(this||e).offset+1]},getZ:function getZ(t){return (this||e).data.array[t*(this||e).data.stride+(this||e).offset+2]},getW:function getW(t){return (this||e).data.array[t*(this||e).data.stride+(this||e).offset+3]},setXY:function setXY(t,r,i){t=t*(this||e).data.stride+(this||e).offset;(this||e).data.array[t+0]=r;(this||e).data.array[t+1]=i;return this||e},setXYZ:function setXYZ(t,r,i,n){t=t*(this||e).data.stride+(this||e).offset;(this||e).data.array[t+0]=r;(this||e).data.array[t+1]=i;(this||e).data.array[t+2]=n;return this||e},setXYZW:function setXYZW(t,r,i,n,a){t=t*(this||e).data.stride+(this||e).offset;(this||e).data.array[t+0]=r;(this||e).data.array[t+1]=i;(this||e).data.array[t+2]=n;(this||e).data.array[t+3]=a;return this||e},clone:function clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");var r=[];for(var i=0;i<(this||e).count;i++){var n=i*(this||e).data.stride+(this||e).offset;for(var a=0;a<(this||e).itemSize;a++)r.push((this||e).data.array[n+a]);}return new BufferAttribute(new(this||e).array.constructor(r),(this||e).itemSize,(this||e).normalized)}void 0===t.interleavedBuffers&&(t.interleavedBuffers={});void 0===t.interleavedBuffers[(this||e).data.uuid]&&(t.interleavedBuffers[(this||e).data.uuid]=(this||e).data.clone(t));return new InterleavedBufferAttribute(t.interleavedBuffers[(this||e).data.uuid],(this||e).itemSize,(this||e).offset,(this||e).normalized)},toJSON:function toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");var r=[];for(var i=0;i<(this||e).count;i++){var n=i*(this||e).data.stride+(this||e).offset;for(var a=0;a<(this||e).itemSize;a++)r.push((this||e).data.array[n+a]);}return {itemSize:(this||e).itemSize,type:(this||e).array.constructor.name,array:r,normalized:(this||e).normalized}}void 0===t.interleavedBuffers&&(t.interleavedBuffers={});void 0===t.interleavedBuffers[(this||e).data.uuid]&&(t.interleavedBuffers[(this||e).data.uuid]=(this||e).data.toJSON(t));return {isInterleavedBufferAttribute:true,itemSize:(this||e).itemSize,data:(this||e).data.uuid,offset:(this||e).offset,normalized:(this||e).normalized}}});function SpriteMaterial(t){Material.call(this||e);(this||e).type="SpriteMaterial";(this||e).color=new cn(16777215);(this||e).map=null;(this||e).alphaMap=null;(this||e).rotation=0;(this||e).sizeAttenuation=true;(this||e).transparent=true;this.setValues(t);}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=true;SpriteMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).color.copy(t.color);(this||e).map=t.map;(this||e).alphaMap=t.alphaMap;(this||e).rotation=t.rotation;(this||e).sizeAttenuation=t.sizeAttenuation;return this||e};var Vs;var ks=new Xr;var Ws=new Xr;var js=new Xr;var qs=new zr;var Xs=new zr;var Ys=new bi;var Js=new Xr;var Zs=new Xr;var Qs=new Xr;var Ks=new zr;var $s=new zr;var el=new zr;function Sprite(t){Object3D.call(this||e);(this||e).type="Sprite";if(void 0===Vs){Vs=new BufferGeometry;var r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);var i=new InterleavedBuffer(r,5);Vs.setIndex([0,1,2,0,2,3]);Vs.setAttribute("position",new InterleavedBufferAttribute(i,3,0,false));Vs.setAttribute("uv",new InterleavedBufferAttribute(i,2,3,false));}(this||e).geometry=Vs;(this||e).material=void 0!==t?t:new SpriteMaterial;(this||e).center=new zr(.5,.5);}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:true,raycast:function raycast(t,r){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');Ws.setFromMatrixScale((this||e).matrixWorld);Ys.copy(t.camera.matrixWorld);(this||e).modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,(this||e).matrixWorld);js.setFromMatrixPosition((this||e).modelViewMatrix);t.camera.isPerspectiveCamera&&false===(this||e).material.sizeAttenuation&&Ws.multiplyScalar(-js.z);var i=(this||e).material.rotation;var n,a;if(0!==i){a=Math.cos(i);n=Math.sin(i);}var o=(this||e).center;transformVertex(Js.set(-.5,-.5,0),js,o,Ws,n,a);transformVertex(Zs.set(.5,-.5,0),js,o,Ws,n,a);transformVertex(Qs.set(.5,.5,0),js,o,Ws,n,a);Ks.set(0,0);$s.set(1,0);el.set(1,1);var s=t.ray.intersectTriangle(Js,Zs,Qs,false,ks);if(null===s){transformVertex(Zs.set(-.5,.5,0),js,o,Ws,n,a);$s.set(0,1);s=t.ray.intersectTriangle(Js,Qs,Zs,false,ks);if(null===s)return}var l=t.ray.origin.distanceTo(ks);l<t.near||l>t.far||r.push({distance:l,point:ks.clone(),uv:on.getUV(ks,Js,Zs,Qs,Ks,$s,el,new zr),face:null,object:this||e});},copy:function copy(t){Object3D.prototype.copy.call(this||e,t);void 0!==t.center&&(this||e).center.copy(t.center);(this||e).material=t.material;return this||e}});function transformVertex(e,t,r,i,n,a){qs.subVectors(e,r).addScalar(.5).multiply(i);if(void 0!==n){Xs.x=a*qs.x-n*qs.y;Xs.y=n*qs.x+a*qs.y;}else Xs.copy(qs);e.copy(t);e.x+=Xs.x;e.y+=Xs.y;e.applyMatrix4(Ys);}var tl=new Xr;var rl=new Xr;function LOD(){Object3D.call(this||e);(this||e)._currentLevel=0;(this||e).type="LOD";Object.defineProperties(this||e,{levels:{enumerable:true,value:[]}});(this||e).autoUpdate=true;}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:true,copy:function copy(t){Object3D.prototype.copy.call(this||e,t,false);var r=t.levels;for(var i=0,n=r.length;i<n;i++){var a=r[i];this.addLevel(a.object.clone(),a.distance);}(this||e).autoUpdate=t.autoUpdate;return this||e},addLevel:function addLevel(t,r){void 0===r&&(r=0);r=Math.abs(r);var i=(this||e).levels;var n;for(n=0;n<i.length;n++)if(r<i[n].distance)break;i.splice(n,0,{distance:r,object:t});this.add(t);return this||e},getCurrentLevel:function getCurrentLevel(){return (this||e)._currentLevel},getObjectForDistance:function getObjectForDistance(t){var r=(this||e).levels;if(r.length>0){var i,n;for(i=1,n=r.length;i<n;i++)if(t<r[i].distance)break;return r[i-1].object}return null},raycast:function raycast(t,r){var i=(this||e).levels;if(i.length>0){tl.setFromMatrixPosition((this||e).matrixWorld);var n=t.ray.origin.distanceTo(tl);this.getObjectForDistance(n).raycast(t,r);}},update:function update(t){var r=(this||e).levels;if(r.length>1){tl.setFromMatrixPosition(t.matrixWorld);rl.setFromMatrixPosition((this||e).matrixWorld);var i=tl.distanceTo(rl)/t.zoom;r[0].object.visible=true;var n,a;for(n=1,a=r.length;n<a;n++){if(!(i>=r[n].distance))break;r[n-1].object.visible=false;r[n].object.visible=true;}(this||e)._currentLevel=n-1;for(;n<a;n++)r[n].object.visible=false;}},toJSON:function toJSON(t){var r=Object3D.prototype.toJSON.call(this||e,t);false===(this||e).autoUpdate&&(r.object.autoUpdate=false);r.object.levels=[];var i=(this||e).levels;for(var n=0,a=i.length;n<a;n++){var o=i[n];r.object.levels.push({object:o.object.uuid,distance:o.distance});}return r}});function SkinnedMesh(t,r){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");Mesh.call(this||e,t,r);(this||e).type="SkinnedMesh";(this||e).bindMode="attached";(this||e).bindMatrix=new bi;(this||e).bindMatrixInverse=new bi;}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:true,copy:function copy(t){Mesh.prototype.copy.call(this||e,t);(this||e).bindMode=t.bindMode;(this||e).bindMatrix.copy(t.bindMatrix);(this||e).bindMatrixInverse.copy(t.bindMatrixInverse);(this||e).skeleton=t.skeleton;return this||e},bind:function bind(t,r){(this||e).skeleton=t;if(void 0===r){this.updateMatrixWorld(true);(this||e).skeleton.calculateInverses();r=(this||e).matrixWorld;}(this||e).bindMatrix.copy(r);(this||e).bindMatrixInverse.getInverse(r);},pose:function pose(){(this||e).skeleton.pose();},normalizeSkinWeights:function normalizeSkinWeights(){var t=new jr;var r=(this||e).geometry.attributes.skinWeight;for(var i=0,n=r.count;i<n;i++){t.x=r.getX(i);t.y=r.getY(i);t.z=r.getZ(i);t.w=r.getW(i);var a=1/t.manhattanLength();Infinity!==a?t.multiplyScalar(a):t.set(1,0,0,0);r.setXYZW(i,t.x,t.y,t.z,t.w);}},updateMatrixWorld:function updateMatrixWorld(t){Mesh.prototype.updateMatrixWorld.call(this||e,t);"attached"===(this||e).bindMode?(this||e).bindMatrixInverse.getInverse((this||e).matrixWorld):"detached"===(this||e).bindMode?(this||e).bindMatrixInverse.getInverse((this||e).bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+(this||e).bindMode);},boneTransform:function(){var t=new Xr;var r=new jr;var i=new jr;var n=new Xr;var a=new bi;return function(o,s){var l=(this||e).skeleton;var u=(this||e).geometry;r.fromBufferAttribute(u.attributes.skinIndex,o);i.fromBufferAttribute(u.attributes.skinWeight,o);t.fromBufferAttribute(u.attributes.position,o).applyMatrix4((this||e).bindMatrix);s.set(0,0,0);for(var c=0;c<4;c++){var h=i.getComponent(c);if(0!==h){var d=r.getComponent(c);a.multiplyMatrices(l.bones[d].matrixWorld,l.boneInverses[d]);s.addScaledVector(n.copy(t).applyMatrix4(a),h);}}return s.applyMatrix4((this||e).bindMatrixInverse)}}()});var il=new bi;var nl=new bi;function Skeleton(t,r){t=t||[];(this||e).bones=t.slice(0);(this||e).boneMatrices=new Float32Array(16*(this||e).bones.length);(this||e).frame=-1;if(void 0===r)this.calculateInverses();else if((this||e).bones.length===r.length)(this||e).boneInverses=r.slice(0);else {console.warn("THREE.Skeleton boneInverses is the wrong length.");(this||e).boneInverses=[];for(var i=0,n=(this||e).bones.length;i<n;i++)(this||e).boneInverses.push(new bi);}}Object.assign(Skeleton.prototype,{calculateInverses:function calculateInverses(){(this||e).boneInverses=[];for(var t=0,r=(this||e).bones.length;t<r;t++){var i=new bi;(this||e).bones[t]&&i.getInverse((this||e).bones[t].matrixWorld);(this||e).boneInverses.push(i);}},pose:function pose(){for(var t=0,r=(this||e).bones.length;t<r;t++){var i=(this||e).bones[t];i&&i.matrixWorld.getInverse((this||e).boneInverses[t]);}for(var n=0,a=(this||e).bones.length;n<a;n++){var o=(this||e).bones[n];if(o){if(o.parent&&o.parent.isBone){o.matrix.getInverse(o.parent.matrixWorld);o.matrix.multiply(o.matrixWorld);}else o.matrix.copy(o.matrixWorld);o.matrix.decompose(o.position,o.quaternion,o.scale);}}},update:function update(){var t=(this||e).bones;var r=(this||e).boneInverses;var i=(this||e).boneMatrices;var n=(this||e).boneTexture;for(var a=0,o=t.length;a<o;a++){var s=t[a]?t[a].matrixWorld:nl;il.multiplyMatrices(s,r[a]);il.toArray(i,16*a);}void 0!==n&&(n.needsUpdate=true);},clone:function clone(){return new Skeleton((this||e).bones,(this||e).boneInverses)},getBoneByName:function getBoneByName(t){for(var r=0,i=(this||e).bones.length;r<i;r++){var n=(this||e).bones[r];if(n.name===t)return n}},dispose:function dispose(){if((this||e).boneTexture){(this||e).boneTexture.dispose();(this||e).boneTexture=void 0;}}});function Bone(){Object3D.call(this||e);(this||e).type="Bone";}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:true});var al=new bi;var ol=new bi;var sl=[];var ll=new Mesh;function InstancedMesh(t,r,i){Mesh.call(this||e,t,r);(this||e).instanceMatrix=new BufferAttribute(new Float32Array(16*i),16);(this||e).instanceColor=null;(this||e).count=i;(this||e).frustumCulled=false;}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:true,copy:function copy(t){Mesh.prototype.copy.call(this||e,t);(this||e).instanceMatrix.copy(t.instanceMatrix);(this||e).count=t.count;return this||e},setColorAt:function setColorAt(t,r){null===(this||e).instanceColor&&((this||e).instanceColor=new BufferAttribute(new Float32Array(3*(this||e).count),3));r.toArray((this||e).instanceColor.array,3*t);},getMatrixAt:function getMatrixAt(t,r){r.fromArray((this||e).instanceMatrix.array,16*t);},raycast:function raycast(t,r){var i=(this||e).matrixWorld;var n=(this||e).count;ll.geometry=(this||e).geometry;ll.material=(this||e).material;if(void 0!==ll.material)for(var a=0;a<n;a++){this.getMatrixAt(a,al);ol.multiplyMatrices(i,al);ll.matrixWorld=ol;ll.raycast(t,sl);for(var o=0,s=sl.length;o<s;o++){var l=sl[o];l.instanceId=a;l.object=this||e;r.push(l);}sl.length=0;}},setMatrixAt:function setMatrixAt(t,r){r.toArray((this||e).instanceMatrix.array,16*t);},updateMorphTargets:function updateMorphTargets(){}});function LineBasicMaterial(t){Material.call(this||e);(this||e).type="LineBasicMaterial";(this||e).color=new cn(16777215);(this||e).linewidth=1;(this||e).linecap="round";(this||e).linejoin="round";(this||e).morphTargets=false;this.setValues(t);}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=true;LineBasicMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).color.copy(t.color);(this||e).linewidth=t.linewidth;(this||e).linecap=t.linecap;(this||e).linejoin=t.linejoin;(this||e).morphTargets=t.morphTargets;return this||e};var ul=new Xr;var cl=new Xr;var hl=new bi;var dl=new xi;var fl=new hi;function Line(t,r,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.");Object3D.call(this||e);(this||e).type="Line";(this||e).geometry=void 0!==t?t:new BufferGeometry;(this||e).material=void 0!==r?r:new LineBasicMaterial;this.updateMorphTargets();}Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:true,copy:function copy(t){Object3D.prototype.copy.call(this||e,t);(this||e).material=t.material;(this||e).geometry=t.geometry;return this||e},computeLineDistances:function computeLineDistances(){var t=(this||e).geometry;if(t.isBufferGeometry)if(null===t.index){var r=t.attributes.position;var i=[0];for(var n=1,a=r.count;n<a;n++){ul.fromBufferAttribute(r,n-1);cl.fromBufferAttribute(r,n);i[n]=i[n-1];i[n]+=ul.distanceTo(cl);}t.setAttribute("lineDistance",new Float32BufferAttribute(i,1));}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;var s=t.lineDistances;s[0]=0;for(var l=1,u=o.length;l<u;l++){s[l]=s[l-1];s[l]+=o[l-1].distanceTo(o[l]);}}return this||e},raycast:function raycast(t,r){var i=(this||e).geometry;var n=(this||e).matrixWorld;var a=t.params.Line.threshold;null===i.boundingSphere&&i.computeBoundingSphere();fl.copy(i.boundingSphere);fl.applyMatrix4(n);fl.radius+=a;if(false!==t.ray.intersectsSphere(fl)){hl.getInverse(n);dl.copy(t.ray).applyMatrix4(hl);var o=a/(((this||e).scale.x+(this||e).scale.y+(this||e).scale.z)/3);var s=o*o;var l=new Xr;var u=new Xr;var c=new Xr;var h=new Xr;var d=(this||e).isLineSegments?2:1;if(i.isBufferGeometry){var f=i.index;var p=i.attributes;var m=p.position;if(null!==f){var g=f.array;for(var y=0,x=g.length-1;y<x;y+=d){var b=g[y];var _=g[y+1];l.fromBufferAttribute(m,b);u.fromBufferAttribute(m,_);var M=dl.distanceSqToSegment(l,u,h,c);if(!(M>s)){h.applyMatrix4((this||e).matrixWorld);var w=t.ray.origin.distanceTo(h);w<t.near||w>t.far||r.push({distance:w,point:c.clone().applyMatrix4((this||e).matrixWorld),index:y,face:null,faceIndex:null,object:this||e});}}}else for(var S=0,T=m.count-1;S<T;S+=d){l.fromBufferAttribute(m,S);u.fromBufferAttribute(m,S+1);var A=dl.distanceSqToSegment(l,u,h,c);if(!(A>s)){h.applyMatrix4((this||e).matrixWorld);var L=t.ray.origin.distanceTo(h);L<t.near||L>t.far||r.push({distance:L,point:c.clone().applyMatrix4((this||e).matrixWorld),index:S,face:null,faceIndex:null,object:this||e});}}}else if(i.isGeometry){var E=i.vertices;var C=E.length;for(var P=0;P<C-1;P+=d){var R=dl.distanceSqToSegment(E[P],E[P+1],h,c);if(!(R>s)){h.applyMatrix4((this||e).matrixWorld);var B=t.ray.origin.distanceTo(h);B<t.near||B>t.far||r.push({distance:B,point:c.clone().applyMatrix4((this||e).matrixWorld),index:P,face:null,faceIndex:null,object:this||e});}}}}},updateMorphTargets:function updateMorphTargets(){var t=(this||e).geometry;if(t.isBufferGeometry){var r=t.morphAttributes;var i=Object.keys(r);if(i.length>0){var n=r[i[0]];if(void 0!==n){(this||e).morphTargetInfluences=[];(this||e).morphTargetDictionary={};for(var a=0,o=n.length;a<o;a++){var s=n[a].name||String(a);(this||e).morphTargetInfluences.push(0);(this||e).morphTargetDictionary[s]=a;}}}}else {var l=t.morphTargets;void 0!==l&&l.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.");}}});var pl=new Xr;var ml=new Xr;function LineSegments(t,r){Line.call(this||e,t,r);(this||e).type="LineSegments";}LineSegments.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:true,computeLineDistances:function computeLineDistances(){var t=(this||e).geometry;if(t.isBufferGeometry)if(null===t.index){var r=t.attributes.position;var i=[];for(var n=0,a=r.count;n<a;n+=2){pl.fromBufferAttribute(r,n);ml.fromBufferAttribute(r,n+1);i[n]=0===n?0:i[n-1];i[n+1]=i[n]+pl.distanceTo(ml);}t.setAttribute("lineDistance",new Float32BufferAttribute(i,1));}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;var s=t.lineDistances;for(var l=0,u=o.length;l<u;l+=2){pl.copy(o[l]);ml.copy(o[l+1]);s[l]=0===l?0:s[l-1];s[l+1]=s[l]+pl.distanceTo(ml);}}return this||e}});function LineLoop(t,r){Line.call(this||e,t,r);(this||e).type="LineLoop";}LineLoop.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineLoop,isLineLoop:true});function PointsMaterial(t){Material.call(this||e);(this||e).type="PointsMaterial";(this||e).color=new cn(16777215);(this||e).map=null;(this||e).alphaMap=null;(this||e).size=1;(this||e).sizeAttenuation=true;(this||e).morphTargets=false;this.setValues(t);}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=true;PointsMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).color.copy(t.color);(this||e).map=t.map;(this||e).alphaMap=t.alphaMap;(this||e).size=t.size;(this||e).sizeAttenuation=t.sizeAttenuation;(this||e).morphTargets=t.morphTargets;return this||e};var vl=new bi;var gl=new xi;var yl=new hi;var xl=new Xr;function Points(t,r){Object3D.call(this||e);(this||e).type="Points";(this||e).geometry=void 0!==t?t:new BufferGeometry;(this||e).material=void 0!==r?r:new PointsMaterial;this.updateMorphTargets();}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:true,copy:function copy(t){Object3D.prototype.copy.call(this||e,t);(this||e).material=t.material;(this||e).geometry=t.geometry;return this||e},raycast:function raycast(t,r){var i=(this||e).geometry;var n=(this||e).matrixWorld;var a=t.params.Points.threshold;null===i.boundingSphere&&i.computeBoundingSphere();yl.copy(i.boundingSphere);yl.applyMatrix4(n);yl.radius+=a;if(false!==t.ray.intersectsSphere(yl)){vl.getInverse(n);gl.copy(t.ray).applyMatrix4(vl);var o=a/(((this||e).scale.x+(this||e).scale.y+(this||e).scale.z)/3);var s=o*o;if(i.isBufferGeometry){var l=i.index;var u=i.attributes;var c=u.position;if(null!==l){var h=l.array;for(var d=0,f=h.length;d<f;d++){var p=h[d];xl.fromBufferAttribute(c,p);testPoint(xl,p,s,n,t,r,this||e);}}else for(var m=0,g=c.count;m<g;m++){xl.fromBufferAttribute(c,m);testPoint(xl,m,s,n,t,r,this||e);}}else {var y=i.vertices;for(var x=0,b=y.length;x<b;x++)testPoint(y[x],x,s,n,t,r,this||e);}}},updateMorphTargets:function updateMorphTargets(){var t=(this||e).geometry;if(t.isBufferGeometry){var r=t.morphAttributes;var i=Object.keys(r);if(i.length>0){var n=r[i[0]];if(void 0!==n){(this||e).morphTargetInfluences=[];(this||e).morphTargetDictionary={};for(var a=0,o=n.length;a<o;a++){var s=n[a].name||String(a);(this||e).morphTargetInfluences.push(0);(this||e).morphTargetDictionary[s]=a;}}}}else {var l=t.morphTargets;void 0!==l&&l.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.");}}});function testPoint(e,t,r,i,n,a,o){var s=gl.distanceSqToPoint(e);if(s<r){var l=new Xr;gl.closestPointToPoint(e,l);l.applyMatrix4(i);var u=n.ray.origin.distanceTo(l);if(u<n.near||u>n.far)return;a.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:o});}}function VideoTexture(t,r,i,n,a,o,s,l,u){Texture.call(this||e,t,r,i,n,a,o,s,l,u);(this||e).format=void 0!==s?s:Ne;(this||e).minFilter=void 0!==o?o:xe;(this||e).magFilter=void 0!==a?a:xe;(this||e).generateMipmaps=false;var c=this||e;function updateVideo(){c.needsUpdate=true;t.requestVideoFrameCallback(updateVideo);}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(updateVideo);}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:true,update:function update(){var t=(this||e).image;var r="requestVideoFrameCallback"in t;false===r&&t.readyState>=t.HAVE_CURRENT_DATA&&((this||e).needsUpdate=true);}});function CompressedTexture(t,r,i,n,a,o,s,l,u,c,h,d){Texture.call(this||e,null,o,s,l,u,c,n,a,h,d);(this||e).image={width:r,height:i};(this||e).mipmaps=t;(this||e).flipY=false;(this||e).generateMipmaps=false;}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=true;function CanvasTexture(t,r,i,n,a,o,s,l,u){Texture.call(this||e,t,r,i,n,a,o,s,l,u);(this||e).needsUpdate=true;}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=true;function DepthTexture(t,r,i,n,a,o,s,l,u,c){c=void 0!==c?c:Ve;if(c!==Ve&&c!==ke)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Ve&&(i=Le);void 0===i&&c===ke&&(i=Ge);Texture.call(this||e,null,n,a,o,s,l,c,i,u);(this||e).image={width:t,height:r};(this||e).magFilter=void 0!==s?s:pe;(this||e).minFilter=void 0!==l?l:pe;(this||e).flipY=false;(this||e).generateMipmaps=false;}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=true;var bl=0;var _l=new bi;var Ml=new Object3D;var wl=new Xr;function Geometry(){Object.defineProperty(this||e,"id",{value:bl+=2});(this||e).uuid=Ur.generateUUID();(this||e).name="";(this||e).type="Geometry";(this||e).vertices=[];(this||e).colors=[];(this||e).faces=[];(this||e).faceVertexUvs=[[]];(this||e).morphTargets=[];(this||e).morphNormals=[];(this||e).skinWeights=[];(this||e).skinIndices=[];(this||e).lineDistances=[];(this||e).boundingBox=null;(this||e).boundingSphere=null;(this||e).elementsNeedUpdate=false;(this||e).verticesNeedUpdate=false;(this||e).uvsNeedUpdate=false;(this||e).normalsNeedUpdate=false;(this||e).colorsNeedUpdate=false;(this||e).lineDistancesNeedUpdate=false;(this||e).groupsNeedUpdate=false;}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:true,applyMatrix4:function applyMatrix4(t){var r=(new Hr).getNormalMatrix(t);for(var i=0,n=(this||e).vertices.length;i<n;i++){var a=(this||e).vertices[i];a.applyMatrix4(t);}for(var o=0,s=(this||e).faces.length;o<s;o++){var l=(this||e).faces[o];l.normal.applyMatrix3(r).normalize();for(var u=0,c=l.vertexNormals.length;u<c;u++)l.vertexNormals[u].applyMatrix3(r).normalize();}null!==(this||e).boundingBox&&this.computeBoundingBox();null!==(this||e).boundingSphere&&this.computeBoundingSphere();(this||e).verticesNeedUpdate=true;(this||e).normalsNeedUpdate=true;return this||e},rotateX:function rotateX(t){_l.makeRotationX(t);this.applyMatrix4(_l);return this||e},rotateY:function rotateY(t){_l.makeRotationY(t);this.applyMatrix4(_l);return this||e},rotateZ:function rotateZ(t){_l.makeRotationZ(t);this.applyMatrix4(_l);return this||e},translate:function translate(t,r,i){_l.makeTranslation(t,r,i);this.applyMatrix4(_l);return this||e},scale:function scale(t,r,i){_l.makeScale(t,r,i);this.applyMatrix4(_l);return this||e},lookAt:function lookAt(t){Ml.lookAt(t);Ml.updateMatrix();this.applyMatrix4(Ml.matrix);return this||e},fromBufferGeometry:function fromBufferGeometry(t){var r=this||e;var i=null!==t.index?t.index:void 0;var n=t.attributes;if(void 0===n.position){console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.");return this||e}var a=n.position;var o=n.normal;var s=n.color;var l=n.uv;var u=n.uv2;void 0!==u&&((this||e).faceVertexUvs[1]=[]);for(var c=0;c<a.count;c++){r.vertices.push((new Xr).fromBufferAttribute(a,c));void 0!==s&&r.colors.push((new cn).fromBufferAttribute(s,c));}function addFace(e,t,i,n){var a=void 0===s?[]:[r.colors[e].clone(),r.colors[t].clone(),r.colors[i].clone()];var c=void 0===o?[]:[(new Xr).fromBufferAttribute(o,e),(new Xr).fromBufferAttribute(o,t),(new Xr).fromBufferAttribute(o,i)];var h=new hn(e,t,i,c,a,n);r.faces.push(h);void 0!==l&&r.faceVertexUvs[0].push([(new zr).fromBufferAttribute(l,e),(new zr).fromBufferAttribute(l,t),(new zr).fromBufferAttribute(l,i)]);void 0!==u&&r.faceVertexUvs[1].push([(new zr).fromBufferAttribute(u,e),(new zr).fromBufferAttribute(u,t),(new zr).fromBufferAttribute(u,i)]);}var h=t.groups;if(h.length>0)for(var d=0;d<h.length;d++){var f=h[d];var p=f.start;var m=f.count;for(var g=p,y=p+m;g<y;g+=3)void 0!==i?addFace(i.getX(g),i.getX(g+1),i.getX(g+2),f.materialIndex):addFace(g,g+1,g+2,f.materialIndex);}else if(void 0!==i)for(var x=0;x<i.count;x+=3)addFace(i.getX(x),i.getX(x+1),i.getX(x+2));else for(var b=0;b<a.count;b+=3)addFace(b,b+1,b+2);this.computeFaceNormals();null!==t.boundingBox&&((this||e).boundingBox=t.boundingBox.clone());null!==t.boundingSphere&&((this||e).boundingSphere=t.boundingSphere.clone());return this||e},center:function center(){this.computeBoundingBox();(this||e).boundingBox.getCenter(wl).negate();this.translate(wl.x,wl.y,wl.z);return this||e},normalize:function normalize(){this.computeBoundingSphere();var t=(this||e).boundingSphere.center;var r=(this||e).boundingSphere.radius;var i=0===r?1:1/r;var n=new bi;n.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1);this.applyMatrix4(n);return this||e},computeFaceNormals:function computeFaceNormals(){var t=new Xr,r=new Xr;for(var i=0,n=(this||e).faces.length;i<n;i++){var a=(this||e).faces[i];var o=(this||e).vertices[a.a];var s=(this||e).vertices[a.b];var l=(this||e).vertices[a.c];t.subVectors(l,s);r.subVectors(o,s);t.cross(r);t.normalize();a.normal.copy(t);}},computeVertexNormals:function computeVertexNormals(t){void 0===t&&(t=true);var r=new Array((this||e).vertices.length);for(var i=0,n=(this||e).vertices.length;i<n;i++)r[i]=new Xr;if(t){var a=new Xr,o=new Xr;for(var s=0,l=(this||e).faces.length;s<l;s++){var u=(this||e).faces[s];var c=(this||e).vertices[u.a];var h=(this||e).vertices[u.b];var d=(this||e).vertices[u.c];a.subVectors(d,h);o.subVectors(c,h);a.cross(o);r[u.a].add(a);r[u.b].add(a);r[u.c].add(a);}}else {this.computeFaceNormals();for(var f=0,p=(this||e).faces.length;f<p;f++){var m=(this||e).faces[f];r[m.a].add(m.normal);r[m.b].add(m.normal);r[m.c].add(m.normal);}}for(var g=0,y=(this||e).vertices.length;g<y;g++)r[g].normalize();for(var x=0,b=(this||e).faces.length;x<b;x++){var _=(this||e).faces[x];var M=_.vertexNormals;if(3===M.length){M[0].copy(r[_.a]);M[1].copy(r[_.b]);M[2].copy(r[_.c]);}else {M[0]=r[_.a].clone();M[1]=r[_.b].clone();M[2]=r[_.c].clone();}}(this||e).faces.length>0&&((this||e).normalsNeedUpdate=true);},computeFlatVertexNormals:function computeFlatVertexNormals(){this.computeFaceNormals();for(var t=0,r=(this||e).faces.length;t<r;t++){var i=(this||e).faces[t];var n=i.vertexNormals;if(3===n.length){n[0].copy(i.normal);n[1].copy(i.normal);n[2].copy(i.normal);}else {n[0]=i.normal.clone();n[1]=i.normal.clone();n[2]=i.normal.clone();}}(this||e).faces.length>0&&((this||e).normalsNeedUpdate=true);},computeMorphNormals:function computeMorphNormals(){for(var t=0,r=(this||e).faces.length;t<r;t++){var i=(this||e).faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone();i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(var n=0,a=i.vertexNormals.length;n<a;n++)i.__originalVertexNormals[n]?i.__originalVertexNormals[n].copy(i.vertexNormals[n]):i.__originalVertexNormals[n]=i.vertexNormals[n].clone();}var o=new Geometry;o.faces=(this||e).faces;for(var s=0,l=(this||e).morphTargets.length;s<l;s++){if(!(this||e).morphNormals[s]){(this||e).morphNormals[s]={};(this||e).morphNormals[s].faceNormals=[];(this||e).morphNormals[s].vertexNormals=[];var u=(this||e).morphNormals[s].faceNormals;var c=(this||e).morphNormals[s].vertexNormals;for(var h=0,d=(this||e).faces.length;h<d;h++){var f=new Xr;var p={a:new Xr,b:new Xr,c:new Xr};u.push(f);c.push(p);}}var m=(this||e).morphNormals[s];o.vertices=(this||e).morphTargets[s].vertices;o.computeFaceNormals();o.computeVertexNormals();for(var g=0,y=(this||e).faces.length;g<y;g++){var x=(this||e).faces[g];var b=m.faceNormals[g];var _=m.vertexNormals[g];b.copy(x.normal);_.a.copy(x.vertexNormals[0]);_.b.copy(x.vertexNormals[1]);_.c.copy(x.vertexNormals[2]);}}for(var M=0,w=(this||e).faces.length;M<w;M++){var S=(this||e).faces[M];S.normal=S.__originalFaceNormal;S.vertexNormals=S.__originalVertexNormals;}},computeBoundingBox:function computeBoundingBox(){null===(this||e).boundingBox&&((this||e).boundingBox=new Zr);(this||e).boundingBox.setFromPoints((this||e).vertices);},computeBoundingSphere:function computeBoundingSphere(){null===(this||e).boundingSphere&&((this||e).boundingSphere=new hi);(this||e).boundingSphere.setFromPoints((this||e).vertices);},merge:function merge(t,r,i){if(t&&t.isGeometry){var n;var a=(this||e).vertices.length,o=(this||e).vertices,s=t.vertices,l=(this||e).faces,u=t.faces,c=(this||e).colors,h=t.colors;void 0===i&&(i=0);void 0!==r&&(n=(new Hr).getNormalMatrix(r));for(var d=0,f=s.length;d<f;d++){var p=s[d];var m=p.clone();void 0!==r&&m.applyMatrix4(r);o.push(m);}for(var g=0,y=h.length;g<y;g++)c.push(h[g].clone());for(var x=0,b=u.length;x<b;x++){var _=u[x];var M=void 0,w=void 0;var S=_.vertexNormals,T=_.vertexColors;var A=new hn(_.a+a,_.b+a,_.c+a);A.normal.copy(_.normal);void 0!==n&&A.normal.applyMatrix3(n).normalize();for(var L=0,E=S.length;L<E;L++){M=S[L].clone();void 0!==n&&M.applyMatrix3(n).normalize();A.vertexNormals.push(M);}A.color.copy(_.color);for(var C=0,P=T.length;C<P;C++){w=T[C];A.vertexColors.push(w.clone());}A.materialIndex=_.materialIndex+i;l.push(A);}for(var R=0,B=t.faceVertexUvs.length;R<B;R++){var I=t.faceVertexUvs[R];void 0===(this||e).faceVertexUvs[R]&&((this||e).faceVertexUvs[R]=[]);for(var D=0,G=I.length;D<G;D++){var O=I[D],N=[];for(var F=0,U=O.length;F<U;F++)N.push(O[F].clone());(this||e).faceVertexUvs[R].push(N);}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);},mergeMesh:function mergeMesh(e){if(e&&e.isMesh){e.matrixAutoUpdate&&e.updateMatrix();this.merge(e.geometry,e.matrix);}else console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);},mergeVertices:function mergeVertices(){var t={};var r=[],i=[];var n=4;var a=Math.pow(10,n);for(var o=0,s=(this||e).vertices.length;o<s;o++){var l=(this||e).vertices[o];var u=Math.round(l.x*a)+"_"+Math.round(l.y*a)+"_"+Math.round(l.z*a);if(void 0===t[u]){t[u]=o;r.push((this||e).vertices[o]);i[o]=r.length-1;}else i[o]=i[t[u]];}var c=[];for(var h=0,d=(this||e).faces.length;h<d;h++){var f=(this||e).faces[h];f.a=i[f.a];f.b=i[f.b];f.c=i[f.c];var p=[f.a,f.b,f.c];for(var m=0;m<3;m++)if(p[m]===p[(m+1)%3]){c.push(h);break}}for(var g=c.length-1;g>=0;g--){var y=c[g];(this||e).faces.splice(y,1);for(var x=0,b=(this||e).faceVertexUvs.length;x<b;x++)(this||e).faceVertexUvs[x].splice(y,1);}var _=(this||e).vertices.length-r.length;(this||e).vertices=r;return _},setFromPoints:function setFromPoints(t){(this||e).vertices=[];for(var r=0,i=t.length;r<i;r++){var n=t[r];(this||e).vertices.push(new Xr(n.x,n.y,n.z||0));}return this||e},sortFacesByMaterialIndex:function sortFacesByMaterialIndex(){var t=(this||e).faces;var r=t.length;for(var i=0;i<r;i++)t[i]._id=i;function materialIndexSort(e,t){return e.materialIndex-t.materialIndex}t.sort(materialIndexSort);var n=(this||e).faceVertexUvs[0];var a=(this||e).faceVertexUvs[1];var o,s;n&&n.length===r&&(o=[]);a&&a.length===r&&(s=[]);for(var l=0;l<r;l++){var u=t[l]._id;o&&o.push(n[u]);s&&s.push(a[u]);}o&&((this||e).faceVertexUvs[0]=o);s&&((this||e).faceVertexUvs[1]=s);},toJSON:function toJSON(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};t.uuid=(this||e).uuid;t.type=(this||e).type;""!==(this||e).name&&(t.name=(this||e).name);if(void 0!==(this||e).parameters){var r=(this||e).parameters;for(var i in r)void 0!==r[i]&&(t[i]=r[i]);return t}var n=[];for(var a=0;a<(this||e).vertices.length;a++){var o=(this||e).vertices[a];n.push(o.x,o.y,o.z);}var s=[];var l=[];var u={};var c=[];var h={};var d=[];var f={};for(var p=0;p<(this||e).faces.length;p++){var m=(this||e).faces[p];var g=true;var y=false;var x=void 0!==(this||e).faceVertexUvs[0][p];var b=m.normal.length()>0;var _=m.vertexNormals.length>0;var M=1!==m.color.r||1!==m.color.g||1!==m.color.b;var w=m.vertexColors.length>0;var S=0;S=setBit(S,0,0);S=setBit(S,1,g);S=setBit(S,2,y);S=setBit(S,3,x);S=setBit(S,4,b);S=setBit(S,5,_);S=setBit(S,6,M);S=setBit(S,7,w);s.push(S);s.push(m.a,m.b,m.c);s.push(m.materialIndex);if(x){var T=(this||e).faceVertexUvs[0][p];s.push(getUvIndex(T[0]),getUvIndex(T[1]),getUvIndex(T[2]));}b&&s.push(getNormalIndex(m.normal));if(_){var A=m.vertexNormals;s.push(getNormalIndex(A[0]),getNormalIndex(A[1]),getNormalIndex(A[2]));}M&&s.push(getColorIndex(m.color));if(w){var L=m.vertexColors;s.push(getColorIndex(L[0]),getColorIndex(L[1]),getColorIndex(L[2]));}}function setBit(e,t,r){return r?e|1<<t:e&~(1<<t)}function getNormalIndex(e){var t=e.x.toString()+e.y.toString()+e.z.toString();if(void 0!==u[t])return u[t];u[t]=l.length/3;l.push(e.x,e.y,e.z);return u[t]}function getColorIndex(e){var t=e.r.toString()+e.g.toString()+e.b.toString();if(void 0!==h[t])return h[t];h[t]=c.length;c.push(e.getHex());return h[t]}function getUvIndex(e){var t=e.x.toString()+e.y.toString();if(void 0!==f[t])return f[t];f[t]=d.length/2;d.push(e.x,e.y);return f[t]}t.data={};t.data.vertices=n;t.data.normals=l;c.length>0&&(t.data.colors=c);d.length>0&&(t.data.uvs=[d]);t.data.faces=s;return t},clone:function clone(){return (new Geometry).copy(this||e)},copy:function copy(t){(this||e).vertices=[];(this||e).colors=[];(this||e).faces=[];(this||e).faceVertexUvs=[[]];(this||e).morphTargets=[];(this||e).morphNormals=[];(this||e).skinWeights=[];(this||e).skinIndices=[];(this||e).lineDistances=[];(this||e).boundingBox=null;(this||e).boundingSphere=null;(this||e).name=t.name;var r=t.vertices;for(var i=0,n=r.length;i<n;i++)(this||e).vertices.push(r[i].clone());var a=t.colors;for(var o=0,s=a.length;o<s;o++)(this||e).colors.push(a[o].clone());var l=t.faces;for(var u=0,c=l.length;u<c;u++)(this||e).faces.push(l[u].clone());for(var h=0,d=t.faceVertexUvs.length;h<d;h++){var f=t.faceVertexUvs[h];void 0===(this||e).faceVertexUvs[h]&&((this||e).faceVertexUvs[h]=[]);for(var p=0,m=f.length;p<m;p++){var g=f[p],y=[];for(var x=0,b=g.length;x<b;x++){var _=g[x];y.push(_.clone());}(this||e).faceVertexUvs[h].push(y);}}var M=t.morphTargets;for(var w=0,S=M.length;w<S;w++){var T={};T.name=M[w].name;if(void 0!==M[w].vertices){T.vertices=[];for(var A=0,L=M[w].vertices.length;A<L;A++)T.vertices.push(M[w].vertices[A].clone());}if(void 0!==M[w].normals){T.normals=[];for(var E=0,C=M[w].normals.length;E<C;E++)T.normals.push(M[w].normals[E].clone());}(this||e).morphTargets.push(T);}var P=t.morphNormals;for(var R=0,B=P.length;R<B;R++){var I={};if(void 0!==P[R].vertexNormals){I.vertexNormals=[];for(var D=0,G=P[R].vertexNormals.length;D<G;D++){var O=P[R].vertexNormals[D];var N={};N.a=O.a.clone();N.b=O.b.clone();N.c=O.c.clone();I.vertexNormals.push(N);}}if(void 0!==P[R].faceNormals){I.faceNormals=[];for(var F=0,U=P[R].faceNormals.length;F<U;F++)I.faceNormals.push(P[R].faceNormals[F].clone());}(this||e).morphNormals.push(I);}var z=t.skinWeights;for(var H=0,V=z.length;H<V;H++)(this||e).skinWeights.push(z[H].clone());var k=t.skinIndices;for(var W=0,j=k.length;W<j;W++)(this||e).skinIndices.push(k[W].clone());var q=t.lineDistances;for(var X=0,Y=q.length;X<Y;X++)(this||e).lineDistances.push(q[X]);var J=t.boundingBox;null!==J&&((this||e).boundingBox=J.clone());var Z=t.boundingSphere;null!==Z&&((this||e).boundingSphere=Z.clone());(this||e).elementsNeedUpdate=t.elementsNeedUpdate;(this||e).verticesNeedUpdate=t.verticesNeedUpdate;(this||e).uvsNeedUpdate=t.uvsNeedUpdate;(this||e).normalsNeedUpdate=t.normalsNeedUpdate;(this||e).colorsNeedUpdate=t.colorsNeedUpdate;(this||e).lineDistancesNeedUpdate=t.lineDistancesNeedUpdate;(this||e).groupsNeedUpdate=t.groupsNeedUpdate;return this||e},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}});var Sl=function(t){_inheritsLoose(BoxGeometry,t);function BoxGeometry(r,i,n,a,o,s){var l;l=t.call(this||e)||this||e;l.type="BoxGeometry";l.parameters={width:r,height:i,depth:n,widthSegments:a,heightSegments:o,depthSegments:s};l.fromBufferGeometry(new zn(r,i,n,a,o,s));l.mergeVertices();return l}return BoxGeometry}(Geometry);var Tl=function(t){_inheritsLoose(CircleBufferGeometry,t);function CircleBufferGeometry(r,i,n,a){var o;o=t.call(this||e)||this||e;o.type="CircleBufferGeometry";o.parameters={radius:r,segments:i,thetaStart:n,thetaLength:a};r=r||1;i=void 0!==i?Math.max(3,i):8;n=void 0!==n?n:0;a=void 0!==a?a:2*Math.PI;var s=[];var l=[];var u=[];var c=[];var h=new Xr;var d=new zr;l.push(0,0,0);u.push(0,0,1);c.push(.5,.5);for(var f=0,p=3;f<=i;f++,p+=3){var m=n+f/i*a;h.x=r*Math.cos(m);h.y=r*Math.sin(m);l.push(h.x,h.y,h.z);u.push(0,0,1);d.x=(l[p]/r+1)/2;d.y=(l[p+1]/r+1)/2;c.push(d.x,d.y);}for(var g=1;g<=i;g++)s.push(g,g+1,0);o.setIndex(s);o.setAttribute("position",new Float32BufferAttribute(l,3));o.setAttribute("normal",new Float32BufferAttribute(u,3));o.setAttribute("uv",new Float32BufferAttribute(c,2));return o}return CircleBufferGeometry}(BufferGeometry);var Al=function(t){_inheritsLoose(CircleGeometry,t);function CircleGeometry(r,i,n,a){var o;o=t.call(this||e)||this||e;o.type="CircleGeometry";o.parameters={radius:r,segments:i,thetaStart:n,thetaLength:a};o.fromBufferGeometry(new Tl(r,i,n,a));o.mergeVertices();return o}return CircleGeometry}(Geometry);var Ll=function(t){_inheritsLoose(CylinderBufferGeometry,t);function CylinderBufferGeometry(r,i,n,a,o,s,l,u){var c;c=t.call(this||e)||this||e;c.type="CylinderBufferGeometry";c.parameters={radiusTop:r,radiusBottom:i,height:n,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:u};var h=_assertThisInitialized(c);r=void 0!==r?r:1;i=void 0!==i?i:1;n=n||1;a=Math.floor(a)||8;o=Math.floor(o)||1;s=void 0!==s&&s;l=void 0!==l?l:0;u=void 0!==u?u:2*Math.PI;var d=[];var f=[];var p=[];var m=[];var g=0;var y=[];var x=n/2;var b=0;generateTorso();if(false===s){r>0&&generateCap(true);i>0&&generateCap(false);}c.setIndex(d);c.setAttribute("position",new Float32BufferAttribute(f,3));c.setAttribute("normal",new Float32BufferAttribute(p,3));c.setAttribute("uv",new Float32BufferAttribute(m,2));function generateTorso(){var e=new Xr;var t=new Xr;var s=0;var c=(i-r)/n;for(var _=0;_<=o;_++){var M=[];var w=_/o;var S=w*(i-r)+r;for(var T=0;T<=a;T++){var A=T/a;var L=A*u+l;var E=Math.sin(L);var C=Math.cos(L);t.x=S*E;t.y=-w*n+x;t.z=S*C;f.push(t.x,t.y,t.z);e.set(E,c,C).normalize();p.push(e.x,e.y,e.z);m.push(A,1-w);M.push(g++);}y.push(M);}for(var P=0;P<a;P++)for(var R=0;R<o;R++){var B=y[R][P];var I=y[R+1][P];var D=y[R+1][P+1];var G=y[R][P+1];d.push(B,I,G);d.push(I,D,G);s+=6;}h.addGroup(b,s,0);b+=s;}function generateCap(e){var t=g;var n=new zr;var o=new Xr;var s=0;var c=true===e?r:i;var y=true===e?1:-1;for(var _=1;_<=a;_++){f.push(0,x*y,0);p.push(0,y,0);m.push(.5,.5);g++;}var M=g;for(var w=0;w<=a;w++){var S=w/a;var T=S*u+l;var A=Math.cos(T);var L=Math.sin(T);o.x=c*L;o.y=x*y;o.z=c*A;f.push(o.x,o.y,o.z);p.push(0,y,0);n.x=.5*A+.5;n.y=.5*L*y+.5;m.push(n.x,n.y);g++;}for(var E=0;E<a;E++){var C=t+E;var P=M+E;true===e?d.push(P,P+1,C):d.push(P+1,P,C);s+=3;}h.addGroup(b,s,true===e?1:2);b+=s;}return c}return CylinderBufferGeometry}(BufferGeometry);var El=function(t){_inheritsLoose(CylinderGeometry,t);function CylinderGeometry(r,i,n,a,o,s,l,u){var c;c=t.call(this||e)||this||e;c.type="CylinderGeometry";c.parameters={radiusTop:r,radiusBottom:i,height:n,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:u};c.fromBufferGeometry(new Ll(r,i,n,a,o,s,l,u));c.mergeVertices();return c}return CylinderGeometry}(Geometry);var Cl=function(t){_inheritsLoose(ConeGeometry,t);function ConeGeometry(r,i,n,a,o,s,l){var u;u=t.call(this||e,0,r,i,n,a,o,s,l)||this||e;u.type="ConeGeometry";u.parameters={radius:r,height:i,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l};return u}return ConeGeometry}(El);var Pl=function(t){_inheritsLoose(ConeBufferGeometry,t);function ConeBufferGeometry(r,i,n,a,o,s,l){var u;u=t.call(this||e,0,r,i,n,a,o,s,l)||this||e;u.type="ConeBufferGeometry";u.parameters={radius:r,height:i,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l};return u}return ConeBufferGeometry}(Ll);var Rl=function(t){_inheritsLoose(PolyhedronBufferGeometry,t);function PolyhedronBufferGeometry(r,i,n,a){var o;o=t.call(this||e)||this||e;o.type="PolyhedronBufferGeometry";o.parameters={vertices:r,indices:i,radius:n,detail:a};n=n||1;a=a||0;var s=[];var l=[];subdivide(a);applyRadius(n);generateUVs();o.setAttribute("position",new Float32BufferAttribute(s,3));o.setAttribute("normal",new Float32BufferAttribute(s.slice(),3));o.setAttribute("uv",new Float32BufferAttribute(l,2));0===a?o.computeVertexNormals():o.normalizeNormals();function subdivide(e){var t=new Xr;var r=new Xr;var n=new Xr;for(var a=0;a<i.length;a+=3){getVertexByIndex(i[a+0],t);getVertexByIndex(i[a+1],r);getVertexByIndex(i[a+2],n);subdivideFace(t,r,n,e);}}function subdivideFace(e,t,r,i){var n=i+1;var a=[];for(var o=0;o<=n;o++){a[o]=[];var s=e.clone().lerp(r,o/n);var l=t.clone().lerp(r,o/n);var u=n-o;for(var c=0;c<=u;c++)a[o][c]=0===c&&o===n?s:s.clone().lerp(l,c/u);}for(var h=0;h<n;h++)for(var d=0;d<2*(n-h)-1;d++){var f=Math.floor(d/2);if(d%2===0){pushVertex(a[h][f+1]);pushVertex(a[h+1][f]);pushVertex(a[h][f]);}else {pushVertex(a[h][f+1]);pushVertex(a[h+1][f+1]);pushVertex(a[h+1][f]);}}}function applyRadius(e){var t=new Xr;for(var r=0;r<s.length;r+=3){t.x=s[r+0];t.y=s[r+1];t.z=s[r+2];t.normalize().multiplyScalar(e);s[r+0]=t.x;s[r+1]=t.y;s[r+2]=t.z;}}function generateUVs(){var e=new Xr;for(var t=0;t<s.length;t+=3){e.x=s[t+0];e.y=s[t+1];e.z=s[t+2];var r=azimuth(e)/2/Math.PI+.5;var i=inclination(e)/Math.PI+.5;l.push(r,1-i);}correctUVs();correctSeam();}function correctSeam(){for(var e=0;e<l.length;e+=6){var t=l[e+0];var r=l[e+2];var i=l[e+4];var n=Math.max(t,r,i);var a=Math.min(t,r,i);if(n>.9&&a<.1){t<.2&&(l[e+0]+=1);r<.2&&(l[e+2]+=1);i<.2&&(l[e+4]+=1);}}}function pushVertex(e){s.push(e.x,e.y,e.z);}function getVertexByIndex(e,t){var i=3*e;t.x=r[i+0];t.y=r[i+1];t.z=r[i+2];}function correctUVs(){var e=new Xr;var t=new Xr;var r=new Xr;var i=new Xr;var n=new zr;var a=new zr;var o=new zr;for(var u=0,c=0;u<s.length;u+=9,c+=6){e.set(s[u+0],s[u+1],s[u+2]);t.set(s[u+3],s[u+4],s[u+5]);r.set(s[u+6],s[u+7],s[u+8]);n.set(l[c+0],l[c+1]);a.set(l[c+2],l[c+3]);o.set(l[c+4],l[c+5]);i.copy(e).add(t).add(r).divideScalar(3);var h=azimuth(i);correctUV(n,c+0,e,h);correctUV(a,c+2,t,h);correctUV(o,c+4,r,h);}}function correctUV(e,t,r,i){i<0&&1===e.x&&(l[t]=e.x-1);0===r.x&&0===r.z&&(l[t]=i/2/Math.PI+.5);}function azimuth(e){return Math.atan2(e.z,-e.x)}function inclination(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return o}return PolyhedronBufferGeometry}(BufferGeometry);var Bl=function(t){_inheritsLoose(DodecahedronBufferGeometry,t);function DodecahedronBufferGeometry(r,i){var n;var a=(1+Math.sqrt(5))/2;var o=1/a;var s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o];var l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];n=t.call(this||e,s,l,r,i)||this||e;n.type="DodecahedronBufferGeometry";n.parameters={radius:r,detail:i};return n}return DodecahedronBufferGeometry}(Rl);var Il=function(t){_inheritsLoose(DodecahedronGeometry,t);function DodecahedronGeometry(r,i){var n;n=t.call(this||e)||this||e;n.type="DodecahedronGeometry";n.parameters={radius:r,detail:i};n.fromBufferGeometry(new Bl(r,i));n.mergeVertices();return n}return DodecahedronGeometry}(Geometry);var Dl=new Xr;var Gl=new Xr;var Ol=new Xr;var Nl=new on;var Fl=function(t){_inheritsLoose(EdgesGeometry,t);function EdgesGeometry(r,i){var n;n=t.call(this||e)||this||e;n.type="EdgesGeometry";n.parameters={thresholdAngle:i};i=void 0!==i?i:1;r.isGeometry&&(r=(new BufferGeometry).fromGeometry(r));var a=4;var o=Math.pow(10,a);var s=Math.cos(Ur.DEG2RAD*i);var l=r.getIndex();var u=r.getAttribute("position");var c=l?l.count:u.count;var h=[0,0,0];var d=["a","b","c"];var f=new Array(3);var p={};var m=[];for(var g=0;g<c;g+=3){if(l){h[0]=l.getX(g);h[1]=l.getX(g+1);h[2]=l.getX(g+2);}else {h[0]=g;h[1]=g+1;h[2]=g+2;}var y=Nl.a,x=Nl.b,b=Nl.c;y.fromBufferAttribute(u,h[0]);x.fromBufferAttribute(u,h[1]);b.fromBufferAttribute(u,h[2]);Nl.getNormal(Ol);f[0]=Math.round(y.x*o)+","+Math.round(y.y*o)+","+Math.round(y.z*o);f[1]=Math.round(x.x*o)+","+Math.round(x.y*o)+","+Math.round(x.z*o);f[2]=Math.round(b.x*o)+","+Math.round(b.y*o)+","+Math.round(b.z*o);if(f[0]!==f[1]&&f[1]!==f[2]&&f[2]!==f[0])for(var _=0;_<3;_++){var M=(_+1)%3;var w=f[_];var S=f[M];var T=Nl[d[_]];var A=Nl[d[M]];var L=w+"_"+S;var E=S+"_"+w;if(E in p&&p[E]){if(Ol.dot(p[E].normal)<=s){m.push(T.x,T.y,T.z);m.push(A.x,A.y,A.z);}p[E]=null;}else L in p||(p[L]={index0:h[_],index1:h[M],normal:Ol.clone()});}}for(var C in p)if(p[C]){var P=p[C],R=P.index0,B=P.index1;Dl.fromBufferAttribute(u,R);Gl.fromBufferAttribute(u,B);m.push(Dl.x,Dl.y,Dl.z);m.push(Gl.x,Gl.y,Gl.z);}n.setAttribute("position",new Float32BufferAttribute(m,3));return n}return EdgesGeometry}(BufferGeometry);var Ul={triangulate:function triangulate(e,t,r){r=r||2;var i=t&&t.length;var n=i?t[0]*r:e.length;var a=linkedList(e,0,n,r,true);var o=[];if(!a||a.next===a.prev)return o;var s,l,u,c,h,d,f;i&&(a=eliminateHoles(e,t,a,r));if(e.length>80*r){s=u=e[0];l=c=e[1];for(var p=r;p<n;p+=r){h=e[p];d=e[p+1];h<s&&(s=h);d<l&&(l=d);h>u&&(u=h);d>c&&(c=d);}f=Math.max(u-s,c-l);f=0!==f?1/f:0;}earcutLinked(a,o,r,s,l,f);return o}};function linkedList(e,t,r,i,n){var a,o;if(n===signedArea(e,t,r,i)>0)for(a=t;a<r;a+=i)o=insertNode(a,e[a],e[a+1],o);else for(a=r-i;a>=t;a-=i)o=insertNode(a,e[a],e[a+1],o);if(o&&equals(o,o.next)){removeNode(o);o=o.next;}return o}function filterPoints(e,t){if(!e)return e;t||(t=e);var r=e,i;do{i=false;if(r.steiner||!equals(r,r.next)&&0!==area(r.prev,r,r.next))r=r.next;else {removeNode(r);r=t=r.prev;if(r===r.next)break;i=true;}}while(i||r!==t);return t}function earcutLinked(e,t,r,i,n,a,o){if(e){!o&&a&&indexCurve(e,i,n,a);var s=e,l,u;while(e.prev!==e.next){l=e.prev;u=e.next;if(a?isEarHashed(e,i,n,a):isEar(e)){t.push(l.i/r);t.push(e.i/r);t.push(u.i/r);removeNode(e);e=u.next;s=u.next;}else {e=u;if(e===s){if(o)if(1===o){e=cureLocalIntersections(filterPoints(e),t,r);earcutLinked(e,t,r,i,n,a,2);}else 2===o&&splitEarcut(e,t,r,i,n,a);else earcutLinked(filterPoints(e),t,r,i,n,a,1);break}}}}}function isEar(e){var t=e.prev,r=e,i=e.next;if(area(t,r,i)>=0)return false;var n=e.next.next;while(n!==e.prev){if(pointInTriangle(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return false;n=n.next;}return true}function isEarHashed(e,t,r,i){var n=e.prev,a=e,o=e.next;if(area(n,a,o)>=0)return false;var s=n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,l=n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,u=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,c=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y;var h=zOrder(s,l,t,r,i),d=zOrder(u,c,t,r,i);var f=e.prevZ,p=e.nextZ;while(f&&f.z>=h&&p&&p.z<=d){if(f!==e.prev&&f!==e.next&&pointInTriangle(n.x,n.y,a.x,a.y,o.x,o.y,f.x,f.y)&&area(f.prev,f,f.next)>=0)return false;f=f.prevZ;if(p!==e.prev&&p!==e.next&&pointInTriangle(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return false;p=p.nextZ;}while(f&&f.z>=h){if(f!==e.prev&&f!==e.next&&pointInTriangle(n.x,n.y,a.x,a.y,o.x,o.y,f.x,f.y)&&area(f.prev,f,f.next)>=0)return false;f=f.prevZ;}while(p&&p.z<=d){if(p!==e.prev&&p!==e.next&&pointInTriangle(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return false;p=p.nextZ;}return true}function cureLocalIntersections(e,t,r){var i=e;do{var n=i.prev,a=i.next.next;if(!equals(n,a)&&intersects(n,i,i.next,a)&&locallyInside(n,a)&&locallyInside(a,n)){t.push(n.i/r);t.push(i.i/r);t.push(a.i/r);removeNode(i);removeNode(i.next);i=e=a;}i=i.next;}while(i!==e);return filterPoints(i)}function splitEarcut(e,t,r,i,n,a){var o=e;do{var s=o.next.next;while(s!==o.prev){if(o.i!==s.i&&isValidDiagonal(o,s)){var l=splitPolygon(o,s);o=filterPoints(o,o.next);l=filterPoints(l,l.next);earcutLinked(o,t,r,i,n,a);earcutLinked(l,t,r,i,n,a);return}s=s.next;}o=o.next;}while(o!==e)}function eliminateHoles(e,t,r,i){var n=[];var a,o,s,l,u;for(a=0,o=t.length;a<o;a++){s=t[a]*i;l=a<o-1?t[a+1]*i:e.length;u=linkedList(e,s,l,i,false);u===u.next&&(u.steiner=true);n.push(getLeftmost(u));}n.sort(compareX);for(a=0;a<n.length;a++){eliminateHole(n[a],r);r=filterPoints(r,r.next);}return r}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){t=findHoleBridge(e,t);if(t){var r=splitPolygon(t,e);filterPoints(t,t.next);filterPoints(r,r.next);}}function findHoleBridge(e,t){var r=t;var i=e.x;var n=e.y;var a=-Infinity,o;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var s=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){a=s;if(s===i){if(n===r.y)return r;if(n===r.next.y)return r.next}o=r.x<r.next.x?r:r.next;}}r=r.next;}while(r!==t);if(!o)return null;if(i===a)return o;var l=o,u=o.x,c=o.y;var h=Infinity,d;r=o;do{if(i>=r.x&&r.x>=u&&i!==r.x&&pointInTriangle(n<c?i:a,n,u,c,n<c?a:i,n,r.x,r.y)){d=Math.abs(n-r.y)/(i-r.x);if(locallyInside(r,e)&&(d<h||d===h&&(r.x>o.x||r.x===o.x&&sectorContainsSector(o,r)))){o=r;h=d;}}r=r.next;}while(r!==l);return o}function sectorContainsSector(e,t){return area(e.prev,e,t.prev)<0&&area(t.next,e,e.next)<0}function indexCurve(e,t,r,i){var n=e;do{null===n.z&&(n.z=zOrder(n.x,n.y,t,r,i));n.prevZ=n.prev;n.nextZ=n.next;n=n.next;}while(n!==e);n.prevZ.nextZ=null;n.prevZ=null;sortLinked(n);}function sortLinked(e){var t,r,i,n,a,o,s,l,u=1;do{r=e;e=null;a=null;o=0;while(r){o++;i=r;s=0;for(t=0;t<u;t++){s++;i=i.nextZ;if(!i)break}l=u;while(s>0||l>0&&i){if(0!==s&&(0===l||!i||r.z<=i.z)){n=r;r=r.nextZ;s--;}else {n=i;i=i.nextZ;l--;}a?a.nextZ=n:e=n;n.prevZ=a;a=n;}r=i;}a.nextZ=null;u*=2;}while(o>1);return e}function zOrder(e,t,r,i,n){e=32767*(e-r)*n;t=32767*(t-i)*n;e=16711935&(e|e<<8);e=252645135&(e|e<<4);e=858993459&(e|e<<2);e=1431655765&(e|e<<1);t=16711935&(t|t<<8);t=252645135&(t|t<<4);t=858993459&(t|t<<2);t=1431655765&(t|t<<1);return e|t<<1}function getLeftmost(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t);t=t.next;}while(t!==e);return r}function pointInTriangle(e,t,r,i,n,a,o,s){return (n-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(n-o)*(i-s)>=0}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!intersectsPolygon(e,t)&&(locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,t)&&(area(e.prev,e,t.prev)||area(e,t.prev,t))||equals(e,t)&&area(e.prev,e,e.next)>0&&area(t.prev,t,t.next)>0)}function area(e,t,r){return (t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,r,i){var n=sign(area(e,t,r));var a=sign(area(e,t,i));var o=sign(area(r,i,e));var s=sign(area(r,i,t));return n!==a&&o!==s||(!(0!==n||!onSegment(e,r,t))||(!(0!==a||!onSegment(e,i,t))||(!(0!==o||!onSegment(r,e,i))||!(0!==s||!onSegment(r,t,i)))))}function onSegment(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function sign(e){return e>0?1:e<0?-1:0}function intersectsPolygon(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&intersects(r,r.next,e,t))return true;r=r.next;}while(r!==e);return false}function locallyInside(e,t){return area(e.prev,e,e.next)<0?area(e,t,e.next)>=0&&area(e,e.prev,t)>=0:area(e,t,e.prev)<0||area(e,e.next,t)<0}function middleInside(e,t){var r=e,i=false;var n=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!==r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i);r=r.next;}while(r!==e);return i}function splitPolygon(e,t){var r=new Node(e.i,e.x,e.y),i=new Node(t.i,t.x,t.y),n=e.next,a=t.prev;e.next=t;t.prev=e;r.next=n;n.prev=r;i.next=r;r.prev=i;a.next=i;i.prev=a;return i}function insertNode(e,t,r,i){var n=new Node(e,t,r);if(i){n.next=i.next;n.prev=i;i.next.prev=n;i.next=n;}else {n.prev=n;n.next=n;}return n}function removeNode(e){e.next.prev=e.prev;e.prev.next=e.next;e.prevZ&&(e.prevZ.nextZ=e.nextZ);e.nextZ&&(e.nextZ.prevZ=e.prevZ);}function Node(t,r,i){(this||e).i=t;(this||e).x=r;(this||e).y=i;(this||e).prev=null;(this||e).next=null;(this||e).z=null;(this||e).prevZ=null;(this||e).nextZ=null;(this||e).steiner=false;}function signedArea(e,t,r,i){var n=0;for(var a=t,o=r-i;a<r;a+=i){n+=(e[o]-e[a])*(e[a+1]+e[o+1]);o=a;}return n}var zl={area:function area(e){var t=e.length;var r=0;for(var i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return .5*r},isClockWise:function isClockWise(e){return zl.area(e)<0},triangulateShape:function triangulateShape(e,t){var r=[];var i=[];var n=[];removeDupEndPts(e);addContour(r,e);var a=e.length;t.forEach(removeDupEndPts);for(var o=0;o<t.length;o++){i.push(a);a+=t[o].length;addContour(r,t[o]);}var s=Ul.triangulate(r,i);for(var l=0;l<s.length;l+=3)n.push(s.slice(l,l+3));return n}};function removeDupEndPts(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop();}function addContour(e,t){for(var r=0;r<t.length;r++){e.push(t[r].x);e.push(t[r].y);}}var Hl=function(t){_inheritsLoose(ExtrudeBufferGeometry,t);function ExtrudeBufferGeometry(r,i){var n;n=t.call(this||e)||this||e;n.type="ExtrudeBufferGeometry";n.parameters={shapes:r,options:i};r=Array.isArray(r)?r:[r];var a=_assertThisInitialized(n);var o=[];var s=[];for(var l=0,u=r.length;l<u;l++){var c=r[l];addShape(c);}n.setAttribute("position",new Float32BufferAttribute(o,3));n.setAttribute("uv",new Float32BufferAttribute(s,2));n.computeVertexNormals();function addShape(e){var t=[];var r=void 0!==i.curveSegments?i.curveSegments:12;var n=void 0!==i.steps?i.steps:1;var l=void 0!==i.depth?i.depth:100;var u=void 0===i.bevelEnabled||i.bevelEnabled;var c=void 0!==i.bevelThickness?i.bevelThickness:6;var h=void 0!==i.bevelSize?i.bevelSize:c-2;var d=void 0!==i.bevelOffset?i.bevelOffset:0;var f=void 0!==i.bevelSegments?i.bevelSegments:3;var p=i.extrudePath;var m=void 0!==i.UVGenerator?i.UVGenerator:Vl;if(void 0!==i.amount){console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth.");l=i.amount;}var g,y=false;var x,b,_,M;if(p){g=p.getSpacedPoints(n);y=true;u=false;x=p.computeFrenetFrames(n,false);b=new Xr;_=new Xr;M=new Xr;}if(!u){f=0;c=0;h=0;d=0;}var w=e.extractPoints(r);var S=w.shape;var T=w.holes;var A=!zl.isClockWise(S);if(A){S=S.reverse();for(var L=0,E=T.length;L<E;L++){var C=T[L];zl.isClockWise(C)&&(T[L]=C.reverse());}}var P=zl.triangulateShape(S,T);var R=S;for(var B=0,I=T.length;B<I;B++){var D=T[B];S=S.concat(D);}function scalePt2(e,t,r){t||console.error("THREE.ExtrudeGeometry: vec does not exist");return t.clone().multiplyScalar(r).add(e)}var G=S.length,O=P.length;function getBevelVec(e,t,r){var i,n,a;var o=e.x-t.x,s=e.y-t.y;var l=r.x-e.x,u=r.y-e.y;var c=o*o+s*s;var h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(c);var f=Math.sqrt(l*l+u*u);var p=t.x-s/d;var m=t.y+o/d;var g=r.x-u/f;var y=r.y+l/f;var x=((g-p)*u-(y-m)*l)/(o*u-s*l);i=p+o*x-e.x;n=m+s*x-e.y;var b=i*i+n*n;if(b<=2)return new zr(i,n);a=Math.sqrt(b/2);}else {var _=false;o>Number.EPSILON?l>Number.EPSILON&&(_=true):o<-Number.EPSILON?l<-Number.EPSILON&&(_=true):Math.sign(s)===Math.sign(u)&&(_=true);if(_){i=-s;n=o;a=Math.sqrt(c);}else {i=o;n=s;a=Math.sqrt(c/2);}}return new zr(i/a,n/a)}var N=[];for(var F=0,U=R.length,z=U-1,H=F+1;F<U;F++,z++,H++){z===U&&(z=0);H===U&&(H=0);N[F]=getBevelVec(R[F],R[z],R[H]);}var V=[];var k,W=N.concat();for(var j=0,q=T.length;j<q;j++){var X=T[j];k=[];for(var Y=0,J=X.length,Z=J-1,Q=Y+1;Y<J;Y++,Z++,Q++){Z===J&&(Z=0);Q===J&&(Q=0);k[Y]=getBevelVec(X[Y],X[Z],X[Q]);}V.push(k);W=W.concat(k);}for(var K=0;K<f;K++){var $=K/f;var ee=c*Math.cos($*Math.PI/2);var te=h*Math.sin($*Math.PI/2)+d;for(var re=0,ie=R.length;re<ie;re++){var ne=scalePt2(R[re],N[re],te);v(ne.x,ne.y,-ee);}for(var ae=0,oe=T.length;ae<oe;ae++){var se=T[ae];k=V[ae];for(var le=0,ue=se.length;le<ue;le++){var ce=scalePt2(se[le],k[le],te);v(ce.x,ce.y,-ee);}}}var he=h+d;for(var de=0;de<G;de++){var fe=u?scalePt2(S[de],W[de],he):S[de];if(y){_.copy(x.normals[0]).multiplyScalar(fe.x);b.copy(x.binormals[0]).multiplyScalar(fe.y);M.copy(g[0]).add(_).add(b);v(M.x,M.y,M.z);}else v(fe.x,fe.y,0);}for(var pe=1;pe<=n;pe++)for(var me=0;me<G;me++){var ve=u?scalePt2(S[me],W[me],he):S[me];if(y){_.copy(x.normals[pe]).multiplyScalar(ve.x);b.copy(x.binormals[pe]).multiplyScalar(ve.y);M.copy(g[pe]).add(_).add(b);v(M.x,M.y,M.z);}else v(ve.x,ve.y,l/n*pe);}for(var ge=f-1;ge>=0;ge--){var ye=ge/f;var xe=c*Math.cos(ye*Math.PI/2);var be=h*Math.sin(ye*Math.PI/2)+d;for(var _e=0,Me=R.length;_e<Me;_e++){var we=scalePt2(R[_e],N[_e],be);v(we.x,we.y,l+xe);}for(var Se=0,Te=T.length;Se<Te;Se++){var Ae=T[Se];k=V[Se];for(var Le=0,Ee=Ae.length;Le<Ee;Le++){var Ce=scalePt2(Ae[Le],k[Le],be);y?v(Ce.x,Ce.y+g[n-1].y,g[n-1].x+xe):v(Ce.x,Ce.y,l+xe);}}}buildLidFaces();buildSideFaces();function buildLidFaces(){var e=o.length/3;if(u){var t=0;var r=G*t;for(var i=0;i<O;i++){var s=P[i];f3(s[2]+r,s[1]+r,s[0]+r);}t=n+2*f;r=G*t;for(var l=0;l<O;l++){var c=P[l];f3(c[0]+r,c[1]+r,c[2]+r);}}else {for(var h=0;h<O;h++){var d=P[h];f3(d[2],d[1],d[0]);}for(var p=0;p<O;p++){var m=P[p];f3(m[0]+G*n,m[1]+G*n,m[2]+G*n);}}a.addGroup(e,o.length/3-e,0);}function buildSideFaces(){var e=o.length/3;var t=0;sidewalls(R,t);t+=R.length;for(var r=0,i=T.length;r<i;r++){var n=T[r];sidewalls(n,t);t+=n.length;}a.addGroup(e,o.length/3-e,1);}function sidewalls(e,t){var r=e.length;while(--r>=0){var i=r;var a=r-1;a<0&&(a=e.length-1);for(var o=0,s=n+2*f;o<s;o++){var l=G*o;var u=G*(o+1);var c=t+i+l,h=t+a+l,d=t+a+u,p=t+i+u;f4(c,h,d,p);}}}function v(e,r,i){t.push(e);t.push(r);t.push(i);}function f3(e,t,r){addVertex(e);addVertex(t);addVertex(r);var i=o.length/3;var n=m.generateTopUV(a,o,i-3,i-2,i-1);addUV(n[0]);addUV(n[1]);addUV(n[2]);}function f4(e,t,r,i){addVertex(e);addVertex(t);addVertex(i);addVertex(t);addVertex(r);addVertex(i);var n=o.length/3;var s=m.generateSideWallUV(a,o,n-6,n-3,n-2,n-1);addUV(s[0]);addUV(s[1]);addUV(s[3]);addUV(s[1]);addUV(s[2]);addUV(s[3]);}function addVertex(e){o.push(t[3*e+0]);o.push(t[3*e+1]);o.push(t[3*e+2]);}function addUV(e){s.push(e.x);s.push(e.y);}}return n}var r=ExtrudeBufferGeometry.prototype;r.toJSON=function toJSON(){var t=BufferGeometry.prototype.toJSON.call(this||e);var r=(this||e).parameters.shapes;var i=(this||e).parameters.options;return _toJSON(r,i,t)};return ExtrudeBufferGeometry}(BufferGeometry);var Vl={generateTopUV:function generateTopUV(e,t,r,i,n){var a=t[3*r];var o=t[3*r+1];var s=t[3*i];var l=t[3*i+1];var u=t[3*n];var c=t[3*n+1];return [new zr(a,o),new zr(s,l),new zr(u,c)]},generateSideWallUV:function generateSideWallUV(e,t,r,i,n,a){var o=t[3*r];var s=t[3*r+1];var l=t[3*r+2];var u=t[3*i];var c=t[3*i+1];var h=t[3*i+2];var d=t[3*n];var f=t[3*n+1];var p=t[3*n+2];var m=t[3*a];var g=t[3*a+1];var y=t[3*a+2];return Math.abs(s-c)<.01?[new zr(o,1-l),new zr(u,1-h),new zr(d,1-p),new zr(m,1-y)]:[new zr(s,1-l),new zr(c,1-h),new zr(f,1-p),new zr(g,1-y)]}};function _toJSON(e,t,r){r.shapes=[];if(Array.isArray(e))for(var i=0,n=e.length;i<n;i++){var a=e[i];r.shapes.push(a.uuid);}else r.shapes.push(e.uuid);void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON());return r}var kl=function(t){_inheritsLoose(ExtrudeGeometry,t);function ExtrudeGeometry(r,i){var n;n=t.call(this||e)||this||e;n.type="ExtrudeGeometry";n.parameters={shapes:r,options:i};n.fromBufferGeometry(new Hl(r,i));n.mergeVertices();return n}var r=ExtrudeGeometry.prototype;r.toJSON=function toJSON(){var r=t.prototype.toJSON.call(this||e);var i=(this||e).parameters.shapes;var n=(this||e).parameters.options;return _toJSON$1(i,n,r)};return ExtrudeGeometry}(Geometry);function _toJSON$1(e,t,r){r.shapes=[];if(Array.isArray(e))for(var i=0,n=e.length;i<n;i++){var a=e[i];r.shapes.push(a.uuid);}else r.shapes.push(e.uuid);void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON());return r}var Wl=function(t){_inheritsLoose(IcosahedronBufferGeometry,t);function IcosahedronBufferGeometry(r,i){var n;var a=(1+Math.sqrt(5))/2;var o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1];var s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];n=t.call(this||e,o,s,r,i)||this||e;n.type="IcosahedronBufferGeometry";n.parameters={radius:r,detail:i};return n}return IcosahedronBufferGeometry}(Rl);var jl=function(t){_inheritsLoose(IcosahedronGeometry,t);function IcosahedronGeometry(r,i){var n;n=t.call(this||e)||this||e;n.type="IcosahedronGeometry";n.parameters={radius:r,detail:i};n.fromBufferGeometry(new Wl(r,i));n.mergeVertices();return n}return IcosahedronGeometry}(Geometry);var ql=function(t){_inheritsLoose(LatheBufferGeometry,t);function LatheBufferGeometry(r,i,n,a){var o;o=t.call(this||e)||this||e;o.type="LatheBufferGeometry";o.parameters={points:r,segments:i,phiStart:n,phiLength:a};i=Math.floor(i)||12;n=n||0;a=a||2*Math.PI;a=Ur.clamp(a,0,2*Math.PI);var s=[];var l=[];var u=[];var c=1/i;var h=new Xr;var d=new zr;for(var f=0;f<=i;f++){var p=n+f*c*a;var m=Math.sin(p);var g=Math.cos(p);for(var y=0;y<=r.length-1;y++){h.x=r[y].x*m;h.y=r[y].y;h.z=r[y].x*g;l.push(h.x,h.y,h.z);d.x=f/i;d.y=y/(r.length-1);u.push(d.x,d.y);}}for(var x=0;x<i;x++)for(var b=0;b<r.length-1;b++){var _=b+x*r.length;var M=_;var w=_+r.length;var S=_+r.length+1;var T=_+1;s.push(M,w,T);s.push(w,S,T);}o.setIndex(s);o.setAttribute("position",new Float32BufferAttribute(l,3));o.setAttribute("uv",new Float32BufferAttribute(u,2));o.computeVertexNormals();if(a===2*Math.PI){var A=o.attributes.normal.array;var L=new Xr;var E=new Xr;var C=new Xr;var P=i*r.length*3;for(var R=0,B=0;R<r.length;R++,B+=3){L.x=A[B+0];L.y=A[B+1];L.z=A[B+2];E.x=A[P+B+0];E.y=A[P+B+1];E.z=A[P+B+2];C.addVectors(L,E).normalize();A[B+0]=A[P+B+0]=C.x;A[B+1]=A[P+B+1]=C.y;A[B+2]=A[P+B+2]=C.z;}}return o}return LatheBufferGeometry}(BufferGeometry);var Xl=function(t){_inheritsLoose(LatheGeometry,t);function LatheGeometry(r,i,n,a){var o;o=t.call(this||e)||this||e;o.type="LatheGeometry";o.parameters={points:r,segments:i,phiStart:n,phiLength:a};o.fromBufferGeometry(new ql(r,i,n,a));o.mergeVertices();return o}return LatheGeometry}(Geometry);var Yl=function(t){_inheritsLoose(OctahedronBufferGeometry,t);function OctahedronBufferGeometry(r,i){var n;var a=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1];var o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];n=t.call(this||e,a,o,r,i)||this||e;n.type="OctahedronBufferGeometry";n.parameters={radius:r,detail:i};return n}return OctahedronBufferGeometry}(Rl);var Jl=function(t){_inheritsLoose(OctahedronGeometry,t);function OctahedronGeometry(r,i){var n;n=t.call(this||e)||this||e;n.type="OctahedronGeometry";n.parameters={radius:r,detail:i};n.fromBufferGeometry(new Yl(r,i));n.mergeVertices();return n}return OctahedronGeometry}(Geometry);function ParametricBufferGeometry(t,r,i){BufferGeometry.call(this||e);(this||e).type="ParametricBufferGeometry";(this||e).parameters={func:t,slices:r,stacks:i};var n=[];var a=[];var o=[];var s=[];var l=1e-5;var u=new Xr;var c=new Xr,h=new Xr;var d=new Xr,f=new Xr;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var p=r+1;for(var m=0;m<=i;m++){var g=m/i;for(var y=0;y<=r;y++){var x=y/r;t(x,g,c);a.push(c.x,c.y,c.z);if(x-l>=0){t(x-l,g,h);d.subVectors(c,h);}else {t(x+l,g,h);d.subVectors(h,c);}if(g-l>=0){t(x,g-l,h);f.subVectors(c,h);}else {t(x,g+l,h);f.subVectors(h,c);}u.crossVectors(d,f).normalize();o.push(u.x,u.y,u.z);s.push(x,g);}}for(var b=0;b<i;b++)for(var _=0;_<r;_++){var M=b*p+_;var w=b*p+_+1;var S=(b+1)*p+_+1;var T=(b+1)*p+_;n.push(M,w,T);n.push(w,S,T);}this.setIndex(n);this.setAttribute("position",new Float32BufferAttribute(a,3));this.setAttribute("normal",new Float32BufferAttribute(o,3));this.setAttribute("uv",new Float32BufferAttribute(s,2));}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function ParametricGeometry(t,r,i){Geometry.call(this||e);(this||e).type="ParametricGeometry";(this||e).parameters={func:t,slices:r,stacks:i};this.fromBufferGeometry(new ParametricBufferGeometry(t,r,i));this.mergeVertices();}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;var Zl=function(t){_inheritsLoose(PlaneGeometry,t);function PlaneGeometry(r,i,n,a){var o;o=t.call(this||e)||this||e;o.type="PlaneGeometry";o.parameters={width:r,height:i,widthSegments:n,heightSegments:a};o.fromBufferGeometry(new Jn(r,i,n,a));o.mergeVertices();return o}return PlaneGeometry}(Geometry);var Ql=function(t){_inheritsLoose(PolyhedronGeometry,t);function PolyhedronGeometry(r,i,n,a){var o;o=t.call(this||e)||this||e;o.type="PolyhedronGeometry";o.parameters={vertices:r,indices:i,radius:n,detail:a};o.fromBufferGeometry(new Rl(r,i,n,a));o.mergeVertices();return o}return PolyhedronGeometry}(Geometry);var Kl=function(t){_inheritsLoose(RingBufferGeometry,t);function RingBufferGeometry(r,i,n,a,o,s){var l;l=t.call(this||e)||this||e;l.type="RingBufferGeometry";l.parameters={innerRadius:r,outerRadius:i,thetaSegments:n,phiSegments:a,thetaStart:o,thetaLength:s};r=r||.5;i=i||1;o=void 0!==o?o:0;s=void 0!==s?s:2*Math.PI;n=void 0!==n?Math.max(3,n):8;a=void 0!==a?Math.max(1,a):1;var u=[];var c=[];var h=[];var d=[];var f=r;var p=(i-r)/a;var m=new Xr;var g=new zr;for(var y=0;y<=a;y++){for(var x=0;x<=n;x++){var b=o+x/n*s;m.x=f*Math.cos(b);m.y=f*Math.sin(b);c.push(m.x,m.y,m.z);h.push(0,0,1);g.x=(m.x/i+1)/2;g.y=(m.y/i+1)/2;d.push(g.x,g.y);}f+=p;}for(var _=0;_<a;_++){var M=_*(n+1);for(var w=0;w<n;w++){var S=w+M;var T=S;var A=S+n+1;var L=S+n+2;var E=S+1;u.push(T,A,E);u.push(A,L,E);}}l.setIndex(u);l.setAttribute("position",new Float32BufferAttribute(c,3));l.setAttribute("normal",new Float32BufferAttribute(h,3));l.setAttribute("uv",new Float32BufferAttribute(d,2));return l}return RingBufferGeometry}(BufferGeometry);var $l=function(t){_inheritsLoose(RingGeometry,t);function RingGeometry(r,i,n,a,o,s){var l;l=t.call(this||e)||this||e;l.type="RingGeometry";l.parameters={innerRadius:r,outerRadius:i,thetaSegments:n,phiSegments:a,thetaStart:o,thetaLength:s};l.fromBufferGeometry(new Kl(r,i,n,a,o,s));l.mergeVertices();return l}return RingGeometry}(Geometry);var eu=function(t){_inheritsLoose(ShapeBufferGeometry,t);function ShapeBufferGeometry(r,i){var n;n=t.call(this||e)||this||e;n.type="ShapeBufferGeometry";n.parameters={shapes:r,curveSegments:i};i=i||12;var a=[];var o=[];var s=[];var l=[];var u=0;var c=0;if(false===Array.isArray(r))addShape(r);else for(var h=0;h<r.length;h++){addShape(r[h]);n.addGroup(u,c,h);u+=c;c=0;}n.setIndex(a);n.setAttribute("position",new Float32BufferAttribute(o,3));n.setAttribute("normal",new Float32BufferAttribute(s,3));n.setAttribute("uv",new Float32BufferAttribute(l,2));function addShape(e){var t=o.length/3;var r=e.extractPoints(i);var n=r.shape;var u=r.holes;false===zl.isClockWise(n)&&(n=n.reverse());for(var h=0,d=u.length;h<d;h++){var f=u[h];true===zl.isClockWise(f)&&(u[h]=f.reverse());}var p=zl.triangulateShape(n,u);for(var m=0,g=u.length;m<g;m++){var y=u[m];n=n.concat(y);}for(var x=0,b=n.length;x<b;x++){var _=n[x];o.push(_.x,_.y,0);s.push(0,0,1);l.push(_.x,_.y);}for(var M=0,w=p.length;M<w;M++){var S=p[M];var T=S[0]+t;var A=S[1]+t;var L=S[2]+t;a.push(T,A,L);c+=3;}}return n}var r=ShapeBufferGeometry.prototype;r.toJSON=function toJSON(){var t=BufferGeometry.prototype.toJSON.call(this||e);var r=(this||e).parameters.shapes;return _toJSON$2(r,t)};return ShapeBufferGeometry}(BufferGeometry);function _toJSON$2(e,t){t.shapes=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var n=e[r];t.shapes.push(n.uuid);}else t.shapes.push(e.uuid);return t}var tu=function(t){_inheritsLoose(ShapeGeometry,t);function ShapeGeometry(r,i){var n;n=t.call(this||e)||this||e;n.type="ShapeGeometry";if("object"===typeof i){console.warn("THREE.ShapeGeometry: Options parameter has been removed.");i=i.curveSegments;}n.parameters={shapes:r,curveSegments:i};n.fromBufferGeometry(new eu(r,i));n.mergeVertices();return n}var r=ShapeGeometry.prototype;r.toJSON=function toJSON(){var t=Geometry.prototype.toJSON.call(this||e);var r=(this||e).parameters.shapes;return _toJSON$3(r,t)};return ShapeGeometry}(Geometry);function _toJSON$3(e,t){t.shapes=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var n=e[r];t.shapes.push(n.uuid);}else t.shapes.push(e.uuid);return t}var ru=function(t){_inheritsLoose(SphereBufferGeometry,t);function SphereBufferGeometry(r,i,n,a,o,s,l){var u;u=t.call(this||e)||this||e;u.type="SphereBufferGeometry";u.parameters={radius:r,widthSegments:i,heightSegments:n,phiStart:a,phiLength:o,thetaStart:s,thetaLength:l};r=r||1;i=Math.max(3,Math.floor(i)||8);n=Math.max(2,Math.floor(n)||6);a=void 0!==a?a:0;o=void 0!==o?o:2*Math.PI;s=void 0!==s?s:0;l=void 0!==l?l:Math.PI;var c=Math.min(s+l,Math.PI);var h=0;var d=[];var f=new Xr;var p=new Xr;var m=[];var g=[];var y=[];var x=[];for(var b=0;b<=n;b++){var _=[];var M=b/n;var w=0;0==b&&0==s?w=.5/i:b==n&&c==Math.PI&&(w=-.5/i);for(var S=0;S<=i;S++){var T=S/i;f.x=-r*Math.cos(a+T*o)*Math.sin(s+M*l);f.y=r*Math.cos(s+M*l);f.z=r*Math.sin(a+T*o)*Math.sin(s+M*l);g.push(f.x,f.y,f.z);p.copy(f).normalize();y.push(p.x,p.y,p.z);x.push(T+w,1-M);_.push(h++);}d.push(_);}for(var A=0;A<n;A++)for(var L=0;L<i;L++){var E=d[A][L+1];var C=d[A][L];var P=d[A+1][L];var R=d[A+1][L+1];(0!==A||s>0)&&m.push(E,C,R);(A!==n-1||c<Math.PI)&&m.push(C,P,R);}u.setIndex(m);u.setAttribute("position",new Float32BufferAttribute(g,3));u.setAttribute("normal",new Float32BufferAttribute(y,3));u.setAttribute("uv",new Float32BufferAttribute(x,2));return u}return SphereBufferGeometry}(BufferGeometry);var iu=function(t){_inheritsLoose(SphereGeometry,t);function SphereGeometry(r,i,n,a,o,s,l){var u;u=t.call(this||e)||this||e;u.type="SphereGeometry";u.parameters={radius:r,widthSegments:i,heightSegments:n,phiStart:a,phiLength:o,thetaStart:s,thetaLength:l};u.fromBufferGeometry(new ru(r,i,n,a,o,s,l));u.mergeVertices();return u}return SphereGeometry}(Geometry);var nu=function(t){_inheritsLoose(TetrahedronBufferGeometry,t);function TetrahedronBufferGeometry(r,i){var n;var a=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1];var o=[2,1,0,0,3,2,1,3,0,2,3,1];n=t.call(this||e,a,o,r,i)||this||e;n.type="TetrahedronBufferGeometry";n.parameters={radius:r,detail:i};return n}return TetrahedronBufferGeometry}(Rl);var au=function(t){_inheritsLoose(TetrahedronGeometry,t);function TetrahedronGeometry(r,i){var n;n=t.call(this||e)||this||e;n.type="TetrahedronGeometry";n.parameters={radius:r,detail:i};n.fromBufferGeometry(new nu(r,i));n.mergeVertices();return n}return TetrahedronGeometry}(Geometry);var ou=function(t){_inheritsLoose(TextBufferGeometry,t);function TextBufferGeometry(r,i){var n;i=i||{};var a=i.font;if(!(a&&a.isFont)){console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font.");return new BufferGeometry||_assertThisInitialized(n)}var o=a.generateShapes(r,i.size);i.depth=void 0!==i.height?i.height:50;void 0===i.bevelThickness&&(i.bevelThickness=10);void 0===i.bevelSize&&(i.bevelSize=8);void 0===i.bevelEnabled&&(i.bevelEnabled=false);n=t.call(this||e,o,i)||this||e;n.type="TextBufferGeometry";return n}return TextBufferGeometry}(Hl);var su=function(t){_inheritsLoose(TextGeometry,t);function TextGeometry(r,i){var n;n=t.call(this||e)||this||e;n.type="TextGeometry";n.parameters={text:r,parameters:i};n.fromBufferGeometry(new ou(r,i));n.mergeVertices();return n}return TextGeometry}(Geometry);var lu=function(t){_inheritsLoose(TorusBufferGeometry,t);function TorusBufferGeometry(r,i,n,a,o){var s;s=t.call(this||e)||this||e;s.type="TorusBufferGeometry";s.parameters={radius:r,tube:i,radialSegments:n,tubularSegments:a,arc:o};r=r||1;i=i||.4;n=Math.floor(n)||8;a=Math.floor(a)||6;o=o||2*Math.PI;var l=[];var u=[];var c=[];var h=[];var d=new Xr;var f=new Xr;var p=new Xr;for(var m=0;m<=n;m++)for(var g=0;g<=a;g++){var y=g/a*o;var x=m/n*Math.PI*2;f.x=(r+i*Math.cos(x))*Math.cos(y);f.y=(r+i*Math.cos(x))*Math.sin(y);f.z=i*Math.sin(x);u.push(f.x,f.y,f.z);d.x=r*Math.cos(y);d.y=r*Math.sin(y);p.subVectors(f,d).normalize();c.push(p.x,p.y,p.z);h.push(g/a);h.push(m/n);}for(var b=1;b<=n;b++)for(var _=1;_<=a;_++){var M=(a+1)*b+_-1;var w=(a+1)*(b-1)+_-1;var S=(a+1)*(b-1)+_;var T=(a+1)*b+_;l.push(M,w,T);l.push(w,S,T);}s.setIndex(l);s.setAttribute("position",new Float32BufferAttribute(u,3));s.setAttribute("normal",new Float32BufferAttribute(c,3));s.setAttribute("uv",new Float32BufferAttribute(h,2));return s}return TorusBufferGeometry}(BufferGeometry);var uu=function(t){_inheritsLoose(TorusGeometry,t);function TorusGeometry(r,i,n,a,o){var s;s=t.call(this||e)||this||e;s.type="TorusGeometry";s.parameters={radius:r,tube:i,radialSegments:n,tubularSegments:a,arc:o};s.fromBufferGeometry(new lu(r,i,n,a,o));s.mergeVertices();return s}return TorusGeometry}(Geometry);var cu=function(t){_inheritsLoose(TorusKnotBufferGeometry,t);function TorusKnotBufferGeometry(r,i,n,a,o,s){var l;l=t.call(this||e)||this||e;l.type="TorusKnotBufferGeometry";l.parameters={radius:r,tube:i,tubularSegments:n,radialSegments:a,p:o,q:s};r=r||1;i=i||.4;n=Math.floor(n)||64;a=Math.floor(a)||8;o=o||2;s=s||3;var u=[];var c=[];var h=[];var d=[];var f=new Xr;var p=new Xr;var m=new Xr;var g=new Xr;var y=new Xr;var x=new Xr;var b=new Xr;for(var _=0;_<=n;++_){var M=_/n*o*Math.PI*2;calculatePositionOnCurve(M,o,s,r,m);calculatePositionOnCurve(M+.01,o,s,r,g);x.subVectors(g,m);b.addVectors(g,m);y.crossVectors(x,b);b.crossVectors(y,x);y.normalize();b.normalize();for(var w=0;w<=a;++w){var S=w/a*Math.PI*2;var T=-i*Math.cos(S);var A=i*Math.sin(S);f.x=m.x+(T*b.x+A*y.x);f.y=m.y+(T*b.y+A*y.y);f.z=m.z+(T*b.z+A*y.z);c.push(f.x,f.y,f.z);p.subVectors(f,m).normalize();h.push(p.x,p.y,p.z);d.push(_/n);d.push(w/a);}}for(var L=1;L<=n;L++)for(var E=1;E<=a;E++){var C=(a+1)*(L-1)+(E-1);var P=(a+1)*L+(E-1);var R=(a+1)*L+E;var B=(a+1)*(L-1)+E;u.push(C,P,B);u.push(P,R,B);}l.setIndex(u);l.setAttribute("position",new Float32BufferAttribute(c,3));l.setAttribute("normal",new Float32BufferAttribute(h,3));l.setAttribute("uv",new Float32BufferAttribute(d,2));function calculatePositionOnCurve(e,t,r,i,n){var a=Math.cos(e);var o=Math.sin(e);var s=r/t*e;var l=Math.cos(s);n.x=i*(2+l)*.5*a;n.y=i*(2+l)*o*.5;n.z=i*Math.sin(s)*.5;}return l}return TorusKnotBufferGeometry}(BufferGeometry);var hu=function(t){_inheritsLoose(TorusKnotGeometry,t);function TorusKnotGeometry(r,i,n,a,o,s,l){var u;u=t.call(this||e)||this||e;u.type="TorusKnotGeometry";u.parameters={radius:r,tube:i,tubularSegments:n,radialSegments:a,p:o,q:s};void 0!==l&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");u.fromBufferGeometry(new cu(r,i,n,a,o,s));u.mergeVertices();return u}return TorusKnotGeometry}(Geometry);var du=function(t){_inheritsLoose(TubeBufferGeometry,t);function TubeBufferGeometry(r,i,n,a,o){var s;s=t.call(this||e)||this||e;s.type="TubeBufferGeometry";s.parameters={path:r,tubularSegments:i,radius:n,radialSegments:a,closed:o};i=i||64;n=n||1;a=a||8;o=o||false;var l=r.computeFrenetFrames(i,o);s.tangents=l.tangents;s.normals=l.normals;s.binormals=l.binormals;var u=new Xr;var c=new Xr;var h=new zr;var d=new Xr;var f=[];var p=[];var m=[];var g=[];generateBufferData();s.setIndex(g);s.setAttribute("position",new Float32BufferAttribute(f,3));s.setAttribute("normal",new Float32BufferAttribute(p,3));s.setAttribute("uv",new Float32BufferAttribute(m,2));function generateBufferData(){for(var e=0;e<i;e++)generateSegment(e);generateSegment(false===o?i:0);generateUVs();generateIndices();}function generateSegment(e){d=r.getPointAt(e/i,d);var t=l.normals[e];var o=l.binormals[e];for(var s=0;s<=a;s++){var h=s/a*Math.PI*2;var m=Math.sin(h);var g=-Math.cos(h);c.x=g*t.x+m*o.x;c.y=g*t.y+m*o.y;c.z=g*t.z+m*o.z;c.normalize();p.push(c.x,c.y,c.z);u.x=d.x+n*c.x;u.y=d.y+n*c.y;u.z=d.z+n*c.z;f.push(u.x,u.y,u.z);}}function generateIndices(){for(var e=1;e<=i;e++)for(var t=1;t<=a;t++){var r=(a+1)*(e-1)+(t-1);var n=(a+1)*e+(t-1);var o=(a+1)*e+t;var s=(a+1)*(e-1)+t;g.push(r,n,s);g.push(n,o,s);}}function generateUVs(){for(var e=0;e<=i;e++)for(var t=0;t<=a;t++){h.x=e/i;h.y=t/a;m.push(h.x,h.y);}}return s}var r=TubeBufferGeometry.prototype;r.toJSON=function toJSON(){var t=BufferGeometry.prototype.toJSON.call(this||e);t.path=(this||e).parameters.path.toJSON();return t};return TubeBufferGeometry}(BufferGeometry);var fu=function(t){_inheritsLoose(TubeGeometry,t);function TubeGeometry(r,i,n,a,o,s){var l;l=t.call(this||e)||this||e;l.type="TubeGeometry";l.parameters={path:r,tubularSegments:i,radius:n,radialSegments:a,closed:o};void 0!==s&&console.warn("THREE.TubeGeometry: taper has been removed.");var u=new du(r,i,n,a,o);l.tangents=u.tangents;l.normals=u.normals;l.binormals=u.binormals;l.fromBufferGeometry(u);l.mergeVertices();return l}return TubeGeometry}(Geometry);var pu=function(t){_inheritsLoose(WireframeGeometry,t);function WireframeGeometry(r){var i;i=t.call(this||e)||this||e;i.type="WireframeGeometry";var n=[];var a=[0,0],o={};var s=["a","b","c"];if(r&&r.isGeometry){var l=r.faces;for(var u=0,c=l.length;u<c;u++){var h=l[u];for(var d=0;d<3;d++){var f=h[s[d]];var p=h[s[(d+1)%3]];a[0]=Math.min(f,p);a[1]=Math.max(f,p);var m=a[0]+","+a[1];void 0===o[m]&&(o[m]={index1:a[0],index2:a[1]});}}for(var g in o){var y=o[g];var x=r.vertices[y.index1];n.push(x.x,x.y,x.z);x=r.vertices[y.index2];n.push(x.x,x.y,x.z);}}else if(r&&r.isBufferGeometry){var b=new Xr;if(null!==r.index){var _=r.attributes.position;var M=r.index;var w=r.groups;0===w.length&&(w=[{start:0,count:M.count,materialIndex:0}]);for(var S=0,T=w.length;S<T;++S){var A=w[S];var L=A.start;var E=A.count;for(var C=L,P=L+E;C<P;C+=3)for(var R=0;R<3;R++){var B=M.getX(C+R);var I=M.getX(C+(R+1)%3);a[0]=Math.min(B,I);a[1]=Math.max(B,I);var D=a[0]+","+a[1];void 0===o[D]&&(o[D]={index1:a[0],index2:a[1]});}}for(var G in o){var O=o[G];b.fromBufferAttribute(_,O.index1);n.push(b.x,b.y,b.z);b.fromBufferAttribute(_,O.index2);n.push(b.x,b.y,b.z);}}else {var N=r.attributes.position;for(var F=0,U=N.count/3;F<U;F++)for(var z=0;z<3;z++){var H=3*F+z;b.fromBufferAttribute(N,H);n.push(b.x,b.y,b.z);var V=3*F+(z+1)%3;b.fromBufferAttribute(N,V);n.push(b.x,b.y,b.z);}}}i.setAttribute("position",new Float32BufferAttribute(n,3));return i}return WireframeGeometry}(BufferGeometry);var mu=Object.freeze({__proto__:null,BoxGeometry:Sl,BoxBufferGeometry:zn,CircleGeometry:Al,CircleBufferGeometry:Tl,ConeGeometry:Cl,ConeBufferGeometry:Pl,CylinderGeometry:El,CylinderBufferGeometry:Ll,DodecahedronGeometry:Il,DodecahedronBufferGeometry:Bl,EdgesGeometry:Fl,ExtrudeGeometry:kl,ExtrudeBufferGeometry:Hl,IcosahedronGeometry:jl,IcosahedronBufferGeometry:Wl,LatheGeometry:Xl,LatheBufferGeometry:ql,OctahedronGeometry:Jl,OctahedronBufferGeometry:Yl,ParametricGeometry:ParametricGeometry,ParametricBufferGeometry:ParametricBufferGeometry,PlaneGeometry:Zl,PlaneBufferGeometry:Jn,PolyhedronGeometry:Ql,PolyhedronBufferGeometry:Rl,RingGeometry:$l,RingBufferGeometry:Kl,ShapeGeometry:tu,ShapeBufferGeometry:eu,SphereGeometry:iu,SphereBufferGeometry:ru,TetrahedronGeometry:au,TetrahedronBufferGeometry:nu,TextGeometry:su,TextBufferGeometry:ou,TorusGeometry:uu,TorusBufferGeometry:lu,TorusKnotGeometry:hu,TorusKnotBufferGeometry:cu,TubeGeometry:fu,TubeBufferGeometry:du,WireframeGeometry:pu});function ShadowMaterial(t){Material.call(this||e);(this||e).type="ShadowMaterial";(this||e).color=new cn(0);(this||e).transparent=true;this.setValues(t);}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=true;ShadowMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).color.copy(t.color);return this||e};function RawShaderMaterial(t){ShaderMaterial.call(this||e,t);(this||e).type="RawShaderMaterial";}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=true;function MeshStandardMaterial(t){Material.call(this||e);(this||e).defines={STANDARD:""};(this||e).type="MeshStandardMaterial";(this||e).color=new cn(16777215);(this||e).roughness=1;(this||e).metalness=0;(this||e).map=null;(this||e).lightMap=null;(this||e).lightMapIntensity=1;(this||e).aoMap=null;(this||e).aoMapIntensity=1;(this||e).emissive=new cn(0);(this||e).emissiveIntensity=1;(this||e).emissiveMap=null;(this||e).bumpMap=null;(this||e).bumpScale=1;(this||e).normalMap=null;(this||e).normalMapType=sr;(this||e).normalScale=new zr(1,1);(this||e).displacementMap=null;(this||e).displacementScale=1;(this||e).displacementBias=0;(this||e).roughnessMap=null;(this||e).metalnessMap=null;(this||e).alphaMap=null;(this||e).envMap=null;(this||e).envMapIntensity=1;(this||e).refractionRatio=.98;(this||e).wireframe=false;(this||e).wireframeLinewidth=1;(this||e).wireframeLinecap="round";(this||e).wireframeLinejoin="round";(this||e).skinning=false;(this||e).morphTargets=false;(this||e).morphNormals=false;(this||e).vertexTangents=false;this.setValues(t);}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=true;MeshStandardMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).defines={STANDARD:""};(this||e).color.copy(t.color);(this||e).roughness=t.roughness;(this||e).metalness=t.metalness;(this||e).map=t.map;(this||e).lightMap=t.lightMap;(this||e).lightMapIntensity=t.lightMapIntensity;(this||e).aoMap=t.aoMap;(this||e).aoMapIntensity=t.aoMapIntensity;(this||e).emissive.copy(t.emissive);(this||e).emissiveMap=t.emissiveMap;(this||e).emissiveIntensity=t.emissiveIntensity;(this||e).bumpMap=t.bumpMap;(this||e).bumpScale=t.bumpScale;(this||e).normalMap=t.normalMap;(this||e).normalMapType=t.normalMapType;(this||e).normalScale.copy(t.normalScale);(this||e).displacementMap=t.displacementMap;(this||e).displacementScale=t.displacementScale;(this||e).displacementBias=t.displacementBias;(this||e).roughnessMap=t.roughnessMap;(this||e).metalnessMap=t.metalnessMap;(this||e).alphaMap=t.alphaMap;(this||e).envMap=t.envMap;(this||e).envMapIntensity=t.envMapIntensity;(this||e).refractionRatio=t.refractionRatio;(this||e).wireframe=t.wireframe;(this||e).wireframeLinewidth=t.wireframeLinewidth;(this||e).wireframeLinecap=t.wireframeLinecap;(this||e).wireframeLinejoin=t.wireframeLinejoin;(this||e).skinning=t.skinning;(this||e).morphTargets=t.morphTargets;(this||e).morphNormals=t.morphNormals;(this||e).vertexTangents=t.vertexTangents;return this||e};function MeshPhysicalMaterial(t){MeshStandardMaterial.call(this||e);(this||e).defines={STANDARD:"",PHYSICAL:""};(this||e).type="MeshPhysicalMaterial";(this||e).clearcoat=0;(this||e).clearcoatMap=null;(this||e).clearcoatRoughness=0;(this||e).clearcoatRoughnessMap=null;(this||e).clearcoatNormalScale=new zr(1,1);(this||e).clearcoatNormalMap=null;(this||e).reflectivity=.5;Object.defineProperty(this||e,"ior",{get:function get(){return (1+.4*(this||e).reflectivity)/(1-.4*(this||e).reflectivity)},set:function set(t){(this||e).reflectivity=Ur.clamp(2.5*(t-1)/(t+1),0,1);}});(this||e).sheen=null;(this||e).transmission=0;(this||e).transmissionMap=null;this.setValues(t);}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=true;MeshPhysicalMaterial.prototype.copy=function(t){MeshStandardMaterial.prototype.copy.call(this||e,t);(this||e).defines={STANDARD:"",PHYSICAL:""};(this||e).clearcoat=t.clearcoat;(this||e).clearcoatMap=t.clearcoatMap;(this||e).clearcoatRoughness=t.clearcoatRoughness;(this||e).clearcoatRoughnessMap=t.clearcoatRoughnessMap;(this||e).clearcoatNormalMap=t.clearcoatNormalMap;(this||e).clearcoatNormalScale.copy(t.clearcoatNormalScale);(this||e).reflectivity=t.reflectivity;t.sheen?(this||e).sheen=((this||e).sheen||new cn).copy(t.sheen):(this||e).sheen=null;(this||e).transmission=t.transmission;(this||e).transmissionMap=t.transmissionMap;return this||e};function MeshPhongMaterial(t){Material.call(this||e);(this||e).type="MeshPhongMaterial";(this||e).color=new cn(16777215);(this||e).specular=new cn(1118481);(this||e).shininess=30;(this||e).map=null;(this||e).lightMap=null;(this||e).lightMapIntensity=1;(this||e).aoMap=null;(this||e).aoMapIntensity=1;(this||e).emissive=new cn(0);(this||e).emissiveIntensity=1;(this||e).emissiveMap=null;(this||e).bumpMap=null;(this||e).bumpScale=1;(this||e).normalMap=null;(this||e).normalMapType=sr;(this||e).normalScale=new zr(1,1);(this||e).displacementMap=null;(this||e).displacementScale=1;(this||e).displacementBias=0;(this||e).specularMap=null;(this||e).alphaMap=null;(this||e).envMap=null;(this||e).combine=J;(this||e).reflectivity=1;(this||e).refractionRatio=.98;(this||e).wireframe=false;(this||e).wireframeLinewidth=1;(this||e).wireframeLinecap="round";(this||e).wireframeLinejoin="round";(this||e).skinning=false;(this||e).morphTargets=false;(this||e).morphNormals=false;this.setValues(t);}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=true;MeshPhongMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).color.copy(t.color);(this||e).specular.copy(t.specular);(this||e).shininess=t.shininess;(this||e).map=t.map;(this||e).lightMap=t.lightMap;(this||e).lightMapIntensity=t.lightMapIntensity;(this||e).aoMap=t.aoMap;(this||e).aoMapIntensity=t.aoMapIntensity;(this||e).emissive.copy(t.emissive);(this||e).emissiveMap=t.emissiveMap;(this||e).emissiveIntensity=t.emissiveIntensity;(this||e).bumpMap=t.bumpMap;(this||e).bumpScale=t.bumpScale;(this||e).normalMap=t.normalMap;(this||e).normalMapType=t.normalMapType;(this||e).normalScale.copy(t.normalScale);(this||e).displacementMap=t.displacementMap;(this||e).displacementScale=t.displacementScale;(this||e).displacementBias=t.displacementBias;(this||e).specularMap=t.specularMap;(this||e).alphaMap=t.alphaMap;(this||e).envMap=t.envMap;(this||e).combine=t.combine;(this||e).reflectivity=t.reflectivity;(this||e).refractionRatio=t.refractionRatio;(this||e).wireframe=t.wireframe;(this||e).wireframeLinewidth=t.wireframeLinewidth;(this||e).wireframeLinecap=t.wireframeLinecap;(this||e).wireframeLinejoin=t.wireframeLinejoin;(this||e).skinning=t.skinning;(this||e).morphTargets=t.morphTargets;(this||e).morphNormals=t.morphNormals;return this||e};function MeshToonMaterial(t){Material.call(this||e);(this||e).defines={TOON:""};(this||e).type="MeshToonMaterial";(this||e).color=new cn(16777215);(this||e).map=null;(this||e).gradientMap=null;(this||e).lightMap=null;(this||e).lightMapIntensity=1;(this||e).aoMap=null;(this||e).aoMapIntensity=1;(this||e).emissive=new cn(0);(this||e).emissiveIntensity=1;(this||e).emissiveMap=null;(this||e).bumpMap=null;(this||e).bumpScale=1;(this||e).normalMap=null;(this||e).normalMapType=sr;(this||e).normalScale=new zr(1,1);(this||e).displacementMap=null;(this||e).displacementScale=1;(this||e).displacementBias=0;(this||e).alphaMap=null;(this||e).wireframe=false;(this||e).wireframeLinewidth=1;(this||e).wireframeLinecap="round";(this||e).wireframeLinejoin="round";(this||e).skinning=false;(this||e).morphTargets=false;(this||e).morphNormals=false;this.setValues(t);}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=true;MeshToonMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).color.copy(t.color);(this||e).map=t.map;(this||e).gradientMap=t.gradientMap;(this||e).lightMap=t.lightMap;(this||e).lightMapIntensity=t.lightMapIntensity;(this||e).aoMap=t.aoMap;(this||e).aoMapIntensity=t.aoMapIntensity;(this||e).emissive.copy(t.emissive);(this||e).emissiveMap=t.emissiveMap;(this||e).emissiveIntensity=t.emissiveIntensity;(this||e).bumpMap=t.bumpMap;(this||e).bumpScale=t.bumpScale;(this||e).normalMap=t.normalMap;(this||e).normalMapType=t.normalMapType;(this||e).normalScale.copy(t.normalScale);(this||e).displacementMap=t.displacementMap;(this||e).displacementScale=t.displacementScale;(this||e).displacementBias=t.displacementBias;(this||e).alphaMap=t.alphaMap;(this||e).wireframe=t.wireframe;(this||e).wireframeLinewidth=t.wireframeLinewidth;(this||e).wireframeLinecap=t.wireframeLinecap;(this||e).wireframeLinejoin=t.wireframeLinejoin;(this||e).skinning=t.skinning;(this||e).morphTargets=t.morphTargets;(this||e).morphNormals=t.morphNormals;return this||e};function MeshNormalMaterial(t){Material.call(this||e);(this||e).type="MeshNormalMaterial";(this||e).bumpMap=null;(this||e).bumpScale=1;(this||e).normalMap=null;(this||e).normalMapType=sr;(this||e).normalScale=new zr(1,1);(this||e).displacementMap=null;(this||e).displacementScale=1;(this||e).displacementBias=0;(this||e).wireframe=false;(this||e).wireframeLinewidth=1;(this||e).fog=false;(this||e).skinning=false;(this||e).morphTargets=false;(this||e).morphNormals=false;this.setValues(t);}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=true;MeshNormalMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).bumpMap=t.bumpMap;(this||e).bumpScale=t.bumpScale;(this||e).normalMap=t.normalMap;(this||e).normalMapType=t.normalMapType;(this||e).normalScale.copy(t.normalScale);(this||e).displacementMap=t.displacementMap;(this||e).displacementScale=t.displacementScale;(this||e).displacementBias=t.displacementBias;(this||e).wireframe=t.wireframe;(this||e).wireframeLinewidth=t.wireframeLinewidth;(this||e).skinning=t.skinning;(this||e).morphTargets=t.morphTargets;(this||e).morphNormals=t.morphNormals;return this||e};function MeshLambertMaterial(t){Material.call(this||e);(this||e).type="MeshLambertMaterial";(this||e).color=new cn(16777215);(this||e).map=null;(this||e).lightMap=null;(this||e).lightMapIntensity=1;(this||e).aoMap=null;(this||e).aoMapIntensity=1;(this||e).emissive=new cn(0);(this||e).emissiveIntensity=1;(this||e).emissiveMap=null;(this||e).specularMap=null;(this||e).alphaMap=null;(this||e).envMap=null;(this||e).combine=J;(this||e).reflectivity=1;(this||e).refractionRatio=.98;(this||e).wireframe=false;(this||e).wireframeLinewidth=1;(this||e).wireframeLinecap="round";(this||e).wireframeLinejoin="round";(this||e).skinning=false;(this||e).morphTargets=false;(this||e).morphNormals=false;this.setValues(t);}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=true;MeshLambertMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).color.copy(t.color);(this||e).map=t.map;(this||e).lightMap=t.lightMap;(this||e).lightMapIntensity=t.lightMapIntensity;(this||e).aoMap=t.aoMap;(this||e).aoMapIntensity=t.aoMapIntensity;(this||e).emissive.copy(t.emissive);(this||e).emissiveMap=t.emissiveMap;(this||e).emissiveIntensity=t.emissiveIntensity;(this||e).specularMap=t.specularMap;(this||e).alphaMap=t.alphaMap;(this||e).envMap=t.envMap;(this||e).combine=t.combine;(this||e).reflectivity=t.reflectivity;(this||e).refractionRatio=t.refractionRatio;(this||e).wireframe=t.wireframe;(this||e).wireframeLinewidth=t.wireframeLinewidth;(this||e).wireframeLinecap=t.wireframeLinecap;(this||e).wireframeLinejoin=t.wireframeLinejoin;(this||e).skinning=t.skinning;(this||e).morphTargets=t.morphTargets;(this||e).morphNormals=t.morphNormals;return this||e};function MeshMatcapMaterial(t){Material.call(this||e);(this||e).defines={MATCAP:""};(this||e).type="MeshMatcapMaterial";(this||e).color=new cn(16777215);(this||e).matcap=null;(this||e).map=null;(this||e).bumpMap=null;(this||e).bumpScale=1;(this||e).normalMap=null;(this||e).normalMapType=sr;(this||e).normalScale=new zr(1,1);(this||e).displacementMap=null;(this||e).displacementScale=1;(this||e).displacementBias=0;(this||e).alphaMap=null;(this||e).skinning=false;(this||e).morphTargets=false;(this||e).morphNormals=false;this.setValues(t);}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=true;MeshMatcapMaterial.prototype.copy=function(t){Material.prototype.copy.call(this||e,t);(this||e).defines={MATCAP:""};(this||e).color.copy(t.color);(this||e).matcap=t.matcap;(this||e).map=t.map;(this||e).bumpMap=t.bumpMap;(this||e).bumpScale=t.bumpScale;(this||e).normalMap=t.normalMap;(this||e).normalMapType=t.normalMapType;(this||e).normalScale.copy(t.normalScale);(this||e).displacementMap=t.displacementMap;(this||e).displacementScale=t.displacementScale;(this||e).displacementBias=t.displacementBias;(this||e).alphaMap=t.alphaMap;(this||e).skinning=t.skinning;(this||e).morphTargets=t.morphTargets;(this||e).morphNormals=t.morphNormals;return this||e};function LineDashedMaterial(t){LineBasicMaterial.call(this||e);(this||e).type="LineDashedMaterial";(this||e).scale=1;(this||e).dashSize=3;(this||e).gapSize=1;this.setValues(t);}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=true;LineDashedMaterial.prototype.copy=function(t){LineBasicMaterial.prototype.copy.call(this||e,t);(this||e).scale=t.scale;(this||e).dashSize=t.dashSize;(this||e).gapSize=t.gapSize;return this||e};var vu=Object.freeze({__proto__:null,ShadowMaterial:ShadowMaterial,SpriteMaterial:SpriteMaterial,RawShaderMaterial:RawShaderMaterial,ShaderMaterial:ShaderMaterial,PointsMaterial:PointsMaterial,MeshPhysicalMaterial:MeshPhysicalMaterial,MeshStandardMaterial:MeshStandardMaterial,MeshPhongMaterial:MeshPhongMaterial,MeshToonMaterial:MeshToonMaterial,MeshNormalMaterial:MeshNormalMaterial,MeshLambertMaterial:MeshLambertMaterial,MeshDepthMaterial:MeshDepthMaterial,MeshDistanceMaterial:MeshDistanceMaterial,MeshBasicMaterial:MeshBasicMaterial,MeshMatcapMaterial:MeshMatcapMaterial,LineDashedMaterial:LineDashedMaterial,LineBasicMaterial:LineBasicMaterial,Material:Material});var gu={arraySlice:function arraySlice(e,t,r){return gu.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)},convertArray:function convertArray(e,t,r){return !e||!r&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function getKeyframeOrder(e){function compareTime(t,r){return e[t]-e[r]}var t=e.length;var r=new Array(t);for(var i=0;i!==t;++i)r[i]=i;r.sort(compareTime);return r},sortedArray:function sortedArray(e,t,r){var i=e.length;var n=new e.constructor(i);for(var a=0,o=0;o!==i;++a){var s=r[a]*t;for(var l=0;l!==t;++l)n[o++]=e[s+l];}return n},flattenJSON:function flattenJSON(e,t,r,i){var n=1,a=e[0];while(void 0!==a&&void 0===a[i])a=e[n++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{o=a[i];if(void 0!==o){t.push(a.time);r.push.apply(r,o);}a=e[n++];}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[i];if(void 0!==o){t.push(a.time);o.toArray(r,r.length);}a=e[n++];}while(void 0!==a);else do{o=a[i];if(void 0!==o){t.push(a.time);r.push(o);}a=e[n++];}while(void 0!==a)}},subclip:function subclip(e,t,r,i,n){n=n||30;var a=e.clone();a.name=t;var o=[];for(var s=0;s<a.tracks.length;++s){var l=a.tracks[s];var u=l.getValueSize();var c=[];var h=[];for(var d=0;d<l.times.length;++d){var f=l.times[d]*n;if(!(f<r||f>=i)){c.push(l.times[d]);for(var p=0;p<u;++p)h.push(l.values[d*u+p]);}}if(0!==c.length){l.times=gu.convertArray(c,l.times.constructor);l.values=gu.convertArray(h,l.values.constructor);o.push(l);}}a.tracks=o;var m=Infinity;for(var g=0;g<a.tracks.length;++g)m>a.tracks[g].times[0]&&(m=a.tracks[g].times[0]);for(var y=0;y<a.tracks.length;++y)a.tracks[y].shift(-1*m);a.resetDuration();return a},makeClipAdditive:function makeClipAdditive(e,t,r,i){void 0===t&&(t=0);void 0===r&&(r=e);(void 0===i||i<=0)&&(i=30);var n=r.tracks.length;var a=t/i;var o=function _loop(t){var i=r.tracks[t];var n=i.ValueTypeName;if("bool"===n||"string"===n)return "continue";var o=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===n}));if(void 0===o)return "continue";var s=0;var l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);var u=0;var c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);var h=i.times.length-1;var d=void 0;if(a<=i.times[0]){var f=s;var p=l-s;d=gu.arraySlice(i.values,f,p);}else if(a>=i.times[h]){var m=h*l+s;var g=m+l-s;d=gu.arraySlice(i.values,m,g);}else {var y=i.createInterpolant();var x=s;var b=l-s;y.evaluate(a);d=gu.arraySlice(y.resultBuffer,x,b);}if("quaternion"===n){var _=(new qr).fromArray(d).normalize().conjugate();_.toArray(d);}var M=o.times.length;for(var w=0;w<M;++w){var S=w*c+u;if("quaternion"===n)qr.multiplyQuaternionsFlat(o.values,S,d,0,o.values,S);else {var T=c-2*u;for(var A=0;A<T;++A)o.values[S+A]-=d[A];}}};for(var s=0;s<n;++s){var l=o(s);}e.blendMode=Xt;return e}};function Interpolant(t,r,i,n){(this||e).parameterPositions=t;(this||e)._cachedIndex=0;(this||e).resultBuffer=void 0!==n?n:new r.constructor(i);(this||e).sampleValues=r;(this||e).valueSize=i;}Object.assign(Interpolant.prototype,{evaluate:function evaluate(t){var r=(this||e).parameterPositions;var i=(this||e)._cachedIndex,n=r[i],a=r[i-1];e:{t:{var o;r:{i:if(!(t<n)){for(var s=i+2;;){if(void 0===n){if(t<a)break i;i=r.length;(this||e)._cachedIndex=i;return this.afterEnd_(i-1,t,a)}if(i===s)break;a=n;n=r[++i];if(t<n)break t}o=r.length;break r}if(t>=a)break e;var l=r[1];if(t<l){i=2;a=l;}for(var u=i-2;;){if(void 0===a){(this||e)._cachedIndex=0;return this.beforeStart_(0,t,n)}if(i===u)break;n=a;a=r[--i-1];if(t>=a)break t}o=i;i=0;}while(i<o){var c=i+o>>>1;t<r[c]?o=c:i=c+1;}n=r[i];a=r[i-1];if(void 0===a){(this||e)._cachedIndex=0;return this.beforeStart_(0,t,n)}if(void 0===n){i=r.length;(this||e)._cachedIndex=i;return this.afterEnd_(i-1,a,t)}}(this||e)._cachedIndex=i;this.intervalChanged_(i,a,n);}return this.interpolate_(i,a,t,n)},settings:null,DefaultSettings_:{},getSettings_:function getSettings_(){return (this||e).settings||(this||e).DefaultSettings_},copySampleValue_:function copySampleValue_(t){var r=(this||e).resultBuffer,i=(this||e).sampleValues,n=(this||e).valueSize,a=t*n;for(var o=0;o!==n;++o)r[o]=i[a+o];return r},interpolate_:function interpolate_(){throw new Error("call to abstract method")},intervalChanged_:function intervalChanged_(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(t,r,i,n){Interpolant.call(this||e,t,r,i,n);(this||e)._weightPrev=-0;(this||e)._offsetPrev=-0;(this||e)._weightNext=-0;(this||e)._offsetNext=-0;}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:kt,endingEnd:kt},intervalChanged_:function intervalChanged_(t,r,i){var n=(this||e).parameterPositions;var a=t-2,o=t+1,s=n[a],l=n[o];if(void 0===s)switch(this.getSettings_().endingStart){case Wt:a=t;s=2*r-i;break;case jt:a=n.length-2;s=r+n[a]-n[a+1];break;default:a=t;s=i;}if(void 0===l)switch(this.getSettings_().endingEnd){case Wt:o=t;l=2*i-r;break;case jt:o=1;l=i+n[1]-n[0];break;default:o=t-1;l=r;}var u=.5*(i-r),c=(this||e).valueSize;(this||e)._weightPrev=u/(r-s);(this||e)._weightNext=u/(l-i);(this||e)._offsetPrev=a*c;(this||e)._offsetNext=o*c;},interpolate_:function interpolate_(t,r,i,n){var a=(this||e).resultBuffer,o=(this||e).sampleValues,s=(this||e).valueSize,l=t*s,u=l-s,c=(this||e)._offsetPrev,h=(this||e)._offsetNext,d=(this||e)._weightPrev,f=(this||e)._weightNext,p=(i-r)/(n-r),m=p*p,g=m*p;var y=-d*g+2*d*m-d*p;var x=(1+d)*g+(-1.5-2*d)*m+(-.5+d)*p+1;var b=(-1-f)*g+(1.5+f)*m+.5*p;var _=f*g-f*m;for(var M=0;M!==s;++M)a[M]=y*o[c+M]+x*o[u+M]+b*o[l+M]+_*o[h+M];return a}});function LinearInterpolant(t,r,i,n){Interpolant.call(this||e,t,r,i,n);}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function interpolate_(t,r,i,n){var a=(this||e).resultBuffer,o=(this||e).sampleValues,s=(this||e).valueSize,l=t*s,u=l-s,c=(i-r)/(n-r),h=1-c;for(var d=0;d!==s;++d)a[d]=o[u+d]*h+o[l+d]*c;return a}});function DiscreteInterpolant(t,r,i,n){Interpolant.call(this||e,t,r,i,n);}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function interpolate_(e){return this.copySampleValue_(e-1)}});function KeyframeTrack(t,r,i,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===r||0===r.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);(this||e).name=t;(this||e).times=gu.convertArray(r,(this||e).TimeBufferType);(this||e).values=gu.convertArray(i,(this||e).ValueBufferType);this.setInterpolation(n||(this||e).DefaultInterpolation);}Object.assign(KeyframeTrack,{toJSON:function toJSON(e){var t=e.constructor;var r;if(void 0!==t.toJSON)r=t.toJSON(e);else {r={name:e.name,times:gu.convertArray(e.times,Array),values:gu.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i);}r.type=e.ValueTypeName;return r}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ht,InterpolantFactoryMethodDiscrete:function InterpolantFactoryMethodDiscrete(t){return new DiscreteInterpolant((this||e).times,(this||e).values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function InterpolantFactoryMethodLinear(t){return new LinearInterpolant((this||e).times,(this||e).values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function InterpolantFactoryMethodSmooth(t){return new CubicInterpolant((this||e).times,(this||e).values,this.getValueSize(),t)},setInterpolation:function setInterpolation(t){var r;switch(t){case zt:r=(this||e).InterpolantFactoryMethodDiscrete;break;case Ht:r=(this||e).InterpolantFactoryMethodLinear;break;case Vt:r=(this||e).InterpolantFactoryMethodSmooth;break}if(void 0===r){var i="unsupported interpolation for "+(this||e).ValueTypeName+" keyframe track named "+(this||e).name;if(void 0===(this||e).createInterpolant){if(t===(this||e).DefaultInterpolation)throw new Error(i);this.setInterpolation((this||e).DefaultInterpolation);}console.warn("THREE.KeyframeTrack:",i);return this||e}(this||e).createInterpolant=r;return this||e},getInterpolation:function getInterpolation(){switch((this||e).createInterpolant){case(this||e).InterpolantFactoryMethodDiscrete:return zt;case(this||e).InterpolantFactoryMethodLinear:return Ht;case(this||e).InterpolantFactoryMethodSmooth:return Vt}},getValueSize:function getValueSize(){return (this||e).values.length/(this||e).times.length},shift:function shift(t){if(0!==t){var r=(this||e).times;for(var i=0,n=r.length;i!==n;++i)r[i]+=t;}return this||e},scale:function scale(t){if(1!==t){var r=(this||e).times;for(var i=0,n=r.length;i!==n;++i)r[i]*=t;}return this||e},trim:function trim(t,r){var i=(this||e).times,n=i.length;var a=0,o=n-1;while(a!==n&&i[a]<t)++a;while(-1!==o&&i[o]>r)--o;++o;if(0!==a||o!==n){if(a>=o){o=Math.max(o,1);a=o-1;}var s=this.getValueSize();(this||e).times=gu.arraySlice(i,a,o);(this||e).values=gu.arraySlice((this||e).values,a*s,o*s);}return this||e},validate:function validate(){var t=true;var r=this.getValueSize();if(r-Math.floor(r)!==0){console.error("THREE.KeyframeTrack: Invalid value size in track.",this||e);t=false;}var i=(this||e).times,n=(this||e).values,a=i.length;if(0===a){console.error("THREE.KeyframeTrack: Track is empty.",this||e);t=false;}var o=null;for(var s=0;s!==a;s++){var l=i[s];if("number"===typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this||e,s,l);t=false;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this||e,s,l,o);t=false;break}o=l;}if(void 0!==n&&gu.isTypedArray(n))for(var u=0,c=n.length;u!==c;++u){var h=n[u];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this||e,u,h);t=false;break}}return t},optimize:function optimize(){var t=gu.arraySlice((this||e).times),r=gu.arraySlice((this||e).values),i=this.getValueSize(),n=this.getInterpolation()===Vt,a=t.length-1;var o=1;for(var s=1;s<a;++s){var l=false;var u=t[s];var c=t[s+1];if(u!==c&&(1!==s||u!==u[0]))if(n)l=true;else {var h=s*i,d=h-i,f=h+i;for(var p=0;p!==i;++p){var m=r[h+p];if(m!==r[d+p]||m!==r[f+p]){l=true;break}}}if(l){if(s!==o){t[o]=t[s];var g=s*i,y=o*i;for(var x=0;x!==i;++x)r[y+x]=r[g+x];}++o;}}if(a>0){t[o]=t[a];for(var b=a*i,_=o*i,M=0;M!==i;++M)r[_+M]=r[b+M];++o;}if(o!==t.length){(this||e).times=gu.arraySlice(t,0,o);(this||e).values=gu.arraySlice(r,0,o*i);}else {(this||e).times=t;(this||e).values=r;}return this||e},clone:function clone(){var t=gu.arraySlice((this||e).times,0);var r=gu.arraySlice((this||e).values,0);var i=(this||e).constructor;var n=new i((this||e).name,t,r);n.createInterpolant=(this||e).createInterpolant;return n}});function BooleanKeyframeTrack(t,r,i){KeyframeTrack.call(this||e,t,r,i);}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:zt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(t,r,i,n){KeyframeTrack.call(this||e,t,r,i,n);}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(t,r,i,n){KeyframeTrack.call(this||e,t,r,i,n);}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(t,r,i,n){Interpolant.call(this||e,t,r,i,n);}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function interpolate_(t,r,i,n){var a=(this||e).resultBuffer,o=(this||e).sampleValues,s=(this||e).valueSize,l=(i-r)/(n-r);var u=t*s;for(var c=u+s;u!==c;u+=4)qr.slerpFlat(a,0,o,u-s,o,u,l);return a}});function QuaternionKeyframeTrack(t,r,i,n){KeyframeTrack.call(this||e,t,r,i,n);}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:Ht,InterpolantFactoryMethodLinear:function InterpolantFactoryMethodLinear(t){return new QuaternionLinearInterpolant((this||e).times,(this||e).values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(t,r,i,n){KeyframeTrack.call(this||e,t,r,i,n);}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:zt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(t,r,i,n){KeyframeTrack.call(this||e,t,r,i,n);}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(t,r,i,n){(this||e).name=t;(this||e).tracks=i;(this||e).duration=void 0!==r?r:-1;(this||e).blendMode=void 0!==n?n:qt;(this||e).uuid=Ur.generateUUID();(this||e).duration<0&&this.resetDuration();}function getTrackTypeForValueTypeName(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function parseKeyframeTrack(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],i=[];gu.flattenJSON(e.keys,r,i,"value");e.times=r;e.values=i;}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(AnimationClip,{parse:function parse(e){var t=[],r=e.tracks,i=1/(e.fps||1);for(var n=0,a=r.length;n!==a;++n)t.push(parseKeyframeTrack(r[n]).scale(i));return new AnimationClip(e.name,e.duration,t,e.blendMode)},toJSON:function toJSON(e){var t=[],r=e.tracks;var i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(var n=0,a=r.length;n!==a;++n)t.push(KeyframeTrack.toJSON(r[n]));return i},CreateFromMorphTargetSequence:function CreateFromMorphTargetSequence(e,t,r,i){var n=t.length;var a=[];for(var o=0;o<n;o++){var s=[];var l=[];s.push((o+n-1)%n,o,(o+1)%n);l.push(0,1,0);var u=gu.getKeyframeOrder(s);s=gu.sortedArray(s,1,u);l=gu.sortedArray(l,1,u);if(!i&&0===s[0]){s.push(n);l.push(l[0]);}a.push(new NumberKeyframeTrack(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/r));}return new AnimationClip(e,-1,a)},findByName:function findByName(e,t){var r=e;if(!Array.isArray(e)){var i=e;r=i.geometry&&i.geometry.animations||i.animations;}for(var n=0;n<r.length;n++)if(r[n].name===t)return r[n];return null},CreateClipsFromMorphTargetSequences:function CreateClipsFromMorphTargetSequences(e,t,r){var i={};var n=/^([\w-]*?)([\d]+)$/;for(var a=0,o=e.length;a<o;a++){var s=e[a];var l=s.name.match(n);if(l&&l.length>1){var u=l[1];var c=i[u];c||(i[u]=c=[]);c.push(s);}}var h=[];for(var d in i)h.push(AnimationClip.CreateFromMorphTargetSequence(d,i[d],t,r));return h},parseAnimation:function parseAnimation(e,t){if(!e){console.error("THREE.AnimationClip: No animation in JSONLoader data.");return null}var r=function addNonemptyTrack(e,t,r,i,n){if(0!==r.length){var a=[];var o=[];gu.flattenJSON(r,a,o,i);0!==a.length&&n.push(new e(t,a,o));}};var i=[];var n=e.name||"default";var a=e.fps||30;var o=e.blendMode;var s=e.length||-1;var l=e.hierarchy||[];for(var u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={};var d=void 0;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(var f=0;f<c[d].morphTargets.length;f++)h[c[d].morphTargets[f]]=-1;for(var p in h){var m=[];var g=[];for(var y=0;y!==c[d].morphTargets.length;++y){var x=c[d];m.push(x.time);g.push(x.morphTarget===p?1:0);}i.push(new NumberKeyframeTrack(".morphTargetInfluence["+p+"]",m,g));}s=h.length*(a||1);}else {var b=".bones["+t[u].name+"]";r(VectorKeyframeTrack,b+".position",c,"pos",i);r(QuaternionKeyframeTrack,b+".quaternion",c,"rot",i);r(VectorKeyframeTrack,b+".scale",c,"scl",i);}}if(0===i.length)return null;var _=new AnimationClip(n,s,i,o);return _}});Object.assign(AnimationClip.prototype,{resetDuration:function resetDuration(){var t=(this||e).tracks;var r=0;for(var i=0,n=t.length;i!==n;++i){var a=(this||e).tracks[i];r=Math.max(r,a.times[a.times.length-1]);}(this||e).duration=r;return this||e},trim:function trim(){for(var t=0;t<(this||e).tracks.length;t++)(this||e).tracks[t].trim(0,(this||e).duration);return this||e},validate:function validate(){var t=true;for(var r=0;r<(this||e).tracks.length;r++)t=t&&(this||e).tracks[r].validate();return t},optimize:function optimize(){for(var t=0;t<(this||e).tracks.length;t++)(this||e).tracks[t].optimize();return this||e},clone:function clone(){var t=[];for(var r=0;r<(this||e).tracks.length;r++)t.push((this||e).tracks[r].clone());return new AnimationClip((this||e).name,(this||e).duration,t,(this||e).blendMode)}});var yu={enabled:false,files:{},add:function add(t,r){false!==(this||e).enabled&&((this||e).files[t]=r);},get:function get(t){if(false!==(this||e).enabled)return (this||e).files[t]},remove:function remove(t){delete(this||e).files[t];},clear:function clear(){(this||e).files={};}};function LoadingManager(t,r,i){var n=this||e;var a=false;var o=0;var s=0;var l=void 0;var u=[];(this||e).onStart=void 0;(this||e).onLoad=t;(this||e).onProgress=r;(this||e).onError=i;(this||e).itemStart=function(e){s++;false===a&&void 0!==n.onStart&&n.onStart(e,o,s);a=true;};(this||e).itemEnd=function(e){o++;void 0!==n.onProgress&&n.onProgress(e,o,s);if(o===s){a=false;void 0!==n.onLoad&&n.onLoad();}};(this||e).itemError=function(e){void 0!==n.onError&&n.onError(e);};(this||e).resolveURL=function(e){return l?l(e):e};(this||e).setURLModifier=function(t){l=t;return this||e};(this||e).addHandler=function(t,r){u.push(t,r);return this||e};(this||e).removeHandler=function(t){var r=u.indexOf(t);-1!==r&&u.splice(r,2);return this||e};(this||e).getHandler=function(e){for(var t=0,r=u.length;t<r;t+=2){var i=u[t];var n=u[t+1];i.global&&(i.lastIndex=0);if(i.test(e))return n}return null};}var xu=new LoadingManager;function Loader(t){(this||e).manager=void 0!==t?t:xu;(this||e).crossOrigin="anonymous";(this||e).withCredentials=false;(this||e).path="";(this||e).resourcePath="";(this||e).requestHeader={};}Object.assign(Loader.prototype,{load:function load(){},loadAsync:function loadAsync(t,r){var i=this||e;return new Promise((function(e,n){i.load(t,e,r,n);}))},parse:function parse(){},setCrossOrigin:function setCrossOrigin(t){(this||e).crossOrigin=t;return this||e},setWithCredentials:function setWithCredentials(t){(this||e).withCredentials=t;return this||e},setPath:function setPath(t){(this||e).path=t;return this||e},setResourcePath:function setResourcePath(t){(this||e).resourcePath=t;return this||e},setRequestHeader:function setRequestHeader(t){(this||e).requestHeader=t;return this||e}});var bu={};function FileLoader(t){Loader.call(this||e,t);}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function load(t,r,i,n){void 0===t&&(t="");void 0!==(this||e).path&&(t=(this||e).path+t);t=(this||e).manager.resolveURL(t);var a=this||e;var o=yu.get(t);if(void 0!==o){a.manager.itemStart(t);setTimeout((function(){r&&r(o);a.manager.itemEnd(t);}),0);return o}if(void 0===bu[t]){var s=/^data:(.*?)(;base64)?,(.*)$/;var l=t.match(s);var u;if(l){var c=l[1];var h=!!l[2];var d=l[3];d=decodeURIComponent(d);h&&(d=atob(d));try{var f;var p=((this||e).responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":var m=new Uint8Array(d.length);for(var g=0;g<d.length;g++)m[g]=d.charCodeAt(g);f="blob"===p?new Blob([m.buffer],{type:c}):m.buffer;break;case"document":var y=new DOMParser;f=y.parseFromString(d,c);break;case"json":f=JSON.parse(d);break;default:f=d;break}setTimeout((function(){r&&r(f);a.manager.itemEnd(t);}),0);}catch(e){setTimeout((function(){n&&n(e);a.manager.itemError(t);a.manager.itemEnd(t);}),0);}}else {bu[t]=[];bu[t].push({onLoad:r,onProgress:i,onError:n});u=new XMLHttpRequest;u.open("GET",t,true);u.addEventListener("load",(function(r){var i=(this||e).response;var n=bu[t];delete bu[t];if(200===(this||e).status||0===(this||e).status){0===(this||e).status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");yu.add(t,i);for(var o=0,s=n.length;o<s;o++){var l=n[o];l.onLoad&&l.onLoad(i);}a.manager.itemEnd(t);}else {for(var u=0,c=n.length;u<c;u++){var h=n[u];h.onError&&h.onError(r);}a.manager.itemError(t);a.manager.itemEnd(t);}}),false);u.addEventListener("progress",(function(e){var r=bu[t];for(var i=0,n=r.length;i<n;i++){var a=r[i];a.onProgress&&a.onProgress(e);}}),false);u.addEventListener("error",(function(e){var r=bu[t];delete bu[t];for(var i=0,n=r.length;i<n;i++){var o=r[i];o.onError&&o.onError(e);}a.manager.itemError(t);a.manager.itemEnd(t);}),false);u.addEventListener("abort",(function(e){var r=bu[t];delete bu[t];for(var i=0,n=r.length;i<n;i++){var o=r[i];o.onError&&o.onError(e);}a.manager.itemError(t);a.manager.itemEnd(t);}),false);void 0!==(this||e).responseType&&(u.responseType=(this||e).responseType);void 0!==(this||e).withCredentials&&(u.withCredentials=(this||e).withCredentials);u.overrideMimeType&&u.overrideMimeType(void 0!==(this||e).mimeType?(this||e).mimeType:"text/plain");for(var x in (this||e).requestHeader)u.setRequestHeader(x,(this||e).requestHeader[x]);u.send(null);}a.manager.itemStart(t);return u}bu[t].push({onLoad:r,onProgress:i,onError:n});},setResponseType:function setResponseType(t){(this||e).responseType=t;return this||e},setMimeType:function setMimeType(t){(this||e).mimeType=t;return this||e}});function AnimationLoader(t){Loader.call(this||e,t);}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function load(t,r,i,n){var a=this||e;var o=new FileLoader(a.manager);o.setPath(a.path);o.setRequestHeader(a.requestHeader);o.setWithCredentials(a.withCredentials);o.load(t,(function(e){try{r(a.parse(JSON.parse(e)));}catch(e){n?n(e):console.error(e);a.manager.itemError(t);}}),i,n);},parse:function parse(e){var t=[];for(var r=0;r<e.length;r++){var i=AnimationClip.parse(e[r]);t.push(i);}return t}});function CompressedTextureLoader(t){Loader.call(this||e,t);}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function load(t,r,i,n){var a=this||e;var o=[];var s=new CompressedTexture;s.image=o;var l=new FileLoader((this||e).manager);l.setPath((this||e).path);l.setResponseType("arraybuffer");l.setRequestHeader((this||e).requestHeader);l.setWithCredentials(a.withCredentials);var u=0;function loadTexture(e){l.load(t[e],(function(t){var i=a.parse(t,true);o[e]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps};u+=1;if(6===u){1===i.mipmapCount&&(s.minFilter=xe);s.format=i.format;s.needsUpdate=true;r&&r(s);}}),i,n);}if(Array.isArray(t))for(var c=0,h=t.length;c<h;++c)loadTexture(c);else l.load(t,(function(e){var t=a.parse(e,true);if(t.isCubemap){var i=t.mipmaps.length/t.mipmapCount;for(var n=0;n<i;n++){o[n]={mipmaps:[]};for(var l=0;l<t.mipmapCount;l++){o[n].mipmaps.push(t.mipmaps[n*t.mipmapCount+l]);o[n].format=t.format;o[n].width=t.width;o[n].height=t.height;}}}else {s.image.width=t.width;s.image.height=t.height;s.mipmaps=t.mipmaps;}1===t.mipmapCount&&(s.minFilter=xe);s.format=t.format;s.needsUpdate=true;r&&r(s);}),i,n);return s}});function ImageLoader(t){Loader.call(this||e,t);}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function load(t,r,i,n){void 0!==(this||e).path&&(t=(this||e).path+t);t=(this||e).manager.resolveURL(t);var a=this||e;var o=yu.get(t);if(void 0!==o){a.manager.itemStart(t);setTimeout((function(){r&&r(o);a.manager.itemEnd(t);}),0);return o}var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function onImageLoad(){s.removeEventListener("load",onImageLoad,false);s.removeEventListener("error",onImageError,false);yu.add(t,this||e);r&&r(this||e);a.manager.itemEnd(t);}function onImageError(e){s.removeEventListener("load",onImageLoad,false);s.removeEventListener("error",onImageError,false);n&&n(e);a.manager.itemError(t);a.manager.itemEnd(t);}s.addEventListener("load",onImageLoad,false);s.addEventListener("error",onImageError,false);"data:"!==t.substr(0,5)&&void 0!==(this||e).crossOrigin&&(s.crossOrigin=(this||e).crossOrigin);a.manager.itemStart(t);s.src=t;return s}});function CubeTextureLoader(t){Loader.call(this||e,t);}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function load(t,r,i,n){var a=new CubeTexture;var o=new ImageLoader((this||e).manager);o.setCrossOrigin((this||e).crossOrigin);o.setPath((this||e).path);var s=0;function loadTexture(e){o.load(t[e],(function(t){a.images[e]=t;s++;if(6===s){a.needsUpdate=true;r&&r(a);}}),void 0,n);}for(var l=0;l<t.length;++l)loadTexture(l);return a}});function DataTextureLoader(t){Loader.call(this||e,t);}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function load(t,r,i,n){var a=this||e;var o=new DataTexture;var s=new FileLoader((this||e).manager);s.setResponseType("arraybuffer");s.setRequestHeader((this||e).requestHeader);s.setPath((this||e).path);s.setWithCredentials(a.withCredentials);s.load(t,(function(e){var t=a.parse(e);if(t){if(void 0!==t.image)o.image=t.image;else if(void 0!==t.data){o.image.width=t.width;o.image.height=t.height;o.image.data=t.data;}o.wrapS=void 0!==t.wrapS?t.wrapS:de;o.wrapT=void 0!==t.wrapT?t.wrapT:de;o.magFilter=void 0!==t.magFilter?t.magFilter:xe;o.minFilter=void 0!==t.minFilter?t.minFilter:xe;o.anisotropy=void 0!==t.anisotropy?t.anisotropy:1;void 0!==t.format&&(o.format=t.format);void 0!==t.type&&(o.type=t.type);if(void 0!==t.mipmaps){o.mipmaps=t.mipmaps;o.minFilter=Me;}1===t.mipmapCount&&(o.minFilter=xe);o.needsUpdate=true;r&&r(o,t);}}),i,n);return o}});function TextureLoader(t){Loader.call(this||e,t);}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function load(t,r,i,n){var a=new Texture;var o=new ImageLoader((this||e).manager);o.setCrossOrigin((this||e).crossOrigin);o.setPath((this||e).path);o.load(t,(function(e){a.image=e;var i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);a.format=i?Ne:Fe;a.needsUpdate=true;void 0!==r&&r(a);}),i,n);return a}});function Curve(){(this||e).type="Curve";(this||e).arcLengthDivisions=200;}Object.assign(Curve.prototype,{getPoint:function getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function getPointAt(e,t){var r=this.getUtoTmapping(e);return this.getPoint(r,t)},getPoints:function getPoints(e){void 0===e&&(e=5);var t=[];for(var r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function getSpacedPoints(e){void 0===e&&(e=5);var t=[];for(var r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function getLength(){var e=this.getLengths();return e[e.length-1]},getLengths:function getLengths(t){void 0===t&&(t=(this||e).arcLengthDivisions);if((this||e).cacheArcLengths&&(this||e).cacheArcLengths.length===t+1&&!(this||e).needsUpdate)return (this||e).cacheArcLengths;(this||e).needsUpdate=false;var r=[];var i,n=this.getPoint(0);var a=0;r.push(0);for(var o=1;o<=t;o++){i=this.getPoint(o/t);a+=i.distanceTo(n);r.push(a);n=i;}(this||e).cacheArcLengths=r;return r},updateArcLengths:function updateArcLengths(){(this||e).needsUpdate=true;this.getLengths();},getUtoTmapping:function getUtoTmapping(e,t){var r=this.getLengths();var i=0;var n=r.length;var a;a=t||e*r[n-1];var o=0,s=n-1,l;while(o<=s){i=Math.floor(o+(s-o)/2);l=r[i]-a;if(l<0)o=i+1;else {if(!(l>0)){s=i;break}s=i-1;}}i=s;if(r[i]===a)return i/(n-1);var u=r[i];var c=r[i+1];var h=c-u;var d=(a-u)/h;var f=(i+d)/(n-1);return f},getTangent:function getTangent(e,t){var r=1e-4;var i=e-r;var n=e+r;i<0&&(i=0);n>1&&(n=1);var a=this.getPoint(i);var o=this.getPoint(n);var s=t||(a.isVector2?new zr:new Xr);s.copy(o).sub(a).normalize();return s},getTangentAt:function getTangentAt(e,t){var r=this.getUtoTmapping(e);return this.getTangent(r,t)},computeFrenetFrames:function computeFrenetFrames(e,t){var r=new Xr;var i=[];var n=[];var a=[];var o=new Xr;var s=new bi;for(var l=0;l<=e;l++){var u=l/e;i[l]=this.getTangentAt(u,new Xr);i[l].normalize();}n[0]=new Xr;a[0]=new Xr;var c=Number.MAX_VALUE;var h=Math.abs(i[0].x);var d=Math.abs(i[0].y);var f=Math.abs(i[0].z);if(h<=c){c=h;r.set(1,0,0);}if(d<=c){c=d;r.set(0,1,0);}f<=c&&r.set(0,0,1);o.crossVectors(i[0],r).normalize();n[0].crossVectors(i[0],o);a[0].crossVectors(i[0],n[0]);for(var p=1;p<=e;p++){n[p]=n[p-1].clone();a[p]=a[p-1].clone();o.crossVectors(i[p-1],i[p]);if(o.length()>Number.EPSILON){o.normalize();var m=Math.acos(Ur.clamp(i[p-1].dot(i[p]),-1,1));n[p].applyMatrix4(s.makeRotationAxis(o,m));}a[p].crossVectors(i[p],n[p]);}if(true===t){var g=Math.acos(Ur.clamp(n[0].dot(n[e]),-1,1));g/=e;i[0].dot(o.crossVectors(n[0],n[e]))>0&&(g=-g);for(var y=1;y<=e;y++){n[y].applyMatrix4(s.makeRotationAxis(i[y],g*y));a[y].crossVectors(i[y],n[y]);}}return {tangents:i,normals:n,binormals:a}},clone:function clone(){return (new(this||e).constructor).copy(this||e)},copy:function copy(t){(this||e).arcLengthDivisions=t.arcLengthDivisions;return this||e},toJSON:function toJSON(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};t.arcLengthDivisions=(this||e).arcLengthDivisions;t.type=(this||e).type;return t},fromJSON:function fromJSON(t){(this||e).arcLengthDivisions=t.arcLengthDivisions;return this||e}});function EllipseCurve(t,r,i,n,a,o,s,l){Curve.call(this||e);(this||e).type="EllipseCurve";(this||e).aX=t||0;(this||e).aY=r||0;(this||e).xRadius=i||1;(this||e).yRadius=n||1;(this||e).aStartAngle=a||0;(this||e).aEndAngle=o||2*Math.PI;(this||e).aClockwise=s||false;(this||e).aRotation=l||0;}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=true;EllipseCurve.prototype.getPoint=function(t,r){var i=r||new zr;var n=2*Math.PI;var a=(this||e).aEndAngle-(this||e).aStartAngle;var o=Math.abs(a)<Number.EPSILON;while(a<0)a+=n;while(a>n)a-=n;a<Number.EPSILON&&(a=o?0:n);true!==(this||e).aClockwise||o||(a===n?a=-n:a-=n);var s=(this||e).aStartAngle+t*a;var l=(this||e).aX+(this||e).xRadius*Math.cos(s);var u=(this||e).aY+(this||e).yRadius*Math.sin(s);if(0!==(this||e).aRotation){var c=Math.cos((this||e).aRotation);var h=Math.sin((this||e).aRotation);var d=l-(this||e).aX;var f=u-(this||e).aY;l=d*c-f*h+(this||e).aX;u=d*h+f*c+(this||e).aY;}return i.set(l,u)};EllipseCurve.prototype.copy=function(t){Curve.prototype.copy.call(this||e,t);(this||e).aX=t.aX;(this||e).aY=t.aY;(this||e).xRadius=t.xRadius;(this||e).yRadius=t.yRadius;(this||e).aStartAngle=t.aStartAngle;(this||e).aEndAngle=t.aEndAngle;(this||e).aClockwise=t.aClockwise;(this||e).aRotation=t.aRotation;return this||e};EllipseCurve.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this||e);t.aX=(this||e).aX;t.aY=(this||e).aY;t.xRadius=(this||e).xRadius;t.yRadius=(this||e).yRadius;t.aStartAngle=(this||e).aStartAngle;t.aEndAngle=(this||e).aEndAngle;t.aClockwise=(this||e).aClockwise;t.aRotation=(this||e).aRotation;return t};EllipseCurve.prototype.fromJSON=function(t){Curve.prototype.fromJSON.call(this||e,t);(this||e).aX=t.aX;(this||e).aY=t.aY;(this||e).xRadius=t.xRadius;(this||e).yRadius=t.yRadius;(this||e).aStartAngle=t.aStartAngle;(this||e).aEndAngle=t.aEndAngle;(this||e).aClockwise=t.aClockwise;(this||e).aRotation=t.aRotation;return this||e};function ArcCurve(t,r,i,n,a,o){EllipseCurve.call(this||e,t,r,i,i,n,a,o);(this||e).type="ArcCurve";}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=true;function CubicPoly(){var e=0,t=0,r=0,i=0;function init(n,a,o,s){e=n;t=o;r=-3*n+3*a-2*o-s;i=2*n-2*a+o+s;}return {initCatmullRom:function initCatmullRom(e,t,r,i,n){init(t,r,n*(r-e),n*(i-t));},initNonuniformCatmullRom:function initNonuniformCatmullRom(e,t,r,i,n,a,o){var s=(t-e)/n-(r-e)/(n+a)+(r-t)/a;var l=(r-t)/a-(i-t)/(a+o)+(i-r)/o;s*=a;l*=a;init(t,r,s,l);},calc:function calc(n){var a=n*n;var o=a*n;return e+t*n+r*a+i*o}}}var _u=new Xr;var Mu=new CubicPoly,wu=new CubicPoly,Su=new CubicPoly;function CatmullRomCurve3(t,r,i,n){Curve.call(this||e);(this||e).type="CatmullRomCurve3";(this||e).points=t||[];(this||e).closed=r||false;(this||e).curveType=i||"centripetal";(this||e).tension=void 0!==n?n:.5;}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=true;CatmullRomCurve3.prototype.getPoint=function(t,r){var i=r||new Xr;var n=(this||e).points;var a=n.length;var o=(a-((this||e).closed?0:1))*t;var s=Math.floor(o);var l=o-s;if((this||e).closed)s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a;else if(0===l&&s===a-1){s=a-2;l=1;}var u,c;if((this||e).closed||s>0)u=n[(s-1)%a];else {_u.subVectors(n[0],n[1]).add(n[0]);u=_u;}var h=n[s%a];var d=n[(s+1)%a];if((this||e).closed||s+2<a)c=n[(s+2)%a];else {_u.subVectors(n[a-1],n[a-2]).add(n[a-1]);c=_u;}if("centripetal"===(this||e).curveType||"chordal"===(this||e).curveType){var f="chordal"===(this||e).curveType?.5:.25;var p=Math.pow(u.distanceToSquared(h),f);var m=Math.pow(h.distanceToSquared(d),f);var g=Math.pow(d.distanceToSquared(c),f);m<1e-4&&(m=1);p<1e-4&&(p=m);g<1e-4&&(g=m);Mu.initNonuniformCatmullRom(u.x,h.x,d.x,c.x,p,m,g);wu.initNonuniformCatmullRom(u.y,h.y,d.y,c.y,p,m,g);Su.initNonuniformCatmullRom(u.z,h.z,d.z,c.z,p,m,g);}else if("catmullrom"===(this||e).curveType){Mu.initCatmullRom(u.x,h.x,d.x,c.x,(this||e).tension);wu.initCatmullRom(u.y,h.y,d.y,c.y,(this||e).tension);Su.initCatmullRom(u.z,h.z,d.z,c.z,(this||e).tension);}i.set(Mu.calc(l),wu.calc(l),Su.calc(l));return i};CatmullRomCurve3.prototype.copy=function(t){Curve.prototype.copy.call(this||e,t);(this||e).points=[];for(var r=0,i=t.points.length;r<i;r++){var n=t.points[r];(this||e).points.push(n.clone());}(this||e).closed=t.closed;(this||e).curveType=t.curveType;(this||e).tension=t.tension;return this||e};CatmullRomCurve3.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this||e);t.points=[];for(var r=0,i=(this||e).points.length;r<i;r++){var n=(this||e).points[r];t.points.push(n.toArray());}t.closed=(this||e).closed;t.curveType=(this||e).curveType;t.tension=(this||e).tension;return t};CatmullRomCurve3.prototype.fromJSON=function(t){Curve.prototype.fromJSON.call(this||e,t);(this||e).points=[];for(var r=0,i=t.points.length;r<i;r++){var n=t.points[r];(this||e).points.push((new Xr).fromArray(n));}(this||e).closed=t.closed;(this||e).curveType=t.curveType;(this||e).tension=t.tension;return this||e};function CatmullRom(e,t,r,i,n){var a=.5*(i-t);var o=.5*(n-r);var s=e*e;var l=e*s;return (2*r-2*i+a+o)*l+(-3*r+3*i-2*a-o)*s+a*e+r}function QuadraticBezierP0(e,t){var r=1-e;return r*r*t}function QuadraticBezierP1(e,t){return 2*(1-e)*e*t}function QuadraticBezierP2(e,t){return e*e*t}function QuadraticBezier(e,t,r,i){return QuadraticBezierP0(e,t)+QuadraticBezierP1(e,r)+QuadraticBezierP2(e,i)}function CubicBezierP0(e,t){var r=1-e;return r*r*r*t}function CubicBezierP1(e,t){var r=1-e;return 3*r*r*e*t}function CubicBezierP2(e,t){return 3*(1-e)*e*e*t}function CubicBezierP3(e,t){return e*e*e*t}function CubicBezier(e,t,r,i,n){return CubicBezierP0(e,t)+CubicBezierP1(e,r)+CubicBezierP2(e,i)+CubicBezierP3(e,n)}function CubicBezierCurve(t,r,i,n){Curve.call(this||e);(this||e).type="CubicBezierCurve";(this||e).v0=t||new zr;(this||e).v1=r||new zr;(this||e).v2=i||new zr;(this||e).v3=n||new zr;}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=true;CubicBezierCurve.prototype.getPoint=function(t,r){var i=r||new zr;var n=(this||e).v0,a=(this||e).v1,o=(this||e).v2,s=(this||e).v3;i.set(CubicBezier(t,n.x,a.x,o.x,s.x),CubicBezier(t,n.y,a.y,o.y,s.y));return i};CubicBezierCurve.prototype.copy=function(t){Curve.prototype.copy.call(this||e,t);(this||e).v0.copy(t.v0);(this||e).v1.copy(t.v1);(this||e).v2.copy(t.v2);(this||e).v3.copy(t.v3);return this||e};CubicBezierCurve.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this||e);t.v0=(this||e).v0.toArray();t.v1=(this||e).v1.toArray();t.v2=(this||e).v2.toArray();t.v3=(this||e).v3.toArray();return t};CubicBezierCurve.prototype.fromJSON=function(t){Curve.prototype.fromJSON.call(this||e,t);(this||e).v0.fromArray(t.v0);(this||e).v1.fromArray(t.v1);(this||e).v2.fromArray(t.v2);(this||e).v3.fromArray(t.v3);return this||e};function CubicBezierCurve3(t,r,i,n){Curve.call(this||e);(this||e).type="CubicBezierCurve3";(this||e).v0=t||new Xr;(this||e).v1=r||new Xr;(this||e).v2=i||new Xr;(this||e).v3=n||new Xr;}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=true;CubicBezierCurve3.prototype.getPoint=function(t,r){var i=r||new Xr;var n=(this||e).v0,a=(this||e).v1,o=(this||e).v2,s=(this||e).v3;i.set(CubicBezier(t,n.x,a.x,o.x,s.x),CubicBezier(t,n.y,a.y,o.y,s.y),CubicBezier(t,n.z,a.z,o.z,s.z));return i};CubicBezierCurve3.prototype.copy=function(t){Curve.prototype.copy.call(this||e,t);(this||e).v0.copy(t.v0);(this||e).v1.copy(t.v1);(this||e).v2.copy(t.v2);(this||e).v3.copy(t.v3);return this||e};CubicBezierCurve3.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this||e);t.v0=(this||e).v0.toArray();t.v1=(this||e).v1.toArray();t.v2=(this||e).v2.toArray();t.v3=(this||e).v3.toArray();return t};CubicBezierCurve3.prototype.fromJSON=function(t){Curve.prototype.fromJSON.call(this||e,t);(this||e).v0.fromArray(t.v0);(this||e).v1.fromArray(t.v1);(this||e).v2.fromArray(t.v2);(this||e).v3.fromArray(t.v3);return this||e};function LineCurve(t,r){Curve.call(this||e);(this||e).type="LineCurve";(this||e).v1=t||new zr;(this||e).v2=r||new zr;}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=true;LineCurve.prototype.getPoint=function(t,r){var i=r||new zr;if(1===t)i.copy((this||e).v2);else {i.copy((this||e).v2).sub((this||e).v1);i.multiplyScalar(t).add((this||e).v1);}return i};LineCurve.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};LineCurve.prototype.getTangent=function(t,r){var i=r||new zr;i.copy((this||e).v2).sub((this||e).v1).normalize();return i};LineCurve.prototype.copy=function(t){Curve.prototype.copy.call(this||e,t);(this||e).v1.copy(t.v1);(this||e).v2.copy(t.v2);return this||e};LineCurve.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this||e);t.v1=(this||e).v1.toArray();t.v2=(this||e).v2.toArray();return t};LineCurve.prototype.fromJSON=function(t){Curve.prototype.fromJSON.call(this||e,t);(this||e).v1.fromArray(t.v1);(this||e).v2.fromArray(t.v2);return this||e};function LineCurve3(t,r){Curve.call(this||e);(this||e).type="LineCurve3";(this||e).v1=t||new Xr;(this||e).v2=r||new Xr;}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=true;LineCurve3.prototype.getPoint=function(t,r){var i=r||new Xr;if(1===t)i.copy((this||e).v2);else {i.copy((this||e).v2).sub((this||e).v1);i.multiplyScalar(t).add((this||e).v1);}return i};LineCurve3.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};LineCurve3.prototype.copy=function(t){Curve.prototype.copy.call(this||e,t);(this||e).v1.copy(t.v1);(this||e).v2.copy(t.v2);return this||e};LineCurve3.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this||e);t.v1=(this||e).v1.toArray();t.v2=(this||e).v2.toArray();return t};LineCurve3.prototype.fromJSON=function(t){Curve.prototype.fromJSON.call(this||e,t);(this||e).v1.fromArray(t.v1);(this||e).v2.fromArray(t.v2);return this||e};function QuadraticBezierCurve(t,r,i){Curve.call(this||e);(this||e).type="QuadraticBezierCurve";(this||e).v0=t||new zr;(this||e).v1=r||new zr;(this||e).v2=i||new zr;}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=true;QuadraticBezierCurve.prototype.getPoint=function(t,r){var i=r||new zr;var n=(this||e).v0,a=(this||e).v1,o=(this||e).v2;i.set(QuadraticBezier(t,n.x,a.x,o.x),QuadraticBezier(t,n.y,a.y,o.y));return i};QuadraticBezierCurve.prototype.copy=function(t){Curve.prototype.copy.call(this||e,t);(this||e).v0.copy(t.v0);(this||e).v1.copy(t.v1);(this||e).v2.copy(t.v2);return this||e};QuadraticBezierCurve.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this||e);t.v0=(this||e).v0.toArray();t.v1=(this||e).v1.toArray();t.v2=(this||e).v2.toArray();return t};QuadraticBezierCurve.prototype.fromJSON=function(t){Curve.prototype.fromJSON.call(this||e,t);(this||e).v0.fromArray(t.v0);(this||e).v1.fromArray(t.v1);(this||e).v2.fromArray(t.v2);return this||e};function QuadraticBezierCurve3(t,r,i){Curve.call(this||e);(this||e).type="QuadraticBezierCurve3";(this||e).v0=t||new Xr;(this||e).v1=r||new Xr;(this||e).v2=i||new Xr;}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=true;QuadraticBezierCurve3.prototype.getPoint=function(t,r){var i=r||new Xr;var n=(this||e).v0,a=(this||e).v1,o=(this||e).v2;i.set(QuadraticBezier(t,n.x,a.x,o.x),QuadraticBezier(t,n.y,a.y,o.y),QuadraticBezier(t,n.z,a.z,o.z));return i};QuadraticBezierCurve3.prototype.copy=function(t){Curve.prototype.copy.call(this||e,t);(this||e).v0.copy(t.v0);(this||e).v1.copy(t.v1);(this||e).v2.copy(t.v2);return this||e};QuadraticBezierCurve3.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this||e);t.v0=(this||e).v0.toArray();t.v1=(this||e).v1.toArray();t.v2=(this||e).v2.toArray();return t};QuadraticBezierCurve3.prototype.fromJSON=function(t){Curve.prototype.fromJSON.call(this||e,t);(this||e).v0.fromArray(t.v0);(this||e).v1.fromArray(t.v1);(this||e).v2.fromArray(t.v2);return this||e};function SplineCurve(t){Curve.call(this||e);(this||e).type="SplineCurve";(this||e).points=t||[];}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=true;SplineCurve.prototype.getPoint=function(t,r){var i=r||new zr;var n=(this||e).points;var a=(n.length-1)*t;var o=Math.floor(a);var s=a-o;var l=n[0===o?o:o-1];var u=n[o];var c=n[o>n.length-2?n.length-1:o+1];var h=n[o>n.length-3?n.length-1:o+2];i.set(CatmullRom(s,l.x,u.x,c.x,h.x),CatmullRom(s,l.y,u.y,c.y,h.y));return i};SplineCurve.prototype.copy=function(t){Curve.prototype.copy.call(this||e,t);(this||e).points=[];for(var r=0,i=t.points.length;r<i;r++){var n=t.points[r];(this||e).points.push(n.clone());}return this||e};SplineCurve.prototype.toJSON=function(){var t=Curve.prototype.toJSON.call(this||e);t.points=[];for(var r=0,i=(this||e).points.length;r<i;r++){var n=(this||e).points[r];t.points.push(n.toArray());}return t};SplineCurve.prototype.fromJSON=function(t){Curve.prototype.fromJSON.call(this||e,t);(this||e).points=[];for(var r=0,i=t.points.length;r<i;r++){var n=t.points[r];(this||e).points.push((new zr).fromArray(n));}return this||e};var Tu=Object.freeze({__proto__:null,ArcCurve:ArcCurve,CatmullRomCurve3:CatmullRomCurve3,CubicBezierCurve:CubicBezierCurve,CubicBezierCurve3:CubicBezierCurve3,EllipseCurve:EllipseCurve,LineCurve:LineCurve,LineCurve3:LineCurve3,QuadraticBezierCurve:QuadraticBezierCurve,QuadraticBezierCurve3:QuadraticBezierCurve3,SplineCurve:SplineCurve});function CurvePath(){Curve.call(this||e);(this||e).type="CurvePath";(this||e).curves=[];(this||e).autoClose=false;}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function add(t){(this||e).curves.push(t);},closePath:function closePath(){var t=(this||e).curves[0].getPoint(0);var r=(this||e).curves[(this||e).curves.length-1].getPoint(1);t.equals(r)||(this||e).curves.push(new LineCurve(r,t));},getPoint:function getPoint(t){var r=t*this.getLength();var i=this.getCurveLengths();var n=0;while(n<i.length){if(i[n]>=r){var a=i[n]-r;var o=(this||e).curves[n];var s=o.getLength();var l=0===s?0:1-a/s;return o.getPointAt(l)}n++;}return null},getLength:function getLength(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function updateArcLengths(){(this||e).needsUpdate=true;(this||e).cacheLengths=null;this.getCurveLengths();},getCurveLengths:function getCurveLengths(){if((this||e).cacheLengths&&(this||e).cacheLengths.length===(this||e).curves.length)return (this||e).cacheLengths;var t=[];var r=0;for(var i=0,n=(this||e).curves.length;i<n;i++){r+=(this||e).curves[i].getLength();t.push(r);}(this||e).cacheLengths=t;return t},getSpacedPoints:function getSpacedPoints(t){void 0===t&&(t=40);var r=[];for(var i=0;i<=t;i++)r.push(this.getPoint(i/t));(this||e).autoClose&&r.push(r[0]);return r},getPoints:function getPoints(t){t=t||12;var r=[];var i;for(var n=0,a=(this||e).curves;n<a.length;n++){var o=a[n];var s=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t;var l=o.getPoints(s);for(var u=0;u<l.length;u++){var c=l[u];if(!i||!i.equals(c)){r.push(c);i=c;}}}(this||e).autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]);return r},copy:function copy(t){Curve.prototype.copy.call(this||e,t);(this||e).curves=[];for(var r=0,i=t.curves.length;r<i;r++){var n=t.curves[r];(this||e).curves.push(n.clone());}(this||e).autoClose=t.autoClose;return this||e},toJSON:function toJSON(){var t=Curve.prototype.toJSON.call(this||e);t.autoClose=(this||e).autoClose;t.curves=[];for(var r=0,i=(this||e).curves.length;r<i;r++){var n=(this||e).curves[r];t.curves.push(n.toJSON());}return t},fromJSON:function fromJSON(t){Curve.prototype.fromJSON.call(this||e,t);(this||e).autoClose=t.autoClose;(this||e).curves=[];for(var r=0,i=t.curves.length;r<i;r++){var n=t.curves[r];(this||e).curves.push((new Tu[n.type]).fromJSON(n));}return this||e}});function Path(t){CurvePath.call(this||e);(this||e).type="Path";(this||e).currentPoint=new zr;t&&this.setFromPoints(t);}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(var r=1,i=t.length;r<i;r++)this.lineTo(t[r].x,t[r].y);return this||e},moveTo:function moveTo(t,r){(this||e).currentPoint.set(t,r);return this||e},lineTo:function lineTo(t,r){var i=new LineCurve((this||e).currentPoint.clone(),new zr(t,r));(this||e).curves.push(i);(this||e).currentPoint.set(t,r);return this||e},quadraticCurveTo:function quadraticCurveTo(t,r,i,n){var a=new QuadraticBezierCurve((this||e).currentPoint.clone(),new zr(t,r),new zr(i,n));(this||e).curves.push(a);(this||e).currentPoint.set(i,n);return this||e},bezierCurveTo:function bezierCurveTo(t,r,i,n,a,o){var s=new CubicBezierCurve((this||e).currentPoint.clone(),new zr(t,r),new zr(i,n),new zr(a,o));(this||e).curves.push(s);(this||e).currentPoint.set(a,o);return this||e},splineThru:function splineThru(t){var r=[(this||e).currentPoint.clone()].concat(t);var i=new SplineCurve(r);(this||e).curves.push(i);(this||e).currentPoint.copy(t[t.length-1]);return this||e},arc:function arc(t,r,i,n,a,o){var s=(this||e).currentPoint.x;var l=(this||e).currentPoint.y;this.absarc(t+s,r+l,i,n,a,o);return this||e},absarc:function absarc(t,r,i,n,a,o){this.absellipse(t,r,i,i,n,a,o);return this||e},ellipse:function ellipse(t,r,i,n,a,o,s,l){var u=(this||e).currentPoint.x;var c=(this||e).currentPoint.y;this.absellipse(t+u,r+c,i,n,a,o,s,l);return this||e},absellipse:function absellipse(t,r,i,n,a,o,s,l){var u=new EllipseCurve(t,r,i,n,a,o,s,l);if((this||e).curves.length>0){var c=u.getPoint(0);c.equals((this||e).currentPoint)||this.lineTo(c.x,c.y);}(this||e).curves.push(u);var h=u.getPoint(1);(this||e).currentPoint.copy(h);return this||e},copy:function copy(t){CurvePath.prototype.copy.call(this||e,t);(this||e).currentPoint.copy(t.currentPoint);return this||e},toJSON:function toJSON(){var t=CurvePath.prototype.toJSON.call(this||e);t.currentPoint=(this||e).currentPoint.toArray();return t},fromJSON:function fromJSON(t){CurvePath.prototype.fromJSON.call(this||e,t);(this||e).currentPoint.fromArray(t.currentPoint);return this||e}});function Shape(t){Path.call(this||e,t);(this||e).uuid=Ur.generateUUID();(this||e).type="Shape";(this||e).holes=[];}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function getPointsHoles(t){var r=[];for(var i=0,n=(this||e).holes.length;i<n;i++)r[i]=(this||e).holes[i].getPoints(t);return r},extractPoints:function extractPoints(e){return {shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function copy(t){Path.prototype.copy.call(this||e,t);(this||e).holes=[];for(var r=0,i=t.holes.length;r<i;r++){var n=t.holes[r];(this||e).holes.push(n.clone());}return this||e},toJSON:function toJSON(){var t=Path.prototype.toJSON.call(this||e);t.uuid=(this||e).uuid;t.holes=[];for(var r=0,i=(this||e).holes.length;r<i;r++){var n=(this||e).holes[r];t.holes.push(n.toJSON());}return t},fromJSON:function fromJSON(t){Path.prototype.fromJSON.call(this||e,t);(this||e).uuid=t.uuid;(this||e).holes=[];for(var r=0,i=t.holes.length;r<i;r++){var n=t.holes[r];(this||e).holes.push((new Path).fromJSON(n));}return this||e}});function Light(t,r){Object3D.call(this||e);(this||e).type="Light";(this||e).color=new cn(t);(this||e).intensity=void 0!==r?r:1;}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:true,copy:function copy(t){Object3D.prototype.copy.call(this||e,t);(this||e).color.copy(t.color);(this||e).intensity=t.intensity;return this||e},toJSON:function toJSON(t){var r=Object3D.prototype.toJSON.call(this||e,t);r.object.color=(this||e).color.getHex();r.object.intensity=(this||e).intensity;void 0!==(this||e).groundColor&&(r.object.groundColor=(this||e).groundColor.getHex());void 0!==(this||e).distance&&(r.object.distance=(this||e).distance);void 0!==(this||e).angle&&(r.object.angle=(this||e).angle);void 0!==(this||e).decay&&(r.object.decay=(this||e).decay);void 0!==(this||e).penumbra&&(r.object.penumbra=(this||e).penumbra);void 0!==(this||e).shadow&&(r.object.shadow=(this||e).shadow.toJSON());return r}});function HemisphereLight(t,r,i){Light.call(this||e,t,i);(this||e).type="HemisphereLight";(this||e).position.copy(Object3D.DefaultUp);this.updateMatrix();(this||e).groundColor=new cn(r);}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:true,copy:function copy(t){Light.prototype.copy.call(this||e,t);(this||e).groundColor.copy(t.groundColor);return this||e}});function LightShadow(t){(this||e).camera=t;(this||e).bias=0;(this||e).normalBias=0;(this||e).radius=1;(this||e).mapSize=new zr(512,512);(this||e).map=null;(this||e).mapPass=null;(this||e).matrix=new bi;(this||e).autoUpdate=true;(this||e).needsUpdate=false;(this||e)._frustum=new Yn;(this||e)._frameExtents=new zr(1,1);(this||e)._viewportCount=1;(this||e)._viewports=[new jr(0,0,1,1)];}Object.assign(LightShadow.prototype,{_projScreenMatrix:new bi,_lightPositionWorld:new Xr,_lookTarget:new Xr,getViewportCount:function getViewportCount(){return (this||e)._viewportCount},getFrustum:function getFrustum(){return (this||e)._frustum},updateMatrices:function updateMatrices(t){var r=(this||e).camera,i=(this||e).matrix,n=(this||e)._projScreenMatrix,a=(this||e)._lookTarget,o=(this||e)._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld);r.position.copy(o);a.setFromMatrixPosition(t.target.matrixWorld);r.lookAt(a);r.updateMatrixWorld();n.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse);(this||e)._frustum.setFromProjectionMatrix(n);i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);i.multiply(r.projectionMatrix);i.multiply(r.matrixWorldInverse);},getViewport:function getViewport(t){return (this||e)._viewports[t]},getFrameExtents:function getFrameExtents(){return (this||e)._frameExtents},copy:function copy(t){(this||e).camera=t.camera.clone();(this||e).bias=t.bias;(this||e).radius=t.radius;(this||e).mapSize.copy(t.mapSize);return this||e},clone:function clone(){return (new(this||e).constructor).copy(this||e)},toJSON:function toJSON(){var t={};0!==(this||e).bias&&(t.bias=(this||e).bias);0!==(this||e).normalBias&&(t.normalBias=(this||e).normalBias);1!==(this||e).radius&&(t.radius=(this||e).radius);512===(this||e).mapSize.x&&512===(this||e).mapSize.y||(t.mapSize=(this||e).mapSize.toArray());t.camera=(this||e).camera.toJSON(false).object;delete t.camera.matrix;return t}});function SpotLightShadow(){LightShadow.call(this||e,new PerspectiveCamera(50,1,.5,500));(this||e).focus=1;}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:true,updateMatrices:function updateMatrices(t){var r=(this||e).camera;var i=2*Ur.RAD2DEG*t.angle*(this||e).focus;var n=(this||e).mapSize.width/(this||e).mapSize.height;var a=t.distance||r.far;if(i!==r.fov||n!==r.aspect||a!==r.far){r.fov=i;r.aspect=n;r.far=a;r.updateProjectionMatrix();}LightShadow.prototype.updateMatrices.call(this||e,t);}});function SpotLight(t,r,i,n,a,o){Light.call(this||e,t,r);(this||e).type="SpotLight";(this||e).position.copy(Object3D.DefaultUp);this.updateMatrix();(this||e).target=new Object3D;Object.defineProperty(this||e,"power",{get:function get(){return (this||e).intensity*Math.PI},set:function set(t){(this||e).intensity=t/Math.PI;}});(this||e).distance=void 0!==i?i:0;(this||e).angle=void 0!==n?n:Math.PI/3;(this||e).penumbra=void 0!==a?a:0;(this||e).decay=void 0!==o?o:1;(this||e).shadow=new SpotLightShadow;}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:true,copy:function copy(t){Light.prototype.copy.call(this||e,t);(this||e).distance=t.distance;(this||e).angle=t.angle;(this||e).penumbra=t.penumbra;(this||e).decay=t.decay;(this||e).target=t.target.clone();(this||e).shadow=t.shadow.clone();return this||e}});function PointLightShadow(){LightShadow.call(this||e,new PerspectiveCamera(90,1,.5,500));(this||e)._frameExtents=new zr(4,2);(this||e)._viewportCount=6;(this||e)._viewports=[new jr(2,1,1,1),new jr(0,1,1,1),new jr(3,1,1,1),new jr(1,1,1,1),new jr(3,0,1,1),new jr(1,0,1,1)];(this||e)._cubeDirections=[new Xr(1,0,0),new Xr(-1,0,0),new Xr(0,0,1),new Xr(0,0,-1),new Xr(0,1,0),new Xr(0,-1,0)];(this||e)._cubeUps=[new Xr(0,1,0),new Xr(0,1,0),new Xr(0,1,0),new Xr(0,1,0),new Xr(0,0,1),new Xr(0,0,-1)];}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:true,updateMatrices:function updateMatrices(t,r){void 0===r&&(r=0);var i=(this||e).camera,n=(this||e).matrix,a=(this||e)._lightPositionWorld,o=(this||e)._lookTarget,s=(this||e)._projScreenMatrix;a.setFromMatrixPosition(t.matrixWorld);i.position.copy(a);o.copy(i.position);o.add((this||e)._cubeDirections[r]);i.up.copy((this||e)._cubeUps[r]);i.lookAt(o);i.updateMatrixWorld();n.makeTranslation(-a.x,-a.y,-a.z);s.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse);(this||e)._frustum.setFromProjectionMatrix(s);}});function PointLight(t,r,i,n){Light.call(this||e,t,r);(this||e).type="PointLight";Object.defineProperty(this||e,"power",{get:function get(){return 4*(this||e).intensity*Math.PI},set:function set(t){(this||e).intensity=t/(4*Math.PI);}});(this||e).distance=void 0!==i?i:0;(this||e).decay=void 0!==n?n:1;(this||e).shadow=new PointLightShadow;}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:true,copy:function copy(t){Light.prototype.copy.call(this||e,t);(this||e).distance=t.distance;(this||e).decay=t.decay;(this||e).shadow=t.shadow.clone();return this||e}});function OrthographicCamera(t,r,i,n,a,o){Camera.call(this||e);(this||e).type="OrthographicCamera";(this||e).zoom=1;(this||e).view=null;(this||e).left=void 0!==t?t:-1;(this||e).right=void 0!==r?r:1;(this||e).top=void 0!==i?i:1;(this||e).bottom=void 0!==n?n:-1;(this||e).near=void 0!==a?a:.1;(this||e).far=void 0!==o?o:2e3;this.updateProjectionMatrix();}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:true,copy:function copy(t,r){Camera.prototype.copy.call(this||e,t,r);(this||e).left=t.left;(this||e).right=t.right;(this||e).top=t.top;(this||e).bottom=t.bottom;(this||e).near=t.near;(this||e).far=t.far;(this||e).zoom=t.zoom;(this||e).view=null===t.view?null:Object.assign({},t.view);return this||e},setViewOffset:function setViewOffset(t,r,i,n,a,o){null===(this||e).view&&((this||e).view={enabled:true,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||e).view.enabled=true;(this||e).view.fullWidth=t;(this||e).view.fullHeight=r;(this||e).view.offsetX=i;(this||e).view.offsetY=n;(this||e).view.width=a;(this||e).view.height=o;this.updateProjectionMatrix();},clearViewOffset:function clearViewOffset(){null!==(this||e).view&&((this||e).view.enabled=false);this.updateProjectionMatrix();},updateProjectionMatrix:function updateProjectionMatrix(){var t=((this||e).right-(this||e).left)/(2*(this||e).zoom);var r=((this||e).top-(this||e).bottom)/(2*(this||e).zoom);var i=((this||e).right+(this||e).left)/2;var n=((this||e).top+(this||e).bottom)/2;var a=i-t;var o=i+t;var s=n+r;var l=n-r;if(null!==(this||e).view&&(this||e).view.enabled){var u=((this||e).right-(this||e).left)/(this||e).view.fullWidth/(this||e).zoom;var c=((this||e).top-(this||e).bottom)/(this||e).view.fullHeight/(this||e).zoom;a+=u*(this||e).view.offsetX;o=a+u*(this||e).view.width;s-=c*(this||e).view.offsetY;l=s-c*(this||e).view.height;}(this||e).projectionMatrix.makeOrthographic(a,o,s,l,(this||e).near,(this||e).far);(this||e).projectionMatrixInverse.getInverse((this||e).projectionMatrix);},toJSON:function toJSON(t){var r=Object3D.prototype.toJSON.call(this||e,t);r.object.zoom=(this||e).zoom;r.object.left=(this||e).left;r.object.right=(this||e).right;r.object.top=(this||e).top;r.object.bottom=(this||e).bottom;r.object.near=(this||e).near;r.object.far=(this||e).far;null!==(this||e).view&&(r.object.view=Object.assign({},(this||e).view));return r}});function DirectionalLightShadow(){LightShadow.call(this||e,new OrthographicCamera(-5,5,5,-5,.5,500));}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:true,updateMatrices:function updateMatrices(t){LightShadow.prototype.updateMatrices.call(this||e,t);}});function DirectionalLight(t,r){Light.call(this||e,t,r);(this||e).type="DirectionalLight";(this||e).position.copy(Object3D.DefaultUp);this.updateMatrix();(this||e).target=new Object3D;(this||e).shadow=new DirectionalLightShadow;}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:true,copy:function copy(t){Light.prototype.copy.call(this||e,t);(this||e).target=t.target.clone();(this||e).shadow=t.shadow.clone();return this||e}});function AmbientLight(t,r){Light.call(this||e,t,r);(this||e).type="AmbientLight";}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:true});function RectAreaLight(t,r,i,n){Light.call(this||e,t,r);(this||e).type="RectAreaLight";(this||e).width=void 0!==i?i:10;(this||e).height=void 0!==n?n:10;}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:true,copy:function copy(t){Light.prototype.copy.call(this||e,t);(this||e).width=t.width;(this||e).height=t.height;return this||e},toJSON:function toJSON(t){var r=Light.prototype.toJSON.call(this||e,t);r.object.width=(this||e).width;r.object.height=(this||e).height;return r}});var Au=function(){function SphericalHarmonics3(){Object.defineProperty(this||e,"isSphericalHarmonics3",{value:true});(this||e).coefficients=[];for(var t=0;t<9;t++)(this||e).coefficients.push(new Xr);}var t=SphericalHarmonics3.prototype;t.set=function set(t){for(var r=0;r<9;r++)(this||e).coefficients[r].copy(t[r]);return this||e};t.zero=function zero(){for(var t=0;t<9;t++)(this||e).coefficients[t].set(0,0,0);return this||e};t.getAt=function getAt(t,r){var i=t.x,n=t.y,a=t.z;var o=(this||e).coefficients;r.copy(o[0]).multiplyScalar(.282095);r.addScaledVector(o[1],.488603*n);r.addScaledVector(o[2],.488603*a);r.addScaledVector(o[3],.488603*i);r.addScaledVector(o[4],1.092548*(i*n));r.addScaledVector(o[5],1.092548*(n*a));r.addScaledVector(o[6],.315392*(3*a*a-1));r.addScaledVector(o[7],1.092548*(i*a));r.addScaledVector(o[8],.546274*(i*i-n*n));return r};t.getIrradianceAt=function getIrradianceAt(t,r){var i=t.x,n=t.y,a=t.z;var o=(this||e).coefficients;r.copy(o[0]).multiplyScalar(.886227);r.addScaledVector(o[1],2*.511664*n);r.addScaledVector(o[2],2*.511664*a);r.addScaledVector(o[3],2*.511664*i);r.addScaledVector(o[4],2*.429043*i*n);r.addScaledVector(o[5],2*.429043*n*a);r.addScaledVector(o[6],.743125*a*a-.247708);r.addScaledVector(o[7],2*.429043*i*a);r.addScaledVector(o[8],.429043*(i*i-n*n));return r};t.add=function add(t){for(var r=0;r<9;r++)(this||e).coefficients[r].add(t.coefficients[r]);return this||e};t.addScaledSH=function addScaledSH(t,r){for(var i=0;i<9;i++)(this||e).coefficients[i].addScaledVector(t.coefficients[i],r);return this||e};t.scale=function scale(t){for(var r=0;r<9;r++)(this||e).coefficients[r].multiplyScalar(t);return this||e};t.lerp=function lerp(t,r){for(var i=0;i<9;i++)(this||e).coefficients[i].lerp(t.coefficients[i],r);return this||e};t.equals=function equals(t){for(var r=0;r<9;r++)if(!(this||e).coefficients[r].equals(t.coefficients[r]))return false;return true};t.copy=function copy(e){return this.set(e.coefficients)};t.clone=function clone(){return (new(this||e).constructor).copy(this||e)};t.fromArray=function fromArray(t,r){void 0===r&&(r=0);var i=(this||e).coefficients;for(var n=0;n<9;n++)i[n].fromArray(t,r+3*n);return this||e};t.toArray=function toArray(t,r){void 0===t&&(t=[]);void 0===r&&(r=0);var i=(this||e).coefficients;for(var n=0;n<9;n++)i[n].toArray(t,r+3*n);return t};SphericalHarmonics3.getBasisAt=function getBasisAt(e,t){var r=e.x,i=e.y,n=e.z;t[0]=.282095;t[1]=.488603*i;t[2]=.488603*n;t[3]=.488603*r;t[4]=1.092548*r*i;t[5]=1.092548*i*n;t[6]=.315392*(3*n*n-1);t[7]=1.092548*r*n;t[8]=.546274*(r*r-i*i);};return SphericalHarmonics3}();function LightProbe(t,r){Light.call(this||e,void 0,r);(this||e).type="LightProbe";(this||e).sh=void 0!==t?t:new Au;}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:true,copy:function copy(t){Light.prototype.copy.call(this||e,t);(this||e).sh.copy(t.sh);return this||e},fromJSON:function fromJSON(t){(this||e).intensity=t.intensity;(this||e).sh.fromArray(t.sh);return this||e},toJSON:function toJSON(t){var r=Light.prototype.toJSON.call(this||e,t);r.object.sh=(this||e).sh.toArray();return r}});function MaterialLoader(t){Loader.call(this||e,t);(this||e).textures={};}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function load(t,r,i,n){var a=this||e;var o=new FileLoader(a.manager);o.setPath(a.path);o.setRequestHeader(a.requestHeader);o.setWithCredentials(a.withCredentials);o.load(t,(function(e){try{r(a.parse(JSON.parse(e)));}catch(e){n?n(e):console.error(e);a.manager.itemError(t);}}),i,n);},parse:function parse(t){var r=(this||e).textures;function getTexture(e){void 0===r[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e);return r[e]}var i=new vu[t.type];void 0!==t.uuid&&(i.uuid=t.uuid);void 0!==t.name&&(i.name=t.name);void 0!==t.color&&i.color.setHex(t.color);void 0!==t.roughness&&(i.roughness=t.roughness);void 0!==t.metalness&&(i.metalness=t.metalness);void 0!==t.sheen&&(i.sheen=(new cn).setHex(t.sheen));void 0!==t.emissive&&i.emissive.setHex(t.emissive);void 0!==t.specular&&i.specular.setHex(t.specular);void 0!==t.shininess&&(i.shininess=t.shininess);void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat);void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness);void 0!==t.fog&&(i.fog=t.fog);void 0!==t.flatShading&&(i.flatShading=t.flatShading);void 0!==t.blending&&(i.blending=t.blending);void 0!==t.combine&&(i.combine=t.combine);void 0!==t.side&&(i.side=t.side);void 0!==t.opacity&&(i.opacity=t.opacity);void 0!==t.transparent&&(i.transparent=t.transparent);void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest);void 0!==t.depthTest&&(i.depthTest=t.depthTest);void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite);void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite);void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite);void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask);void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc);void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef);void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask);void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail);void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail);void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass);void 0!==t.wireframe&&(i.wireframe=t.wireframe);void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth);void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap);void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin);void 0!==t.rotation&&(i.rotation=t.rotation);1!==t.linewidth&&(i.linewidth=t.linewidth);void 0!==t.dashSize&&(i.dashSize=t.dashSize);void 0!==t.gapSize&&(i.gapSize=t.gapSize);void 0!==t.scale&&(i.scale=t.scale);void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset);void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor);void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits);void 0!==t.skinning&&(i.skinning=t.skinning);void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets);void 0!==t.morphNormals&&(i.morphNormals=t.morphNormals);void 0!==t.dithering&&(i.dithering=t.dithering);void 0!==t.vertexTangents&&(i.vertexTangents=t.vertexTangents);void 0!==t.visible&&(i.visible=t.visible);void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped);void 0!==t.userData&&(i.userData=t.userData);void 0!==t.vertexColors&&("number"===typeof t.vertexColors?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors);if(void 0!==t.uniforms)for(var n in t.uniforms){var a=t.uniforms[n];i.uniforms[n]={};switch(a.type){case"t":i.uniforms[n].value=getTexture(a.value);break;case"c":i.uniforms[n].value=(new cn).setHex(a.value);break;case"v2":i.uniforms[n].value=(new zr).fromArray(a.value);break;case"v3":i.uniforms[n].value=(new Xr).fromArray(a.value);break;case"v4":i.uniforms[n].value=(new jr).fromArray(a.value);break;case"m3":i.uniforms[n].value=(new Hr).fromArray(a.value);break;case"m4":i.uniforms[n].value=(new bi).fromArray(a.value);break;default:i.uniforms[n].value=a.value;}}void 0!==t.defines&&(i.defines=t.defines);void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader);void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader);if(void 0!==t.extensions)for(var o in t.extensions)i.extensions[o]=t.extensions[o];void 0!==t.shading&&(i.flatShading=1===t.shading);void 0!==t.size&&(i.size=t.size);void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation);void 0!==t.map&&(i.map=getTexture(t.map));void 0!==t.matcap&&(i.matcap=getTexture(t.matcap));void 0!==t.alphaMap&&(i.alphaMap=getTexture(t.alphaMap));void 0!==t.bumpMap&&(i.bumpMap=getTexture(t.bumpMap));void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale);void 0!==t.normalMap&&(i.normalMap=getTexture(t.normalMap));void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType);if(void 0!==t.normalScale){var s=t.normalScale;false===Array.isArray(s)&&(s=[s,s]);i.normalScale=(new zr).fromArray(s);}void 0!==t.displacementMap&&(i.displacementMap=getTexture(t.displacementMap));void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale);void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias);void 0!==t.roughnessMap&&(i.roughnessMap=getTexture(t.roughnessMap));void 0!==t.metalnessMap&&(i.metalnessMap=getTexture(t.metalnessMap));void 0!==t.emissiveMap&&(i.emissiveMap=getTexture(t.emissiveMap));void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity);void 0!==t.specularMap&&(i.specularMap=getTexture(t.specularMap));void 0!==t.envMap&&(i.envMap=getTexture(t.envMap));void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity);void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity);void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio);void 0!==t.lightMap&&(i.lightMap=getTexture(t.lightMap));void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity);void 0!==t.aoMap&&(i.aoMap=getTexture(t.aoMap));void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity);void 0!==t.gradientMap&&(i.gradientMap=getTexture(t.gradientMap));void 0!==t.clearcoatMap&&(i.clearcoatMap=getTexture(t.clearcoatMap));void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=getTexture(t.clearcoatRoughnessMap));void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=getTexture(t.clearcoatNormalMap));void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new zr).fromArray(t.clearcoatNormalScale));void 0!==t.transmission&&(i.transmission=t.transmission);void 0!==t.transmissionMap&&(i.transmissionMap=getTexture(t.transmissionMap));return i},setTextures:function setTextures(t){(this||e).textures=t;return this||e}});var Lu={decodeText:function decodeText(e){if("undefined"!==typeof TextDecoder)return (new TextDecoder).decode(e);var t="";for(var r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function extractUrlBase(e){var t=e.lastIndexOf("/");return -1===t?"./":e.substr(0,t+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this||e);(this||e).type="InstancedBufferGeometry";(this||e).instanceCount=Infinity;}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:true,copy:function copy(t){BufferGeometry.prototype.copy.call(this||e,t);(this||e).instanceCount=t.instanceCount;return this||e},clone:function clone(){return (new(this||e).constructor).copy(this||e)},toJSON:function toJSON(){var t=BufferGeometry.prototype.toJSON.call(this||e);t.instanceCount=(this||e).instanceCount;t.isInstancedBufferGeometry=true;return t}});function InstancedBufferAttribute(t,r,i,n){if("number"===typeof i){n=i;i=false;console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.");}BufferAttribute.call(this||e,t,r,i);(this||e).meshPerAttribute=n||1;}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:true,copy:function copy(t){BufferAttribute.prototype.copy.call(this||e,t);(this||e).meshPerAttribute=t.meshPerAttribute;return this||e},toJSON:function toJSON(){var t=BufferAttribute.prototype.toJSON.call(this||e);t.meshPerAttribute=(this||e).meshPerAttribute;t.isInstancedBufferAttribute=true;return t}});function BufferGeometryLoader(t){Loader.call(this||e,t);}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function load(t,r,i,n){var a=this||e;var o=new FileLoader(a.manager);o.setPath(a.path);o.setRequestHeader(a.requestHeader);o.setWithCredentials(a.withCredentials);o.load(t,(function(e){try{r(a.parse(JSON.parse(e)));}catch(e){n?n(e):console.error(e);a.manager.itemError(t);}}),i,n);},parse:function parse(e){var t={};var r={};function getInterleavedBuffer(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers;var n=i[r];var a=getArrayBuffer(e,n.buffer);var o=new Eu[n.type](a);var s=new InterleavedBuffer(o,n.stride);s.uuid=n.uuid;t[r]=s;return s}function getArrayBuffer(e,t){if(void 0!==r[t])return r[t];var i=e.arrayBuffers;var n=i[t];var a=new Uint32Array(n).buffer;r[t]=a;return a}var i=e.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry;var n=e.data.index;if(void 0!==n){var a=new Eu[n.type](n.array);i.setIndex(new BufferAttribute(a,1));}var o=e.data.attributes;for(var s in o){var l=o[s];var u=void 0;if(l.isInterleavedBufferAttribute){var c=getInterleavedBuffer(e.data,l.data);u=new InterleavedBufferAttribute(c,l.itemSize,l.offset,l.normalized);}else {var h=new Eu[l.type](l.array);var d=l.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;u=new d(h,l.itemSize,l.normalized);}void 0!==l.name&&(u.name=l.name);i.setAttribute(s,u);}var f=e.data.morphAttributes;if(f)for(var p in f){var m=f[p];var g=[];for(var y=0,x=m.length;y<x;y++){var b=m[y];var _=void 0;if(b.isInterleavedBufferAttribute){var M=getInterleavedBuffer(e.data,b.data);_=new InterleavedBufferAttribute(M,b.itemSize,b.offset,b.normalized);}else {var w=new Eu[b.type](b.array);_=new BufferAttribute(w,b.itemSize,b.normalized);}void 0!==b.name&&(_.name=b.name);g.push(_);}i.morphAttributes[p]=g;}var S=e.data.morphTargetsRelative;S&&(i.morphTargetsRelative=true);var T=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==T)for(var A=0,L=T.length;A!==L;++A){var E=T[A];i.addGroup(E.start,E.count,E.materialIndex);}var C=e.data.boundingSphere;if(void 0!==C){var P=new Xr;void 0!==C.center&&P.fromArray(C.center);i.boundingSphere=new hi(P,C.radius);}e.name&&(i.name=e.name);e.userData&&(i.userData=e.userData);return i}});var Eu={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};var Cu=function(t){_inheritsLoose(ObjectLoader,t);function ObjectLoader(r){return t.call(this||e,r)||this||e}var r=ObjectLoader.prototype;r.load=function load(t,r,i,n){var a=this||e;var o=""===(this||e).path?Lu.extractUrlBase(t):(this||e).path;(this||e).resourcePath=(this||e).resourcePath||o;var s=new FileLoader((this||e).manager);s.setPath((this||e).path);s.setRequestHeader((this||e).requestHeader);s.setWithCredentials((this||e).withCredentials);s.load(t,(function(e){var i=null;try{i=JSON.parse(e);}catch(e){void 0!==n&&n(e);console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message);return}var o=i.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?a.parse(i,r):console.error("THREE.ObjectLoader: Can't load "+t);}),i,n);};r.parse=function parse(e,t){var r=this.parseShape(e.shapes);var i=this.parseGeometries(e.geometries,r);var n=this.parseImages(e.images,(function(){void 0!==t&&t(s);}));var a=this.parseTextures(e.textures,n);var o=this.parseMaterials(e.materials,a);var s=this.parseObject(e.object,i,o);e.animations&&(s.animations=this.parseAnimations(e.animations));void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s);return s};r.parseShape=function parseShape(e){var t={};if(void 0!==e)for(var r=0,i=e.length;r<i;r++){var n=(new Shape).fromJSON(e[r]);t[n.uuid]=n;}return t};r.parseGeometries=function parseGeometries(e,t){var r={};var i;if(void 0!==e){var n=new BufferGeometryLoader;for(var a=0,o=e.length;a<o;a++){var s=void 0;var l=e[a];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new mu[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new mu[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new mu[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new mu[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new mu[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new mu[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new mu[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new mu[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new mu[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new mu[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new mu[l.type]((new Tu[l.path.type]).fromJSON(l.path),l.tubularSegments,l.radius,l.radialSegments,l.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new mu[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new mu[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":i=[];for(var u=0,c=l.shapes.length;u<c;u++){var h=t[l.shapes[u]];i.push(h);}s=new mu[l.type](i,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":i=[];for(var d=0,f=l.shapes.length;d<f;d++){var p=t[l.shapes[d]];i.push(p);}var m=l.options.extrudePath;void 0!==m&&(l.options.extrudePath=(new Tu[m.type]).fromJSON(m));s=new mu[l.type](i,l.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=n.parse(l);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid;void 0!==l.name&&(s.name=l.name);true===s.isBufferGeometry&&void 0!==l.userData&&(s.userData=l.userData);r[l.uuid]=s;}}return r};r.parseMaterials=function parseMaterials(e,t){var r={};var i={};if(void 0!==e){var n=new MaterialLoader;n.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){var l=[];for(var u=0;u<s.materials.length;u++){var c=s.materials[u];void 0===r[c.uuid]&&(r[c.uuid]=n.parse(c));l.push(r[c.uuid]);}i[s.uuid]=l;}else {void 0===r[s.uuid]&&(r[s.uuid]=n.parse(s));i[s.uuid]=r[s.uuid];}}}return i};r.parseAnimations=function parseAnimations(e){var t=[];for(var r=0;r<e.length;r++){var i=e[r];var n=AnimationClip.parse(i);void 0!==i.uuid&&(n.uuid=i.uuid);t.push(n);}return t};r.parseImages=function parseImages(t,r){var i=this||e;var n={};var a;function loadImage(e){i.manager.itemStart(e);return a.load(e,(function(){i.manager.itemEnd(e);}),void 0,(function(){i.manager.itemError(e);i.manager.itemEnd(e);}))}if(void 0!==t&&t.length>0){var o=new LoadingManager(r);a=new ImageLoader(o);a.setCrossOrigin((this||e).crossOrigin);for(var s=0,l=t.length;s<l;s++){var u=t[s];var c=u.url;if(Array.isArray(c)){n[u.uuid]=[];for(var h=0,d=c.length;h<d;h++){var f=c[h];var p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;n[u.uuid].push(loadImage(p));}}else {var m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:i.resourcePath+u.url;n[u.uuid]=loadImage(m);}}}return n};r.parseTextures=function parseTextures(e,t){function parseConstant(e,t){if("number"===typeof e)return e;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e);return t[e]}var r={};if(void 0!==e)for(var i=0,n=e.length;i<n;i++){var a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid);void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var o=void 0;o=Array.isArray(t[a.image])?new CubeTexture(t[a.image]):new Texture(t[a.image]);o.needsUpdate=true;o.uuid=a.uuid;void 0!==a.name&&(o.name=a.name);void 0!==a.mapping&&(o.mapping=parseConstant(a.mapping,Pu));void 0!==a.offset&&o.offset.fromArray(a.offset);void 0!==a.repeat&&o.repeat.fromArray(a.repeat);void 0!==a.center&&o.center.fromArray(a.center);void 0!==a.rotation&&(o.rotation=a.rotation);if(void 0!==a.wrap){o.wrapS=parseConstant(a.wrap[0],Ru);o.wrapT=parseConstant(a.wrap[1],Ru);}void 0!==a.format&&(o.format=a.format);void 0!==a.type&&(o.type=a.type);void 0!==a.encoding&&(o.encoding=a.encoding);void 0!==a.minFilter&&(o.minFilter=parseConstant(a.minFilter,Bu));void 0!==a.magFilter&&(o.magFilter=parseConstant(a.magFilter,Bu));void 0!==a.anisotropy&&(o.anisotropy=a.anisotropy);void 0!==a.flipY&&(o.flipY=a.flipY);void 0!==a.premultiplyAlpha&&(o.premultiplyAlpha=a.premultiplyAlpha);void 0!==a.unpackAlignment&&(o.unpackAlignment=a.unpackAlignment);r[a.uuid]=o;}return r};r.parseObject=function parseObject(e,t,r){var i;function getGeometry(e){void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e);return t[e]}function getMaterial(e){if(void 0!==e){if(Array.isArray(e)){var t=[];for(var i=0,n=e.length;i<n;i++){var a=e[i];void 0===r[a]&&console.warn("THREE.ObjectLoader: Undefined material",a);t.push(r[a]);}return t}void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e);return r[e]}}var n,a;switch(e.type){case"Scene":i=new zs;void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new cn(e.background));void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new Us(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Fs(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new PerspectiveCamera(e.fov,e.aspect,e.near,e.far);void 0!==e.focus&&(i.focus=e.focus);void 0!==e.zoom&&(i.zoom=e.zoom);void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge);void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset);void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);void 0!==e.zoom&&(i.zoom=e.zoom);void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new AmbientLight(e.color,e.intensity);break;case"DirectionalLight":i=new DirectionalLight(e.color,e.intensity);break;case"PointLight":i=new PointLight(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new RectAreaLight(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new SpotLight(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new HemisphereLight(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new LightProbe).fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":n=getGeometry(e.geometry);a=getMaterial(e.material);i=new Mesh(n,a);break;case"InstancedMesh":n=getGeometry(e.geometry);a=getMaterial(e.material);var o=e.count;var s=e.instanceMatrix;i=new InstancedMesh(n,a,o);i.instanceMatrix=new BufferAttribute(new Float32Array(s.array),16);break;case"LOD":i=new LOD;break;case"Line":i=new Line(getGeometry(e.geometry),getMaterial(e.material),e.mode);break;case"LineLoop":i=new LineLoop(getGeometry(e.geometry),getMaterial(e.material));break;case"LineSegments":i=new LineSegments(getGeometry(e.geometry),getMaterial(e.material));break;case"PointCloud":case"Points":i=new Points(getGeometry(e.geometry),getMaterial(e.material));break;case"Sprite":i=new Sprite(getMaterial(e.material));break;case"Group":i=new Group;break;default:i=new Object3D;}i.uuid=e.uuid;void 0!==e.name&&(i.name=e.name);if(void 0!==e.matrix){i.matrix.fromArray(e.matrix);void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate);i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale);}else {void 0!==e.position&&i.position.fromArray(e.position);void 0!==e.rotation&&i.rotation.fromArray(e.rotation);void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion);void 0!==e.scale&&i.scale.fromArray(e.scale);}void 0!==e.castShadow&&(i.castShadow=e.castShadow);void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow);if(e.shadow){void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias);void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias);void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius);void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize);void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera));}void 0!==e.visible&&(i.visible=e.visible);void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled);void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder);void 0!==e.userData&&(i.userData=e.userData);void 0!==e.layers&&(i.layers.mask=e.layers);if(void 0!==e.children){var l=e.children;for(var u=0;u<l.length;u++)i.add(this.parseObject(l[u],t,r));}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);var c=e.levels;for(var h=0;h<c.length;h++){var d=c[h];var f=i.getObjectByProperty("uuid",d.object);void 0!==f&&i.addLevel(f,d.distance);}}return i};r.setTexturePath=function setTexturePath(e){console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");return this.setResourcePath(e)};return ObjectLoader}(Loader);var Pu={UVMapping:ne,CubeReflectionMapping:ae,CubeRefractionMapping:oe,EquirectangularReflectionMapping:se,EquirectangularRefractionMapping:le,CubeUVReflectionMapping:ue,CubeUVRefractionMapping:ce};var Ru={RepeatWrapping:he,ClampToEdgeWrapping:de,MirroredRepeatWrapping:fe};var Bu={NearestFilter:pe,NearestMipmapNearestFilter:me,NearestMipmapLinearFilter:ge,LinearFilter:xe,LinearMipmapNearestFilter:be,LinearMipmapLinearFilter:Me};function ImageBitmapLoader(t){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");Loader.call(this||e,t);(this||e).options={premultiplyAlpha:"none"};}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,isImageBitmapLoader:true,setOptions:function setOptions(t){(this||e).options=t;return this||e},load:function load(t,r,i,n){void 0===t&&(t="");void 0!==(this||e).path&&(t=(this||e).path+t);t=(this||e).manager.resolveURL(t);var a=this||e;var o=yu.get(t);if(void 0!==o){a.manager.itemStart(t);setTimeout((function(){r&&r(o);a.manager.itemEnd(t);}),0);return o}var s={};s.credentials="anonymous"===(this||e).crossOrigin?"same-origin":"include";fetch(t,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,a.options)})).then((function(e){yu.add(t,e);r&&r(e);a.manager.itemEnd(t);})).catch((function(e){n&&n(e);a.manager.itemError(t);a.manager.itemEnd(t);}));a.manager.itemStart(t);}});function ShapePath(){(this||e).type="ShapePath";(this||e).color=new cn;(this||e).subPaths=[];(this||e).currentPath=null;}Object.assign(ShapePath.prototype,{moveTo:function moveTo(t,r){(this||e).currentPath=new Path;(this||e).subPaths.push((this||e).currentPath);(this||e).currentPath.moveTo(t,r);return this||e},lineTo:function lineTo(t,r){(this||e).currentPath.lineTo(t,r);return this||e},quadraticCurveTo:function quadraticCurveTo(t,r,i,n){(this||e).currentPath.quadraticCurveTo(t,r,i,n);return this||e},bezierCurveTo:function bezierCurveTo(t,r,i,n,a,o){(this||e).currentPath.bezierCurveTo(t,r,i,n,a,o);return this||e},splineThru:function splineThru(t){(this||e).currentPath.splineThru(t);return this||e},toShapes:function toShapes(t,r){function toShapesNoHoles(e){var t=[];for(var r=0,i=e.length;r<i;r++){var n=e[r];var a=new Shape;a.curves=n.curves;t.push(a);}return t}function isPointInsidePolygon(e,t){var r=t.length;var i=false;for(var n=r-1,a=0;a<r;n=a++){var o=t[n];var s=t[a];var l=s.x-o.x;var u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(u<0){o=t[a];l=-l;s=t[n];u=-u;}if(e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return true}else {var c=u*(e.x-o.x)-l*(e.y-o.y);if(0===c)return true;if(c<0)continue;i=!i;}}else {if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return true}}return i}var i=zl.isClockWise;var n=(this||e).subPaths;if(0===n.length)return [];if(true===r)return toShapesNoHoles(n);var a,o,s;var l=[];if(1===n.length){o=n[0];s=new Shape;s.curves=o.curves;l.push(s);return l}var u=!i(n[0].getPoints());u=t?!u:u;var c=[];var h=[];var d=[];var f=0;var p;h[f]=void 0;d[f]=[];for(var m=0,g=n.length;m<g;m++){o=n[m];p=o.getPoints();a=i(p);a=t?!a:a;if(a){!u&&h[f]&&f++;h[f]={s:new Shape,p:p};h[f].s.curves=o.curves;u&&f++;d[f]=[];}else d[f].push({h:o,p:p[0]});}if(!h[0])return toShapesNoHoles(n);if(h.length>1){var y=false;var x=[];for(var b=0,_=h.length;b<_;b++)c[b]=[];for(var M=0,w=h.length;M<w;M++){var S=d[M];for(var T=0;T<S.length;T++){var A=S[T];var L=true;for(var E=0;E<h.length;E++)if(isPointInsidePolygon(A.p,h[E].p)){M!==E&&x.push({froms:M,tos:E,hole:T});if(L){L=false;c[E].push(A);}else y=true;}L&&c[M].push(A);}}x.length>0&&(y||(d=c));}var C;for(var P=0,R=h.length;P<R;P++){s=h[P].s;l.push(s);C=d[P];for(var B=0,I=C.length;B<I;B++)s.holes.push(C[B].h);}return l}});function Font(t){(this||e).type="Font";(this||e).data=t;}Object.assign(Font.prototype,{isFont:true,generateShapes:function generateShapes(t,r){void 0===r&&(r=100);var i=[];var n=createPaths(t,r,(this||e).data);for(var a=0,o=n.length;a<o;a++)Array.prototype.push.apply(i,n[a].toShapes());return i}});function createPaths(e,t,r){var i=Array.from?Array.from(e):String(e).split("");var n=t/r.resolution;var a=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*n;var o=[];var s=0,l=0;for(var u=0;u<i.length;u++){var c=i[u];if("\n"===c){s=0;l-=a;}else {var h=createPath(c,n,s,l,r);s+=h.offsetX;o.push(h.path);}}return o}function createPath(e,t,r,i,n){var a=n.glyphs[e]||n.glyphs["?"];if(a){var o=new ShapePath;var s,l,u,c,h,d,f,p;if(a.o){var m=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(var g=0,y=m.length;g<y;){var x=m[g++];switch(x){case"m":s=m[g++]*t+r;l=m[g++]*t+i;o.moveTo(s,l);break;case"l":s=m[g++]*t+r;l=m[g++]*t+i;o.lineTo(s,l);break;case"q":u=m[g++]*t+r;c=m[g++]*t+i;h=m[g++]*t+r;d=m[g++]*t+i;o.quadraticCurveTo(h,d,u,c);break;case"b":u=m[g++]*t+r;c=m[g++]*t+i;h=m[g++]*t+r;d=m[g++]*t+i;f=m[g++]*t+r;p=m[g++]*t+i;o.bezierCurveTo(h,d,f,p,u,c);break}}}return {offsetX:a.ha*t,path:o}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+n.familyName+".");}function FontLoader(t){Loader.call(this||e,t);}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function load(t,r,i,n){var a=this||e;var o=new FileLoader((this||e).manager);o.setPath((this||e).path);o.setRequestHeader((this||e).requestHeader);o.setWithCredentials(a.withCredentials);o.load(t,(function(e){var t;try{t=JSON.parse(e);}catch(r){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.");t=JSON.parse(e.substring(65,e.length-2));}var i=a.parse(t);r&&r(i);}),i,n);},parse:function parse(e){return new Font(e)}});var Iu;var Du={getContext:function getContext(){void 0===Iu&&(Iu=new(window.AudioContext||window.webkitAudioContext));return Iu},setContext:function setContext(e){Iu=e;}};function AudioLoader(t){Loader.call(this||e,t);}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function load(t,r,i,n){var a=this||e;var o=new FileLoader(a.manager);o.setResponseType("arraybuffer");o.setPath(a.path);o.setRequestHeader(a.requestHeader);o.setWithCredentials(a.withCredentials);o.load(t,(function(e){try{var i=e.slice(0);var o=Du.getContext();o.decodeAudioData(i,(function(e){r(e);}));}catch(e){n?n(e):console.error(e);a.manager.itemError(t);}}),i,n);}});function HemisphereLightProbe(t,r,i){LightProbe.call(this||e,void 0,i);var n=(new cn).set(t);var a=(new cn).set(r);var o=new Xr(n.r,n.g,n.b);var s=new Xr(a.r,a.g,a.b);var l=Math.sqrt(Math.PI);var u=l*Math.sqrt(.75);(this||e).sh.coefficients[0].copy(o).add(s).multiplyScalar(l);(this||e).sh.coefficients[1].copy(o).sub(s).multiplyScalar(u);}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:true,copy:function copy(t){LightProbe.prototype.copy.call(this||e,t);return this||e},toJSON:function toJSON(t){var r=LightProbe.prototype.toJSON.call(this||e,t);return r}});function AmbientLightProbe(t,r){LightProbe.call(this||e,void 0,r);var i=(new cn).set(t);(this||e).sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI));}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:true,copy:function copy(t){LightProbe.prototype.copy.call(this||e,t);return this||e},toJSON:function toJSON(t){var r=LightProbe.prototype.toJSON.call(this||e,t);return r}});var Gu=new bi;var Ou=new bi;function StereoCamera(){(this||e).type="StereoCamera";(this||e).aspect=1;(this||e).eyeSep=.064;(this||e).cameraL=new PerspectiveCamera;(this||e).cameraL.layers.enable(1);(this||e).cameraL.matrixAutoUpdate=false;(this||e).cameraR=new PerspectiveCamera;(this||e).cameraR.layers.enable(2);(this||e).cameraR.matrixAutoUpdate=false;(this||e)._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null};}Object.assign(StereoCamera.prototype,{update:function update(t){var r=(this||e)._cache;var i=r.focus!==t.focus||r.fov!==t.fov||r.aspect!==t.aspect*(this||e).aspect||r.near!==t.near||r.far!==t.far||r.zoom!==t.zoom||r.eyeSep!==(this||e).eyeSep;if(i){r.focus=t.focus;r.fov=t.fov;r.aspect=t.aspect*(this||e).aspect;r.near=t.near;r.far=t.far;r.zoom=t.zoom;r.eyeSep=(this||e).eyeSep;var n=t.projectionMatrix.clone();var a=r.eyeSep/2;var o=a*r.near/r.focus;var s=r.near*Math.tan(Ur.DEG2RAD*r.fov*.5)/r.zoom;var l,u;Ou.elements[12]=-a;Gu.elements[12]=a;l=-s*r.aspect+o;u=s*r.aspect+o;n.elements[0]=2*r.near/(u-l);n.elements[8]=(u+l)/(u-l);(this||e).cameraL.projectionMatrix.copy(n);l=-s*r.aspect-o;u=s*r.aspect-o;n.elements[0]=2*r.near/(u-l);n.elements[8]=(u+l)/(u-l);(this||e).cameraR.projectionMatrix.copy(n);}(this||e).cameraL.matrixWorld.copy(t.matrixWorld).multiply(Ou);(this||e).cameraR.matrixWorld.copy(t.matrixWorld).multiply(Gu);}});var Nu=function(){function Clock(t){(this||e).autoStart=void 0===t||t;(this||e).startTime=0;(this||e).oldTime=0;(this||e).elapsedTime=0;(this||e).running=false;}var t=Clock.prototype;t.start=function start(){(this||e).startTime=("undefined"===typeof performance?Date:performance).now();(this||e).oldTime=(this||e).startTime;(this||e).elapsedTime=0;(this||e).running=true;};t.stop=function stop(){this.getElapsedTime();(this||e).running=false;(this||e).autoStart=false;};t.getElapsedTime=function getElapsedTime(){this.getDelta();return (this||e).elapsedTime};t.getDelta=function getDelta(){var t=0;if((this||e).autoStart&&!(this||e).running){this.start();return 0}if((this||e).running){var r=("undefined"===typeof performance?Date:performance).now();t=(r-(this||e).oldTime)/1e3;(this||e).oldTime=r;(this||e).elapsedTime+=t;}return t};return Clock}();var Fu=new Xr;var Uu=new qr;var zu=new Xr;var Hu=new Xr;var Vu=function(t){_inheritsLoose(AudioListener,t);function AudioListener(){var r;r=t.call(this||e)||this||e;r.type="AudioListener";r.context=Du.getContext();r.gain=r.context.createGain();r.gain.connect(r.context.destination);r.filter=null;r.timeDelta=0;r._clock=new Nu;return r}var r=AudioListener.prototype;r.getInput=function getInput(){return (this||e).gain};r.removeFilter=function removeFilter(){if(null!==(this||e).filter){(this||e).gain.disconnect((this||e).filter);(this||e).filter.disconnect((this||e).context.destination);(this||e).gain.connect((this||e).context.destination);(this||e).filter=null;}return this||e};r.getFilter=function getFilter(){return (this||e).filter};r.setFilter=function setFilter(t){if(null!==(this||e).filter){(this||e).gain.disconnect((this||e).filter);(this||e).filter.disconnect((this||e).context.destination);}else (this||e).gain.disconnect((this||e).context.destination);(this||e).filter=t;(this||e).gain.connect((this||e).filter);(this||e).filter.connect((this||e).context.destination);return this||e};r.getMasterVolume=function getMasterVolume(){return (this||e).gain.gain.value};r.setMasterVolume=function setMasterVolume(t){(this||e).gain.gain.setTargetAtTime(t,(this||e).context.currentTime,.01);return this||e};r.updateMatrixWorld=function updateMatrixWorld(r){t.prototype.updateMatrixWorld.call(this||e,r);var i=(this||e).context.listener;var n=(this||e).up;(this||e).timeDelta=(this||e)._clock.getDelta();(this||e).matrixWorld.decompose(Fu,Uu,zu);Hu.set(0,0,-1).applyQuaternion(Uu);if(i.positionX){var a=(this||e).context.currentTime+(this||e).timeDelta;i.positionX.linearRampToValueAtTime(Fu.x,a);i.positionY.linearRampToValueAtTime(Fu.y,a);i.positionZ.linearRampToValueAtTime(Fu.z,a);i.forwardX.linearRampToValueAtTime(Hu.x,a);i.forwardY.linearRampToValueAtTime(Hu.y,a);i.forwardZ.linearRampToValueAtTime(Hu.z,a);i.upX.linearRampToValueAtTime(n.x,a);i.upY.linearRampToValueAtTime(n.y,a);i.upZ.linearRampToValueAtTime(n.z,a);}else {i.setPosition(Fu.x,Fu.y,Fu.z);i.setOrientation(Hu.x,Hu.y,Hu.z,n.x,n.y,n.z);}};return AudioListener}(Object3D);var ku=function(t){_inheritsLoose(Audio,t);function Audio(r){var i;i=t.call(this||e)||this||e;i.type="Audio";i.listener=r;i.context=r.context;i.gain=i.context.createGain();i.gain.connect(r.getInput());i.autoplay=false;i.buffer=null;i.detune=0;i.loop=false;i.loopStart=0;i.loopEnd=0;i.offset=0;i.duration=void 0;i.playbackRate=1;i.isPlaying=false;i.hasPlaybackControl=true;i.source=null;i.sourceType="empty";i._startedAt=0;i._progress=0;i._connected=false;i.filters=[];return i}var r=Audio.prototype;r.getOutput=function getOutput(){return (this||e).gain};r.setNodeSource=function setNodeSource(t){(this||e).hasPlaybackControl=false;(this||e).sourceType="audioNode";(this||e).source=t;this.connect();return this||e};r.setMediaElementSource=function setMediaElementSource(t){(this||e).hasPlaybackControl=false;(this||e).sourceType="mediaNode";(this||e).source=(this||e).context.createMediaElementSource(t);this.connect();return this||e};r.setMediaStreamSource=function setMediaStreamSource(t){(this||e).hasPlaybackControl=false;(this||e).sourceType="mediaStreamNode";(this||e).source=(this||e).context.createMediaStreamSource(t);this.connect();return this||e};r.setBuffer=function setBuffer(t){(this||e).buffer=t;(this||e).sourceType="buffer";(this||e).autoplay&&this.play();return this||e};r.play=function play(t){void 0===t&&(t=0);if(true!==(this||e).isPlaying){if(false!==(this||e).hasPlaybackControl){(this||e)._startedAt=(this||e).context.currentTime+t;var r=(this||e).context.createBufferSource();r.buffer=(this||e).buffer;r.loop=(this||e).loop;r.loopStart=(this||e).loopStart;r.loopEnd=(this||e).loopEnd;r.onended=(this||e).onEnded.bind(this||e);r.start((this||e)._startedAt,(this||e)._progress+(this||e).offset,(this||e).duration);(this||e).isPlaying=true;(this||e).source=r;this.setDetune((this||e).detune);this.setPlaybackRate((this||e).playbackRate);return this.connect()}console.warn("THREE.Audio: this Audio has no playback control.");}else console.warn("THREE.Audio: Audio is already playing.");};r.pause=function pause(){if(false!==(this||e).hasPlaybackControl){if(true===(this||e).isPlaying){(this||e)._progress+=Math.max((this||e).context.currentTime-(this||e)._startedAt,0)*(this||e).playbackRate;true===(this||e).loop&&((this||e)._progress=(this||e)._progress%((this||e).duration||(this||e).buffer.duration));(this||e).source.stop();(this||e).source.onended=null;(this||e).isPlaying=false;}return this||e}console.warn("THREE.Audio: this Audio has no playback control.");};r.stop=function stop(){if(false!==(this||e).hasPlaybackControl){(this||e)._progress=0;(this||e).source.stop();(this||e).source.onended=null;(this||e).isPlaying=false;return this||e}console.warn("THREE.Audio: this Audio has no playback control.");};r.connect=function connect(){if((this||e).filters.length>0){(this||e).source.connect((this||e).filters[0]);for(var t=1,r=(this||e).filters.length;t<r;t++)(this||e).filters[t-1].connect((this||e).filters[t]);(this||e).filters[(this||e).filters.length-1].connect(this.getOutput());}else (this||e).source.connect(this.getOutput());(this||e)._connected=true;return this||e};r.disconnect=function disconnect(){if((this||e).filters.length>0){(this||e).source.disconnect((this||e).filters[0]);for(var t=1,r=(this||e).filters.length;t<r;t++)(this||e).filters[t-1].disconnect((this||e).filters[t]);(this||e).filters[(this||e).filters.length-1].disconnect(this.getOutput());}else (this||e).source.disconnect(this.getOutput());(this||e)._connected=false;return this||e};r.getFilters=function getFilters(){return (this||e).filters};r.setFilters=function setFilters(t){t||(t=[]);if(true===(this||e)._connected){this.disconnect();(this||e).filters=t;this.connect();}else (this||e).filters=t;return this||e};r.setDetune=function setDetune(t){(this||e).detune=t;if(void 0!==(this||e).source.detune){true===(this||e).isPlaying&&(this||e).source.detune.setTargetAtTime((this||e).detune,(this||e).context.currentTime,.01);return this||e}};r.getDetune=function getDetune(){return (this||e).detune};r.getFilter=function getFilter(){return this.getFilters()[0]};r.setFilter=function setFilter(e){return this.setFilters(e?[e]:[])};r.setPlaybackRate=function setPlaybackRate(t){if(false!==(this||e).hasPlaybackControl){(this||e).playbackRate=t;true===(this||e).isPlaying&&(this||e).source.playbackRate.setTargetAtTime((this||e).playbackRate,(this||e).context.currentTime,.01);return this||e}console.warn("THREE.Audio: this Audio has no playback control.");};r.getPlaybackRate=function getPlaybackRate(){return (this||e).playbackRate};r.onEnded=function onEnded(){(this||e).isPlaying=false;};r.getLoop=function getLoop(){if(false===(this||e).hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return false}return (this||e).loop};r.setLoop=function setLoop(t){if(false!==(this||e).hasPlaybackControl){(this||e).loop=t;true===(this||e).isPlaying&&((this||e).source.loop=(this||e).loop);return this||e}console.warn("THREE.Audio: this Audio has no playback control.");};r.setLoopStart=function setLoopStart(t){(this||e).loopStart=t;return this||e};r.setLoopEnd=function setLoopEnd(t){(this||e).loopEnd=t;return this||e};r.getVolume=function getVolume(){return (this||e).gain.gain.value};r.setVolume=function setVolume(t){(this||e).gain.gain.setTargetAtTime(t,(this||e).context.currentTime,.01);return this||e};return Audio}(Object3D);var Wu=new Xr;var ju=new qr;var qu=new Xr;var Xu=new Xr;var Yu=function(t){_inheritsLoose(PositionalAudio,t);function PositionalAudio(r){var i;i=t.call(this||e,r)||this||e;i.panner=i.context.createPanner();i.panner.panningModel="HRTF";i.panner.connect(i.gain);return i}var r=PositionalAudio.prototype;r.getOutput=function getOutput(){return (this||e).panner};r.getRefDistance=function getRefDistance(){return (this||e).panner.refDistance};r.setRefDistance=function setRefDistance(t){(this||e).panner.refDistance=t;return this||e};r.getRolloffFactor=function getRolloffFactor(){return (this||e).panner.rolloffFactor};r.setRolloffFactor=function setRolloffFactor(t){(this||e).panner.rolloffFactor=t;return this||e};r.getDistanceModel=function getDistanceModel(){return (this||e).panner.distanceModel};r.setDistanceModel=function setDistanceModel(t){(this||e).panner.distanceModel=t;return this||e};r.getMaxDistance=function getMaxDistance(){return (this||e).panner.maxDistance};r.setMaxDistance=function setMaxDistance(t){(this||e).panner.maxDistance=t;return this||e};r.setDirectionalCone=function setDirectionalCone(t,r,i){(this||e).panner.coneInnerAngle=t;(this||e).panner.coneOuterAngle=r;(this||e).panner.coneOuterGain=i;return this||e};r.updateMatrixWorld=function updateMatrixWorld(r){t.prototype.updateMatrixWorld.call(this||e,r);if(true!==(this||e).hasPlaybackControl||false!==(this||e).isPlaying){(this||e).matrixWorld.decompose(Wu,ju,qu);Xu.set(0,0,1).applyQuaternion(ju);var i=(this||e).panner;if(i.positionX){var n=(this||e).context.currentTime+(this||e).listener.timeDelta;i.positionX.linearRampToValueAtTime(Wu.x,n);i.positionY.linearRampToValueAtTime(Wu.y,n);i.positionZ.linearRampToValueAtTime(Wu.z,n);i.orientationX.linearRampToValueAtTime(Xu.x,n);i.orientationY.linearRampToValueAtTime(Xu.y,n);i.orientationZ.linearRampToValueAtTime(Xu.z,n);}else {i.setPosition(Wu.x,Wu.y,Wu.z);i.setOrientation(Xu.x,Xu.y,Xu.z);}}};return PositionalAudio}(ku);var Ju=function(){function AudioAnalyser(t,r){(this||e).analyser=t.context.createAnalyser();(this||e).analyser.fftSize=void 0!==r?r:2048;(this||e).data=new Uint8Array((this||e).analyser.frequencyBinCount);t.getOutput().connect((this||e).analyser);}var t=AudioAnalyser.prototype;t.getFrequencyData=function getFrequencyData(){(this||e).analyser.getByteFrequencyData((this||e).data);return (this||e).data};t.getAverageFrequency=function getAverageFrequency(){var e=0;var t=this.getFrequencyData();for(var r=0;r<t.length;r++)e+=t[r];return e/t.length};return AudioAnalyser}();function PropertyMixer(t,r,i){(this||e).binding=t;(this||e).valueSize=i;var n,a,o;switch(r){case"quaternion":n=(this||e)._slerp;a=(this||e)._slerpAdditive;o=(this||e)._setAdditiveIdentityQuaternion;(this||e).buffer=new Float64Array(6*i);(this||e)._workIndex=5;break;case"string":case"bool":n=(this||e)._select;a=(this||e)._select;o=(this||e)._setAdditiveIdentityOther;(this||e).buffer=new Array(5*i);break;default:n=(this||e)._lerp;a=(this||e)._lerpAdditive;o=(this||e)._setAdditiveIdentityNumeric;(this||e).buffer=new Float64Array(5*i);}(this||e)._mixBufferRegion=n;(this||e)._mixBufferRegionAdditive=a;(this||e)._setIdentity=o;(this||e)._origIndex=3;(this||e)._addIndex=4;(this||e).cumulativeWeight=0;(this||e).cumulativeWeightAdditive=0;(this||e).useCount=0;(this||e).referenceCount=0;}Object.assign(PropertyMixer.prototype,{accumulate:function accumulate(t,r){var i=(this||e).buffer,n=(this||e).valueSize,a=t*n+n;var o=(this||e).cumulativeWeight;if(0===o){for(var s=0;s!==n;++s)i[a+s]=i[s];o=r;}else {o+=r;var l=r/o;this._mixBufferRegion(i,a,0,l,n);}(this||e).cumulativeWeight=o;},accumulateAdditive:function accumulateAdditive(t){var r=(this||e).buffer,i=(this||e).valueSize,n=i*(this||e)._addIndex;0===(this||e).cumulativeWeightAdditive&&this._setIdentity();this._mixBufferRegionAdditive(r,n,0,t,i);(this||e).cumulativeWeightAdditive+=t;},apply:function apply(t){var r=(this||e).valueSize,i=(this||e).buffer,n=t*r+r,a=(this||e).cumulativeWeight,o=(this||e).cumulativeWeightAdditive,s=(this||e).binding;(this||e).cumulativeWeight=0;(this||e).cumulativeWeightAdditive=0;if(a<1){var l=r*(this||e)._origIndex;this._mixBufferRegion(i,n,l,1-a,r);}o>0&&this._mixBufferRegionAdditive(i,n,(this||e)._addIndex*r,1,r);for(var u=r,c=r+r;u!==c;++u)if(i[u]!==i[u+r]){s.setValue(i,n);break}},saveOriginalState:function saveOriginalState(){var t=(this||e).binding;var r=(this||e).buffer,i=(this||e).valueSize,n=i*(this||e)._origIndex;t.getValue(r,n);for(var a=i,o=n;a!==o;++a)r[a]=r[n+a%i];this._setIdentity();(this||e).cumulativeWeight=0;(this||e).cumulativeWeightAdditive=0;},restoreOriginalState:function restoreOriginalState(){var t=3*(this||e).valueSize;(this||e).binding.setValue((this||e).buffer,t);},_setAdditiveIdentityNumeric:function _setAdditiveIdentityNumeric(){var t=(this||e)._addIndex*(this||e).valueSize;var r=t+(this||e).valueSize;for(var i=t;i<r;i++)(this||e).buffer[i]=0;},_setAdditiveIdentityQuaternion:function _setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric();(this||e).buffer[(this||e)._addIndex*(this||e).valueSize+3]=1;},_setAdditiveIdentityOther:function _setAdditiveIdentityOther(){var t=(this||e)._origIndex*(this||e).valueSize;var r=(this||e)._addIndex*(this||e).valueSize;for(var i=0;i<(this||e).valueSize;i++)(this||e).buffer[r+i]=(this||e).buffer[t+i];},_select:function _select(e,t,r,i,n){if(i>=.5)for(var a=0;a!==n;++a)e[t+a]=e[r+a];},_slerp:function _slerp(e,t,r,i){qr.slerpFlat(e,t,e,t,e,r,i);},_slerpAdditive:function _slerpAdditive(t,r,i,n,a){var o=(this||e)._workIndex*a;qr.multiplyQuaternionsFlat(t,o,t,r,t,i);qr.slerpFlat(t,r,t,r,t,o,n);},_lerp:function _lerp(e,t,r,i,n){var a=1-i;for(var o=0;o!==n;++o){var s=t+o;e[s]=e[s]*a+e[r+o]*i;}},_lerpAdditive:function _lerpAdditive(e,t,r,i,n){for(var a=0;a!==n;++a){var o=t+a;e[o]=e[o]+e[r+a]*i;}}});var Zu="\\[\\]\\.:\\/";var Qu=new RegExp("["+Zu+"]","g");var Ku="[^"+Zu+"]";var $u="[^"+Zu.replace("\\.","")+"]";var ec=/((?:WC+[\/:])*)/.source.replace("WC",Ku);var tc=/(WCOD+)?/.source.replace("WCOD",$u);var rc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ku);var ic=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ku);var nc=new RegExp("^"+ec+tc+rc+ic+"$");var ac=["material","materials","bones"];function Composite(t,r,i){var n=i||PropertyBinding.parseTrackName(r);(this||e)._targetGroup=t;(this||e)._bindings=t.subscribe_(r,n);}Object.assign(Composite.prototype,{getValue:function getValue(t,r){this.bind();var i=(this||e)._targetGroup.nCachedObjects_,n=(this||e)._bindings[i];void 0!==n&&n.getValue(t,r);},setValue:function setValue(t,r){var i=(this||e)._bindings;for(var n=(this||e)._targetGroup.nCachedObjects_,a=i.length;n!==a;++n)i[n].setValue(t,r);},bind:function bind(){var t=(this||e)._bindings;for(var r=(this||e)._targetGroup.nCachedObjects_,i=t.length;r!==i;++r)t[r].bind();},unbind:function unbind(){var t=(this||e)._bindings;for(var r=(this||e)._targetGroup.nCachedObjects_,i=t.length;r!==i;++r)t[r].unbind();}});function PropertyBinding(t,r,i){(this||e).path=r;(this||e).parsedPath=i||PropertyBinding.parseTrackName(r);(this||e).node=PropertyBinding.findNode(t,(this||e).parsedPath.nodeName)||t;(this||e).rootNode=t;}Object.assign(PropertyBinding,{Composite:Composite,create:function create(e,t,r){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,t,r):new PropertyBinding(e,t,r)},
/**
     * Replaces spaces with underscores and removes unsupported characters from
     * node names, to ensure compatibility with parseTrackName().
     *
     * @param {string} name Node name to be sanitized.
     * @return {string}
     */
sanitizeNodeName:function sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Qu,"")},parseTrackName:function parseTrackName(e){var t=nc.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};var i=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=r.nodeName.substring(i+1);if(-1!==ac.indexOf(n)){r.nodeName=r.nodeName.substring(0,i);r.objectName=n;}}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r},findNode:function findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){var i=function searchNodeSubtree(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.name===t||i.uuid===t)return i;var n=searchNodeSubtree(i.children);if(n)return n}return null};var n=i(e.children);if(n)return n}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function _getValue_unavailable(){},_setValue_unavailable:function _setValue_unavailable(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function getValue_direct(t,r){t[r]=(this||e).node[(this||e).propertyName];},function getValue_array(t,r){var i=(this||e).resolvedProperty;for(var n=0,a=i.length;n!==a;++n)t[r++]=i[n];},function getValue_arrayElement(t,r){t[r]=(this||e).resolvedProperty[(this||e).propertyIndex];},function getValue_toArray(t,r){(this||e).resolvedProperty.toArray(t,r);}],SetterByBindingTypeAndVersioning:[[function setValue_direct(t,r){(this||e).targetObject[(this||e).propertyName]=t[r];},function setValue_direct_setNeedsUpdate(t,r){(this||e).targetObject[(this||e).propertyName]=t[r];(this||e).targetObject.needsUpdate=true;},function setValue_direct_setMatrixWorldNeedsUpdate(t,r){(this||e).targetObject[(this||e).propertyName]=t[r];(this||e).targetObject.matrixWorldNeedsUpdate=true;}],[function setValue_array(t,r){var i=(this||e).resolvedProperty;for(var n=0,a=i.length;n!==a;++n)i[n]=t[r++];},function setValue_array_setNeedsUpdate(t,r){var i=(this||e).resolvedProperty;for(var n=0,a=i.length;n!==a;++n)i[n]=t[r++];(this||e).targetObject.needsUpdate=true;},function setValue_array_setMatrixWorldNeedsUpdate(t,r){var i=(this||e).resolvedProperty;for(var n=0,a=i.length;n!==a;++n)i[n]=t[r++];(this||e).targetObject.matrixWorldNeedsUpdate=true;}],[function setValue_arrayElement(t,r){(this||e).resolvedProperty[(this||e).propertyIndex]=t[r];},function setValue_arrayElement_setNeedsUpdate(t,r){(this||e).resolvedProperty[(this||e).propertyIndex]=t[r];(this||e).targetObject.needsUpdate=true;},function setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){(this||e).resolvedProperty[(this||e).propertyIndex]=t[r];(this||e).targetObject.matrixWorldNeedsUpdate=true;}],[function setValue_fromArray(t,r){(this||e).resolvedProperty.fromArray(t,r);},function setValue_fromArray_setNeedsUpdate(t,r){(this||e).resolvedProperty.fromArray(t,r);(this||e).targetObject.needsUpdate=true;},function setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){(this||e).resolvedProperty.fromArray(t,r);(this||e).targetObject.matrixWorldNeedsUpdate=true;}]],getValue:function getValue_unbound(e,t){this.bind();this.getValue(e,t);},setValue:function getValue_unbound(e,t){this.bind();this.setValue(e,t);},bind:function bind(){var t=(this||e).node;var r=(this||e).parsedPath;var i=r.objectName;var n=r.propertyName;var a=r.propertyIndex;if(!t){t=PropertyBinding.findNode((this||e).rootNode,r.nodeName)||(this||e).rootNode;(this||e).node=t;}(this||e).getValue=(this||e)._getValue_unavailable;(this||e).setValue=(this||e)._setValue_unavailable;if(t){if(i){var o=r.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this||e);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this||e);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this||e);return}t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[i]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this||e);return}t=t[i];}if(void 0!==o){if(void 0===t[o]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this||e,t);return}t=t[o];}}var l=t[n];if(void 0!==l){var u=(this||e).Versioning.None;(this||e).targetObject=t;void 0!==t.needsUpdate?u=(this||e).Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=(this||e).Versioning.MatrixWorldNeedsUpdate);var c=(this||e).BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===n){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this||e);return}if(!t.geometry.isBufferGeometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this||e);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this||e);return}void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a]);}c=(this||e).BindingType.ArrayElement;(this||e).resolvedProperty=l;(this||e).propertyIndex=a;}else if(void 0!==l.fromArray&&void 0!==l.toArray){c=(this||e).BindingType.HasFromToArray;(this||e).resolvedProperty=l;}else if(Array.isArray(l)){c=(this||e).BindingType.EntireArray;(this||e).resolvedProperty=l;}else (this||e).propertyName=n;(this||e).getValue=(this||e).GetterByBindingType[c];(this||e).setValue=(this||e).SetterByBindingTypeAndVersioning[c][u];}else {var h=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+n+" but it wasn't found.",t);}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+(this||e).path+" but it wasn't found.");},unbind:function unbind(){(this||e).node=null;(this||e).getValue=(this||e)._getValue_unbound;(this||e).setValue=(this||e)._setValue_unbound;}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){(this||e).uuid=Ur.generateUUID();(this||e)._objects=Array.prototype.slice.call(arguments);(this||e).nCachedObjects_=0;var t={};(this||e)._indicesByUUID=t;for(var r=0,i=arguments.length;r!==i;++r)t[arguments[r].uuid]=r;(this||e)._paths=[];(this||e)._parsedPaths=[];(this||e)._bindings=[];(this||e)._bindingsIndicesByPath={};var n=this||e;(this||e).stats={objects:{get total(){return n._objects.length},get inUse(){return (this||e).total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}};}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:true,add:function add(){var t=(this||e)._objects,r=(this||e)._indicesByUUID,i=(this||e)._paths,n=(this||e)._parsedPaths,a=(this||e)._bindings,o=a.length;var s=void 0,l=t.length,u=(this||e).nCachedObjects_;for(var c=0,h=arguments.length;c!==h;++c){var d=arguments[c],f=d.uuid;var p=r[f];if(void 0===p){p=l++;r[f]=p;t.push(d);for(var m=0,g=o;m!==g;++m)a[m].push(new PropertyBinding(d,i[m],n[m]));}else if(p<u){s=t[p];var y=--u,x=t[y];r[x.uuid]=p;t[p]=x;r[f]=y;t[y]=d;for(var b=0,_=o;b!==_;++b){var M=a[b],w=M[y];var S=M[p];M[p]=w;void 0===S&&(S=new PropertyBinding(d,i[b],n[b]));M[y]=S;}}else t[p]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID "+"detected. Clean the caches or recreate your infrastructure when reloading scenes.");}(this||e).nCachedObjects_=u;},remove:function remove(){var t=(this||e)._objects,r=(this||e)._indicesByUUID,i=(this||e)._bindings,n=i.length;var a=(this||e).nCachedObjects_;for(var o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=r[u];if(void 0!==c&&c>=a){var h=a++,d=t[h];r[d.uuid]=c;t[c]=d;r[u]=h;t[h]=l;for(var f=0,p=n;f!==p;++f){var m=i[f],g=m[h],y=m[c];m[c]=g;m[h]=y;}}}(this||e).nCachedObjects_=a;},uncache:function uncache(){var t=(this||e)._objects,r=(this||e)._indicesByUUID,i=(this||e)._bindings,n=i.length;var a=(this||e).nCachedObjects_,o=t.length;for(var s=0,l=arguments.length;s!==l;++s){var u=arguments[s],c=u.uuid,h=r[c];if(void 0!==h){delete r[c];if(h<a){var d=--a,f=t[d],p=--o,m=t[p];r[f.uuid]=h;t[h]=f;r[m.uuid]=d;t[d]=m;t.pop();for(var g=0,y=n;g!==y;++g){var x=i[g],b=x[d],_=x[p];x[h]=b;x[d]=_;x.pop();}}else {var M=--o,w=t[M];r[w.uuid]=h;t[h]=w;t.pop();for(var S=0,T=n;S!==T;++S){var A=i[S];A[h]=A[M];A.pop();}}}}(this||e).nCachedObjects_=a;},subscribe_:function subscribe_(t,r){var i=(this||e)._bindingsIndicesByPath;var n=i[t];var a=(this||e)._bindings;if(void 0!==n)return a[n];var o=(this||e)._paths,s=(this||e)._parsedPaths,l=(this||e)._objects,u=l.length,c=(this||e).nCachedObjects_,h=new Array(u);n=a.length;i[t]=n;o.push(t);s.push(r);a.push(h);for(var d=c,f=l.length;d!==f;++d){var p=l[d];h[d]=new PropertyBinding(p,t,r);}return h},unsubscribe_:function unsubscribe_(t){var r=(this||e)._bindingsIndicesByPath,i=r[t];if(void 0!==i){var n=(this||e)._paths,a=(this||e)._parsedPaths,o=(this||e)._bindings,s=o.length-1,l=o[s],u=t[s];r[u]=i;o[i]=l;o.pop();a[i]=a[s];a.pop();n[i]=n[s];n.pop();}}});var oc=function(){function AnimationAction(t,r,i,n){(this||e)._mixer=t;(this||e)._clip=r;(this||e)._localRoot=i||null;(this||e).blendMode=n||r.blendMode;var a=r.tracks,o=a.length,s=new Array(o);var l={endingStart:kt,endingEnd:kt};for(var u=0;u!==o;++u){var c=a[u].createInterpolant(null);s[u]=c;c.settings=l;}(this||e)._interpolantSettings=l;(this||e)._interpolants=s;(this||e)._propertyBindings=new Array(o);(this||e)._cacheIndex=null;(this||e)._byClipCacheIndex=null;(this||e)._timeScaleInterpolant=null;(this||e)._weightInterpolant=null;(this||e).loop=Ft;(this||e)._loopCount=-1;(this||e)._startTime=null;(this||e).time=0;(this||e).timeScale=1;(this||e)._effectiveTimeScale=1;(this||e).weight=1;(this||e)._effectiveWeight=1;(this||e).repetitions=Infinity;(this||e).paused=false;(this||e).enabled=true;(this||e).clampWhenFinished=false;(this||e).zeroSlopeAtStart=true;(this||e).zeroSlopeAtEnd=true;}var t=AnimationAction.prototype;t.play=function play(){(this||e)._mixer._activateAction(this||e);return this||e};t.stop=function stop(){(this||e)._mixer._deactivateAction(this||e);return this.reset()};t.reset=function reset(){(this||e).paused=false;(this||e).enabled=true;(this||e).time=0;(this||e)._loopCount=-1;(this||e)._startTime=null;return this.stopFading().stopWarping()};t.isRunning=function isRunning(){return (this||e).enabled&&!(this||e).paused&&0!==(this||e).timeScale&&null===(this||e)._startTime&&(this||e)._mixer._isActiveAction(this||e)};t.isScheduled=function isScheduled(){return (this||e)._mixer._isActiveAction(this||e)};t.startAt=function startAt(t){(this||e)._startTime=t;return this||e};t.setLoop=function setLoop(t,r){(this||e).loop=t;(this||e).repetitions=r;return this||e};t.setEffectiveWeight=function setEffectiveWeight(t){(this||e).weight=t;(this||e)._effectiveWeight=(this||e).enabled?t:0;return this.stopFading()};t.getEffectiveWeight=function getEffectiveWeight(){return (this||e)._effectiveWeight};t.fadeIn=function fadeIn(e){return this._scheduleFading(e,0,1)};t.fadeOut=function fadeOut(e){return this._scheduleFading(e,1,0)};t.crossFadeFrom=function crossFadeFrom(t,r,i){t.fadeOut(r);this.fadeIn(r);if(i){var n=(this||e)._clip.duration,a=t._clip.duration,o=a/n,s=n/a;t.warp(1,o,r);this.warp(s,1,r);}return this||e};t.crossFadeTo=function crossFadeTo(t,r,i){return t.crossFadeFrom(this||e,r,i)};t.stopFading=function stopFading(){var t=(this||e)._weightInterpolant;if(null!==t){(this||e)._weightInterpolant=null;(this||e)._mixer._takeBackControlInterpolant(t);}return this||e};t.setEffectiveTimeScale=function setEffectiveTimeScale(t){(this||e).timeScale=t;(this||e)._effectiveTimeScale=(this||e).paused?0:t;return this.stopWarping()};t.getEffectiveTimeScale=function getEffectiveTimeScale(){return (this||e)._effectiveTimeScale};t.setDuration=function setDuration(t){(this||e).timeScale=(this||e)._clip.duration/t;return this.stopWarping()};t.syncWith=function syncWith(t){(this||e).time=t.time;(this||e).timeScale=t.timeScale;return this.stopWarping()};t.halt=function halt(t){return this.warp((this||e)._effectiveTimeScale,0,t)};t.warp=function warp(t,r,i){var n=(this||e)._mixer,a=n.time,o=(this||e).timeScale;var s=(this||e)._timeScaleInterpolant;if(null===s){s=n._lendControlInterpolant();(this||e)._timeScaleInterpolant=s;}var l=s.parameterPositions,u=s.sampleValues;l[0]=a;l[1]=a+i;u[0]=t/o;u[1]=r/o;return this||e};t.stopWarping=function stopWarping(){var t=(this||e)._timeScaleInterpolant;if(null!==t){(this||e)._timeScaleInterpolant=null;(this||e)._mixer._takeBackControlInterpolant(t);}return this||e};t.getMixer=function getMixer(){return (this||e)._mixer};t.getClip=function getClip(){return (this||e)._clip};t.getRoot=function getRoot(){return (this||e)._localRoot||(this||e)._mixer._root};t._update=function _update(t,r,i,n){if((this||e).enabled){var a=(this||e)._startTime;if(null!==a){var o=(t-a)*i;if(o<0||0===i)return;(this||e)._startTime=null;r=i*o;}r*=this._updateTimeScale(t);var s=this._updateTime(r);var l=this._updateWeight(t);if(l>0){var u=(this||e)._interpolants;var c=(this||e)._propertyBindings;switch((this||e).blendMode){case Xt:for(var h=0,d=u.length;h!==d;++h){u[h].evaluate(s);c[h].accumulateAdditive(l);}break;case qt:default:for(var f=0,p=u.length;f!==p;++f){u[f].evaluate(s);c[f].accumulate(n,l);}}}}else this._updateWeight(t);};t._updateWeight=function _updateWeight(t){var r=0;if((this||e).enabled){r=(this||e).weight;var i=(this||e)._weightInterpolant;if(null!==i){var n=i.evaluate(t)[0];r*=n;if(t>i.parameterPositions[1]){this.stopFading();0===n&&((this||e).enabled=false);}}}(this||e)._effectiveWeight=r;return r};t._updateTimeScale=function _updateTimeScale(t){var r=0;if(!(this||e).paused){r=(this||e).timeScale;var i=(this||e)._timeScaleInterpolant;if(null!==i){var n=i.evaluate(t)[0];r*=n;if(t>i.parameterPositions[1]){this.stopWarping();0===r?(this||e).paused=true:(this||e).timeScale=r;}}}(this||e)._effectiveTimeScale=r;return r};t._updateTime=function _updateTime(t){var r=(this||e)._clip.duration;var i=(this||e).loop;var n=(this||e).time+t;var a=(this||e)._loopCount;var o=i===Ut;if(0===t)return -1===a?n:o&&1===(1&a)?r-n:n;if(i===Nt){if(-1===a){(this||e)._loopCount=0;this._setEndings(true,true,false);}e:{if(n>=r)n=r;else {if(!(n<0)){(this||e).time=n;break e}n=0;}(this||e).clampWhenFinished?(this||e).paused=true:(this||e).enabled=false;(this||e).time=n;(this||e)._mixer.dispatchEvent({type:"finished",action:this||e,direction:t<0?-1:1});}}else {if(-1===a)if(t>=0){a=0;this._setEndings(true,0===(this||e).repetitions,o);}else this._setEndings(0===(this||e).repetitions,true,o);if(n>=r||n<0){var s=Math.floor(n/r);n-=r*s;a+=Math.abs(s);var l=(this||e).repetitions-a;if(l<=0){(this||e).clampWhenFinished?(this||e).paused=true:(this||e).enabled=false;n=t>0?r:0;(this||e).time=n;(this||e)._mixer.dispatchEvent({type:"finished",action:this||e,direction:t>0?1:-1});}else {if(1===l){var u=t<0;this._setEndings(u,!u,o);}else this._setEndings(false,false,o);(this||e)._loopCount=a;(this||e).time=n;(this||e)._mixer.dispatchEvent({type:"loop",action:this||e,loopDelta:s});}}else (this||e).time=n;if(o&&1===(1&a))return r-n}return n};t._setEndings=function _setEndings(t,r,i){var n=(this||e)._interpolantSettings;if(i){n.endingStart=Wt;n.endingEnd=Wt;}else {n.endingStart=t?(this||e).zeroSlopeAtStart?Wt:kt:jt;n.endingEnd=r?(this||e).zeroSlopeAtEnd?Wt:kt:jt;}};t._scheduleFading=function _scheduleFading(t,r,i){var n=(this||e)._mixer,a=n.time;var o=(this||e)._weightInterpolant;if(null===o){o=n._lendControlInterpolant();(this||e)._weightInterpolant=o;}var s=o.parameterPositions,l=o.sampleValues;s[0]=a;l[0]=r;s[1]=a+t;l[1]=i;return this||e};return AnimationAction}();function AnimationMixer(t){(this||e)._root=t;this._initMemoryManager();(this||e)._accuIndex=0;(this||e).time=0;(this||e).timeScale=1;}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function _bindAction(t,r){var i=t._localRoot||(this||e)._root,n=t._clip.tracks,a=n.length,o=t._propertyBindings,s=t._interpolants,l=i.uuid,u=(this||e)._bindingsByRootAndName;var c=u[l];if(void 0===c){c={};u[l]=c;}for(var h=0;h!==a;++h){var d=n[h],f=d.name;var p=c[f];if(void 0!==p)o[h]=p;else {p=o[h];if(void 0!==p){if(null===p._cacheIndex){++p.referenceCount;this._addInactiveBinding(p,l,f);}continue}var m=r&&r._propertyBindings[h].binding.parsedPath;p=new PropertyMixer(PropertyBinding.create(i,f,m),d.ValueTypeName,d.getValueSize());++p.referenceCount;this._addInactiveBinding(p,l,f);o[h]=p;}s[h].resultBuffer=p.buffer;}},_activateAction:function _activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var r=(t._localRoot||(this||e)._root).uuid,i=t._clip.uuid,n=(this||e)._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]);this._addInactiveAction(t,i,r);}var a=t._propertyBindings;for(var o=0,s=a.length;o!==s;++o){var l=a[o];if(0===l.useCount++){this._lendBinding(l);l.saveOriginalState();}}this._lendAction(t);}},_deactivateAction:function _deactivateAction(e){if(this._isActiveAction(e)){var t=e._propertyBindings;for(var r=0,i=t.length;r!==i;++r){var n=t[r];if(0===--n.useCount){n.restoreOriginalState();this._takeBackBinding(n);}}this._takeBackAction(e);}},_initMemoryManager:function _initMemoryManager(){(this||e)._actions=[];(this||e)._nActiveActions=0;(this||e)._actionsByClip={};(this||e)._bindings=[];(this||e)._nActiveBindings=0;(this||e)._bindingsByRootAndName={};(this||e)._controlInterpolants=[];(this||e)._nActiveControlInterpolants=0;var t=this||e;(this||e).stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}};},_isActiveAction:function _isActiveAction(t){var r=t._cacheIndex;return null!==r&&r<(this||e)._nActiveActions},_addInactiveAction:function _addInactiveAction(t,r,i){var n=(this||e)._actions,a=(this||e)._actionsByClip;var o=a[r];if(void 0===o){o={knownActions:[t],actionByRoot:{}};t._byClipCacheIndex=0;a[r]=o;}else {var s=o.knownActions;t._byClipCacheIndex=s.length;s.push(t);}t._cacheIndex=n.length;n.push(t);o.actionByRoot[i]=t;},_removeInactiveAction:function _removeInactiveAction(t){var r=(this||e)._actions,i=r[r.length-1],n=t._cacheIndex;i._cacheIndex=n;r[n]=i;r.pop();t._cacheIndex=null;var a=t._clip.uuid,o=(this||e)._actionsByClip,s=o[a],l=s.knownActions,u=l[l.length-1],c=t._byClipCacheIndex;u._byClipCacheIndex=c;l[c]=u;l.pop();t._byClipCacheIndex=null;var h=s.actionByRoot,d=(t._localRoot||(this||e)._root).uuid;delete h[d];0===l.length&&delete o[a];this._removeInactiveBindingsForAction(t);},_removeInactiveBindingsForAction:function _removeInactiveBindingsForAction(e){var t=e._propertyBindings;for(var r=0,i=t.length;r!==i;++r){var n=t[r];0===--n.referenceCount&&this._removeInactiveBinding(n);}},_lendAction:function _lendAction(t){var r=(this||e)._actions,i=t._cacheIndex,n=(this||e)._nActiveActions++,a=r[n];t._cacheIndex=n;r[n]=t;a._cacheIndex=i;r[i]=a;},_takeBackAction:function _takeBackAction(t){var r=(this||e)._actions,i=t._cacheIndex,n=--(this||e)._nActiveActions,a=r[n];t._cacheIndex=n;r[n]=t;a._cacheIndex=i;r[i]=a;},_addInactiveBinding:function _addInactiveBinding(t,r,i){var n=(this||e)._bindingsByRootAndName,a=(this||e)._bindings;var o=n[r];if(void 0===o){o={};n[r]=o;}o[i]=t;t._cacheIndex=a.length;a.push(t);},_removeInactiveBinding:function _removeInactiveBinding(t){var r=(this||e)._bindings,i=t.binding,n=i.rootNode.uuid,a=i.path,o=(this||e)._bindingsByRootAndName,s=o[n],l=r[r.length-1],u=t._cacheIndex;l._cacheIndex=u;r[u]=l;r.pop();delete s[a];0===Object.keys(s).length&&delete o[n];},_lendBinding:function _lendBinding(t){var r=(this||e)._bindings,i=t._cacheIndex,n=(this||e)._nActiveBindings++,a=r[n];t._cacheIndex=n;r[n]=t;a._cacheIndex=i;r[i]=a;},_takeBackBinding:function _takeBackBinding(t){var r=(this||e)._bindings,i=t._cacheIndex,n=--(this||e)._nActiveBindings,a=r[n];t._cacheIndex=n;r[n]=t;a._cacheIndex=i;r[i]=a;},_lendControlInterpolant:function _lendControlInterpolant(){var t=(this||e)._controlInterpolants,r=(this||e)._nActiveControlInterpolants++;var i=t[r];if(void 0===i){i=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,(this||e)._controlInterpolantsResultBuffer);i.__cacheIndex=r;t[r]=i;}return i},_takeBackControlInterpolant:function _takeBackControlInterpolant(t){var r=(this||e)._controlInterpolants,i=t.__cacheIndex,n=--(this||e)._nActiveControlInterpolants,a=r[n];t.__cacheIndex=n;r[n]=t;a.__cacheIndex=i;r[i]=a;},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function clipAction(t,r,i){var n=r||(this||e)._root,a=n.uuid;var o="string"===typeof t?AnimationClip.findByName(n,t):t;var s=null!==o?o.uuid:t;var l=(this||e)._actionsByClip[s];var u=null;void 0===i&&(i=null!==o?o.blendMode:qt);if(void 0!==l){var c=l.actionByRoot[a];if(void 0!==c&&c.blendMode===i)return c;u=l.knownActions[0];null===o&&(o=u._clip);}if(null===o)return null;var h=new oc(this||e,o,r,i);this._bindAction(h,u);this._addInactiveAction(h,s,a);return h},existingAction:function existingAction(t,r){var i=r||(this||e)._root,n=i.uuid,a="string"===typeof t?AnimationClip.findByName(i,t):t,o=a?a.uuid:t,s=(this||e)._actionsByClip[o];return void 0!==s&&s.actionByRoot[n]||null},stopAllAction:function stopAllAction(){var t=(this||e)._actions,r=(this||e)._nActiveActions;for(var i=r-1;i>=0;--i)t[i].stop();return this||e},update:function update(t){t*=(this||e).timeScale;var r=(this||e)._actions,i=(this||e)._nActiveActions,n=(this||e).time+=t,a=Math.sign(t),o=(this||e)._accuIndex^=1;for(var s=0;s!==i;++s){var l=r[s];l._update(n,t,a,o);}var u=(this||e)._bindings,c=(this||e)._nActiveBindings;for(var h=0;h!==c;++h)u[h].apply(o);return this||e},setTime:function setTime(t){(this||e).time=0;for(var r=0;r<(this||e)._actions.length;r++)(this||e)._actions[r].time=0;return this.update(t)},getRoot:function getRoot(){return (this||e)._root},uncacheClip:function uncacheClip(t){var r=(this||e)._actions,i=t.uuid,n=(this||e)._actionsByClip,a=n[i];if(void 0!==a){var o=a.knownActions;for(var s=0,l=o.length;s!==l;++s){var u=o[s];this._deactivateAction(u);var c=u._cacheIndex,h=r[r.length-1];u._cacheIndex=null;u._byClipCacheIndex=null;h._cacheIndex=c;r[c]=h;r.pop();this._removeInactiveBindingsForAction(u);}delete n[i];}},uncacheRoot:function uncacheRoot(t){var r=t.uuid,i=(this||e)._actionsByClip;for(var n in i){var a=i[n].actionByRoot,o=a[r];if(void 0!==o){this._deactivateAction(o);this._removeInactiveAction(o);}}var s=(this||e)._bindingsByRootAndName,l=s[r];if(void 0!==l)for(var u in l){var c=l[u];c.restoreOriginalState();this._removeInactiveBinding(c);}},uncacheAction:function uncacheAction(e,t){var r=this.existingAction(e,t);if(null!==r){this._deactivateAction(r);this._removeInactiveAction(r);}}});var sc=function(){function Uniform(t){if("string"===typeof t){console.warn("THREE.Uniform: Type parameter is no longer needed.");t=arguments[1];}(this||e).value=t;}var t=Uniform.prototype;t.clone=function clone(){return new Uniform(void 0===(this||e).value.clone?(this||e).value:(this||e).value.clone())};return Uniform}();function InstancedInterleavedBuffer(t,r,i){InterleavedBuffer.call(this||e,t,r);(this||e).meshPerAttribute=i||1;}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:true,copy:function copy(t){InterleavedBuffer.prototype.copy.call(this||e,t);(this||e).meshPerAttribute=t.meshPerAttribute;return this||e},clone:function clone(t){var r=InterleavedBuffer.prototype.clone.call(this||e,t);r.meshPerAttribute=(this||e).meshPerAttribute;return r},toJSON:function toJSON(t){var r=InterleavedBuffer.prototype.toJSON.call(this||e,t);r.isInstancedInterleavedBuffer=true;r.meshPerAttribute=(this||e).meshPerAttribute;return r}});function GLBufferAttribute(t,r,i,n,a){(this||e).buffer=t;(this||e).type=r;(this||e).itemSize=i;(this||e).elementSize=n;(this||e).count=a;(this||e).version=0;}Object.defineProperty(GLBufferAttribute.prototype,"needsUpdate",{set:function set(t){true===t&&(this||e).version++;}});Object.assign(GLBufferAttribute.prototype,{isGLBufferAttribute:true,setBuffer:function setBuffer(t){(this||e).buffer=t;return this||e},setType:function setType(t,r){(this||e).type=t;(this||e).elementSize=r;return this||e},setItemSize:function setItemSize(t){(this||e).itemSize=t;return this||e},setCount:function setCount(t){(this||e).count=t;return this||e}});function Raycaster(t,r,i,n){(this||e).ray=new xi(t,r);(this||e).near=i||0;(this||e).far=n||Infinity;(this||e).camera=null;(this||e).layers=new Ri;(this||e).params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties((this||e).params,{PointCloud:{get:function get(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return (this||e).Points}}});}function ascSort(e,t){return e.distance-t.distance}function _intersectObject(e,t,r,i){e.layers.test(t.layers)&&e.raycast(t,r);if(true===i){var n=e.children;for(var a=0,o=n.length;a<o;a++)_intersectObject(n[a],t,r,true);}}Object.assign(Raycaster.prototype,{set:function set(t,r){(this||e).ray.set(t,r);},setFromCamera:function setFromCamera(t,r){if(r&&r.isPerspectiveCamera){(this||e).ray.origin.setFromMatrixPosition(r.matrixWorld);(this||e).ray.direction.set(t.x,t.y,.5).unproject(r).sub((this||e).ray.origin).normalize();(this||e).camera=r;}else if(r&&r.isOrthographicCamera){(this||e).ray.origin.set(t.x,t.y,(r.near+r.far)/(r.near-r.far)).unproject(r);(this||e).ray.direction.set(0,0,-1).transformDirection(r.matrixWorld);(this||e).camera=r;}else console.error("THREE.Raycaster: Unsupported camera type.");},intersectObject:function intersectObject(t,r,i){var n=i||[];_intersectObject(t,this||e,n,r);n.sort(ascSort);return n},intersectObjects:function intersectObjects(t,r,i){var n=i||[];if(false===Array.isArray(t)){console.warn("THREE.Raycaster.intersectObjects: objects is not an Array.");return n}for(var a=0,o=t.length;a<o;a++)_intersectObject(t[a],this||e,n,r);n.sort(ascSort);return n}});var lc=function(){function Spherical(t,r,i){void 0===t&&(t=1);void 0===r&&(r=0);void 0===i&&(i=0);(this||e).radius=t;(this||e).phi=r;(this||e).theta=i;return this||e}var t=Spherical.prototype;t.set=function set(t,r,i){(this||e).radius=t;(this||e).phi=r;(this||e).theta=i;return this||e};t.clone=function clone(){return (new(this||e).constructor).copy(this||e)};t.copy=function copy(t){(this||e).radius=t.radius;(this||e).phi=t.phi;(this||e).theta=t.theta;return this||e};t.makeSafe=function makeSafe(){var t=1e-6;(this||e).phi=Math.max(t,Math.min(Math.PI-t,(this||e).phi));return this||e};t.setFromVector3=function setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)};t.setFromCartesianCoords=function setFromCartesianCoords(t,r,i){(this||e).radius=Math.sqrt(t*t+r*r+i*i);if(0===(this||e).radius){(this||e).theta=0;(this||e).phi=0;}else {(this||e).theta=Math.atan2(t,i);(this||e).phi=Math.acos(Ur.clamp(r/(this||e).radius,-1,1));}return this||e};return Spherical}();var uc=function(){function Cylindrical(t,r,i){(this||e).radius=void 0!==t?t:1;(this||e).theta=void 0!==r?r:0;(this||e).y=void 0!==i?i:0;return this||e}var t=Cylindrical.prototype;t.set=function set(t,r,i){(this||e).radius=t;(this||e).theta=r;(this||e).y=i;return this||e};t.clone=function clone(){return (new(this||e).constructor).copy(this||e)};t.copy=function copy(t){(this||e).radius=t.radius;(this||e).theta=t.theta;(this||e).y=t.y;return this||e};t.setFromVector3=function setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)};t.setFromCartesianCoords=function setFromCartesianCoords(t,r,i){(this||e).radius=Math.sqrt(t*t+i*i);(this||e).theta=Math.atan2(t,i);(this||e).y=r;return this||e};return Cylindrical}();var cc=new zr;var hc=function(){function Box2(t,r){Object.defineProperty(this||e,"isBox2",{value:true});(this||e).min=void 0!==t?t:new zr(+Infinity,+Infinity);(this||e).max=void 0!==r?r:new zr(-Infinity,-Infinity);}var t=Box2.prototype;t.set=function set(t,r){(this||e).min.copy(t);(this||e).max.copy(r);return this||e};t.setFromPoints=function setFromPoints(t){this.makeEmpty();for(var r=0,i=t.length;r<i;r++)this.expandByPoint(t[r]);return this||e};t.setFromCenterAndSize=function setFromCenterAndSize(t,r){var i=cc.copy(r).multiplyScalar(.5);(this||e).min.copy(t).sub(i);(this||e).max.copy(t).add(i);return this||e};t.clone=function clone(){return (new(this||e).constructor).copy(this||e)};t.copy=function copy(t){(this||e).min.copy(t.min);(this||e).max.copy(t.max);return this||e};t.makeEmpty=function makeEmpty(){(this||e).min.x=(this||e).min.y=+Infinity;(this||e).max.x=(this||e).max.y=-Infinity;return this||e};t.isEmpty=function isEmpty(){return (this||e).max.x<(this||e).min.x||(this||e).max.y<(this||e).min.y};t.getCenter=function getCenter(t){if(void 0===t){console.warn("THREE.Box2: .getCenter() target is now required");t=new zr;}return this.isEmpty()?t.set(0,0):t.addVectors((this||e).min,(this||e).max).multiplyScalar(.5)};t.getSize=function getSize(t){if(void 0===t){console.warn("THREE.Box2: .getSize() target is now required");t=new zr;}return this.isEmpty()?t.set(0,0):t.subVectors((this||e).max,(this||e).min)};t.expandByPoint=function expandByPoint(t){(this||e).min.min(t);(this||e).max.max(t);return this||e};t.expandByVector=function expandByVector(t){(this||e).min.sub(t);(this||e).max.add(t);return this||e};t.expandByScalar=function expandByScalar(t){(this||e).min.addScalar(-t);(this||e).max.addScalar(t);return this||e};t.containsPoint=function containsPoint(t){return !(t.x<(this||e).min.x||t.x>(this||e).max.x||t.y<(this||e).min.y||t.y>(this||e).max.y)};t.containsBox=function containsBox(t){return (this||e).min.x<=t.min.x&&t.max.x<=(this||e).max.x&&(this||e).min.y<=t.min.y&&t.max.y<=(this||e).max.y};t.getParameter=function getParameter(t,r){if(void 0===r){console.warn("THREE.Box2: .getParameter() target is now required");r=new zr;}return r.set((t.x-(this||e).min.x)/((this||e).max.x-(this||e).min.x),(t.y-(this||e).min.y)/((this||e).max.y-(this||e).min.y))};t.intersectsBox=function intersectsBox(t){return !(t.max.x<(this||e).min.x||t.min.x>(this||e).max.x||t.max.y<(this||e).min.y||t.min.y>(this||e).max.y)};t.clampPoint=function clampPoint(t,r){if(void 0===r){console.warn("THREE.Box2: .clampPoint() target is now required");r=new zr;}return r.copy(t).clamp((this||e).min,(this||e).max)};t.distanceToPoint=function distanceToPoint(t){var r=cc.copy(t).clamp((this||e).min,(this||e).max);return r.sub(t).length()};t.intersect=function intersect(t){(this||e).min.max(t.min);(this||e).max.min(t.max);return this||e};t.union=function union(t){(this||e).min.min(t.min);(this||e).max.max(t.max);return this||e};t.translate=function translate(t){(this||e).min.add(t);(this||e).max.add(t);return this||e};t.equals=function equals(t){return t.min.equals((this||e).min)&&t.max.equals((this||e).max)};return Box2}();var dc=new Xr;var fc=new Xr;var pc=function(){function Line3(t,r){(this||e).start=void 0!==t?t:new Xr;(this||e).end=void 0!==r?r:new Xr;}var t=Line3.prototype;t.set=function set(t,r){(this||e).start.copy(t);(this||e).end.copy(r);return this||e};t.clone=function clone(){return (new(this||e).constructor).copy(this||e)};t.copy=function copy(t){(this||e).start.copy(t.start);(this||e).end.copy(t.end);return this||e};t.getCenter=function getCenter(t){if(void 0===t){console.warn("THREE.Line3: .getCenter() target is now required");t=new Xr;}return t.addVectors((this||e).start,(this||e).end).multiplyScalar(.5)};t.delta=function delta(t){if(void 0===t){console.warn("THREE.Line3: .delta() target is now required");t=new Xr;}return t.subVectors((this||e).end,(this||e).start)};t.distanceSq=function distanceSq(){return (this||e).start.distanceToSquared((this||e).end)};t.distance=function distance(){return (this||e).start.distanceTo((this||e).end)};t.at=function at(t,r){if(void 0===r){console.warn("THREE.Line3: .at() target is now required");r=new Xr;}return this.delta(r).multiplyScalar(t).add((this||e).start)};t.closestPointToPointParameter=function closestPointToPointParameter(t,r){dc.subVectors(t,(this||e).start);fc.subVectors((this||e).end,(this||e).start);var i=fc.dot(fc);var n=fc.dot(dc);var a=n/i;r&&(a=Ur.clamp(a,0,1));return a};t.closestPointToPoint=function closestPointToPoint(t,r,i){var n=this.closestPointToPointParameter(t,r);if(void 0===i){console.warn("THREE.Line3: .closestPointToPoint() target is now required");i=new Xr;}return this.delta(i).multiplyScalar(n).add((this||e).start)};t.applyMatrix4=function applyMatrix4(t){(this||e).start.applyMatrix4(t);(this||e).end.applyMatrix4(t);return this||e};t.equals=function equals(t){return t.start.equals((this||e).start)&&t.end.equals((this||e).end)};return Line3}();function ImmediateRenderObject(t){Object3D.call(this||e);(this||e).material=t;(this||e).render=function(){};(this||e).hasPositions=false;(this||e).hasNormals=false;(this||e).hasColors=false;(this||e).hasUvs=false;(this||e).positionArray=null;(this||e).normalArray=null;(this||e).colorArray=null;(this||e).uvArray=null;(this||e).count=0;}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=true;var mc=new Xr;var vc=function(t){_inheritsLoose(SpotLightHelper,t);function SpotLightHelper(r,i){var n;n=t.call(this||e)||this||e;n.light=r;n.light.updateMatrixWorld();n.matrix=r.matrixWorld;n.matrixAutoUpdate=false;n.color=i;var a=new BufferGeometry;var o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var s=0,l=1,u=32;s<u;s++,l++){var c=s/u*Math.PI*2;var h=l/u*Math.PI*2;o.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1);}a.setAttribute("position",new Float32BufferAttribute(o,3));var d=new LineBasicMaterial({fog:false,toneMapped:false});n.cone=new LineSegments(a,d);n.add(n.cone);n.update();return n}var r=SpotLightHelper.prototype;r.dispose=function dispose(){(this||e).cone.geometry.dispose();(this||e).cone.material.dispose();};r.update=function update(){(this||e).light.updateMatrixWorld();var t=(this||e).light.distance?(this||e).light.distance:1e3;var r=t*Math.tan((this||e).light.angle);(this||e).cone.scale.set(r,r,t);mc.setFromMatrixPosition((this||e).light.target.matrixWorld);(this||e).cone.lookAt(mc);void 0!==(this||e).color?(this||e).cone.material.color.set((this||e).color):(this||e).cone.material.color.copy((this||e).light.color);};return SpotLightHelper}(Object3D);var gc=new Xr;var yc=new bi;var xc=new bi;var bc=function(t){_inheritsLoose(SkeletonHelper,t);function SkeletonHelper(r){var i;var n=getBoneList(r);var a=new BufferGeometry;var o=[];var s=[];var l=new cn(0,0,1);var u=new cn(0,1,0);for(var c=0;c<n.length;c++){var h=n[c];if(h.parent&&h.parent.isBone){o.push(0,0,0);o.push(0,0,0);s.push(l.r,l.g,l.b);s.push(u.r,u.g,u.b);}}a.setAttribute("position",new Float32BufferAttribute(o,3));a.setAttribute("color",new Float32BufferAttribute(s,3));var d=new LineBasicMaterial({vertexColors:true,depthTest:false,depthWrite:false,toneMapped:false,transparent:true});i=t.call(this||e,a,d)||this||e;i.type="SkeletonHelper";i.isSkeletonHelper=true;i.root=r;i.bones=n;i.matrix=r.matrixWorld;i.matrixAutoUpdate=false;return i}var r=SkeletonHelper.prototype;r.updateMatrixWorld=function updateMatrixWorld(r){var i=(this||e).bones;var n=(this||e).geometry;var a=n.getAttribute("position");xc.getInverse((this||e).root.matrixWorld);for(var o=0,s=0;o<i.length;o++){var l=i[o];if(l.parent&&l.parent.isBone){yc.multiplyMatrices(xc,l.matrixWorld);gc.setFromMatrixPosition(yc);a.setXYZ(s,gc.x,gc.y,gc.z);yc.multiplyMatrices(xc,l.parent.matrixWorld);gc.setFromMatrixPosition(yc);a.setXYZ(s+1,gc.x,gc.y,gc.z);s+=2;}}n.getAttribute("position").needsUpdate=true;t.prototype.updateMatrixWorld.call(this||e,r);};return SkeletonHelper}(LineSegments);function getBoneList(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,getBoneList(e.children[r]));return t}var _c=function(t){_inheritsLoose(PointLightHelper,t);function PointLightHelper(r,i,n){var a;var o=new ru(i,4,2);var s=new MeshBasicMaterial({wireframe:true,fog:false,toneMapped:false});a=t.call(this||e,o,s)||this||e;a.light=r;a.light.updateMatrixWorld();a.color=n;a.type="PointLightHelper";a.matrix=a.light.matrixWorld;a.matrixAutoUpdate=false;a.update();return a}var r=PointLightHelper.prototype;r.dispose=function dispose(){(this||e).geometry.dispose();(this||e).material.dispose();};r.update=function update(){void 0!==(this||e).color?(this||e).material.color.set((this||e).color):(this||e).material.color.copy((this||e).light.color);};return PointLightHelper}(Mesh);var Mc=new Xr;var wc=new cn;var Sc=new cn;var Tc=function(t){_inheritsLoose(HemisphereLightHelper,t);function HemisphereLightHelper(r,i,n){var a;a=t.call(this||e)||this||e;a.light=r;a.light.updateMatrixWorld();a.matrix=r.matrixWorld;a.matrixAutoUpdate=false;a.color=n;var o=new Yl(i);o.rotateY(.5*Math.PI);a.material=new MeshBasicMaterial({wireframe:true,fog:false,toneMapped:false});void 0===a.color&&(a.material.vertexColors=true);var s=o.getAttribute("position");var l=new Float32Array(3*s.count);o.setAttribute("color",new BufferAttribute(l,3));a.add(new Mesh(o,a.material));a.update();return a}var r=HemisphereLightHelper.prototype;r.dispose=function dispose(){(this||e).children[0].geometry.dispose();(this||e).children[0].material.dispose();};r.update=function update(){var t=(this||e).children[0];if(void 0!==(this||e).color)(this||e).material.color.set((this||e).color);else {var r=t.geometry.getAttribute("color");wc.copy((this||e).light.color);Sc.copy((this||e).light.groundColor);for(var i=0,n=r.count;i<n;i++){var a=i<n/2?wc:Sc;r.setXYZ(i,a.r,a.g,a.b);}r.needsUpdate=true;}t.lookAt(Mc.setFromMatrixPosition((this||e).light.matrixWorld).negate());};return HemisphereLightHelper}(Object3D);var Ac=function(t){_inheritsLoose(GridHelper,t);function GridHelper(r,i,n,a){var o;r=r||10;i=i||10;n=new cn(void 0!==n?n:4473924);a=new cn(void 0!==a?a:8947848);var s=i/2;var l=r/i;var u=r/2;var c=[],h=[];for(var d=0,f=0,p=-u;d<=i;d++,p+=l){c.push(-u,0,p,u,0,p);c.push(p,0,-u,p,0,u);var m=d===s?n:a;m.toArray(h,f);f+=3;m.toArray(h,f);f+=3;m.toArray(h,f);f+=3;m.toArray(h,f);f+=3;}var g=new BufferGeometry;g.setAttribute("position",new Float32BufferAttribute(c,3));g.setAttribute("color",new Float32BufferAttribute(h,3));var y=new LineBasicMaterial({vertexColors:true,toneMapped:false});o=t.call(this||e,g,y)||this||e;o.type="GridHelper";return o}return GridHelper}(LineSegments);var Lc=function(t){_inheritsLoose(PolarGridHelper,t);function PolarGridHelper(r,i,n,a,o,s){var l;r=r||10;i=i||16;n=n||8;a=a||64;o=new cn(void 0!==o?o:4473924);s=new cn(void 0!==s?s:8947848);var u=[];var c=[];for(var h=0;h<=i;h++){var d=h/i*(2*Math.PI);var f=Math.sin(d)*r;var p=Math.cos(d)*r;u.push(0,0,0);u.push(f,0,p);var m=1&h?o:s;c.push(m.r,m.g,m.b);c.push(m.r,m.g,m.b);}for(var g=0;g<=n;g++){var y=1&g?o:s;var x=r-r/n*g;for(var b=0;b<a;b++){var _=b/a*(2*Math.PI);var M=Math.sin(_)*x;var w=Math.cos(_)*x;u.push(M,0,w);c.push(y.r,y.g,y.b);_=(b+1)/a*(2*Math.PI);M=Math.sin(_)*x;w=Math.cos(_)*x;u.push(M,0,w);c.push(y.r,y.g,y.b);}}var S=new BufferGeometry;S.setAttribute("position",new Float32BufferAttribute(u,3));S.setAttribute("color",new Float32BufferAttribute(c,3));var T=new LineBasicMaterial({vertexColors:true,toneMapped:false});l=t.call(this||e,S,T)||this||e;l.type="PolarGridHelper";return l}return PolarGridHelper}(LineSegments);var Ec=new Xr;var Cc=new Xr;var Pc=new Xr;var Rc=function(t){_inheritsLoose(DirectionalLightHelper,t);function DirectionalLightHelper(r,i,n){var a;a=t.call(this||e)||this||e;a.light=r;a.light.updateMatrixWorld();a.matrix=r.matrixWorld;a.matrixAutoUpdate=false;a.color=n;void 0===i&&(i=1);var o=new BufferGeometry;o.setAttribute("position",new Float32BufferAttribute([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));var s=new LineBasicMaterial({fog:false,toneMapped:false});a.lightPlane=new Line(o,s);a.add(a.lightPlane);o=new BufferGeometry;o.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3));a.targetLine=new Line(o,s);a.add(a.targetLine);a.update();return a}var r=DirectionalLightHelper.prototype;r.dispose=function dispose(){(this||e).lightPlane.geometry.dispose();(this||e).lightPlane.material.dispose();(this||e).targetLine.geometry.dispose();(this||e).targetLine.material.dispose();};r.update=function update(){Ec.setFromMatrixPosition((this||e).light.matrixWorld);Cc.setFromMatrixPosition((this||e).light.target.matrixWorld);Pc.subVectors(Cc,Ec);(this||e).lightPlane.lookAt(Cc);if(void 0!==(this||e).color){(this||e).lightPlane.material.color.set((this||e).color);(this||e).targetLine.material.color.set((this||e).color);}else {(this||e).lightPlane.material.color.copy((this||e).light.color);(this||e).targetLine.material.color.copy((this||e).light.color);}(this||e).targetLine.lookAt(Cc);(this||e).targetLine.scale.z=Pc.length();};return DirectionalLightHelper}(Object3D);var Bc=new Xr;var Ic=new Camera;var Dc=function(t){_inheritsLoose(CameraHelper,t);function CameraHelper(r){var i;var n=new BufferGeometry;var a=new LineBasicMaterial({color:16777215,vertexColors:true,toneMapped:false});var o=[];var s=[];var l={};var u=new cn(16755200);var c=new cn(16711680);var h=new cn(43775);var d=new cn(16777215);var f=new cn(3355443);addLine("n1","n2",u);addLine("n2","n4",u);addLine("n4","n3",u);addLine("n3","n1",u);addLine("f1","f2",u);addLine("f2","f4",u);addLine("f4","f3",u);addLine("f3","f1",u);addLine("n1","f1",u);addLine("n2","f2",u);addLine("n3","f3",u);addLine("n4","f4",u);addLine("p","n1",c);addLine("p","n2",c);addLine("p","n3",c);addLine("p","n4",c);addLine("u1","u2",h);addLine("u2","u3",h);addLine("u3","u1",h);addLine("c","t",d);addLine("p","c",f);addLine("cn1","cn2",f);addLine("cn3","cn4",f);addLine("cf1","cf2",f);addLine("cf3","cf4",f);function addLine(e,t,r){addPoint(e,r);addPoint(t,r);}function addPoint(e,t){o.push(0,0,0);s.push(t.r,t.g,t.b);void 0===l[e]&&(l[e]=[]);l[e].push(o.length/3-1);}n.setAttribute("position",new Float32BufferAttribute(o,3));n.setAttribute("color",new Float32BufferAttribute(s,3));i=t.call(this||e,n,a)||this||e;i.type="CameraHelper";i.camera=r;i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix();i.matrix=r.matrixWorld;i.matrixAutoUpdate=false;i.pointMap=l;i.update();return i}var r=CameraHelper.prototype;r.update=function update(){var t=(this||e).geometry;var r=(this||e).pointMap;var i=1,n=1;Ic.projectionMatrixInverse.copy((this||e).camera.projectionMatrixInverse);setPoint("c",r,t,Ic,0,0,-1);setPoint("t",r,t,Ic,0,0,1);setPoint("n1",r,t,Ic,-i,-n,-1);setPoint("n2",r,t,Ic,i,-n,-1);setPoint("n3",r,t,Ic,-i,n,-1);setPoint("n4",r,t,Ic,i,n,-1);setPoint("f1",r,t,Ic,-i,-n,1);setPoint("f2",r,t,Ic,i,-n,1);setPoint("f3",r,t,Ic,-i,n,1);setPoint("f4",r,t,Ic,i,n,1);setPoint("u1",r,t,Ic,.7*i,1.1*n,-1);setPoint("u2",r,t,Ic,.7*-i,1.1*n,-1);setPoint("u3",r,t,Ic,0,2*n,-1);setPoint("cf1",r,t,Ic,-i,0,1);setPoint("cf2",r,t,Ic,i,0,1);setPoint("cf3",r,t,Ic,0,-n,1);setPoint("cf4",r,t,Ic,0,n,1);setPoint("cn1",r,t,Ic,-i,0,-1);setPoint("cn2",r,t,Ic,i,0,-1);setPoint("cn3",r,t,Ic,0,-n,-1);setPoint("cn4",r,t,Ic,0,n,-1);t.getAttribute("position").needsUpdate=true;};return CameraHelper}(LineSegments);function setPoint(e,t,r,i,n,a,o){Bc.set(n,a,o).unproject(i);var s=t[e];if(void 0!==s){var l=r.getAttribute("position");for(var u=0,c=s.length;u<c;u++)l.setXYZ(s[u],Bc.x,Bc.y,Bc.z);}}var Gc=new Zr;var Oc=function(t){_inheritsLoose(BoxHelper,t);function BoxHelper(r,i){var n;void 0===i&&(i=16776960);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var o=new Float32Array(8*3);var s=new BufferGeometry;s.setIndex(new BufferAttribute(a,1));s.setAttribute("position",new BufferAttribute(o,3));n=t.call(this||e,s,new LineBasicMaterial({color:i,toneMapped:false}))||this||e;n.object=r;n.type="BoxHelper";n.matrixAutoUpdate=false;n.update();return n}var r=BoxHelper.prototype;r.update=function update(t){void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==(this||e).object&&Gc.setFromObject((this||e).object);if(!Gc.isEmpty()){var r=Gc.min;var i=Gc.max;var n=(this||e).geometry.attributes.position;var a=n.array;a[0]=i.x;a[1]=i.y;a[2]=i.z;a[3]=r.x;a[4]=i.y;a[5]=i.z;a[6]=r.x;a[7]=r.y;a[8]=i.z;a[9]=i.x;a[10]=r.y;a[11]=i.z;a[12]=i.x;a[13]=i.y;a[14]=r.z;a[15]=r.x;a[16]=i.y;a[17]=r.z;a[18]=r.x;a[19]=r.y;a[20]=r.z;a[21]=i.x;a[22]=r.y;a[23]=r.z;n.needsUpdate=true;(this||e).geometry.computeBoundingSphere();}};r.setFromObject=function setFromObject(t){(this||e).object=t;this.update();return this||e};r.copy=function copy(t){LineSegments.prototype.copy.call(this||e,t);(this||e).object=t.object;return this||e};return BoxHelper}(LineSegments);var Nc=function(t){_inheritsLoose(Box3Helper,t);function Box3Helper(r,i){var n;void 0===i&&(i=16776960);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1];var s=new BufferGeometry;s.setIndex(new BufferAttribute(a,1));s.setAttribute("position",new Float32BufferAttribute(o,3));n=t.call(this||e,s,new LineBasicMaterial({color:i,toneMapped:false}))||this||e;n.box=r;n.type="Box3Helper";n.geometry.computeBoundingSphere();return n}var r=Box3Helper.prototype;r.updateMatrixWorld=function updateMatrixWorld(r){var i=(this||e).box;if(!i.isEmpty()){i.getCenter((this||e).position);i.getSize((this||e).scale);(this||e).scale.multiplyScalar(.5);t.prototype.updateMatrixWorld.call(this||e,r);}};return Box3Helper}(LineSegments);var Fc=function(t){_inheritsLoose(PlaneHelper,t);function PlaneHelper(r,i,n){var a;var o=void 0!==n?n:16776960;var s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0];var l=new BufferGeometry;l.setAttribute("position",new Float32BufferAttribute(s,3));l.computeBoundingSphere();a=t.call(this||e,l,new LineBasicMaterial({color:o,toneMapped:false}))||this||e;a.type="PlaneHelper";a.plane=r;a.size=void 0===i?1:i;var u=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1];var c=new BufferGeometry;c.setAttribute("position",new Float32BufferAttribute(u,3));c.computeBoundingSphere();a.add(new Mesh(c,new MeshBasicMaterial({color:o,opacity:.2,transparent:true,depthWrite:false,toneMapped:false})));return a}var r=PlaneHelper.prototype;r.updateMatrixWorld=function updateMatrixWorld(r){var i=-(this||e).plane.constant;Math.abs(i)<1e-8&&(i=1e-8);(this||e).scale.set(.5*(this||e).size,.5*(this||e).size,i);(this||e).children[0].material.side=i<0?p:f;this.lookAt((this||e).plane.normal);t.prototype.updateMatrixWorld.call(this||e,r);};return PlaneHelper}(Line);var Uc=new Xr;var zc,Hc;var Vc=function(t){_inheritsLoose(ArrowHelper,t);function ArrowHelper(r,i,n,a,o,s){var l;l=t.call(this||e)||this||e;l.type="ArrowHelper";void 0===r&&(r=new Xr(0,0,1));void 0===i&&(i=new Xr(0,0,0));void 0===n&&(n=1);void 0===a&&(a=16776960);void 0===o&&(o=.2*n);void 0===s&&(s=.2*o);if(void 0===zc){zc=new BufferGeometry;zc.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3));Hc=new Ll(0,.5,1,5,1);Hc.translate(0,-.5,0);}l.position.copy(i);l.line=new Line(zc,new LineBasicMaterial({color:a,toneMapped:false}));l.line.matrixAutoUpdate=false;l.add(l.line);l.cone=new Mesh(Hc,new MeshBasicMaterial({color:a,toneMapped:false}));l.cone.matrixAutoUpdate=false;l.add(l.cone);l.setDirection(r);l.setLength(n,o,s);return l}var r=ArrowHelper.prototype;r.setDirection=function setDirection(t){if(t.y>.99999)(this||e).quaternion.set(0,0,0,1);else if(t.y<-.99999)(this||e).quaternion.set(1,0,0,0);else {Uc.set(t.z,0,-t.x).normalize();var r=Math.acos(t.y);(this||e).quaternion.setFromAxisAngle(Uc,r);}};r.setLength=function setLength(t,r,i){void 0===r&&(r=.2*t);void 0===i&&(i=.2*r);(this||e).line.scale.set(1,Math.max(1e-4,t-r),1);(this||e).line.updateMatrix();(this||e).cone.scale.set(i,r,i);(this||e).cone.position.y=t;(this||e).cone.updateMatrix();};r.setColor=function setColor(t){(this||e).line.material.color.set(t);(this||e).cone.material.color.set(t);};r.copy=function copy(r){t.prototype.copy.call(this||e,r,false);(this||e).line.copy(r.line);(this||e).cone.copy(r.cone);return this||e};return ArrowHelper}(Object3D);var kc=function(t){_inheritsLoose(AxesHelper,t);function AxesHelper(r){var i;void 0===r&&(r=1);var n=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r];var a=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1];var o=new BufferGeometry;o.setAttribute("position",new Float32BufferAttribute(n,3));o.setAttribute("color",new Float32BufferAttribute(a,3));var s=new LineBasicMaterial({vertexColors:true,toneMapped:false});i=t.call(this||e,o,s)||this||e;i.type="AxesHelper";return i}return AxesHelper}(LineSegments);var Wc;var jc=4;var qc=8;var Xc=Math.pow(2,qc);var Yc=[.125,.215,.35,.446,.526,.582];var Jc=qc-jc+1+Yc.length;var Zc=20;var Qc=(Wc={},Wc[Qt]=0,Wc[Kt]=1,Wc[er]=2,Wc[rr]=3,Wc[ir]=4,Wc[nr]=5,Wc[$t]=6,Wc);var Kc=new OrthographicCamera;var $c=_createPlanes(),eh=$c._lodPlanes,th=$c._sizeLods,rh=$c._sigmas;var ih=null;var nh=(1+Math.sqrt(5))/2;var ah=1/nh;var oh=[new Xr(1,1,1),new Xr(-1,1,1),new Xr(1,1,-1),new Xr(-1,1,-1),new Xr(0,nh,ah),new Xr(0,nh,-ah),new Xr(ah,0,nh),new Xr(-ah,0,nh),new Xr(nh,ah,0),new Xr(-nh,ah,0)];var sh=function(){function PMREMGenerator(t){(this||e)._renderer=t;(this||e)._pingPongRenderTarget=null;(this||e)._blurMaterial=_getBlurShader(Zc);(this||e)._equirectShader=null;(this||e)._cubemapShader=null;this._compileMaterial((this||e)._blurMaterial);}var t=PMREMGenerator.prototype;t.fromScene=function fromScene(t,r,i,n){void 0===r&&(r=0);void 0===i&&(i=.1);void 0===n&&(n=100);ih=(this||e)._renderer.getRenderTarget();var a=this._allocateTargets();this._sceneToCubeUV(t,i,n,a);r>0&&this._blur(a,0,0,r);this._applyPMREM(a);this._cleanup(a);return a};t.fromEquirectangular=function fromEquirectangular(e){return this._fromTexture(e)};t.fromCubemap=function fromCubemap(e){return this._fromTexture(e)};t.compileCubemapShader=function compileCubemapShader(){if(null===(this||e)._cubemapShader){(this||e)._cubemapShader=_getCubemapShader();this._compileMaterial((this||e)._cubemapShader);}};t.compileEquirectangularShader=function compileEquirectangularShader(){if(null===(this||e)._equirectShader){(this||e)._equirectShader=_getEquirectShader();this._compileMaterial((this||e)._equirectShader);}};t.dispose=function dispose(){(this||e)._blurMaterial.dispose();null!==(this||e)._cubemapShader&&(this||e)._cubemapShader.dispose();null!==(this||e)._equirectShader&&(this||e)._equirectShader.dispose();for(var t=0;t<eh.length;t++)eh[t].dispose();};t._cleanup=function _cleanup(t){(this||e)._pingPongRenderTarget.dispose();(this||e)._renderer.setRenderTarget(ih);t.scissorTest=false;_setViewport(t,0,0,t.width,t.height);};t._fromTexture=function _fromTexture(t){ih=(this||e)._renderer.getRenderTarget();var r=this._allocateTargets(t);this._textureToCubeUV(t,r);this._applyPMREM(r);this._cleanup(r);return r};t._allocateTargets=function _allocateTargets(t){var r={magFilter:pe,minFilter:pe,generateMipmaps:false,type:Se,format:He,encoding:_isLDR(t)?t.encoding:er,depthBuffer:false};var i=_createRenderTarget(r);i.depthBuffer=!t;(this||e)._pingPongRenderTarget=_createRenderTarget(r);return i};t._compileMaterial=function _compileMaterial(t){var r=new Mesh(eh[0],t);(this||e)._renderer.compile(r,Kc);};t._sceneToCubeUV=function _sceneToCubeUV(t,r,i,n){var a=90;var o=1;var s=new PerspectiveCamera(a,o,r,i);var l=[1,-1,1,1,1,1];var u=[1,1,1,-1,-1,-1];var c=(this||e)._renderer;var h=c.outputEncoding;var d=c.toneMapping;var f=c.getClearColor();var p=c.getClearAlpha();c.toneMapping=K;c.outputEncoding=Qt;var m=t.background;if(m&&m.isColor){m.convertSRGBToLinear();var g=Math.max(m.r,m.g,m.b);var y=Math.min(Math.max(Math.ceil(Math.log2(g)),-128),127);m=m.multiplyScalar(Math.pow(2,-y));var x=(y+128)/255;c.setClearColor(m,x);t.background=null;}for(var b=0;b<6;b++){var _=b%3;if(0==_){s.up.set(0,l[b],0);s.lookAt(u[b],0,0);}else if(1==_){s.up.set(0,0,l[b]);s.lookAt(0,u[b],0);}else {s.up.set(0,l[b],0);s.lookAt(0,0,u[b]);}_setViewport(n,_*Xc,b>2?Xc:0,Xc,Xc);c.setRenderTarget(n);c.render(t,s);}c.toneMapping=d;c.outputEncoding=h;c.setClearColor(f,p);};t._textureToCubeUV=function _textureToCubeUV(t,r){var i=(this||e)._renderer;t.isCubeTexture?null==(this||e)._cubemapShader&&((this||e)._cubemapShader=_getCubemapShader()):null==(this||e)._equirectShader&&((this||e)._equirectShader=_getEquirectShader());var n=t.isCubeTexture?(this||e)._cubemapShader:(this||e)._equirectShader;var a=new Mesh(eh[0],n);var o=n.uniforms;o["envMap"].value=t;t.isCubeTexture||o["texelSize"].value.set(1/t.image.width,1/t.image.height);o["inputEncoding"].value=Qc[t.encoding];o["outputEncoding"].value=Qc[r.texture.encoding];_setViewport(r,0,0,3*Xc,2*Xc);i.setRenderTarget(r);i.render(a,Kc);};t._applyPMREM=function _applyPMREM(t){var r=(this||e)._renderer;var i=r.autoClear;r.autoClear=false;for(var n=1;n<Jc;n++){var a=Math.sqrt(rh[n]*rh[n]-rh[n-1]*rh[n-1]);var o=oh[(n-1)%oh.length];this._blur(t,n-1,n,a,o);}r.autoClear=i;};t._blur=function _blur(t,r,i,n,a){var o=(this||e)._pingPongRenderTarget;this._halfBlur(t,o,r,i,n,"latitudinal",a);this._halfBlur(o,t,i,i,n,"longitudinal",a);};t._halfBlur=function _halfBlur(t,r,i,n,a,o,s){var l=(this||e)._renderer;var u=(this||e)._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var c=3;var h=new Mesh(eh[n],u);var d=u.uniforms;var f=th[i]-1;var p=isFinite(a)?Math.PI/(2*f):2*Math.PI/(2*Zc-1);var m=a/p;var g=isFinite(a)?1+Math.floor(c*m):Zc;g>Zc&&console.warn("sigmaRadians, "+a+", is too large and will clip, as it requested "+g+" samples when the maximum is set to "+Zc);var y=[];var x=0;for(var b=0;b<Zc;++b){var _=b/m;var M=Math.exp(-_*_/2);y.push(M);0==b?x+=M:b<g&&(x+=2*M);}for(var w=0;w<y.length;w++)y[w]=y[w]/x;d["envMap"].value=t.texture;d["samples"].value=g;d["weights"].value=y;d["latitudinal"].value="latitudinal"===o;s&&(d["poleAxis"].value=s);d["dTheta"].value=p;d["mipInt"].value=qc-i;d["inputEncoding"].value=Qc[t.texture.encoding];d["outputEncoding"].value=Qc[t.texture.encoding];var S=th[n];var T=3*Math.max(0,Xc-2*S);var A=(0===n?0:2*Xc)+2*S*(n>qc-jc?n-qc+jc:0);_setViewport(r,T,A,3*S,2*S);l.setRenderTarget(r);l.render(h,Kc);};return PMREMGenerator}();function _isLDR(e){return void 0!==e&&e.type===Se&&(e.encoding===Qt||e.encoding===Kt||e.encoding===$t)}function _createPlanes(){var e=[];var t=[];var r=[];var i=qc;for(var n=0;n<Jc;n++){var a=Math.pow(2,i);t.push(a);var o=1/a;n>qc-jc?o=Yc[n-qc+jc-1]:0==n&&(o=0);r.push(o);var s=1/(a-1);var l=-s/2;var u=1+s/2;var c=[l,l,u,l,u,u,l,l,u,u,l,u];var h=6;var d=6;var f=3;var p=2;var m=1;var g=new Float32Array(f*d*h);var y=new Float32Array(p*d*h);var x=new Float32Array(m*d*h);for(var b=0;b<h;b++){var _=b%3*2/3-1;var M=b>2?0:-1;var w=[_,M,0,_+2/3,M,0,_+2/3,M+1,0,_,M,0,_+2/3,M+1,0,_,M+1,0];g.set(w,f*d*b);y.set(c,p*d*b);var S=[b,b,b,b,b,b];x.set(S,m*d*b);}var T=new BufferGeometry;T.setAttribute("position",new BufferAttribute(g,f));T.setAttribute("uv",new BufferAttribute(y,p));T.setAttribute("faceIndex",new BufferAttribute(x,m));e.push(T);i>jc&&i--;}return {_lodPlanes:e,_sizeLods:t,_sigmas:r}}function _createRenderTarget(e){var t=new WebGLRenderTarget(3*Xc,3*Xc,e);t.texture.mapping=ue;t.texture.name="PMREM.cubeUv";t.scissorTest=true;return t}function _setViewport(e,t,r,i,n){e.viewport.set(t,r,i,n);e.scissor.set(t,r,i,n);}function _getBlurShader(e){var t=new Float32Array(e);var r=new Xr(0,1,0);var i=new RawShaderMaterial({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:false},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r},inputEncoding:{value:Qc[Qt]},outputEncoding:{value:Qc[Qt]}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t"+_getEncodings()+"\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:x,depthTest:false,depthWrite:false});return i}function _getEquirectShader(){var e=new zr(1,1);var t=new RawShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Qc[Qt]},outputEncoding:{value:Qc[Qt]}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t"+_getEncodings()+"\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:x,depthTest:false,depthWrite:false});return t}function _getCubemapShader(){var e=new RawShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Qc[Qt]},outputEncoding:{value:Qc[Qt]}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t"+_getEncodings()+"\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:x,depthTest:false,depthWrite:false});return e}function _getCommonVertexShader(){return "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function _getEncodings(){return "\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function Face4(e,t,r,i,n,a,o){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new hn(e,t,r,n,a,o)}var lh=0;var uh=1;var ch=0;var hh=1;var dh=2;function MeshFaceMaterial(e){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return e}function MultiMaterial(e){void 0===e&&(e=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");e.isMultiMaterial=true;e.materials=e;e.clone=function(){return e.slice()};return e}function PointCloud(e,t){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new Points(e,t)}function Particle(e){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new Sprite(e)}function ParticleSystem(e,t){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new Points(e,t)}function PointCloudMaterial(e){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new PointsMaterial(e)}function ParticleBasicMaterial(e){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new PointsMaterial(e)}function ParticleSystemMaterial(e){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new PointsMaterial(e)}function Vertex(e,t,r){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new Xr(e,t,r)}function DynamicBufferAttribute(e,t){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.");return new BufferAttribute(e,t).setUsage(Ar)}function Int8Attribute(e,t){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new Int8BufferAttribute(e,t)}function Uint8Attribute(e,t){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new Uint8BufferAttribute(e,t)}function Uint8ClampedAttribute(e,t){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new Uint8ClampedBufferAttribute(e,t)}function Int16Attribute(e,t){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new Int16BufferAttribute(e,t)}function Uint16Attribute(e,t){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new Uint16BufferAttribute(e,t)}function Int32Attribute(e,t){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new Int32BufferAttribute(e,t)}function Uint32Attribute(e,t){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new Uint32BufferAttribute(e,t)}function Float32Attribute(e,t){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new Float32BufferAttribute(e,t)}function Float64Attribute(e,t){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new Float64BufferAttribute(e,t)}Curve.create=function(e,t){console.log("THREE.Curve.create() has been deprecated");e.prototype=Object.create(Curve.prototype);e.prototype.constructor=e;e.prototype.getPoint=t;return e};Object.assign(CurvePath.prototype,{createPointsGeometry:function createPointsGeometry(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function createSpacedPointsGeometry(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function createGeometry(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=new Geometry;for(var r=0,i=e.length;r<i;r++){var n=e[r];t.vertices.push(new Xr(n.x,n.y,n.z||0));}return t}});Object.assign(Path.prototype,{fromPoints:function fromPoints(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");return this.setFromPoints(e)}});function ClosedSplineCurve3(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");CatmullRomCurve3.call(this||e,t);(this||e).type="catmullrom";(this||e).closed=true;}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");CatmullRomCurve3.call(this||e,t);(this||e).type="catmullrom";}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");CatmullRomCurve3.call(this||e,t);(this||e).type="catmullrom";}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function initFromArray(){console.error("THREE.Spline: .initFromArray() has been removed.");},getControlPointsArray:function getControlPointsArray(){console.error("THREE.Spline: .getControlPointsArray() has been removed.");},reparametrizeByArcLength:function reparametrizeByArcLength(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.");}});function AxisHelper(e){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new kc(e)}function BoundingBoxHelper(e,t){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Oc(e,t)}function EdgesHelper(e,t){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new LineSegments(new Fl(e.geometry),new LineBasicMaterial({color:void 0!==t?t:16777215}))}Ac.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.");};bc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.");};function WireframeHelper(e,t){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new LineSegments(new pu(e.geometry),new LineBasicMaterial({color:void 0!==t?t:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function extractUrlBase(e){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return Lu.extractUrlBase(e)}});Loader.Handlers={add:function add(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.");},get:function get(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.");}};function XHRLoader(e){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new FileLoader(e)}function BinaryTextureLoader(e){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new DataTextureLoader(e)}Object.assign(hc.prototype,{center:function center(e){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function empty(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function isIntersectionBox(e){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},size:function size(e){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(e)}});Object.assign(Zr.prototype,{center:function center(e){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(e)},empty:function empty(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function isIntersectionBox(e){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionSphere:function isIntersectionSphere(e){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)},size:function size(e){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(e)}});Object.assign(hi.prototype,{empty:function empty(){console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty().");return this.isEmpty()}});Yn.prototype.setFromMatrix=function(e){console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().");return this.setFromProjectionMatrix(e)};pc.prototype.center=function(e){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(e)};Object.assign(Ur,{random16:function random16(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function nearestPowerOfTwo(e){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return Ur.floorPowerOfTwo(e)},nextPowerOfTwo:function nextPowerOfTwo(e){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return Ur.ceilPowerOfTwo(e)}});Object.assign(Hr.prototype,{flattenToArrayOffset:function flattenToArrayOffset(e,t){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},multiplyVector3:function multiplyVector3(t){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return t.applyMatrix3(this||e)},multiplyVector3Array:function multiplyVector3Array(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.");},applyToBufferAttribute:function applyToBufferAttribute(t){console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.");return t.applyMatrix3(this||e)},applyToVector3Array:function applyToVector3Array(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.");}});Object.assign(bi.prototype,{extractPosition:function extractPosition(e){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(e)},flattenToArrayOffset:function flattenToArrayOffset(e,t){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(e,t)},getPosition:function getPosition(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return (new Xr).setFromMatrixColumn(this||e,3)},setRotationFromQuaternion:function setRotationFromQuaternion(e){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(e)},multiplyToArray:function multiplyToArray(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.");},multiplyVector3:function multiplyVector3(t){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return t.applyMatrix4(this||e)},multiplyVector4:function multiplyVector4(t){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return t.applyMatrix4(this||e)},multiplyVector3Array:function multiplyVector3Array(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.");},rotateAxis:function rotateAxis(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");t.transformDirection(this||e);},crossVector:function crossVector(t){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return t.applyMatrix4(this||e)},translate:function translate(){console.error("THREE.Matrix4: .translate() has been removed.");},rotateX:function rotateX(){console.error("THREE.Matrix4: .rotateX() has been removed.");},rotateY:function rotateY(){console.error("THREE.Matrix4: .rotateY() has been removed.");},rotateZ:function rotateZ(){console.error("THREE.Matrix4: .rotateZ() has been removed.");},rotateByAxis:function rotateByAxis(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.");},applyToBufferAttribute:function applyToBufferAttribute(t){console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.");return t.applyMatrix4(this||e)},applyToVector3Array:function applyToVector3Array(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.");},makeFrustum:function makeFrustum(e,t,r,i,n,a){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(e,t,i,r,n,a)}});Yi.prototype.isIntersectionLine=function(e){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(e)};qr.prototype.multiplyVector3=function(t){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return t.applyQuaternion(this||e)};Object.assign(xi.prototype,{isIntersectionBox:function isIntersectionBox(e){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(e)},isIntersectionPlane:function isIntersectionPlane(e){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(e)},isIntersectionSphere:function isIntersectionSphere(e){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(e)}});Object.assign(on.prototype,{area:function area(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function barycoordFromPoint(e,t){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(e,t)},midpoint:function midpoint(e){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");return this.getMidpoint(e)},normal:function normal(e){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(e)},plane:function plane(e){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(e)}});Object.assign(on,{barycoordFromPoint:function barycoordFromPoint(e,t,r,i,n){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return on.getBarycoord(e,t,r,i,n)},normal:function normal(e,t,r,i){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return on.getNormal(e,t,r,i)}});Object.assign(Shape.prototype,{extractAllPoints:function extractAllPoints(e){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(e)},extrude:function extrude(t){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new kl(this||e,t)},makeGeometry:function makeGeometry(t){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new tu(this||e,t)}});Object.assign(zr.prototype,{fromAttribute:function fromAttribute(e,t,r){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,r)},distanceToManhattan:function distanceToManhattan(e){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(e)},lengthManhattan:function lengthManhattan(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Xr.prototype,{setEulerFromRotationMatrix:function setEulerFromRotationMatrix(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.");},setEulerFromQuaternion:function setEulerFromQuaternion(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.");},getPositionFromMatrix:function getPositionFromMatrix(e){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(e)},getScaleFromMatrix:function getScaleFromMatrix(e){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(e)},getColumnFromMatrix:function getColumnFromMatrix(e,t){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(t,e)},applyProjection:function applyProjection(e){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(e)},fromAttribute:function fromAttribute(e,t,r){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,r)},distanceToManhattan:function distanceToManhattan(e){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(e)},lengthManhattan:function lengthManhattan(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(jr.prototype,{fromAttribute:function fromAttribute(e,t,r){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(e,t,r)},lengthManhattan:function lengthManhattan(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.");},computeLineDistances:function computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.");},applyMatrix:function applyMatrix(e){console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(e)}});Object.assign(Object3D.prototype,{getChildByName:function getChildByName(e){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(e)},renderDepth:function renderDepth(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.");},translate:function translate(e,t){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(t,e)},getWorldRotation:function getWorldRotation(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.");},applyMatrix:function applyMatrix(e){console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(e)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function get(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return (this||e).rotation.order},set:function set(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");(this||e).rotation.order=t;}},useQuaternion:{get:function get(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.");},set:function set(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.");}}});Object.assign(Mesh.prototype,{setDrawMode:function setDrawMode(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.");}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function get(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.");return Yt},set:function set(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.");}}});Object.defineProperties(LOD.prototype,{objects:{get:function get(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return (this||e).levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function get(){console.warn("THREE.Skeleton: useVertexTexture has been removed.");},set:function set(){console.warn("THREE.Skeleton: useVertexTexture has been removed.");}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.");};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function get(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return (this||e).arcLengthDivisions},set:function set(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");(this||e).arcLengthDivisions=t;}});PerspectiveCamera.prototype.setLens=function(t,r){console.warn("THREE.PerspectiveCamera.setLens is deprecated. "+"Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==r&&((this||e).filmGauge=r);this.setFocalLength(t);};Object.defineProperties(Light.prototype,{onlyShadow:{set:function set(){console.warn("THREE.Light: .onlyShadow has been removed.");}},shadowCameraFov:{set:function set(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");(this||e).shadow.camera.fov=t;}},shadowCameraLeft:{set:function set(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");(this||e).shadow.camera.left=t;}},shadowCameraRight:{set:function set(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");(this||e).shadow.camera.right=t;}},shadowCameraTop:{set:function set(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");(this||e).shadow.camera.top=t;}},shadowCameraBottom:{set:function set(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");(this||e).shadow.camera.bottom=t;}},shadowCameraNear:{set:function set(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");(this||e).shadow.camera.near=t;}},shadowCameraFar:{set:function set(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");(this||e).shadow.camera.far=t;}},shadowCameraVisible:{set:function set(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.");}},shadowBias:{set:function set(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");(this||e).shadow.bias=t;}},shadowDarkness:{set:function set(){console.warn("THREE.Light: .shadowDarkness has been removed.");}},shadowMapWidth:{set:function set(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");(this||e).shadow.mapSize.width=t;}},shadowMapHeight:{set:function set(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");(this||e).shadow.mapSize.height=t;}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function get(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return (this||e).array.length}},dynamic:{get:function get(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");return (this||e).usage===Ar},set:function set(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");this.setUsage(Ar);}}});Object.assign(BufferAttribute.prototype,{setDynamic:function setDynamic(t){console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(true===t?Ar:Tr);return this||e},copyIndicesArray:function copyIndicesArray(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.");},setArray:function setArray(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers");}});Object.assign(BufferGeometry.prototype,{addIndex:function addIndex(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(e);},addAttribute:function addAttribute(t,r){console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().");if(!(r&&r.isBufferAttribute)&&!(r&&r.isInterleavedBufferAttribute)){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).");return this.setAttribute(t,new BufferAttribute(arguments[1],arguments[2]))}if("index"===t){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.");this.setIndex(r);return this||e}return this.setAttribute(t,r)},addDrawCall:function addDrawCall(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(e,t);},clearDrawCalls:function clearDrawCalls(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups();},computeTangents:function computeTangents(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.");},computeOffsets:function computeOffsets(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.");},removeAttribute:function removeAttribute(e){console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().");return this.deleteAttribute(e)},applyMatrix:function applyMatrix(e){console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(e)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function get(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return (this||e).groups}},offsets:{get:function get(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return (this||e).groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function get(){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");return (this||e).instanceCount},set:function set(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");(this||e).instanceCount=t;}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function get(){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");return (this||e).params.Line.threshold},set:function set(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");(this||e).params.Line.threshold=t;}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function get(){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");return (this||e).usage===Ar},set:function set(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");this.setUsage(e);}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function setDynamic(t){console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(true===t?Ar:Tr);return this||e},setArray:function setArray(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers");}});Object.assign(Hl.prototype,{getArrays:function getArrays(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.");},addShapeList:function addShapeList(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.");},addShape:function addShape(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.");}});Object.assign(zs.prototype,{dispose:function dispose(){console.error("THREE.Scene: .dispose() has been removed.");}});Object.defineProperties(sc.prototype,{dynamic:{set:function set(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.");}},onUpdate:{value:function value(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this||e}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function get(){console.warn("THREE.Material: .wrapAround has been removed.");},set:function set(){console.warn("THREE.Material: .wrapAround has been removed.");}},overdraw:{get:function get(){console.warn("THREE.Material: .overdraw has been removed.");},set:function set(){console.warn("THREE.Material: .overdraw has been removed.");}},wrapRGB:{get:function get(){console.warn("THREE.Material: .wrapRGB has been removed.");return new cn}},shading:{get:function get(){console.error("THREE."+(this||e).type+": .shading has been removed. Use the boolean .flatShading instead.");},set:function set(t){console.warn("THREE."+(this||e).type+": .shading has been removed. Use the boolean .flatShading instead.");(this||e).flatShading=t===g;}},stencilMask:{get:function get(){console.warn("THREE."+(this||e).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");return (this||e).stencilFuncMask},set:function set(t){console.warn("THREE."+(this||e).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");(this||e).stencilFuncMask=t;}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function get(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return false},set:function set(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead");}}});Object.defineProperties(MeshPhysicalMaterial.prototype,{transparency:{get:function get(){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");return (this||e).transmission},set:function set(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");(this||e).transmission=t;}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function get(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return (this||e).extensions.derivatives},set:function set(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");(this||e).extensions.derivatives=t;}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function clearTarget(e,t,r,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");this.setRenderTarget(e);this.clear(t,r,i);},animate:function animate(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");this.setAnimationLoop(e);},getCurrentRenderTarget:function getCurrentRenderTarget(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function getMaxAnisotropy(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return (this||e).capabilities.getMaxAnisotropy()},getPrecision:function getPrecision(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return (this||e).capabilities.precision},resetGLState:function resetGLState(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return (this||e).state.reset()},supportsFloatTextures:function supportsFloatTextures(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return (this||e).extensions.get("OES_texture_float")},supportsHalfFloatTextures:function supportsHalfFloatTextures(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return (this||e).extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function supportsStandardDerivatives(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return (this||e).extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function supportsCompressedTextureS3TC(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return (this||e).extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function supportsCompressedTexturePVRTC(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return (this||e).extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function supportsBlendMinMax(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return (this||e).extensions.get("EXT_blend_minmax")},supportsVertexTextures:function supportsVertexTextures(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return (this||e).capabilities.vertexTextures},supportsInstancedArrays:function supportsInstancedArrays(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return (this||e).extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function enableScissorTest(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(e);},initMaterial:function initMaterial(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.");},addPrePlugin:function addPrePlugin(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.");},addPostPlugin:function addPostPlugin(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.");},updateShadowMap:function updateShadowMap(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.");},setFaceCulling:function setFaceCulling(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.");},allocTextureUnit:function allocTextureUnit(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.");},setTexture:function setTexture(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.");},setTexture2D:function setTexture2D(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.");},setTextureCube:function setTextureCube(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.");},getActiveMipMapLevel:function getActiveMipMapLevel(){console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().");return this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function get(){return (this||e).shadowMap.enabled},set:function set(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");(this||e).shadowMap.enabled=t;}},shadowMapType:{get:function get(){return (this||e).shadowMap.type},set:function set(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");(this||e).shadowMap.type=t;}},shadowMapCullFace:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.");},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.");}},context:{get:function get(){console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.");return this.getContext()}},vr:{get:function get(){console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr");return (this||e).xr}},gammaInput:{get:function get(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.");return false},set:function set(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.");}},gammaOutput:{get:function get(){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");return false},set:function set(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");(this||e).outputEncoding=true===t?Kt:Qt;}},toneMappingWhitePoint:{get:function get(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.");return 1},set:function set(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.");}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.");},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.");}},renderReverseSided:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.");},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.");}},renderSingleSided:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.");},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.");}}});function WebGLRenderTargetCube(e,t,r){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).");return new WebGLCubeRenderTarget(e,r)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function get(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return (this||e).texture.wrapS},set:function set(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");(this||e).texture.wrapS=t;}},wrapT:{get:function get(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return (this||e).texture.wrapT},set:function set(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");(this||e).texture.wrapT=t;}},magFilter:{get:function get(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return (this||e).texture.magFilter},set:function set(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");(this||e).texture.magFilter=t;}},minFilter:{get:function get(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return (this||e).texture.minFilter},set:function set(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");(this||e).texture.minFilter=t;}},anisotropy:{get:function get(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return (this||e).texture.anisotropy},set:function set(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");(this||e).texture.anisotropy=t;}},offset:{get:function get(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return (this||e).texture.offset},set:function set(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");(this||e).texture.offset=t;}},repeat:{get:function get(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return (this||e).texture.repeat},set:function set(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");(this||e).texture.repeat=t;}},format:{get:function get(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return (this||e).texture.format},set:function set(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");(this||e).texture.format=t;}},type:{get:function get(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return (this||e).texture.type},set:function set(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");(this||e).texture.type=t;}},generateMipmaps:{get:function get(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return (this||e).texture.generateMipmaps},set:function set(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");(this||e).texture.generateMipmaps=t;}}});Object.defineProperties(ku.prototype,{load:{value:function value(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var r=this||e;var i=new AudioLoader;i.load(t,(function(e){r.setBuffer(e);}));return this||e}},startTime:{set:function set(){console.warn("THREE.Audio: .startTime is now .play( delay ).");}}});Ju.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(e,t){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(e,t)};var fh={merge:function merge(e,t,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;if(t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();i=t.matrix;t=t.geometry;}e.merge(t,i,r);},center:function center(e){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return e.center()}};kr.crossOrigin=void 0;kr.loadTexture=function(t,r,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var a=new TextureLoader;a.setCrossOrigin((this||e).crossOrigin);var o=a.load(t,i,void 0,n);r&&(o.mapping=r);return o};kr.loadTextureCube=function(t,r,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var a=new CubeTextureLoader;a.setCrossOrigin((this||e).crossOrigin);var o=a.load(t,i,void 0,n);r&&(o.mapping=r);return o};kr.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.");};kr.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.");};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed");}function JSONLoader(){console.error("THREE.JSONLoader has been removed.");}var ph={createMultiMaterialObject:function createMultiMaterialObject(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js");},detach:function detach(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js");},attach:function attach(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js");}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js");}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}}));t.ACESFilmicToneMapping=re;t.AddEquation=T;t.AddOperation=Q;t.AdditiveAnimationBlendMode=Xt;t.AdditiveBlending=_;t.AlphaFormat=Oe;t.AlwaysDepth=V;t.AlwaysStencilFunc=Sr;t.AmbientLight=AmbientLight;t.AmbientLightProbe=AmbientLightProbe;t.AnimationClip=AnimationClip;t.AnimationLoader=AnimationLoader;t.AnimationMixer=AnimationMixer;t.AnimationObjectGroup=AnimationObjectGroup;t.AnimationUtils=gu;t.ArcCurve=ArcCurve;t.ArrayCamera=ArrayCamera;t.ArrowHelper=Vc;t.Audio=ku;t.AudioAnalyser=Ju;t.AudioContext=Du;t.AudioListener=Vu;t.AudioLoader=AudioLoader;t.AxesHelper=kc;t.AxisHelper=AxisHelper;t.BackSide=p;t.BasicDepthPacking=ar;t.BasicShadowMap=u;t.BinaryTextureLoader=BinaryTextureLoader;t.Bone=Bone;t.BooleanKeyframeTrack=BooleanKeyframeTrack;t.BoundingBoxHelper=BoundingBoxHelper;t.Box2=hc;t.Box3=Zr;t.Box3Helper=Nc;t.BoxBufferGeometry=zn;t.BoxGeometry=Sl;t.BoxHelper=Oc;t.BufferAttribute=BufferAttribute;t.BufferGeometry=BufferGeometry;t.BufferGeometryLoader=BufferGeometryLoader;t.ByteType=Te;t.Cache=yu;t.Camera=Camera;t.CameraHelper=Dc;t.CanvasRenderer=CanvasRenderer;t.CanvasTexture=CanvasTexture;t.CatmullRomCurve3=CatmullRomCurve3;t.CineonToneMapping=te;t.CircleBufferGeometry=Tl;t.CircleGeometry=Al;t.ClampToEdgeWrapping=de;t.Clock=Nu;t.ClosedSplineCurve3=ClosedSplineCurve3;t.Color=cn;t.ColorKeyframeTrack=ColorKeyframeTrack;t.CompressedTexture=CompressedTexture;t.CompressedTextureLoader=CompressedTextureLoader;t.ConeBufferGeometry=Pl;t.ConeGeometry=Cl;t.CubeCamera=CubeCamera;t.CubeGeometry=Sl;t.CubeReflectionMapping=ae;t.CubeRefractionMapping=oe;t.CubeTexture=CubeTexture;t.CubeTextureLoader=CubeTextureLoader;t.CubeUVReflectionMapping=ue;t.CubeUVRefractionMapping=ce;t.CubicBezierCurve=CubicBezierCurve;t.CubicBezierCurve3=CubicBezierCurve3;t.CubicInterpolant=CubicInterpolant;t.CullFaceBack=o;t.CullFaceFront=s;t.CullFaceFrontBack=l;t.CullFaceNone=a;t.Curve=Curve;t.CurvePath=CurvePath;t.CustomBlending=S;t.CustomToneMapping=ie;t.CylinderBufferGeometry=Ll;t.CylinderGeometry=El;t.Cylindrical=uc;t.DataTexture=DataTexture;t.DataTexture2DArray=DataTexture2DArray;t.DataTexture3D=DataTexture3D;t.DataTextureLoader=DataTextureLoader;t.DecrementStencilOp=fr;t.DecrementWrapStencilOp=mr;t.DefaultLoadingManager=xu;t.DepthFormat=Ve;t.DepthStencilFormat=ke;t.DepthTexture=DepthTexture;t.DirectionalLight=DirectionalLight;t.DirectionalLightHelper=Rc;t.DiscreteInterpolant=DiscreteInterpolant;t.DodecahedronBufferGeometry=Bl;t.DodecahedronGeometry=Il;t.DoubleSide=m;t.DstAlphaFactor=O;t.DstColorFactor=F;t.DynamicBufferAttribute=DynamicBufferAttribute;t.DynamicCopyUsage=Br;t.DynamicDrawUsage=Ar;t.DynamicReadUsage=Cr;t.EdgesGeometry=Fl;t.EdgesHelper=EdgesHelper;t.EllipseCurve=EllipseCurve;t.EqualDepth=j;t.EqualStencilFunc=xr;t.EquirectangularReflectionMapping=se;t.EquirectangularRefractionMapping=le;t.Euler=Ei;t.EventDispatcher=EventDispatcher;t.ExtrudeBufferGeometry=Hl;t.ExtrudeGeometry=kl;t.Face3=hn;t.Face4=Face4;t.FaceColors=hh;t.FileLoader=FileLoader;t.FlatShading=g;t.Float32Attribute=Float32Attribute;t.Float32BufferAttribute=Float32BufferAttribute;t.Float64Attribute=Float64Attribute;t.Float64BufferAttribute=Float64BufferAttribute;t.FloatType=Pe;t.Fog=Us;t.FogExp2=Fs;t.Font=Font;t.FontLoader=FontLoader;t.FrontSide=f;t.Frustum=Yn;t.GLBufferAttribute=GLBufferAttribute;t.GLSL1=Dr;t.GLSL3=Gr;t.GammaEncoding=$t;t.Geometry=Geometry;t.GeometryUtils=fh;t.GreaterDepth=X;t.GreaterEqualDepth=q;t.GreaterEqualStencilFunc=wr;t.GreaterStencilFunc=_r;t.GridHelper=Ac;t.Group=Group;t.HalfFloatType=Re;t.HemisphereLight=HemisphereLight;t.HemisphereLightHelper=Tc;t.HemisphereLightProbe=HemisphereLightProbe;t.IcosahedronBufferGeometry=Wl;t.IcosahedronGeometry=jl;t.ImageBitmapLoader=ImageBitmapLoader;t.ImageLoader=ImageLoader;t.ImageUtils=kr;t.ImmediateRenderObject=ImmediateRenderObject;t.IncrementStencilOp=dr;t.IncrementWrapStencilOp=pr;t.InstancedBufferAttribute=InstancedBufferAttribute;t.InstancedBufferGeometry=InstancedBufferGeometry;t.InstancedInterleavedBuffer=InstancedInterleavedBuffer;t.InstancedMesh=InstancedMesh;t.Int16Attribute=Int16Attribute;t.Int16BufferAttribute=Int16BufferAttribute;t.Int32Attribute=Int32Attribute;t.Int32BufferAttribute=Int32BufferAttribute;t.Int8Attribute=Int8Attribute;t.Int8BufferAttribute=Int8BufferAttribute;t.IntType=Ee;t.InterleavedBuffer=InterleavedBuffer;t.InterleavedBufferAttribute=InterleavedBufferAttribute;t.Interpolant=Interpolant;t.InterpolateDiscrete=zt;t.InterpolateLinear=Ht;t.InterpolateSmooth=Vt;t.InvertStencilOp=vr;t.JSONLoader=JSONLoader;t.KeepStencilOp=cr;t.KeyframeTrack=KeyframeTrack;t.LOD=LOD;t.LatheBufferGeometry=ql;t.LatheGeometry=Xl;t.Layers=Ri;t.LensFlare=LensFlare;t.LessDepth=k;t.LessEqualDepth=W;t.LessEqualStencilFunc=br;t.LessStencilFunc=yr;t.Light=Light;t.LightProbe=LightProbe;t.Line=Line;t.Line3=pc;t.LineBasicMaterial=LineBasicMaterial;t.LineCurve=LineCurve;t.LineCurve3=LineCurve3;t.LineDashedMaterial=LineDashedMaterial;t.LineLoop=LineLoop;t.LinePieces=uh;t.LineSegments=LineSegments;t.LineStrip=lh;t.LinearEncoding=Qt;t.LinearFilter=xe;t.LinearInterpolant=LinearInterpolant;t.LinearMipMapLinearFilter=we;t.LinearMipMapNearestFilter=_e;t.LinearMipmapLinearFilter=Me;t.LinearMipmapNearestFilter=be;t.LinearToneMapping=$;t.Loader=Loader;t.LoaderUtils=Lu;t.LoadingManager=LoadingManager;t.LogLuvEncoding=tr;t.LoopOnce=Nt;t.LoopPingPong=Ut;t.LoopRepeat=Ft;t.LuminanceAlphaFormat=ze;t.LuminanceFormat=Ue;t.MOUSE=i;t.Material=Material;t.MaterialLoader=MaterialLoader;t.Math=Ur;t.MathUtils=Ur;t.Matrix3=Hr;t.Matrix4=bi;t.MaxEquation=C;t.Mesh=Mesh;t.MeshBasicMaterial=MeshBasicMaterial;t.MeshDepthMaterial=MeshDepthMaterial;t.MeshDistanceMaterial=MeshDistanceMaterial;t.MeshFaceMaterial=MeshFaceMaterial;t.MeshLambertMaterial=MeshLambertMaterial;t.MeshMatcapMaterial=MeshMatcapMaterial;t.MeshNormalMaterial=MeshNormalMaterial;t.MeshPhongMaterial=MeshPhongMaterial;t.MeshPhysicalMaterial=MeshPhysicalMaterial;t.MeshStandardMaterial=MeshStandardMaterial;t.MeshToonMaterial=MeshToonMaterial;t.MinEquation=E;t.MirroredRepeatWrapping=fe;t.MixOperation=Z;t.MultiMaterial=MultiMaterial;t.MultiplyBlending=w;t.MultiplyOperation=J;t.NearestFilter=pe;t.NearestMipMapLinearFilter=ye;t.NearestMipMapNearestFilter=ve;t.NearestMipmapLinearFilter=ge;t.NearestMipmapNearestFilter=me;t.NeverDepth=H;t.NeverStencilFunc=gr;t.NoBlending=x;t.NoColors=ch;t.NoToneMapping=K;t.NormalAnimationBlendMode=qt;t.NormalBlending=b;t.NotEqualDepth=Y;t.NotEqualStencilFunc=Mr;t.NumberKeyframeTrack=NumberKeyframeTrack;t.Object3D=Object3D;t.ObjectLoader=Cu;t.ObjectSpaceNormalMap=lr;t.OctahedronBufferGeometry=Yl;t.OctahedronGeometry=Jl;t.OneFactor=R;t.OneMinusDstAlphaFactor=N;t.OneMinusDstColorFactor=U;t.OneMinusSrcAlphaFactor=G;t.OneMinusSrcColorFactor=I;t.OrthographicCamera=OrthographicCamera;t.PCFShadowMap=c;t.PCFSoftShadowMap=h;t.PMREMGenerator=sh;t.ParametricBufferGeometry=ParametricBufferGeometry;t.ParametricGeometry=ParametricGeometry;t.Particle=Particle;t.ParticleBasicMaterial=ParticleBasicMaterial;t.ParticleSystem=ParticleSystem;t.ParticleSystemMaterial=ParticleSystemMaterial;t.Path=Path;t.PerspectiveCamera=PerspectiveCamera;t.Plane=Yi;t.PlaneBufferGeometry=Jn;t.PlaneGeometry=Zl;t.PlaneHelper=Fc;t.PointCloud=PointCloud;t.PointCloudMaterial=PointCloudMaterial;t.PointLight=PointLight;t.PointLightHelper=_c;t.Points=Points;t.PointsMaterial=PointsMaterial;t.PolarGridHelper=Lc;t.PolyhedronBufferGeometry=Rl;t.PolyhedronGeometry=Ql;t.PositionalAudio=Yu;t.PropertyBinding=PropertyBinding;t.PropertyMixer=PropertyMixer;t.QuadraticBezierCurve=QuadraticBezierCurve;t.QuadraticBezierCurve3=QuadraticBezierCurve3;t.Quaternion=qr;t.QuaternionKeyframeTrack=QuaternionKeyframeTrack;t.QuaternionLinearInterpolant=QuaternionLinearInterpolant;t.REVISION=r;t.RGBADepthPacking=or;t.RGBAFormat=Fe;t.RGBAIntegerFormat=Je;t.RGBA_ASTC_10x10_Format=xt;t.RGBA_ASTC_10x5_Format=vt;t.RGBA_ASTC_10x6_Format=gt;t.RGBA_ASTC_10x8_Format=yt;t.RGBA_ASTC_12x10_Format=bt;t.RGBA_ASTC_12x12_Format=_t;t.RGBA_ASTC_4x4_Format=lt;t.RGBA_ASTC_5x4_Format=ut;t.RGBA_ASTC_5x5_Format=ct;t.RGBA_ASTC_6x5_Format=ht;t.RGBA_ASTC_6x6_Format=dt;t.RGBA_ASTC_8x5_Format=ft;t.RGBA_ASTC_8x6_Format=pt;t.RGBA_ASTC_8x8_Format=mt;t.RGBA_BPTC_Format=Mt;t.RGBA_ETC2_EAC_Format=st;t.RGBA_PVRTC_2BPPV1_Format=it;t.RGBA_PVRTC_4BPPV1_Format=rt;t.RGBA_S3TC_DXT1_Format=Qe;t.RGBA_S3TC_DXT3_Format=Ke;t.RGBA_S3TC_DXT5_Format=$e;t.RGBDEncoding=nr;t.RGBEEncoding=er;t.RGBEFormat=He;t.RGBFormat=Ne;t.RGBIntegerFormat=Ye;t.RGBM16Encoding=ir;t.RGBM7Encoding=rr;t.RGB_ETC1_Format=nt;t.RGB_ETC2_Format=ot;t.RGB_PVRTC_2BPPV1_Format=tt;t.RGB_PVRTC_4BPPV1_Format=et;t.RGB_S3TC_DXT1_Format=Ze;t.RGFormat=qe;t.RGIntegerFormat=Xe;t.RawShaderMaterial=RawShaderMaterial;t.Ray=xi;t.Raycaster=Raycaster;t.RectAreaLight=RectAreaLight;t.RedFormat=We;t.RedIntegerFormat=je;t.ReinhardToneMapping=ee;t.RepeatWrapping=he;t.ReplaceStencilOp=hr;t.ReverseSubtractEquation=L;t.RingBufferGeometry=Kl;t.RingGeometry=$l;t.SRGB8_ALPHA8_ASTC_10x10_Format=Dt;t.SRGB8_ALPHA8_ASTC_10x5_Format=Rt;t.SRGB8_ALPHA8_ASTC_10x6_Format=Bt;t.SRGB8_ALPHA8_ASTC_10x8_Format=It;t.SRGB8_ALPHA8_ASTC_12x10_Format=Gt;t.SRGB8_ALPHA8_ASTC_12x12_Format=Ot;t.SRGB8_ALPHA8_ASTC_4x4_Format=wt;t.SRGB8_ALPHA8_ASTC_5x4_Format=St;t.SRGB8_ALPHA8_ASTC_5x5_Format=Tt;t.SRGB8_ALPHA8_ASTC_6x5_Format=At;t.SRGB8_ALPHA8_ASTC_6x6_Format=Lt;t.SRGB8_ALPHA8_ASTC_8x5_Format=Et;t.SRGB8_ALPHA8_ASTC_8x6_Format=Ct;t.SRGB8_ALPHA8_ASTC_8x8_Format=Pt;t.Scene=zs;t.SceneUtils=ph;t.ShaderChunk=ys;t.ShaderLib=bs;t.ShaderMaterial=ShaderMaterial;t.ShadowMaterial=ShadowMaterial;t.Shape=Shape;t.ShapeBufferGeometry=eu;t.ShapeGeometry=tu;t.ShapePath=ShapePath;t.ShapeUtils=zl;t.ShortType=Ae;t.Skeleton=Skeleton;t.SkeletonHelper=bc;t.SkinnedMesh=SkinnedMesh;t.SmoothShading=y;t.Sphere=hi;t.SphereBufferGeometry=ru;t.SphereGeometry=iu;t.Spherical=lc;t.SphericalHarmonics3=Au;t.Spline=Spline;t.SplineCurve=SplineCurve;t.SplineCurve3=SplineCurve3;t.SpotLight=SpotLight;t.SpotLightHelper=vc;t.Sprite=Sprite;t.SpriteMaterial=SpriteMaterial;t.SrcAlphaFactor=D;t.SrcAlphaSaturateFactor=z;t.SrcColorFactor=B;t.StaticCopyUsage=Rr;t.StaticDrawUsage=Tr;t.StaticReadUsage=Er;t.StereoCamera=StereoCamera;t.StreamCopyUsage=Ir;t.StreamDrawUsage=Lr;t.StreamReadUsage=Pr;t.StringKeyframeTrack=StringKeyframeTrack;t.SubtractEquation=A;t.SubtractiveBlending=M;t.TOUCH=n;t.TangentSpaceNormalMap=sr;t.TetrahedronBufferGeometry=nu;t.TetrahedronGeometry=au;t.TextBufferGeometry=ou;t.TextGeometry=su;t.Texture=Texture;t.TextureLoader=TextureLoader;t.TorusBufferGeometry=lu;t.TorusGeometry=uu;t.TorusKnotBufferGeometry=cu;t.TorusKnotGeometry=hu;t.Triangle=on;t.TriangleFanDrawMode=Zt;t.TriangleStripDrawMode=Jt;t.TrianglesDrawMode=Yt;t.TubeBufferGeometry=du;t.TubeGeometry=fu;t.UVMapping=ne;t.Uint16Attribute=Uint16Attribute;t.Uint16BufferAttribute=Uint16BufferAttribute;t.Uint32Attribute=Uint32Attribute;t.Uint32BufferAttribute=Uint32BufferAttribute;t.Uint8Attribute=Uint8Attribute;t.Uint8BufferAttribute=Uint8BufferAttribute;t.Uint8ClampedAttribute=Uint8ClampedAttribute;t.Uint8ClampedBufferAttribute=Uint8ClampedBufferAttribute;t.Uniform=sc;t.UniformsLib=xs;t.UniformsUtils=Hn;t.UnsignedByteType=Se;t.UnsignedInt248Type=Ge;t.UnsignedIntType=Ce;t.UnsignedShort4444Type=Be;t.UnsignedShort5551Type=Ie;t.UnsignedShort565Type=De;t.UnsignedShortType=Le;t.VSMShadowMap=d;t.Vector2=zr;t.Vector3=Xr;t.Vector4=jr;t.VectorKeyframeTrack=VectorKeyframeTrack;t.Vertex=Vertex;t.VertexColors=dh;t.VideoTexture=VideoTexture;t.WebGL1Renderer=WebGL1Renderer;t.WebGLCubeRenderTarget=WebGLCubeRenderTarget;t.WebGLMultisampleRenderTarget=WebGLMultisampleRenderTarget;t.WebGLRenderTarget=WebGLRenderTarget;t.WebGLRenderTargetCube=WebGLRenderTargetCube;t.WebGLRenderer=WebGLRenderer;t.WebGLUtils=WebGLUtils;t.WireframeGeometry=pu;t.WireframeHelper=WireframeHelper;t.WrapAroundEnding=jt;t.XHRLoader=XHRLoader;t.ZeroCurvatureEnding=kt;t.ZeroFactor=P;t.ZeroSlopeEnding=Wt;t.ZeroStencilOp=ur;t.sRGBEncoding=Kt;Object.defineProperty(t,"__esModule",{value:true});}));
var r={};var e$1=Object.getOwnPropertySymbols;var t$1=Object.prototype.hasOwnProperty;var n=Object.prototype.propertyIsEnumerable;function toObject(r){if(null===r||void 0===r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function shouldUseNative(){try{if(!Object.assign)return false;var r=new String("abc");r[5]="de";if("5"===Object.getOwnPropertyNames(r)[0])return false;var e={};for(var t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(e).map((function(r){return e[r]}));if("0123456789"!==n.join(""))return false;var a={};"abcdefghijklmnopqrst".split("").forEach((function(r){a[r]=r;}));return "abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(r){return false}}r=shouldUseNative()?Object.assign:function(r,a){var o;var c=toObject(r);var i;for(var s=1;s<arguments.length;s++){o=Object(arguments[s]);for(var f in o)t$1.call(o,f)&&(c[f]=o[f]);if(e$1){i=e$1(o);for(var l=0;l<i.length;l++)n.call(o,i[l])&&(c[i[l]]=o[i[l]]);}}return c};var a=r;var e$2={};(function(){var n=false;var r=true;var a;var t;var l;var u;var i;if("undefined"===typeof window||"function"!==typeof MessageChannel){var o=null;var s=null;var _flushCallback=function(){if(null!==o)try{var n=e$2.unstable_now();var r=true;o(r,n);o=null;}catch(e){setTimeout(_flushCallback,0);throw e}};var f=Date.now();e$2.unstable_now=function(){return Date.now()-f};a=function(e){if(null!==o)setTimeout(a,0,e);else {o=e;setTimeout(_flushCallback,0);}};t=function(e,n){s=setTimeout(e,n);};l=function(){clearTimeout(s);};u=function(){return false};i=e$2.unstable_forceFrameRate=function(){};}else {var c=window.performance;var v=window.Date;var b=window.setTimeout;var d=window.clearTimeout;if("undefined"!==typeof console){var p=window.requestAnimationFrame;var m=window.cancelAnimationFrame;"function"!==typeof p&&console["error"]("This browser doesn't support requestAnimationFrame. "+"Make sure that you load a "+"polyfill in older browsers. https://fb.me/react-polyfills");"function"!==typeof m&&console["error"]("This browser doesn't support cancelAnimationFrame. "+"Make sure that you load a "+"polyfill in older browsers. https://fb.me/react-polyfills");}if("object"===typeof c&&"function"===typeof c.now)e$2.unstable_now=function(){return c.now()};else {var k=v.now();e$2.unstable_now=function(){return v.now()-k};}var _=false;var g=null;var w=-1;var y=5;var h=0;u=function(){return e$2.unstable_now()>=h};i=function(){};e$2.unstable_forceFrameRate=function(e){e<0||e>125?console["error"]("forceFrameRate takes a positive int between 0 and 125, "+"forcing framerates higher than 125 fps is not unsupported"):y=e>0?Math.floor(1e3/e):5;};var performWorkUntilDeadline=function(){if(null!==g){var n=e$2.unstable_now();h=n+y;var r=true;try{var a=g(r,n);if(a)E.postMessage(null);else {_=false;g=null;}}catch(e){E.postMessage(null);throw e}}else _=false;};var T=new MessageChannel;var E=T.port2;T.port1.onmessage=performWorkUntilDeadline;a=function(e){g=e;if(!_){_=true;E.postMessage(null);}};t=function(n,r){w=b((function(){n(e$2.unstable_now());}),r);};l=function(){d(w);w=-1;};}function push(e,n){var r=e.length;e.push(n);siftUp(e,n,r);}function peek(e){var n=e[0];return void 0===n?null:n}function pop(e){var n=e[0];if(void 0!==n){var r=e.pop();if(r!==n){e[0]=r;siftDown(e,r,0);}return n}return null}function siftUp(e,n,r){var a=r;while(true){var t=a-1>>>1;var l=e[t];if(!(void 0!==l&&compare(l,n)>0))return;e[t]=n;e[a]=l;a=t;}}function siftDown(e,n,r){var a=r;var t=e.length;while(a<t){var l=2*(a+1)-1;var u=e[l];var i=l+1;var o=e[i];if(void 0!==u&&compare(u,n)<0)if(void 0!==o&&compare(o,u)<0){e[a]=o;e[i]=n;a=i;}else {e[a]=u;e[l]=n;a=l;}else {if(!(void 0!==o&&compare(o,n)<0))return;e[a]=o;e[i]=n;a=i;}}}function compare(e,n){var r=e.sortIndex-n.sortIndex;return 0!==r?r:e.id-n.id}var P=0;var x=1;var C=2;var L=3;var F=4;var I=5;var A=0;var S=0;var B=4;var M="function"===typeof SharedArrayBuffer?new SharedArrayBuffer(B*Int32Array.BYTES_PER_ELEMENT):"function"===typeof ArrayBuffer?new ArrayBuffer(B*Int32Array.BYTES_PER_ELEMENT):null;var N=null!==M?new Int32Array(M):[];var R=0;var W=1;var Y=2;var Q=3;N[R]=P;N[Q]=0;N[W]=0;var D=131072;var U=524288;var q=0;var j=null;var z=null;var G=0;var H=1;var J=2;var K=3;var O=4;var V=5;var X=6;var Z=7;var $=8;function logEvent(e){if(null!==z){var n=G;G+=e.length;if(G+1>q){q*=2;if(q>U){console["error"]("Scheduler Profiling: Event log exceeded maximum size. Don't "+"forget to call `stopLoggingProfilingEvents()`.");stopLoggingProfilingEvents();return}var r=new Int32Array(4*q);r.set(z);j=r.buffer;z=r;}z.set(e,n);}}function startLoggingProfilingEvents(){q=D;j=new ArrayBuffer(4*q);z=new Int32Array(j);G=0;}function stopLoggingProfilingEvents(){var e=j;q=0;j=null;z=null;G=0;return e}function markTaskStart(e,n){N[Q]++;null!==z&&logEvent([H,1e3*n,e.id,e.priorityLevel]);}function markTaskCompleted(e,n){N[R]=P;N[W]=0;N[Q]--;null!==z&&logEvent([J,1e3*n,e.id]);}function markTaskCanceled(e,n){N[Q]--;null!==z&&logEvent([O,1e3*n,e.id]);}function markTaskErrored(e,n){N[R]=P;N[W]=0;N[Q]--;null!==z&&logEvent([K,1e3*n,e.id]);}function markTaskRun(e,n){A++;N[R]=e.priorityLevel;N[W]=e.id;N[Y]=A;null!==z&&logEvent([V,1e3*n,e.id,A]);}function markTaskYield(e,n){N[R]=P;N[W]=0;N[Y]=0;null!==z&&logEvent([X,1e3*n,e.id,A]);}function markSchedulerSuspended(e){S++;null!==z&&logEvent([Z,1e3*e,S]);}function markSchedulerUnsuspended(e){null!==z&&logEvent([$,1e3*e,S]);}var ee=1073741823;var ne=-1;var re=250;var ae=5e3;var te=1e4;var le=ee;var ue=[];var ie=[];var oe=1;var se=null;var fe=L;var ce=false;var ve=false;var be=false;function advanceTimers(e){var n=peek(ie);while(null!==n){if(null===n.callback)pop(ie);else {if(!(n.startTime<=e))return;pop(ie);n.sortIndex=n.expirationTime;push(ue,n);markTaskStart(n,e);n.isQueued=true;}n=peek(ie);}}function handleTimeout(e){be=false;advanceTimers(e);if(!ve)if(null!==peek(ue)){ve=true;a(flushWork);}else {var n=peek(ie);null!==n&&t(handleTimeout,n.startTime-e);}}function flushWork(n,a){markSchedulerUnsuspended(a);ve=false;if(be){be=false;l();}ce=true;var t=fe;try{if(!r);try{return workLoop(n,a)}catch(n){if(null!==se){var u=e$2.unstable_now();markTaskErrored(se,u);se.isQueued=false;}throw n}}finally{se=null;fe=t;ce=false;var i=e$2.unstable_now();markSchedulerSuspended(i);}}function workLoop(r,a){var l=a;advanceTimers(l);se=peek(ue);while(null!==se&&!n){if(se.expirationTime>l&&(!r||u()))break;var i=se.callback;if(null!==i){se.callback=null;fe=se.priorityLevel;var o=se.expirationTime<=l;markTaskRun(se,l);var s=i(o);l=e$2.unstable_now();if("function"===typeof s){se.callback=s;markTaskYield(se,l);}else {markTaskCompleted(se,l);se.isQueued=false;se===peek(ue)&&pop(ue);}advanceTimers(l);}else pop(ue);se=peek(ue);}if(null!==se)return true;var f=peek(ie);null!==f&&t(handleTimeout,f.startTime-l);return false}function unstable_runWithPriority(e,n){switch(e){case x:case C:case L:case F:case I:break;default:e=L;}var r=fe;fe=e;try{return n()}finally{fe=r;}}function unstable_next(e){var n;switch(fe){case x:case C:case L:n=L;break;default:n=fe;break}var r=fe;fe=n;try{return e()}finally{fe=r;}}function unstable_wrapCallback(e){var n=fe;return function(){var r=fe;fe=n;try{return e.apply(this,arguments)}finally{fe=r;}}}function timeoutForPriorityLevel(e){switch(e){case x:return ne;case C:return re;case I:return le;case F:return te;case L:default:return ae}}function unstable_scheduleCallback(n,r,u){var i=e$2.unstable_now();var o;var s;if("object"===typeof u&&null!==u){var f=u.delay;o="number"===typeof f&&f>0?i+f:i;s="number"===typeof u.timeout?u.timeout:timeoutForPriorityLevel(n);}else {s=timeoutForPriorityLevel(n);o=i;}var c=o+s;var v={id:oe++,callback:r,priorityLevel:n,startTime:o,expirationTime:c,sortIndex:-1};v.isQueued=false;if(o>i){v.sortIndex=o;push(ie,v);if(null===peek(ue)&&v===peek(ie)){be?l():be=true;t(handleTimeout,o-i);}}else {v.sortIndex=c;push(ue,v);markTaskStart(v,i);v.isQueued=true;if(!ve&&!ce){ve=true;a(flushWork);}}return v}function unstable_pauseExecution(){}function unstable_continueExecution(){if(!ve&&!ce){ve=true;a(flushWork);}}function unstable_getFirstCallbackNode(){return peek(ue)}function unstable_cancelCallback(n){if(n.isQueued){var r=e$2.unstable_now();markTaskCanceled(n,r);n.isQueued=false;}n.callback=null;}function unstable_getCurrentPriorityLevel(){return fe}function unstable_shouldYield(){var n=e$2.unstable_now();advanceTimers(n);var r=peek(ue);return r!==se&&null!==se&&null!==r&&null!==r.callback&&r.startTime<=n&&r.expirationTime<se.expirationTime||u()}var de=i;var pe={startLoggingProfilingEvents:startLoggingProfilingEvents,stopLoggingProfilingEvents:stopLoggingProfilingEvents,sharedProfilingBuffer:M};e$2.unstable_IdlePriority=I;e$2.unstable_ImmediatePriority=x;e$2.unstable_LowPriority=F;e$2.unstable_NormalPriority=L;e$2.unstable_Profiling=pe;e$2.unstable_UserBlockingPriority=C;e$2.unstable_cancelCallback=unstable_cancelCallback;e$2.unstable_continueExecution=unstable_continueExecution;e$2.unstable_getCurrentPriorityLevel=unstable_getCurrentPriorityLevel;e$2.unstable_getFirstCallbackNode=unstable_getFirstCallbackNode;e$2.unstable_next=unstable_next;e$2.unstable_pauseExecution=unstable_pauseExecution;e$2.unstable_requestPaint=de;e$2.unstable_runWithPriority=unstable_runWithPriority;e$2.unstable_scheduleCallback=unstable_scheduleCallback;e$2.unstable_shouldYield=unstable_shouldYield;e$2.unstable_wrapCallback=unstable_wrapCallback;})();
var t$2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var e$3={};function E(){}E.prototype={on:function(e,n,i){var r=(this||t$2).e||((this||t$2).e={});(r[e]||(r[e]=[])).push({fn:n,ctx:i});return this||t$2},once:function(e,n,i){var r=this||t$2;function listener(){r.off(e,listener);n.apply(i,arguments);}listener._=n;return this.on(e,listener,i)},emit:function(e){var n=[].slice.call(arguments,1);var i=(((this||t$2).e||((this||t$2).e={}))[e]||[]).slice();var r=0;var f=i.length;for(r;r<f;r++)i[r].fn.apply(i[r].ctx,n);return this||t$2},off:function(e,n){var i=(this||t$2).e||((this||t$2).e={});var r=i[e];var f=[];if(r&&n)for(var s=0,l=r.length;s<l;s++)r[s].fn!==n&&r[s].fn._!==n&&f.push(r[s]);f.length?i[e]=f:delete i[e];return this||t$2}};e$3=E;e$3.TinyEmitter=E;var n$1=e$3;const i=e$3.TinyEmitter;var r$1={};r$1=function equal(r,e){if(r===e)return true;if(r&&e&&"object"==typeof r&&"object"==typeof e){if(r.constructor!==e.constructor)return false;var t,f,u;if(Array.isArray(r)){t=r.length;if(t!=e.length)return false;for(f=t;0!==f--;)if(!equal(r[f],e[f]))return false;return true}if(r.constructor===RegExp)return r.source===e.source&&r.flags===e.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===e.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===e.toString();u=Object.keys(r);t=u.length;if(t!==Object.keys(e).length)return false;for(f=t;0!==f--;)if(!Object.prototype.hasOwnProperty.call(e,u[f]))return false;for(f=t;0!==f--;){var o=u[f];if(!equal(r[o],e[o]))return false}return true}return r!==r&&e!==e};var e$4=r$1;var t$3={};Object.defineProperty(t$3,"__esModule",{value:!0});var f=e$4,s=React;function n$2(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var c=n$2(f);function o(r,e){var t;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(t=function(r,e){if(r){if("string"==typeof r)return a$1(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);return "Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a$1(r,e):void 0}}(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var f=0;return function(){return f>=r.length?{done:!0}:{done:!1,value:r[f++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return (t=r[Symbol.iterator]()).next.bind(t)}function a$1(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,f=new Array(e);t<e;t++)f[t]=r[t];return f}function i$1(r,e,t,f,s){void 0===f&&(f=0),void 0===s&&(s=!1);for(var p,d=o(e);!(p=d()).done;){var v=p.value;if(c.default(t,v.args)){if(v.error)throw v.error;if(v.response)return v.response;throw v.promise}}var y={args:t,promise:r.apply(void 0,t).then((function(r){return y.response=r})).catch((function(r){return y.error=r})).then((function(){f>0&&setTimeout((function(){var r=e.indexOf(y);-1!==r&&e.splice(r,1);}),f);}))};if(e.push(y),!s)throw y.promise}function u(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),f=1;f<e;f++)t[f-1]=arguments[f];if(void 0===t)r.splice(0,r.length);else {var s=r.find((function(r){return c.default(t,r.args)}));if(s){var p=r.indexOf(s);-1!==p&&r.splice(p,1);}}}var p=[];function l(r,e){return s.useMemo((function(){return i$1(r,p,e,l.lifespan)}),e)}l.lifespan=0,l.clear=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return u.apply(void 0,[p].concat(e))},l.preload=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),f=1;f<e;f++)t[f-1]=arguments[f];i$1(r,p,t,l.lifespan,!0);},l.peek=function(){for(var r,e=arguments.length,t=new Array(e),f=0;f<e;f++)t[f]=arguments[f];return null==(r=p.find((function(r){return c.default(t,r.args)})))?void 0:r.response},t$3.createAsset=function(r,e){void 0===e&&(e=0);var t=[];return {read:function(){for(var f=arguments.length,s=new Array(f),c=0;c<f;c++)s[c]=arguments[c];return i$1(r,t,s,e)},preload:function(){for(var f=arguments.length,s=new Array(f),c=0;c<f;c++)s[c]=arguments[c];i$1(r,t,s,e,!0);},clear:function(){for(var r=arguments.length,e=new Array(r),f=0;f<r;f++)e[f]=arguments[f];return u.apply(void 0,[t].concat(e))},peek:function(){for(var r,e=arguments.length,f=new Array(e),s=0;s<e;s++)f[s]=arguments[s];return null==(r=t.find((function(r){return c.default(f,r.args)})))?void 0:r.response}}},t$3.useAsset=l;var e$5="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t$4={};function _extends(){t$4=_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);}return e};return _extends.apply(this||e$5,arguments)}t$4=_extends;var n$3=t$4;var e$6={};function _objectWithoutPropertiesLoose(e,r){if(null==e)return {};var t={};var o=Object.keys(e);var i,n;for(n=0;n<o.length;n++){i=o[n];r.indexOf(i)>=0||(t[i]=e[i]);}return t}e$6=_objectWithoutPropertiesLoose;var r$2=e$6;var t$5={};function _setPrototypeOf(o,e){t$5=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,o){t.__proto__=o;return t};return _setPrototypeOf(o,e)}t$5=_setPrototypeOf;var o$1=t$5;var t$6={};function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}t$6=_isNativeReflectConstruct;var e$7=t$6;var n$4={};var c$1=o$1;var o$2=e$7;function _construct(t,r,u){n$4=_construct=o$2()?Reflect.construct:function _construct(t,r,n){var o=[null];o.push.apply(o,r);var u=Function.bind.apply(t,o);var a=new u;n&&c$1(a,n.prototype);return a};return _construct.apply(null,arguments)}n$4=_construct;var u$1=n$4;var e$8="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var l$1={};function debounce(l,n,u){var t,a,o,i,f;null==n&&(n=100);function later(){var e=Date.now()-i;if(e<n&&e>=0)t=setTimeout(later,n-e);else {t=null;if(!u){f=l.apply(o,a);o=a=null;}}}var debounced=function(){o=this||e$8;a=arguments;i=Date.now();var r=u&&!t;t||(t=setTimeout(later,n));if(r){f=l.apply(o,a);o=a=null;}return f};debounced.clear=function(){if(t){clearTimeout(t);t=null;}};debounced.flush=function(){if(t){f=l.apply(o,a);o=a=null;clearTimeout(t);t=null;}};return debounced}debounce.debounce=debounce;l$1=debounce;var n$5=l$1;var t$7={};var n$6={exports:t$7};var o$3=React;var s$1=n$5;function useMeasure(e){var r=void 0===e?{debounce:0,scroll:false}:e,t=r.debounce,n=r.scroll,i=r.polyfill;var c=i||("undefined"===typeof window?function ResizeObserver(){}:window.ResizeObserver);if(!c)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");var l=o$3.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=l[0],f=l[1];var v=o$3.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a});var d=t?"number"===typeof t?t:t.scroll:null;var p=t?"number"===typeof t?t:t.resize:null;var w=o$3.useMemo((function(){var e=function callback(){if(v.current.element){var e=v.current.element.getBoundingClientRect(),r=e.left,t=e.top,n=e.width,o=e.height,s=e.bottom,i=e.right,c=e.x,l=e.y;var a={left:r,top:t,width:n,height:o,bottom:s,right:i,x:c,y:l};Object.freeze(a);u$2(v.current.lastBounds,a)||f(v.current.lastBounds=a);}};return [e,p?s$1.debounce(e,p):e,d?s$1.debounce(e,d):e]}),[f,d,p]),b=w[0],m=w[1],h=w[2];function removeListeners(){if(v.current.scrollContainers){v.current.scrollContainers.forEach((function(e){return e.removeEventListener("scroll",h,true)}));v.current.scrollContainers=null;}if(v.current.resizeObserver){v.current.resizeObserver.disconnect();v.current.resizeObserver=null;}}function addListeners(){if(v.current.element){v.current.resizeObserver=new c(h);v.current.resizeObserver.observe(v.current.element);n&&v.current.scrollContainers&&v.current.scrollContainers.forEach((function(e){return e.addEventListener("scroll",h,{capture:true,passive:true})}));}}var O=function ref(e){if(e&&e!==v.current.element){removeListeners();v.current.element=e;v.current.scrollContainers=findScrollContainers(e);addListeners();}};useOnWindowScroll(h,Boolean(n));useOnWindowResize(m);o$3.useEffect((function(){removeListeners();addListeners();}),[n,h,m]);o$3.useEffect((function(){return removeListeners}),[]);return [O,a,b]}function useOnWindowResize(e){o$3.useEffect((function(){var r=e;window.addEventListener("resize",r);return function(){window.removeEventListener("resize",r);}}),[e]);}function useOnWindowScroll(e,r){o$3.useEffect((function(){if(r){var t=e;window.addEventListener("scroll",t,{capture:true,passive:true});return function(){window.removeEventListener("scroll",t,true);}}}),[e,r]);}function findScrollContainers(e){var r=[];if(!e||e===document.body)return r;var t=window.getComputedStyle(e),n=t.overflow,o=t.overflowX,s=t.overflowY;[n,o,s].some((function(e){return "auto"===e||"scroll"===e}))&&r.push(e);return [].concat(r,findScrollContainers(e.parentElement))}var i$2=["x","y","top","bottom","left","right","width","height"];var u$2=function areBoundsEqual(e,r){return i$2.every((function(t){return e[t]===r[t]}))};Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(n$6,"exports").writable&&(n$6.exports=useMeasure);n$6.exports=useMeasure;var c$2=n$6.exports;
var e$9="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t$8={};(function(e,r){r(t$8);})(t$8,(function(t){var r=[];var hasActiveObservations=function(){return r.some((function(e){return e.activeTargets.length>0}))};var hasSkippedObservations=function(){return r.some((function(e){return e.skippedTargets.length>0}))};var n="ResizeObserver loop completed with undelivered notifications.";var deliverResizeLoopError=function(){var e;if("function"===typeof ErrorEvent)e=new ErrorEvent("error",{message:n});else {e=document.createEvent("Event");e.initEvent("error",false,false);e.message=n;}window.dispatchEvent(e);};var i;(function(e){e["BORDER_BOX"]="border-box";e["CONTENT_BOX"]="content-box";e["DEVICE_PIXEL_CONTENT_BOX"]="device-pixel-content-box";})(i||(i={}));var o=function(){function DOMRectReadOnly(t,r,n,i){(this||e$9).x=t;(this||e$9).y=r;(this||e$9).width=n;(this||e$9).height=i;(this||e$9).top=(this||e$9).y;(this||e$9).left=(this||e$9).x;(this||e$9).bottom=(this||e$9).top+(this||e$9).height;(this||e$9).right=(this||e$9).left+(this||e$9).width;return Object.freeze(this||e$9)}DOMRectReadOnly.prototype.toJSON=function(){var t=this||e$9,r=t.x,n=t.y,i=t.top,o=t.right,s=t.bottom,a=t.left,v=t.width,c=t.height;return {x:r,y:n,top:i,right:o,bottom:s,left:a,width:v,height:c}};DOMRectReadOnly.fromRect=function(e){return new DOMRectReadOnly(e.x,e.y,e.width,e.height)};return DOMRectReadOnly}();var isSVG=function(e){return e instanceof SVGElement&&"getBBox"in e};var isHidden=function(e){if(isSVG(e)){var t=e.getBBox(),r=t.width,n=t.height;return !r&&!n}var i=e,o=i.offsetWidth,s=i.offsetHeight;return !(o||s||e.getClientRects().length)};var isElement=function(e){var t,r;var n=null===(r=null===(t=e)||void 0===t?void 0:t.ownerDocument)||void 0===r?void 0:r.defaultView;return !!(n&&e instanceof n.Element)};var isReplacedElement=function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return true}return false};var s="undefined"!==typeof window?window:{};var a=new WeakMap;var v=/auto|scroll/;var c=/^tb|vertical/;var u=/msie|trident/i.test(s.navigator&&s.navigator.userAgent);var parseDimension=function(e){return parseFloat(e||"0")};var size=function(e,t,r){void 0===e&&(e=0);void 0===t&&(t=0);void 0===r&&(r=false);return Object.freeze({inlineSize:(r?t:e)||0,blockSize:(r?e:t)||0})};var f=Object.freeze({devicePixelContentBoxSize:size(),borderBoxSize:size(),contentBoxSize:size(),contentRect:new o(0,0,0,0)});var calculateBoxSizes=function(e,t){void 0===t&&(t=false);if(a.has(e)&&!t)return a.get(e);if(isHidden(e)){a.set(e,f);return f}var r=getComputedStyle(e);var n=isSVG(e)&&e.ownerSVGElement&&e.getBBox();var i=!u&&"border-box"===r.boxSizing;var s=c.test(r.writingMode||"");var l=!n&&v.test(r.overflowY||"");var h=!n&&v.test(r.overflowX||"");var d=n?0:parseDimension(r.paddingTop);var b=n?0:parseDimension(r.paddingRight);var p=n?0:parseDimension(r.paddingBottom);var g=n?0:parseDimension(r.paddingLeft);var O=n?0:parseDimension(r.borderTopWidth);var z=n?0:parseDimension(r.borderRightWidth);var R=n?0:parseDimension(r.borderBottomWidth);var y=n?0:parseDimension(r.borderLeftWidth);var w=g+b;var E=d+p;var x=y+z;var T=O+R;var S=h?e.offsetHeight-T-e.clientHeight:0;var m=l?e.offsetWidth-x-e.clientWidth:0;var B=i?w+x:0;var C=i?E+T:0;var D=n?n.width:parseDimension(r.width)-B-m;var k=n?n.height:parseDimension(r.height)-C-S;var M=D+w+m+x;var N=k+E+S+T;var _=Object.freeze({devicePixelContentBoxSize:size(Math.round(D*devicePixelRatio),Math.round(k*devicePixelRatio),s),borderBoxSize:size(M,N,s),contentBoxSize:size(D,k,s),contentRect:new o(g,d,D,k)});a.set(e,_);return _};var calculateBoxSize=function(e,t,r){var n=calculateBoxSizes(e,r),o=n.borderBoxSize,s=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(t){case i.DEVICE_PIXEL_CONTENT_BOX:return a;case i.BORDER_BOX:return o;default:return s}};var l=function(){function ResizeObserverEntry(t){var r=calculateBoxSizes(t);(this||e$9).target=t;(this||e$9).contentRect=r.contentRect;(this||e$9).borderBoxSize=[r.borderBoxSize];(this||e$9).contentBoxSize=[r.contentBoxSize];(this||e$9).devicePixelContentBoxSize=[r.devicePixelContentBoxSize];}return ResizeObserverEntry}();var calculateDepthForNode=function(e){if(isHidden(e))return Infinity;var t=0;var r=e.parentNode;while(r){t+=1;r=r.parentNode;}return t};var broadcastActiveObservations=function(){var e=Infinity;var t=[];r.forEach((function processObserver(r){if(0!==r.activeTargets.length){var n=[];r.activeTargets.forEach((function processTarget(t){var r=new l(t.target);var i=calculateDepthForNode(t.target);n.push(r);t.lastReportedSize=calculateBoxSize(t.target,t.observedBox);i<e&&(e=i);}));t.push((function resizeObserverCallback(){r.callback.call(r.observer,n,r.observer);}));r.activeTargets.splice(0,r.activeTargets.length);}}));for(var n=0,i=t;n<i.length;n++){var o=i[n];o();}return e};var gatherActiveObservationsAtDepth=function(e){r.forEach((function processObserver(t){t.activeTargets.splice(0,t.activeTargets.length);t.skippedTargets.splice(0,t.skippedTargets.length);t.observationTargets.forEach((function processTarget(r){r.isActive()&&(calculateDepthForNode(r.target)>e?t.activeTargets.push(r):t.skippedTargets.push(r));}));}));};var process=function(){var e=0;gatherActiveObservationsAtDepth(e);while(hasActiveObservations()){e=broadcastActiveObservations();gatherActiveObservationsAtDepth(e);}hasSkippedObservations()&&deliverResizeLoopError();return e>0};var h;var d=[];var notify=function(){return d.splice(0).forEach((function(e){return e()}))};var queueMicroTask=function(e){if(!h){var t=0;var r=document.createTextNode("");var n={characterData:true};new MutationObserver((function(){return notify()})).observe(r,n);h=function(){r.textContent=""+(t?t--:t++);};}d.push(e);h();};var queueResizeObserver=function(e){queueMicroTask((function ResizeObserver(){requestAnimationFrame(e);}));};var b=0;var isWatching=function(){return !!b};var p=250;var g={attributes:true,characterData:true,childList:true,subtree:true};var O=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"];var time=function(e){void 0===e&&(e=0);return Date.now()+e};var z=false;var R=function(){function Scheduler(){var t=this||e$9;(this||e$9).stopped=true;(this||e$9).listener=function(){return t.schedule()};}Scheduler.prototype.run=function(t){var r=this||e$9;void 0===t&&(t=p);if(!z){z=true;var n=time(t);queueResizeObserver((function(){var e=false;try{e=process();}finally{z=false;t=n-time();if(!isWatching())return;e?r.run(1e3):t>0?r.run(t):r.start();}}));}};Scheduler.prototype.schedule=function(){this.stop();this.run();};Scheduler.prototype.observe=function(){var t=this||e$9;var cb=function(){return t.observer&&t.observer.observe(document.body,g)};document.body?cb():s.addEventListener("DOMContentLoaded",cb);};Scheduler.prototype.start=function(){var t=this||e$9;if((this||e$9).stopped){(this||e$9).stopped=false;(this||e$9).observer=new MutationObserver((this||e$9).listener);this.observe();O.forEach((function(e){return s.addEventListener(e,t.listener,true)}));}};Scheduler.prototype.stop=function(){var t=this||e$9;if(!(this||e$9).stopped){(this||e$9).observer&&(this||e$9).observer.disconnect();O.forEach((function(e){return s.removeEventListener(e,t.listener,true)}));(this||e$9).stopped=true;}};return Scheduler}();var y=new R;var updateCount=function(e){!b&&e>0&&y.start();b+=e;!b&&y.stop();};var skipNotifyOnElement=function(e){return !isSVG(e)&&!isReplacedElement(e)&&"inline"===getComputedStyle(e).display};var w=function(){function ResizeObservation(t,r){(this||e$9).target=t;(this||e$9).observedBox=r||i.CONTENT_BOX;(this||e$9).lastReportedSize={inlineSize:0,blockSize:0};}ResizeObservation.prototype.isActive=function(){var t=calculateBoxSize((this||e$9).target,(this||e$9).observedBox,true);skipNotifyOnElement((this||e$9).target)&&((this||e$9).lastReportedSize=t);return (this||e$9).lastReportedSize.inlineSize!==t.inlineSize||(this||e$9).lastReportedSize.blockSize!==t.blockSize};return ResizeObservation}();var E=function(){function ResizeObserverDetail(t,r){(this||e$9).activeTargets=[];(this||e$9).skippedTargets=[];(this||e$9).observationTargets=[];(this||e$9).observer=t;(this||e$9).callback=r;}return ResizeObserverDetail}();var x=new WeakMap;var getObservationIndex=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return -1};var T=function(){function ResizeObserverController(){}ResizeObserverController.connect=function(e,t){var r=new E(e,t);x.set(e,r);};ResizeObserverController.observe=function(e,t,n){var i=x.get(e);var o=0===i.observationTargets.length;if(getObservationIndex(i.observationTargets,t)<0){o&&r.push(i);i.observationTargets.push(new w(t,n&&n.box));updateCount(1);y.schedule();}};ResizeObserverController.unobserve=function(e,t){var n=x.get(e);var i=getObservationIndex(n.observationTargets,t);var o=1===n.observationTargets.length;if(i>=0){o&&r.splice(r.indexOf(n),1);n.observationTargets.splice(i,1);updateCount(-1);}};ResizeObserverController.disconnect=function(t){var r=this||e$9;var n=x.get(t);n.observationTargets.slice().forEach((function(e){return r.unobserve(t,e.target)}));n.activeTargets.splice(0,n.activeTargets.length);};return ResizeObserverController}();var S=function(){function ResizeObserver(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!==typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");T.connect(this||e$9,t);}ResizeObserver.prototype.observe=function(t,r){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");T.observe(this||e$9,t,r);};ResizeObserver.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");T.unobserve(this||e$9,t);};ResizeObserver.prototype.disconnect=function(){T.disconnect(this||e$9);};ResizeObserver.toString=function(){return "function ResizeObserver () { [polyfill code] }"};return ResizeObserver}();t.ResizeObserver=S;t.ResizeObserverEntry=l;Object.defineProperty(t,"__esModule",{value:true});}));var e$a={};Object.defineProperty(e$a,"__esModule",{value:true});function mergeRefs(e){return function(t){e.forEach((function(e){"function"===typeof e?e(t):null!=e&&(e.current=t);}));}}e$a.default=mergeRefs;var E$1={};Object.defineProperty(E$1,"__esModule",{value:true});var S=n$3;var _=r$2;var N=u$1;var M=t;var j=React;var O=a;var L=e$2;var D=n$1;var U=t$3;var W=c$2;var V=t$8;var $=e$a;function _interopDefaultLegacy(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}function _interopNamespace(t){if(t&&t.__esModule)return t;var i=Object.create(null);t&&Object.keys(t).forEach((function(a){if("default"!==a){var u=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(i,a,u.get?u:{enumerable:true,get:function(){return t[a]}});}}));i["default"]=t;return Object.freeze(i)}var G=_interopDefaultLegacy(S);var K=_interopDefaultLegacy(_);var X=_interopDefaultLegacy(N);var Y=_interopNamespace(M);var J=_interopDefaultLegacy(j);var te=_interopDefaultLegacy(O);var ae=_interopDefaultLegacy(L);var ue=_interopDefaultLegacy(W);var se=_interopDefaultLegacy($);function createCommonjsModule(t,i,a){return a={path:i,exports:{},require:function(t,i){return commonjsRequire(t,void 0===i||null===i?a.path:i)}},t(a,a.exports),a.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var me=createCommonjsModule((function(t){
/** @license React v0.25.1
   * react-reconciler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */
t.exports=function $$$reconciler(i){var a=te["default"],u=J["default"],o=ae["default"];function n(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return "Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;s.hasOwnProperty("ReactCurrentDispatcher")||(s.ReactCurrentDispatcher={current:null});s.hasOwnProperty("ReactCurrentBatchConfig")||(s.ReactCurrentBatchConfig={suspense:null});var p="function"===typeof Symbol&&Symbol.for,m=p?Symbol.for("react.element"):60103,v=p?Symbol.for("react.portal"):60106,y=p?Symbol.for("react.fragment"):60107,x=p?Symbol.for("react.strict_mode"):60108,T=p?Symbol.for("react.profiler"):60114,E=p?Symbol.for("react.provider"):60109,S=p?Symbol.for("react.context"):60110,_=p?Symbol.for("react.concurrent_mode"):60111,N=p?Symbol.for("react.forward_ref"):60112,M=p?Symbol.for("react.suspense"):60113,j=p?Symbol.for("react.suspense_list"):60120,O=p?Symbol.for("react.memo"):60115,L=p?Symbol.for("react.lazy"):60116,D=p?Symbol.for("react.block"):60121,U="function"===typeof Symbol&&Symbol.iterator;function sa(t){if(null===t||"object"!==typeof t)return null;t=U&&t[U]||t["@@iterator"];return "function"===typeof t?t:null}function ta(t){if(-1===t._status){t._status=0;var i=t._ctor;i=i();t._result=i;i.then((function(i){0===t._status&&(i=i.default,t._status=1,t._result=i);}),(function(i){0===t._status&&(t._status=2,t._result=i);}));}}function ua(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case y:return "Fragment";case v:return "Portal";case T:return "Profiler";case x:return "StrictMode";case M:return "Suspense";case j:return "SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case S:return "Context.Consumer";case E:return "Context.Provider";case N:var i=t.render;i=i.displayName||i.name||"";return t.displayName||(""!==i?"ForwardRef("+i+")":"ForwardRef");case O:return ua(t.type);case D:return ua(t.render);case L:if(t=1===t._status?t._result:null)return ua(t)}return null}function va(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else {t=i;do{i=t,0!==(1026&i.effectTag)&&(a=i.return),t=i.return;}while(t)}return 3===i.tag?a:null}function wa(t){if(va(t)!==t)throw Error(n(188))}function xa(t){var i=t.alternate;if(!i){i=va(t);if(null===i)throw Error(n(188));return i!==t?null:t}for(var a=t,u=i;;){var o=a.return;if(null===o)break;var s=o.alternate;if(null===s){u=o.return;if(null!==u){a=u;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===a)return wa(o),t;if(s===u)return wa(o),i;s=s.sibling;}throw Error(n(188))}if(a.return!==u.return)a=o,u=s;else {for(var p=!1,m=o.child;m;){if(m===a){p=!0;a=o;u=s;break}if(m===u){p=!0;u=o;a=s;break}m=m.sibling;}if(!p){for(m=s.child;m;){if(m===a){p=!0;a=s;u=o;break}if(m===u){p=!0;u=s;a=o;break}m=m.sibling;}if(!p)throw Error(n(189))}}if(a.alternate!==u)throw Error(n(190))}if(3!==a.tag)throw Error(n(188));return a.stateNode.current===a?t:i}function ya(t){t=xa(t);if(!t)return null;for(var i=t;;){if(5===i.tag||6===i.tag)return i;if(i.child)i.child.return=i,i=i.child;else {if(i===t)break;for(;!i.sibling;){if(!i.return||i.return===t)return null;i=i.return;}i.sibling.return=i.return;i=i.sibling;}}return null}function za(t){t=xa(t);if(!t)return null;for(var i=t;;){if(5===i.tag||6===i.tag)return i;if(i.child&&4!==i.tag)i.child.return=i,i=i.child;else {if(i===t)break;for(;!i.sibling;){if(!i.return||i.return===t)return null;i=i.return;}i.sibling.return=i.return;i=i.sibling;}}return null}var W=i.getPublicInstance,V=i.getRootHostContext,$=i.getChildHostContext,G=i.prepareForCommit,K=i.resetAfterCommit,X=i.createInstance,Y=i.appendInitialChild,ue=i.finalizeInitialChildren,se=i.prepareUpdate,me=i.shouldSetTextContent,ve=i.shouldDeprioritizeSubtree,Ce=i.createTextInstance,ke=i.setTimeout,_e=i.clearTimeout,ze=i.noTimeout,Re=i.isPrimaryRenderer,Ae=i.supportsMutation,He=i.supportsPersistence,Be=i.supportsHydration,et=i.appendChild,tt=i.appendChildToContainer,nt=i.commitTextUpdate,rt=i.commitMount,it=i.commitUpdate,at=i.insertBefore,lt=i.insertInContainerBefore,ut=i.removeChild,ot=i.removeChildFromContainer,ct=i.resetTextContent,ft=i.hideInstance,st=i.hideTextInstance,dt=i.unhideInstance,pt=i.unhideTextInstance,mt=i.cloneInstance,ht=i.createContainerChildSet,vt=i.appendChildToContainerChildSet,gt=i.finalizeContainerChildren,bt=i.replaceContainerChildren,yt=i.cloneHiddenInstance,xt=i.cloneHiddenTextInstance,Tt=i.canHydrateInstance,Et=i.canHydrateTextInstance,Ct=i.isSuspenseInstancePending,kt=i.isSuspenseInstanceFallback,St=i.getNextHydratableSibling,wt=i.getFirstHydratableChild,_t=i.hydrateInstance,Pt=i.hydrateTextInstance,zt=i.getNextHydratableInstanceAfterSuspenseInstance,Nt=i.commitHydratedContainer,It=i.commitHydratedSuspenseInstance,Rt=/^(.*)[\\\/]/;function zb(t){var i="";do{e:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var a="";break e;default:var u=t._debugOwner,o=t._debugSource,s=ua(t.type);a=null;u&&(a=ua(u.type));u=s;s="";o?s=" (at "+o.fileName.replace(Rt,"")+":"+o.lineNumber+")":a&&(s=" (created by "+a+")");a="\n    in "+(u||"Unknown")+s;}i+=a;t=t.return;}while(t);return i}var Mt=[],jt=-1;function B(t){0>jt||(t.current=Mt[jt],Mt[jt]=null,jt--);}function C(t,i){jt++;Mt[jt]=t.current;t.current=i;}var Ot={},Ft={current:Ot},Lt={current:!1},At=Ot;function Eb(t,i){var a=t.type.contextTypes;if(!a)return Ot;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in a)o[s]=i[s];u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o);return o}function F(t){t=t.childContextTypes;return null!==t&&void 0!==t}function Fb(){B(Lt);B(Ft);}function Gb(t,i,a){if(Ft.current!==Ot)throw Error(n(168));C(Ft,i);C(Lt,a);}function Hb(t,i,u){var o=t.stateNode;t=i.childContextTypes;if("function"!==typeof o.getChildContext)return u;o=o.getChildContext();for(var s in o)if(!(s in t))throw Error(n(108,ua(i)||"Unknown",s));return a({},u,{},o)}function Ib(t){t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ot;At=Ft.current;C(Ft,t);C(Lt,Lt.current);return !0}function Jb(t,i,a){var u=t.stateNode;if(!u)throw Error(n(169));a?(t=Hb(t,i,At),u.__reactInternalMemoizedMergedChildContext=t,B(Lt),B(Ft),C(Ft,t)):B(Lt);C(Lt,a);}var Dt=o.unstable_runWithPriority,Ut=o.unstable_scheduleCallback,Ht=o.unstable_cancelCallback,Bt=o.unstable_requestPaint,Qt=o.unstable_now,Wt=o.unstable_getCurrentPriorityLevel,Vt=o.unstable_ImmediatePriority,$t=o.unstable_UserBlockingPriority,qt=o.unstable_NormalPriority,Gt=o.unstable_LowPriority,Kt=o.unstable_IdlePriority,Zt={},Xt=o.unstable_shouldYield,Yt=void 0!==Bt?Bt:function(){},Jt=null,en=null,tn=!1,nn=Qt(),rn=1e4>nn?Qt:function(){return Qt()-nn};function bc(){switch(Wt()){case Vt:return 99;case $t:return 98;case qt:return 97;case Gt:return 96;case Kt:return 95;default:throw Error(n(332))}}function cc(t){switch(t){case 99:return Vt;case 98:return $t;case 97:return qt;case 96:return Gt;case 95:return Kt;default:throw Error(n(332))}}function dc(t,i){t=cc(t);return Dt(t,i)}function ec(t,i,a){t=cc(t);return Ut(t,i,a)}function fc(t){null===Jt?(Jt=[t],en=Ut(Vt,gc)):Jt.push(t);return Zt}function H(){if(null!==en){var t=en;en=null;Ht(t);}gc();}function gc(){if(!tn&&null!==Jt){tn=!0;var t=0;try{var i=Jt;dc(99,(function(){for(;t<i.length;t++){var a=i[t];do{a=a(!0);}while(null!==a)}}));Jt=null;}catch(i){throw null!==Jt&&(Jt=Jt.slice(t+1)),Ut(Vt,H),i}finally{tn=!1;}}}function hc(t,i,a){a/=10;return 1073741821-(((1073741821-t+i/10)/a|0)+1)*a}function ic(t,i){return t===i&&(0!==t||1/t===1/i)||t!==t&&i!==i}var an="function"===typeof Object.is?Object.is:ic,ln=Object.prototype.hasOwnProperty;function lc(t,i){if(an(t,i))return !0;if("object"!==typeof t||null===t||"object"!==typeof i||null===i)return !1;var a=Object.keys(t),u=Object.keys(i);if(a.length!==u.length)return !1;for(u=0;u<a.length;u++)if(!ln.call(i,a[u])||!an(t[a[u]],i[a[u]]))return !1;return !0}function mc(t,i){if(t&&t.defaultProps){i=a({},i);t=t.defaultProps;for(var u in t)void 0===i[u]&&(i[u]=t[u]);}return i}var un={current:null},on=null,cn=null,sn=null;function rc(){sn=cn=on=null;}function sc(t,i){t=t.type._context;Re?(C(un,t._currentValue),t._currentValue=i):(C(un,t._currentValue2),t._currentValue2=i);}function tc(t){var i=un.current;B(un);t=t.type._context;Re?t._currentValue=i:t._currentValue2=i;}function uc(t,i){for(;null!==t;){var a=t.alternate;if(t.childExpirationTime<i)t.childExpirationTime=i,null!==a&&a.childExpirationTime<i&&(a.childExpirationTime=i);else {if(!(null!==a&&a.childExpirationTime<i))break;a.childExpirationTime=i;}t=t.return;}}function vc(t,i){on=t;sn=cn=null;t=t.dependencies;null!==t&&null!==t.firstContext&&(t.expirationTime>=i&&(Dn=!0),t.firstContext=null);}function I(t,i){if(sn!==t&&!1!==i&&0!==i){"number"===typeof i&&1073741823!==i||(sn=t,i=1073741823);i={context:t,observedBits:i,next:null};if(null===cn){if(null===on)throw Error(n(308));cn=i;on.dependencies={expirationTime:0,firstContext:i,responders:null};}else cn=cn.next=i;}return Re?t._currentValue:t._currentValue2}var dn=!1;function yc(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null};}function zc(t,i){t=t.updateQueue;i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects});}function Ac(t,i){t={expirationTime:t,suspenseConfig:i,tag:0,payload:null,callback:null,next:null};return t.next=t}function Bc(t,i){t=t.updateQueue;if(null!==t){t=t.shared;var a=t.pending;null===a?i.next=i:(i.next=a.next,a.next=i);t.pending=i;}}function Cc(t,i){var a=t.alternate;null!==a&&zc(a,t);t=t.updateQueue;a=t.baseQueue;null===a?(t.baseQueue=i.next=i,i.next=i):(i.next=a.next,a.next=i);}function Dc(t,i,u,o){var s=t.updateQueue;dn=!1;var p=s.baseQueue,m=s.shared.pending;if(null!==m){if(null!==p){var v=p.next;p.next=m.next;m.next=v;}p=m;s.shared.pending=null;v=t.alternate;null!==v&&(v=v.updateQueue,null!==v&&(v.baseQueue=m));}if(null!==p){v=p.next;var y=s.baseState,x=0,T=null,E=null,S=null;if(null!==v){var _=v;do{m=_.expirationTime;if(m<o){var N={expirationTime:_.expirationTime,suspenseConfig:_.suspenseConfig,tag:_.tag,payload:_.payload,callback:_.callback,next:null};null===S?(E=S=N,T=y):S=S.next=N;m>x&&(x=m);}else {null!==S&&(S=S.next={expirationTime:1073741823,suspenseConfig:_.suspenseConfig,tag:_.tag,payload:_.payload,callback:_.callback,next:null});Ec(m,_.suspenseConfig);e:{var M=t,j=_;m=i;N=u;switch(j.tag){case 1:M=j.payload;if("function"===typeof M){y=M.call(N,y,m);break e}y=M;break e;case 3:M.effectTag=-4097&M.effectTag|64;case 0:M=j.payload;m="function"===typeof M?M.call(N,y,m):M;if(null===m||void 0===m)break e;y=a({},y,m);break e;case 2:dn=!0;}}null!==_.callback&&(t.effectTag|=32,m=s.effects,null===m?s.effects=[_]:m.push(_));}_=_.next;if(null===_||_===v){if(m=s.shared.pending,null===m)break;_=p.next=m.next,m.next=v,s.baseQueue=p=m,s.shared.pending=null;}}while(1)}null===S?T=y:S.next=E;s.baseState=T;s.baseQueue=S;Gc(x);t.expirationTime=x;t.memoizedState=y;}}function Hc(t,i,a){t=i.effects;i.effects=null;if(null!==t)for(i=0;i<t.length;i++){var u=t[i],o=u.callback;if(null!==o){u.callback=null;u=o;o=a;if("function"!==typeof u)throw Error(n(191,u));u.call(o);}}}var pn=s.ReactCurrentBatchConfig,mn=(new u.Component).refs;function Kc(t,i,u,o){i=t.memoizedState;u=u(o,i);u=null===u||void 0===u?i:a({},i,u);t.memoizedState=u;0===t.expirationTime&&(t.updateQueue.baseState=u);}var hn={isMounted:function(t){return !!(t=t._reactInternalFiber)&&va(t)===t},enqueueSetState:function(t,i,a){t=t._reactInternalFiber;var u=Lc(),o=pn.suspense;u=Mc(u,t,o);o=Ac(u,o);o.payload=i;void 0!==a&&null!==a&&(o.callback=a);Bc(t,o);Nc(t,u);},enqueueReplaceState:function(t,i,a){t=t._reactInternalFiber;var u=Lc(),o=pn.suspense;u=Mc(u,t,o);o=Ac(u,o);o.tag=1;o.payload=i;void 0!==a&&null!==a&&(o.callback=a);Bc(t,o);Nc(t,u);},enqueueForceUpdate:function(t,i){t=t._reactInternalFiber;var a=Lc(),u=pn.suspense;a=Mc(a,t,u);u=Ac(a,u);u.tag=2;void 0!==i&&null!==i&&(u.callback=i);Bc(t,u);Nc(t,a);}};function Pc(t,i,a,u,o,s,p){t=t.stateNode;return "function"===typeof t.shouldComponentUpdate?t.shouldComponentUpdate(u,s,p):!i.prototype||!i.prototype.isPureReactComponent||(!lc(a,u)||!lc(o,s))}function Qc(t,i,a){var u=!1,o=Ot;var s=i.contextType;"object"===typeof s&&null!==s?s=I(s):(o=F(i)?At:Ft.current,u=i.contextTypes,s=(u=null!==u&&void 0!==u)?Eb(t,o):Ot);i=new i(a,s);t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;i.updater=hn;t.stateNode=i;i._reactInternalFiber=t;u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s);return i}function Rc(t,i,a,u){t=i.state;"function"===typeof i.componentWillReceiveProps&&i.componentWillReceiveProps(a,u);"function"===typeof i.UNSAFE_componentWillReceiveProps&&i.UNSAFE_componentWillReceiveProps(a,u);i.state!==t&&hn.enqueueReplaceState(i,i.state,null);}function Sc(t,i,a,u){var o=t.stateNode;o.props=a;o.state=t.memoizedState;o.refs=mn;yc(t);var s=i.contextType;"object"===typeof s&&null!==s?o.context=I(s):(s=F(i)?At:Ft.current,o.context=Eb(t,s));Dc(t,a,o,u);o.state=t.memoizedState;s=i.getDerivedStateFromProps;"function"===typeof s&&(Kc(t,i,s,a),o.state=t.memoizedState);"function"===typeof i.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(i=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),i!==o.state&&hn.enqueueReplaceState(o,o.state,null),Dc(t,a,o,u),o.state=t.memoizedState);"function"===typeof o.componentDidMount&&(t.effectTag|=4);}var vn=Array.isArray;function Uc(t,i,a){t=a.ref;if(null!==t&&"function"!==typeof t&&"object"!==typeof t){if(a._owner){a=a._owner;if(a){if(1!==a.tag)throw Error(n(309));var u=a.stateNode;}if(!u)throw Error(n(147,t));var o=""+t;if(null!==i&&null!==i.ref&&"function"===typeof i.ref&&i.ref._stringRef===o)return i.ref;i=function(t){var i=u.refs;i===mn&&(i=u.refs={});null===t?delete i[o]:i[o]=t;};i._stringRef=o;return i}if("string"!==typeof t)throw Error(n(284));if(!a._owner)throw Error(n(290,t))}return t}function Vc(t,i){if("textarea"!==t.type)throw Error(n(31,"[object Object]"===Object.prototype.toString.call(i)?"object with keys {"+Object.keys(i).join(", ")+"}":i,""))}function Wc(t){function b(i,a){if(t){var u=i.lastEffect;null!==u?(u.nextEffect=a,i.lastEffect=a):i.firstEffect=i.lastEffect=a;a.nextEffect=null;a.effectTag=8;}}function c(i,a){if(!t)return null;for(;null!==a;)b(i,a),a=a.sibling;return null}function d(t,i){for(t=new Map;null!==i;)null!==i.key?t.set(i.key,i):t.set(i.index,i),i=i.sibling;return t}function e(t,i){t=Xc(t,i);t.index=0;t.sibling=null;return t}function f(i,a,u){i.index=u;if(!t)return a;u=i.alternate;if(null!==u)return u=u.index,u<a?(i.effectTag=2,a):u;i.effectTag=2;return a}function g(i){t&&null===i.alternate&&(i.effectTag=2);return i}function h(t,i,a,u){if(null===i||6!==i.tag)return i=Yc(a,t.mode,u),i.return=t,i;i=e(i,a);i.return=t;return i}function k(t,i,a,u){if(null!==i&&i.elementType===a.type)return u=e(i,a.props),u.ref=Uc(t,i,a),u.return=t,u;u=Zc(a.type,a.key,a.props,null,t.mode,u);u.ref=Uc(t,i,a);u.return=t;return u}function l(t,i,a,u){if(null===i||4!==i.tag||i.stateNode.containerInfo!==a.containerInfo||i.stateNode.implementation!==a.implementation)return i=$c(a,t.mode,u),i.return=t,i;i=e(i,a.children||[]);i.return=t;return i}function q(t,i,a,u,o){if(null===i||7!==i.tag)return i=ad(a,t.mode,u,o),i.return=t,i;i=e(i,a);i.return=t;return i}function r(t,i,a){if("string"===typeof i||"number"===typeof i)return i=Yc(""+i,t.mode,a),i.return=t,i;if("object"===typeof i&&null!==i){switch(i.$$typeof){case m:return a=Zc(i.type,i.key,i.props,null,t.mode,a),a.ref=Uc(t,null,i),a.return=t,a;case v:return i=$c(i,t.mode,a),i.return=t,i}if(vn(i)||sa(i))return i=ad(i,t.mode,a,null),i.return=t,i;Vc(t,i);}return null}function w(t,i,a,u){var o=null!==i?i.key:null;if("string"===typeof a||"number"===typeof a)return null!==o?null:h(t,i,""+a,u);if("object"===typeof a&&null!==a){switch(a.$$typeof){case m:return a.key===o?a.type===y?q(t,i,a.props.children,u,o):k(t,i,a,u):null;case v:return a.key===o?l(t,i,a,u):null}if(vn(a)||sa(a))return null!==o?null:q(t,i,a,u,null);Vc(t,a);}return null}function z(t,i,a,u,o){if("string"===typeof u||"number"===typeof u)return t=t.get(a)||null,h(i,t,""+u,o);if("object"===typeof u&&null!==u){switch(u.$$typeof){case m:return t=t.get(null===u.key?a:u.key)||null,u.type===y?q(i,t,u.props.children,o,u.key):k(i,t,u,o);case v:return t=t.get(null===u.key?a:u.key)||null,l(i,t,u,o)}if(vn(u)||sa(u))return t=t.get(a)||null,q(i,t,u,o,null);Vc(i,u);}return null}function Q(i,a,u,o){for(var s=null,p=null,m=a,v=a=0,y=null;null!==m&&v<u.length;v++){m.index>v?(y=m,m=null):y=m.sibling;var x=w(i,m,u[v],o);if(null===x){null===m&&(m=y);break}t&&m&&null===x.alternate&&b(i,m);a=f(x,a,v);null===p?s=x:p.sibling=x;p=x;m=y;}if(v===u.length)return c(i,m),s;if(null===m){for(;v<u.length;v++)m=r(i,u[v],o),null!==m&&(a=f(m,a,v),null===p?s=m:p.sibling=m,p=m);return s}for(m=d(i,m);v<u.length;v++)y=z(m,i,v,u[v],o),null!==y&&(t&&null!==y.alternate&&m.delete(null===y.key?v:y.key),a=f(y,a,v),null===p?s=y:p.sibling=y,p=y);t&&m.forEach((function(t){return b(i,t)}));return s}function A(i,a,u,o){var s=sa(u);if("function"!==typeof s)throw Error(n(150));u=s.call(u);if(null==u)throw Error(n(151));for(var p=s=null,m=a,v=a=0,y=null,x=u.next();null!==m&&!x.done;v++,x=u.next()){m.index>v?(y=m,m=null):y=m.sibling;var T=w(i,m,x.value,o);if(null===T){null===m&&(m=y);break}t&&m&&null===T.alternate&&b(i,m);a=f(T,a,v);null===p?s=T:p.sibling=T;p=T;m=y;}if(x.done)return c(i,m),s;if(null===m){for(;!x.done;v++,x=u.next())x=r(i,x.value,o),null!==x&&(a=f(x,a,v),null===p?s=x:p.sibling=x,p=x);return s}for(m=d(i,m);!x.done;v++,x=u.next())x=z(m,i,v,x.value,o),null!==x&&(t&&null!==x.alternate&&m.delete(null===x.key?v:x.key),a=f(x,a,v),null===p?s=x:p.sibling=x,p=x);t&&m.forEach((function(t){return b(i,t)}));return s}return function(t,i,a,u){var o="object"===typeof a&&null!==a&&a.type===y&&null===a.key;o&&(a=a.props.children);var s="object"===typeof a&&null!==a;if(s)switch(a.$$typeof){case m:e:{s=a.key;for(o=i;null!==o;){if(o.key===s){switch(o.tag){case 7:if(a.type===y){c(t,o.sibling);i=e(o,a.props.children);i.return=t;t=i;break e}break;default:if(o.elementType===a.type){c(t,o.sibling);i=e(o,a.props);i.ref=Uc(t,o,a);i.return=t;t=i;break e}}c(t,o);break}b(t,o);o=o.sibling;}a.type===y?(i=ad(a.props.children,t.mode,u,a.key),i.return=t,t=i):(u=Zc(a.type,a.key,a.props,null,t.mode,u),u.ref=Uc(t,i,a),u.return=t,t=u);}return g(t);case v:e:{for(o=a.key;null!==i;){if(i.key===o){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){c(t,i.sibling);i=e(i,a.children||[]);i.return=t;t=i;break e}c(t,i);break}b(t,i);i=i.sibling;}i=$c(a,t.mode,u);i.return=t;t=i;}return g(t)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(c(t,i.sibling),i=e(i,a),i.return=t,t=i):(c(t,i),i=Yc(a,t.mode,u),i.return=t,t=i),g(t);if(vn(a))return Q(t,i,a,u);if(sa(a))return A(t,i,a,u);s&&Vc(t,a);if("undefined"===typeof a&&!o)switch(t.tag){case 1:case 0:throw t=t.type,Error(n(152,t.displayName||t.name||"Component"))}return c(t,i)}}var gn=Wc(!0),bn=Wc(!1),yn={},xn={current:yn},Tn={current:yn},En={current:yn};function gd(t){if(t===yn)throw Error(n(174));return t}function hd(t,i){C(En,i);C(Tn,t);C(xn,yn);t=V(i);B(xn);C(xn,t);}function id(){B(xn);B(Tn);B(En);}function jd(t){var i=gd(En.current),a=gd(xn.current);i=$(a,t.type,i);a!==i&&(C(Tn,t),C(xn,i));}function kd(t){Tn.current===t&&(B(xn),B(Tn));}var Cn={current:0};function ld(t){for(var i=t;null!==i;){if(13===i.tag){var a=i.memoizedState;if(null!==a&&(a=a.dehydrated,null===a||Ct(a)||kt(a)))return i}else if(19===i.tag&&void 0!==i.memoizedProps.revealOrder){if(0!==(64&i.effectTag))return i}else if(null!==i.child){i.child.return=i;i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return null;i=i.return;}i.sibling.return=i.return;i=i.sibling;}return null}function md(t,i){return {responder:t,props:i}}var kn=s.ReactCurrentDispatcher,Sn=s.ReactCurrentBatchConfig,wn=0,_n=null,Pn=null,zn=null,Nn=!1;function P(){throw Error(n(321))}function qd(t,i){if(null===i)return !1;for(var a=0;a<i.length&&a<t.length;a++)if(!an(t[a],i[a]))return !1;return !0}function rd(t,i,a,u,o,s){wn=s;_n=i;i.memoizedState=null;i.updateQueue=null;i.expirationTime=0;kn.current=null===t||null===t.memoizedState?Rn:Mn;t=a(u,o);if(i.expirationTime===wn){s=0;do{i.expirationTime=0;if(!(25>s))throw Error(n(301));s+=1;zn=Pn=null;i.updateQueue=null;kn.current=jn;t=a(u,o);}while(i.expirationTime===wn)}kn.current=In;i=null!==Pn&&null!==Pn.next;wn=0;zn=Pn=_n=null;Nn=!1;if(i)throw Error(n(300));return t}function wd(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===zn?_n.memoizedState=zn=t:zn=zn.next=t;return zn}function xd(){if(null===Pn){var t=_n.alternate;t=null!==t?t.memoizedState:null;}else t=Pn.next;var i=null===zn?_n.memoizedState:zn.next;if(null!==i)zn=i,Pn=t;else {if(null===t)throw Error(n(310));Pn=t;t={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null};null===zn?_n.memoizedState=zn=t:zn=zn.next=t;}return zn}function yd(t,i){return "function"===typeof i?i(t):i}function zd(t){var i=xd(),a=i.queue;if(null===a)throw Error(n(311));a.lastRenderedReducer=t;var u=Pn,o=u.baseQueue,s=a.pending;if(null!==s){if(null!==o){var p=o.next;o.next=s.next;s.next=p;}u.baseQueue=o=s;a.pending=null;}if(null!==o){o=o.next;u=u.baseState;var m=p=s=null,v=o;do{var y=v.expirationTime;if(y<wn){var x={expirationTime:v.expirationTime,suspenseConfig:v.suspenseConfig,action:v.action,eagerReducer:v.eagerReducer,eagerState:v.eagerState,next:null};null===m?(p=m=x,s=u):m=m.next=x;y>_n.expirationTime&&(_n.expirationTime=y,Gc(y));}else null!==m&&(m=m.next={expirationTime:1073741823,suspenseConfig:v.suspenseConfig,action:v.action,eagerReducer:v.eagerReducer,eagerState:v.eagerState,next:null}),Ec(y,v.suspenseConfig),u=v.eagerReducer===t?v.eagerState:t(u,v.action);v=v.next;}while(null!==v&&v!==o);null===m?s=u:m.next=p;an(u,i.memoizedState)||(Dn=!0);i.memoizedState=u;i.baseState=s;i.baseQueue=m;a.lastRenderedState=u;}return [i.memoizedState,a.dispatch]}function Ad(t){var i=xd(),a=i.queue;if(null===a)throw Error(n(311));a.lastRenderedReducer=t;var u=a.dispatch,o=a.pending,s=i.memoizedState;if(null!==o){a.pending=null;var p=o=o.next;do{s=t(s,p.action),p=p.next;}while(p!==o);an(s,i.memoizedState)||(Dn=!0);i.memoizedState=s;null===i.baseQueue&&(i.baseState=s);a.lastRenderedState=s;}return [s,u]}function Bd(t){var i=wd();"function"===typeof t&&(t=t());i.memoizedState=i.baseState=t;t=i.queue={pending:null,dispatch:null,lastRenderedReducer:yd,lastRenderedState:t};t=t.dispatch=Cd.bind(null,_n,t);return [i.memoizedState,t]}function Dd(t,i,a,u){t={tag:t,create:i,destroy:a,deps:u,next:null};i=_n.updateQueue;null===i?(i={lastEffect:null},_n.updateQueue=i,i.lastEffect=t.next=t):(a=i.lastEffect,null===a?i.lastEffect=t.next=t:(u=a.next,a.next=t,t.next=u,i.lastEffect=t));return t}function Ed(){return xd().memoizedState}function Fd(t,i,a,u){var o=wd();_n.effectTag|=t;o.memoizedState=Dd(1|i,a,void 0,void 0===u?null:u);}function Gd(t,i,a,u){var o=xd();u=void 0===u?null:u;var s=void 0;if(null!==Pn){var p=Pn.memoizedState;s=p.destroy;if(null!==u&&qd(u,p.deps)){Dd(i,a,s,u);return}}_n.effectTag|=t;o.memoizedState=Dd(1|i,a,s,u);}function Hd(t,i){return Fd(516,4,t,i)}function Id(t,i){return Gd(516,4,t,i)}function Jd(t,i){return Gd(4,2,t,i)}function Kd(t,i){return "function"===typeof i?(t=t(),i(t),function(){i(null);}):null!==i&&void 0!==i?(t=t(),i.current=t,function(){i.current=null;}):void 0}function Ld(t,i,a){a=null!==a&&void 0!==a?a.concat([t]):null;return Gd(4,2,Kd.bind(null,i,t),a)}function Md(){}function Nd(t,i){wd().memoizedState=[t,void 0===i?null:i];return t}function Od(t,i){var a=xd();i=void 0===i?null:i;var u=a.memoizedState;if(null!==u&&null!==i&&qd(i,u[1]))return u[0];a.memoizedState=[t,i];return t}function Pd(t,i){var a=xd();i=void 0===i?null:i;var u=a.memoizedState;if(null!==u&&null!==i&&qd(i,u[1]))return u[0];t=t();a.memoizedState=[t,i];return t}function Qd(t,i,a){var u=bc();dc(98>u?98:u,(function(){t(!0);}));dc(97<u?97:u,(function(){var u=Sn.suspense;Sn.suspense=void 0===i?null:i;try{t(!1),a();}finally{Sn.suspense=u;}}));}function Cd(t,i,a){var u=Lc(),o=pn.suspense;u=Mc(u,t,o);o={expirationTime:u,suspenseConfig:o,action:a,eagerReducer:null,eagerState:null,next:null};var s=i.pending;null===s?o.next=o:(o.next=s.next,s.next=o);i.pending=o;s=t.alternate;if(t===_n||null!==s&&s===_n)Nn=!0,o.expirationTime=wn,_n.expirationTime=wn;else {if(0===t.expirationTime&&(null===s||0===s.expirationTime)&&(s=i.lastRenderedReducer,null!==s))try{var p=i.lastRenderedState,m=s(p,a);o.eagerReducer=s;o.eagerState=m;if(an(m,p))return}catch(t){}Nc(t,u);}}var In={readContext:I,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useResponder:P,useDeferredValue:P,useTransition:P},Rn={readContext:I,useCallback:Nd,useContext:I,useEffect:Hd,useImperativeHandle:function(t,i,a){a=null!==a&&void 0!==a?a.concat([t]):null;return Fd(4,2,Kd.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Fd(4,2,t,i)},useMemo:function(t,i){var a=wd();i=void 0===i?null:i;t=t();a.memoizedState=[t,i];return t},useReducer:function(t,i,a){var u=wd();i=void 0!==a?a(i):i;u.memoizedState=u.baseState=i;t=u.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:i};t=t.dispatch=Cd.bind(null,_n,t);return [u.memoizedState,t]},useRef:function(t){var i=wd();t={current:t};return i.memoizedState=t},useState:Bd,useDebugValue:Md,useResponder:md,useDeferredValue:function(t,i){var a=Bd(t),u=a[0],o=a[1];Hd((function(){var a=Sn.suspense;Sn.suspense=void 0===i?null:i;try{o(t);}finally{Sn.suspense=a;}}),[t,i]);return u},useTransition:function(t){var i=Bd(!1),a=i[0];i=i[1];return [Nd(Qd.bind(null,i,t),[i,t]),a]}},Mn={readContext:I,useCallback:Od,useContext:I,useEffect:Id,useImperativeHandle:Ld,useLayoutEffect:Jd,useMemo:Pd,useReducer:zd,useRef:Ed,useState:function(){return zd(yd)},useDebugValue:Md,useResponder:md,useDeferredValue:function(t,i){var a=zd(yd),u=a[0],o=a[1];Id((function(){var a=Sn.suspense;Sn.suspense=void 0===i?null:i;try{o(t);}finally{Sn.suspense=a;}}),[t,i]);return u},useTransition:function(t){var i=zd(yd),a=i[0];i=i[1];return [Od(Qd.bind(null,i,t),[i,t]),a]}},jn={readContext:I,useCallback:Od,useContext:I,useEffect:Id,useImperativeHandle:Ld,useLayoutEffect:Jd,useMemo:Pd,useReducer:Ad,useRef:Ed,useState:function(){return Ad(yd)},useDebugValue:Md,useResponder:md,useDeferredValue:function(t,i){var a=Ad(yd),u=a[0],o=a[1];Id((function(){var a=Sn.suspense;Sn.suspense=void 0===i?null:i;try{o(t);}finally{Sn.suspense=a;}}),[t,i]);return u},useTransition:function(t){var i=Ad(yd),a=i[0];i=i[1];return [Od(Qd.bind(null,i,t),[i,t]),a]}},On=null,Fn=null,Ln=!1;function Ud(t,i){var a=Vd(5,null,null,0);a.elementType="DELETED";a.type="DELETED";a.stateNode=i;a.return=t;a.effectTag=8;null!==t.lastEffect?(t.lastEffect.nextEffect=a,t.lastEffect=a):t.firstEffect=t.lastEffect=a;}function Wd(t,i){switch(t.tag){case 5:return i=Tt(i,t.type,t.pendingProps),null!==i&&(t.stateNode=i,!0);case 6:return i=Et(i,t.pendingProps),null!==i&&(t.stateNode=i,!0);case 13:return !1;default:return !1}}function Xd(t){if(Ln){var i=Fn;if(i){var a=i;if(!Wd(t,i)){i=St(a);if(!i||!Wd(t,i)){t.effectTag=-1025&t.effectTag|2;Ln=!1;On=t;return}Ud(On,a);}On=t;Fn=wt(i);}else t.effectTag=-1025&t.effectTag|2,Ln=!1,On=t;}}function Yd(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;On=t;}function Zd(t){if(!Be||t!==On)return !1;if(!Ln)return Yd(t),Ln=!0,!1;var i=t.type;if(5!==t.tag||"head"!==i&&"body"!==i&&!me(i,t.memoizedProps))for(i=Fn;i;)Ud(t,i),i=St(i);Yd(t);if(13===t.tag){if(!Be)throw Error(n(316));t=t.memoizedState;t=null!==t?t.dehydrated:null;if(!t)throw Error(n(317));Fn=zt(t);}else Fn=On?St(t.stateNode):null;return !0}function $d(){Be&&(Fn=On=null,Ln=!1);}var An=s.ReactCurrentOwner,Dn=!1;function R(t,i,a,u){i.child=null===t?bn(i,null,a,u):gn(i,t.child,a,u);}function be(t,i,a,u,o){a=a.render;var s=i.ref;vc(i,o);u=rd(t,i,a,u,s,o);if(null!==t&&!Dn)return i.updateQueue=t.updateQueue,i.effectTag&=-517,t.expirationTime<=o&&(t.expirationTime=0),ce(t,i,o);i.effectTag|=1;R(t,i,u,o);return i.child}function de(t,i,a,u,o,s){if(null===t){var p=a.type;if("function"===typeof p&&!ee(p)&&void 0===p.defaultProps&&null===a.compare&&void 0===a.defaultProps)return i.tag=15,i.type=p,fe(t,i,p,u,o,s);t=Zc(a.type,null,u,null,i.mode,s);t.ref=i.ref;t.return=i;return i.child=t}p=t.child;if(o<s&&(o=p.memoizedProps,a=a.compare,a=null!==a?a:lc,a(o,u)&&t.ref===i.ref))return ce(t,i,s);i.effectTag|=1;t=Xc(p,u);t.ref=i.ref;t.return=i;return i.child=t}function fe(t,i,a,u,o,s){return null!==t&&lc(t.memoizedProps,u)&&t.ref===i.ref&&(Dn=!1,o<s)?(i.expirationTime=t.expirationTime,ce(t,i,s)):ge(t,i,a,u,s)}function he(t,i){var a=i.ref;(null===t&&null!==a||null!==t&&t.ref!==a)&&(i.effectTag|=128);}function ge(t,i,a,u,o){var s=F(a)?At:Ft.current;s=Eb(i,s);vc(i,o);a=rd(t,i,a,u,s,o);if(null!==t&&!Dn)return i.updateQueue=t.updateQueue,i.effectTag&=-517,t.expirationTime<=o&&(t.expirationTime=0),ce(t,i,o);i.effectTag|=1;R(t,i,a,o);return i.child}function ie(t,i,a,u,o){if(F(a)){var s=!0;Ib(i);}else s=!1;vc(i,o);if(null===i.stateNode)null!==t&&(t.alternate=null,i.alternate=null,i.effectTag|=2),Qc(i,a,u),Sc(i,a,u,o),u=!0;else if(null===t){var p=i.stateNode,m=i.memoizedProps;p.props=m;var v=p.context,y=a.contextType;"object"===typeof y&&null!==y?y=I(y):(y=F(a)?At:Ft.current,y=Eb(i,y));var x=a.getDerivedStateFromProps,T="function"===typeof x||"function"===typeof p.getSnapshotBeforeUpdate;T||"function"!==typeof p.UNSAFE_componentWillReceiveProps&&"function"!==typeof p.componentWillReceiveProps||(m!==u||v!==y)&&Rc(i,p,u,y);dn=!1;var E=i.memoizedState;p.state=E;Dc(i,u,p,o);v=i.memoizedState;m!==u||E!==v||Lt.current||dn?("function"===typeof x&&(Kc(i,a,x,u),v=i.memoizedState),(m=dn||Pc(i,a,m,u,E,v,y))?(T||"function"!==typeof p.UNSAFE_componentWillMount&&"function"!==typeof p.componentWillMount||("function"===typeof p.componentWillMount&&p.componentWillMount(),"function"===typeof p.UNSAFE_componentWillMount&&p.UNSAFE_componentWillMount()),"function"===typeof p.componentDidMount&&(i.effectTag|=4)):("function"===typeof p.componentDidMount&&(i.effectTag|=4),i.memoizedProps=u,i.memoizedState=v),p.props=u,p.state=v,p.context=y,u=m):("function"===typeof p.componentDidMount&&(i.effectTag|=4),u=!1);}else p=i.stateNode,zc(t,i),m=i.memoizedProps,p.props=i.type===i.elementType?m:mc(i.type,m),v=p.context,y=a.contextType,"object"===typeof y&&null!==y?y=I(y):(y=F(a)?At:Ft.current,y=Eb(i,y)),x=a.getDerivedStateFromProps,(T="function"===typeof x||"function"===typeof p.getSnapshotBeforeUpdate)||"function"!==typeof p.UNSAFE_componentWillReceiveProps&&"function"!==typeof p.componentWillReceiveProps||(m!==u||v!==y)&&Rc(i,p,u,y),dn=!1,v=i.memoizedState,p.state=v,Dc(i,u,p,o),E=i.memoizedState,m!==u||v!==E||Lt.current||dn?("function"===typeof x&&(Kc(i,a,x,u),E=i.memoizedState),(x=dn||Pc(i,a,m,u,v,E,y))?(T||"function"!==typeof p.UNSAFE_componentWillUpdate&&"function"!==typeof p.componentWillUpdate||("function"===typeof p.componentWillUpdate&&p.componentWillUpdate(u,E,y),"function"===typeof p.UNSAFE_componentWillUpdate&&p.UNSAFE_componentWillUpdate(u,E,y)),"function"===typeof p.componentDidUpdate&&(i.effectTag|=4),"function"===typeof p.getSnapshotBeforeUpdate&&(i.effectTag|=256)):("function"!==typeof p.componentDidUpdate||m===t.memoizedProps&&v===t.memoizedState||(i.effectTag|=4),"function"!==typeof p.getSnapshotBeforeUpdate||m===t.memoizedProps&&v===t.memoizedState||(i.effectTag|=256),i.memoizedProps=u,i.memoizedState=E),p.props=u,p.state=E,p.context=y,u=x):("function"!==typeof p.componentDidUpdate||m===t.memoizedProps&&v===t.memoizedState||(i.effectTag|=4),"function"!==typeof p.getSnapshotBeforeUpdate||m===t.memoizedProps&&v===t.memoizedState||(i.effectTag|=256),u=!1);return je(t,i,a,u,s,o)}function je(t,i,a,u,o,s){he(t,i);var p=0!==(64&i.effectTag);if(!u&&!p)return o&&Jb(i,a,!1),ce(t,i,s);u=i.stateNode;An.current=i;var m=p&&"function"!==typeof a.getDerivedStateFromError?null:u.render();i.effectTag|=1;null!==t&&p?(i.child=gn(i,t.child,null,s),i.child=gn(i,null,m,s)):R(t,i,m,s);i.memoizedState=u.state;o&&Jb(i,a,!0);return i.child}function le(t){var i=t.stateNode;i.pendingContext?Gb(t,i.pendingContext,i.pendingContext!==i.context):i.context&&Gb(t,i.context,!1);hd(t,i.containerInfo);}var Un={dehydrated:null,retryTime:0};function ne(t,i,a){var u=i.mode,o=i.pendingProps,s=Cn.current,p=!1,m;(m=0!==(64&i.effectTag))||(m=0!==(2&s)&&(null===t||null!==t.memoizedState));m?(p=!0,i.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1);C(Cn,1&s);if(null===t){void 0!==o.fallback&&Xd(i);if(p){p=o.fallback;o=ad(null,u,0,null);o.return=i;if(0===(2&i.mode))for(t=null!==i.memoizedState?i.child.child:i.child,o.child=t;null!==t;)t.return=o,t=t.sibling;a=ad(p,u,a,null);a.return=i;o.sibling=a;i.memoizedState=Un;i.child=o;return a}u=o.children;i.memoizedState=null;return i.child=bn(i,null,u,a)}if(null!==t.memoizedState){t=t.child;u=t.sibling;if(p){o=o.fallback;a=Xc(t,t.pendingProps);a.return=i;if(0===(2&i.mode)&&(p=null!==i.memoizedState?i.child.child:i.child,p!==t.child))for(a.child=p;null!==p;)p.return=a,p=p.sibling;u=Xc(u,o);u.return=i;a.sibling=u;a.childExpirationTime=0;i.memoizedState=Un;i.child=a;return u}a=gn(i,t.child,o.children,a);i.memoizedState=null;return i.child=a}t=t.child;if(p){p=o.fallback;o=ad(null,u,0,null);o.return=i;o.child=t;null!==t&&(t.return=o);if(0===(2&i.mode))for(t=null!==i.memoizedState?i.child.child:i.child,o.child=t;null!==t;)t.return=o,t=t.sibling;a=ad(p,u,a,null);a.return=i;o.sibling=a;a.effectTag|=2;o.childExpirationTime=0;i.memoizedState=Un;i.child=o;return a}i.memoizedState=null;return i.child=gn(i,t,o.children,a)}function oe(t,i){t.expirationTime<i&&(t.expirationTime=i);var a=t.alternate;null!==a&&a.expirationTime<i&&(a.expirationTime=i);uc(t.return,i);}function pe(t,i,a,u,o,s){var p=t.memoizedState;null===p?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailExpiration:0,tailMode:o,lastEffect:s}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=a,p.tailExpiration=0,p.tailMode=o,p.lastEffect=s);}function qe(t,i,a){var u=i.pendingProps,o=u.revealOrder,s=u.tail;R(t,i,u.children,a);u=Cn.current;if(0!==(2&u))u=1&u|2,i.effectTag|=64;else {if(null!==t&&0!==(64&t.effectTag))e:for(t=i.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&oe(t,a);else if(19===t.tag)oe(t,a);else if(null!==t.child){t.child.return=t;t=t.child;continue}if(t===i)break e;for(;null===t.sibling;){if(null===t.return||t.return===i)break e;t=t.return;}t.sibling.return=t.return;t=t.sibling;}u&=1;}C(Cn,u);if(0===(2&i.mode))i.memoizedState=null;else switch(o){case"forwards":a=i.child;for(o=null;null!==a;)t=a.alternate,null!==t&&null===ld(t)&&(o=a),a=a.sibling;a=o;null===a?(o=i.child,i.child=null):(o=a.sibling,a.sibling=null);pe(i,!1,o,a,s,i.lastEffect);break;case"backwards":a=null;o=i.child;for(i.child=null;null!==o;){t=o.alternate;if(null!==t&&null===ld(t)){i.child=o;break}t=o.sibling;o.sibling=a;a=o;o=t;}pe(i,!0,a,null,s,i.lastEffect);break;case"together":pe(i,!1,null,null,void 0,i.lastEffect);break;default:i.memoizedState=null;}return i.child}function ce(t,i,a){null!==t&&(i.dependencies=t.dependencies);var u=i.expirationTime;0!==u&&Gc(u);if(i.childExpirationTime<a)return null;if(null!==t&&i.child!==t.child)throw Error(n(153));if(null!==i.child){t=i.child;a=Xc(t,t.pendingProps);i.child=a;for(a.return=i;null!==t.sibling;)t=t.sibling,a=a.sibling=Xc(t,t.pendingProps),a.return=i;a.sibling=null;}return i.child}function re(t){t.effectTag|=4;}var Hn,Bn,Qn,Wn;if(Ae)Hn=function(t,i){for(var a=i.child;null!==a;){if(5===a.tag||6===a.tag)Y(t,a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a;a=a.child;continue}if(a===i)break;for(;null===a.sibling;){if(null===a.return||a.return===i)return;a=a.return;}a.sibling.return=a.return;a=a.sibling;}},Bn=function(){},Qn=function(t,i,a,u,o){t=t.memoizedProps;if(t!==u){var s=i.stateNode,p=gd(xn.current);a=se(s,a,t,u,o,p);(i.updateQueue=a)&&re(i);}},Wn=function(t,i,a,u){a!==u&&re(i);};else if(He){Hn=function(t,i,a,u){for(var o=i.child;null!==o;){if(5===o.tag){var s=o.stateNode;a&&u&&(s=yt(s,o.type,o.memoizedProps,o));Y(t,s);}else if(6===o.tag)s=o.stateNode,a&&u&&(s=xt(s,o.memoizedProps,o)),Y(t,s);else if(4!==o.tag){if(13===o.tag&&0!==(4&o.effectTag)&&(s=null!==o.memoizedState)){var p=o.child;if(null!==p&&(null!==p.child&&(p.child.return=p,Hn(t,p,!0,s)),s=p.sibling,null!==s)){s.return=o;o=s;continue}}if(null!==o.child){o.child.return=o;o=o.child;continue}}if(o===i)break;for(;null===o.sibling;){if(null===o.return||o.return===i)return;o=o.return;}o.sibling.return=o.return;o=o.sibling;}};var we=function(t,i,a,u){for(var o=i.child;null!==o;){if(5===o.tag){var s=o.stateNode;a&&u&&(s=yt(s,o.type,o.memoizedProps,o));vt(t,s);}else if(6===o.tag)s=o.stateNode,a&&u&&(s=xt(s,o.memoizedProps,o)),vt(t,s);else if(4!==o.tag){if(13===o.tag&&0!==(4&o.effectTag)&&(s=null!==o.memoizedState)){var p=o.child;if(null!==p&&(null!==p.child&&(p.child.return=p,we(t,p,!0,s)),s=p.sibling,null!==s)){s.return=o;o=s;continue}}if(null!==o.child){o.child.return=o;o=o.child;continue}}if(o===i)break;for(;null===o.sibling;){if(null===o.return||o.return===i)return;o=o.return;}o.sibling.return=o.return;o=o.sibling;}};Bn=function(t){var i=t.stateNode;if(null!==t.firstEffect){var a=i.containerInfo,u=ht(a);we(u,t,!1,!1);i.pendingChildren=u;re(t);gt(a,u);}};Qn=function(t,i,a,u,o){var s=t.stateNode,p=t.memoizedProps;if((t=null===i.firstEffect)&&p===u)i.stateNode=s;else {var m=i.stateNode,v=gd(xn.current),y=null;p!==u&&(y=se(m,a,p,u,o,v));t&&null===y?i.stateNode=s:(s=mt(s,y,a,p,u,i,t,m),ue(s,a,u,o,v)&&re(i),i.stateNode=s,t?re(i):Hn(s,i,!1,!1));}};Wn=function(t,i,a,u){a!==u?(t=gd(En.current),a=gd(xn.current),i.stateNode=Ce(u,t,a,i),re(i)):i.stateNode=t.stateNode;};}else Bn=function(){},Qn=function(){},Wn=function(){};function xe(t,i){switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;null!==i;)null!==i.alternate&&(a=i),i=i.sibling;null===a?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var u=null;null!==a;)null!==a.alternate&&(u=a),a=a.sibling;null===u?i||null===t.tail?t.tail=null:t.tail.sibling=null:u.sibling=null;}}function ye(t,i,a){var u=i.pendingProps;switch(i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return F(i.type)&&Fb(),null;case 3:return id(),B(Lt),B(Ft),u=i.stateNode,u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(null===t||null===t.child)&&Zd(i)&&re(i),Bn(i),null;case 5:kd(i);var o=gd(En.current);a=i.type;if(null!==t&&null!=i.stateNode)Qn(t,i,a,u,o),t.ref!==i.ref&&(i.effectTag|=128);else {if(!u){if(null===i.stateNode)throw Error(n(166));return null}t=gd(xn.current);if(Zd(i)){if(!Be)throw Error(n(175));t=_t(i.stateNode,i.type,i.memoizedProps,o,t,i);i.updateQueue=t;null!==t&&re(i);}else {var s=X(a,u,o,t,i);Hn(s,i,!1,!1);i.stateNode=s;ue(s,a,u,o,t)&&re(i);}null!==i.ref&&(i.effectTag|=128);}return null;case 6:if(t&&null!=i.stateNode)Wn(t,i,t.memoizedProps,u);else {if("string"!==typeof u&&null===i.stateNode)throw Error(n(166));t=gd(En.current);o=gd(xn.current);if(Zd(i)){if(!Be)throw Error(n(176));Pt(i.stateNode,i.memoizedProps,i)&&re(i);}else i.stateNode=Ce(u,t,o,i);}return null;case 13:B(Cn);u=i.memoizedState;if(0!==(64&i.effectTag))return i.expirationTime=a,i;u=null!==u;o=!1;null===t?void 0!==i.memoizedProps.fallback&&Zd(i):(a=t.memoizedState,o=null!==a,u||null===a||(a=t.child.sibling,null!==a&&(s=i.firstEffect,null!==s?(i.firstEffect=a,a.nextEffect=s):(i.firstEffect=i.lastEffect=a,a.nextEffect=null),a.effectTag=8)));if(u&&!o&&0!==(2&i.mode))if(null===t&&!0!==i.memoizedProps.unstable_avoidThisFallback||0!==(1&Cn.current))fr===er&&(fr=rr);else {fr!==er&&fr!==rr||(fr=ir);0!==hr&&null!==ur&&(De(ur,cr),Ee(ur,hr));}He&&u&&(i.effectTag|=4);Ae&&(u||o)&&(i.effectTag|=4);return null;case 4:return id(),Bn(i),null;case 10:return tc(i),null;case 17:return F(i.type)&&Fb(),null;case 19:B(Cn);u=i.memoizedState;if(null===u)return null;o=0!==(64&i.effectTag);s=u.rendering;if(null===s){if(o)xe(u,!1);else if(fr!==er||null!==t&&0!==(64&t.effectTag))for(t=i.child;null!==t;){s=ld(t);if(null!==s){i.effectTag|=64;xe(u,!1);t=s.updateQueue;null!==t&&(i.updateQueue=t,i.effectTag|=4);null===u.lastEffect&&(i.firstEffect=null);i.lastEffect=u.lastEffect;t=a;for(u=i.child;null!==u;)o=u,a=t,o.effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,s=o.alternate,null===s?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=s.childExpirationTime,o.expirationTime=s.expirationTime,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,a=s.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),u=u.sibling;C(Cn,1&Cn.current|2);return i.child}t=t.sibling;}}else {if(!o)if(t=ld(s),null!==t){if(i.effectTag|=64,o=!0,t=t.updateQueue,null!==t&&(i.updateQueue=t,i.effectTag|=4),xe(u,!0),null===u.tail&&"hidden"===u.tailMode&&!s.alternate)return i=i.lastEffect=u.lastEffect,null!==i&&(i.nextEffect=null),null}else 2*rn()-u.renderingStartTime>u.tailExpiration&&1<a&&(i.effectTag|=64,o=!0,xe(u,!1),i.expirationTime=i.childExpirationTime=a-1);u.isBackwards?(s.sibling=i.child,i.child=s):(t=u.last,null!==t?t.sibling=s:i.child=s,u.last=s);}return null!==u.tail?(0===u.tailExpiration&&(u.tailExpiration=rn()+500),t=u.tail,u.rendering=t,u.tail=t.sibling,u.lastEffect=i.lastEffect,u.renderingStartTime=rn(),t.sibling=null,i=Cn.current,C(Cn,o?1&i|2:1&i),t):null}throw Error(n(156,i.tag))}function Fe(t){switch(t.tag){case 1:F(t.type)&&Fb();var i=t.effectTag;return 4096&i?(t.effectTag=-4097&i|64,t):null;case 3:id();B(Lt);B(Ft);i=t.effectTag;if(0!==(64&i))throw Error(n(285));t.effectTag=-4097&i|64;return t;case 5:return kd(t),null;case 13:return B(Cn),i=t.effectTag,4096&i?(t.effectTag=-4097&i|64,t):null;case 19:return B(Cn),null;case 4:return id(),null;case 10:return tc(t),null;default:return null}}function Ge(t,i){return {value:t,source:i,stack:zb(i)}}var Vn="function"===typeof WeakSet?WeakSet:Set;function Ie(t,i){var a=i.source,u=i.stack;null===u&&null!==a&&(u=zb(a));null!==a&&ua(a.type);i=i.value;null!==t&&1===t.tag&&ua(t.type);try{console.error(i);}catch(t){setTimeout((function(){throw t}));}}function Je(t,i){try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount();}catch(i){Ke(t,i);}}function Le(t){var i=t.ref;if(null!==i)if("function"===typeof i)try{i(null);}catch(i){Ke(t,i);}else i.current=null;}function Me(t,i){switch(i.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&i.effectTag&&null!==t){var a=t.memoizedProps,u=t.memoizedState;t=i.stateNode;i=t.getSnapshotBeforeUpdate(i.elementType===i.type?a:mc(i.type,a),u);t.__reactInternalSnapshotBeforeUpdate=i;}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(n(163))}function Ne(t,i){i=i.updateQueue;i=null!==i?i.lastEffect:null;if(null!==i){var a=i=i.next;do{if((a.tag&t)===t){var u=a.destroy;a.destroy=void 0;void 0!==u&&u();}a=a.next;}while(a!==i)}}function Oe(t,i){i=i.updateQueue;i=null!==i?i.lastEffect:null;if(null!==i){var a=i=i.next;do{if((a.tag&t)===t){var u=a.create;a.destroy=u();}a=a.next;}while(a!==i)}}function Pe(t,i,a){switch(a.tag){case 0:case 11:case 15:case 22:Oe(3,a);return;case 1:t=a.stateNode;if(4&a.effectTag)if(null===i)t.componentDidMount();else {var u=a.elementType===a.type?i.memoizedProps:mc(a.type,i.memoizedProps);t.componentDidUpdate(u,i.memoizedState,t.__reactInternalSnapshotBeforeUpdate);}i=a.updateQueue;null!==i&&Hc(a,i,t);return;case 3:i=a.updateQueue;if(null!==i){t=null;if(null!==a.child)switch(a.child.tag){case 5:t=W(a.child.stateNode);break;case 1:t=a.child.stateNode;}Hc(a,i,t);}return;case 5:t=a.stateNode;null===i&&4&a.effectTag&&rt(t,a.type,a.memoizedProps,a);return;case 6:return;case 4:return;case 12:return;case 13:Be&&null===a.memoizedState&&(a=a.alternate,null!==a&&(a=a.memoizedState,null!==a&&(a=a.dehydrated,null!==a&&It(a))));return;case 19:case 17:case 20:case 21:return}throw Error(n(163))}function Qe(t,i,a){"function"===typeof Mr&&Mr(i);switch(i.tag){case 0:case 11:case 14:case 15:case 22:t=i.updateQueue;if(null!==t&&(t=t.lastEffect,null!==t)){var u=t.next;dc(97<a?97:a,(function(){var t=u;do{var a=t.destroy;if(void 0!==a){var o=i;try{a();}catch(t){Ke(o,t);}}t=t.next;}while(t!==u)}));}break;case 1:Le(i);a=i.stateNode;"function"===typeof a.componentWillUnmount&&Je(i,a);break;case 5:Le(i);break;case 4:Ae?Se(t,i,a):He&&Te(i);}}function Ue(t,i,a){for(var u=i;;)if(Qe(t,u,a),null===u.child||Ae&&4===u.tag){if(u===i)break;for(;null===u.sibling;){if(null===u.return||u.return===i)return;u=u.return;}u.sibling.return=u.return;u=u.sibling;}else u.child.return=u,u=u.child;}function Ve(t){var i=t.alternate;t.return=null;t.child=null;t.memoizedState=null;t.updateQueue=null;t.dependencies=null;t.alternate=null;t.firstEffect=null;t.lastEffect=null;t.pendingProps=null;t.memoizedProps=null;t.stateNode=null;null!==i&&Ve(i);}function Te(t){if(He){t=t.stateNode.containerInfo;var i=ht(t);bt(t,i);}}function We(t){return 5===t.tag||3===t.tag||4===t.tag}function Xe(t){if(Ae){e:{for(var i=t.return;null!==i;){if(We(i)){var a=i;break e}i=i.return;}throw Error(n(160))}i=a.stateNode;switch(a.tag){case 5:var u=!1;break;case 3:i=i.containerInfo;u=!0;break;case 4:i=i.containerInfo;u=!0;break;default:throw Error(n(161))}16&a.effectTag&&(ct(i),a.effectTag&=-17);e:t:for(a=t;;){for(;null===a.sibling;){if(null===a.return||We(a.return)){a=null;break e}a=a.return;}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(2&a.effectTag)continue t;if(null===a.child||4===a.tag)continue t;a.child.return=a,a=a.child;}if(!(2&a.effectTag)){a=a.stateNode;break e}}u?Ye(t,a,i):Ze(t,a,i);}}function Ye(t,i,a){var u=t.tag,o=5===u||6===u;if(o)t=o?t.stateNode:t.stateNode.instance,i?lt(a,t,i):tt(a,t);else if(4!==u&&(t=t.child,null!==t))for(Ye(t,i,a),t=t.sibling;null!==t;)Ye(t,i,a),t=t.sibling;}function Ze(t,i,a){var u=t.tag,o=5===u||6===u;if(o)t=o?t.stateNode:t.stateNode.instance,i?at(a,t,i):et(a,t);else if(4!==u&&(t=t.child,null!==t))for(Ze(t,i,a),t=t.sibling;null!==t;)Ze(t,i,a),t=t.sibling;}function Se(t,i,a){for(var u=i,o=!1,s,p;;){if(!o){o=u.return;e:for(;;){if(null===o)throw Error(n(160));s=o.stateNode;switch(o.tag){case 5:p=!1;break e;case 3:s=s.containerInfo;p=!0;break e;case 4:s=s.containerInfo;p=!0;break e}o=o.return;}o=!0;}if(5===u.tag||6===u.tag)Ue(t,u,a),p?ot(s,u.stateNode):ut(s,u.stateNode);else if(4===u.tag){if(null!==u.child){s=u.stateNode.containerInfo;p=!0;u.child.return=u;u=u.child;continue}}else if(Qe(t,u,a),null!==u.child){u.child.return=u;u=u.child;continue}if(u===i)break;for(;null===u.sibling;){if(null===u.return||u.return===i)return;u=u.return;4===u.tag&&(o=!1);}u.sibling.return=u.return;u=u.sibling;}}function $e(t,i){if(Ae){switch(i.tag){case 0:case 11:case 14:case 15:case 22:Ne(3,i);return;case 1:return;case 5:var a=i.stateNode;if(null!=a){var u=i.memoizedProps;t=null!==t?t.memoizedProps:u;var o=i.type,s=i.updateQueue;i.updateQueue=null;null!==s&&it(a,s,o,t,u,i);}return;case 6:if(null===i.stateNode)throw Error(n(162));a=i.memoizedProps;nt(i.stateNode,null!==t?t.memoizedProps:a,a);return;case 3:Be&&(i=i.stateNode,i.hydrate&&(i.hydrate=!1,Nt(i.containerInfo)));return;case 12:return;case 13:af(i);bf(i);return;case 19:bf(i);return;case 17:return}throw Error(n(163))}switch(i.tag){case 0:case 11:case 14:case 15:case 22:Ne(3,i);return;case 12:return;case 13:af(i);bf(i);return;case 19:bf(i);return;case 3:Be&&(a=i.stateNode,a.hydrate&&(a.hydrate=!1,Nt(a.containerInfo)));}e:if(He){switch(i.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:i=i.stateNode;bt(i.containerInfo,i.pendingChildren);break e}throw Error(n(163))}}function af(t){var i=t;if(null===t.memoizedState)var a=!1;else a=!0,i=t.child,gr=rn();if(Ae&&null!==i)e:if(t=i,Ae)for(i=t;;){if(5===i.tag){var u=i.stateNode;a?ft(u):dt(i.stateNode,i.memoizedProps);}else if(6===i.tag)u=i.stateNode,a?st(u):pt(u,i.memoizedProps);else {if(13===i.tag&&null!==i.memoizedState&&null===i.memoizedState.dehydrated){u=i.child.sibling;u.return=i;i=u;continue}if(null!==i.child){i.child.return=i;i=i.child;continue}}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return;}i.sibling.return=i.return;i=i.sibling;}}function bf(t){var i=t.updateQueue;if(null!==i){t.updateQueue=null;var a=t.stateNode;null===a&&(a=t.stateNode=new Vn);i.forEach((function(i){var u=df.bind(null,t,i);a.has(i)||(a.add(i),i.then(u,u));}));}}var $n="function"===typeof WeakMap?WeakMap:Map;function ff(t,i,a){a=Ac(a,null);a.tag=3;a.payload={element:null};var u=i.value;a.callback=function(){xr||(xr=!0,Tr=u);Ie(t,i);};return a}function jf(t,i,a){a=Ac(a,null);a.tag=3;var u=t.type.getDerivedStateFromError;if("function"===typeof u){var o=i.value;a.payload=function(){Ie(t,i);return u(o)};}var s=t.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(a.callback=function(){"function"!==typeof u&&(null===Er?Er=new Set([this]):Er.add(this),Ie(t,i));var a=i.stack;this.componentDidCatch(i.value,{componentStack:null!==a?a:""});});return a}var qn=Math.ceil,Gn=s.ReactCurrentDispatcher,Kn=s.ReactCurrentOwner,Zn=0,Xn=8,Yn=16,Jn=32,er=0,tr=1,nr=2,rr=3,ir=4,ar=5,lr=Zn,ur=null,or=null,cr=0,fr=er,sr=null,dr=1073741823,pr=1073741823,mr=null,hr=0,vr=!1,gr=0,br=500,yr=null,xr=!1,Tr=null,Er=null,Cr=!1,kr=null,Sr=90,wr=null,_r=0,Pr=null,zr=0;function Lc(){return (lr&(Yn|Jn))!==Zn?1073741821-(rn()/10|0):0!==zr?zr:zr=1073741821-(rn()/10|0)}function Mc(t,i,a){i=i.mode;if(0===(2&i))return 1073741823;var u=bc();if(0===(4&i))return 99===u?1073741823:1073741822;if((lr&Yn)!==Zn)return cr;if(null!==a)t=hc(t,0|a.timeoutMs||5e3,250);else switch(u){case 99:t=1073741823;break;case 98:t=hc(t,150,100);break;case 97:case 96:t=hc(t,5e3,250);break;case 95:t=2;break;default:throw Error(n(326))}null!==ur&&t===cr&&--t;return t}function Nc(t,i){if(50<_r)throw _r=0,Pr=null,Error(n(185));t=Hf(t,i);if(null!==t){var a=bc();1073741823===i?(lr&Xn)!==Zn&&(lr&(Yn|Jn))===Zn?If(t):(Z(t),lr===Zn&&H()):Z(t);(4&lr)===Zn||98!==a&&99!==a||(null===wr?wr=new Map([[t,i]]):(a=wr.get(t),(void 0===a||a>i)&&wr.set(t,i)));}}function Hf(t,i){t.expirationTime<i&&(t.expirationTime=i);var a=t.alternate;null!==a&&a.expirationTime<i&&(a.expirationTime=i);var u=t.return,o=null;if(null===u&&3===t.tag)o=t.stateNode;else for(;null!==u;){a=u.alternate;u.childExpirationTime<i&&(u.childExpirationTime=i);null!==a&&a.childExpirationTime<i&&(a.childExpirationTime=i);if(null===u.return&&3===u.tag){o=u.stateNode;break}u=u.return;}null!==o&&(ur===o&&(Gc(i),fr===ir&&De(o,cr)),Ee(o,i));return o}function Jf(t){var i=t.lastExpiredTime;if(0!==i)return i;i=t.firstPendingTime;if(!Kf(t,i))return i;var a=t.lastPingedTime;t=t.nextKnownPendingLevel;t=a>t?a:t;return 2>=t&&i!==t?0:t}function Z(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=fc(If.bind(null,t));else {var i=Jf(t),a=t.callbackNode;if(0===i)null!==a&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else {var u=Lc();1073741823===i?u=99:1===i||2===i?u=95:(u=10*(1073741821-i)-10*(1073741821-u),u=0>=u?99:250>=u?98:5250>=u?97:95);if(null!==a){var o=t.callbackPriority;if(t.callbackExpirationTime===i&&o>=u)return;a!==Zt&&Ht(a);}t.callbackExpirationTime=i;t.callbackPriority=u;i=1073741823===i?fc(If.bind(null,t)):ec(u,Lf.bind(null,t),{timeout:10*(1073741821-i)-rn()});t.callbackNode=i;}}}function Lf(t,i){zr=0;if(i)return i=Lc(),Mf(t,i),Z(t),null;var a=Jf(t);if(0!==a){i=t.callbackNode;if((lr&(Yn|Jn))!==Zn)throw Error(n(327));Nf();t===ur&&a===cr||Of(t,a);if(null!==or){var u=lr;lr|=Yn;var o=Pf();do{try{Qf();break}catch(i){Rf(t,i);}}while(1);rc();lr=u;Gn.current=o;if(fr===tr)throw i=sr,Of(t,a),De(t,a),Z(t),i;if(null===or)switch(o=t.finishedWork=t.current.alternate,t.finishedExpirationTime=a,u=fr,ur=null,u){case er:case tr:throw Error(n(345));case nr:Mf(t,2<a?2:a);break;case rr:De(t,a);u=t.lastSuspendedTime;a===u&&(t.nextKnownPendingLevel=Sf(o));if(1073741823===dr&&(o=gr+br-rn(),10<o)){if(vr){var s=t.lastPingedTime;if(0===s||s>=a){t.lastPingedTime=a;Of(t,a);break}}s=Jf(t);if(0!==s&&s!==a)break;if(0!==u&&u!==a){t.lastPingedTime=u;break}t.timeoutHandle=ke(Tf.bind(null,t),o);break}Tf(t);break;case ir:De(t,a);u=t.lastSuspendedTime;a===u&&(t.nextKnownPendingLevel=Sf(o));if(vr&&(o=t.lastPingedTime,0===o||o>=a)){t.lastPingedTime=a;Of(t,a);break}o=Jf(t);if(0!==o&&o!==a)break;if(0!==u&&u!==a){t.lastPingedTime=u;break}1073741823!==pr?u=10*(1073741821-pr)-rn():1073741823===dr?u=0:(u=10*(1073741821-dr)-5e3,o=rn(),a=10*(1073741821-a)-o,u=o-u,0>u&&(u=0),u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*qn(u/1960))-u,a<u&&(u=a));if(10<u){t.timeoutHandle=ke(Tf.bind(null,t),u);break}Tf(t);break;case ar:if(1073741823!==dr&&null!==mr){s=dr;var p=mr;u=0|p.busyMinDurationMs;0>=u?u=0:(o=0|p.busyDelayMs,s=rn()-(10*(1073741821-s)-(0|p.timeoutMs||5e3)),u=s<=o?0:o+u-s);if(10<u){De(t,a);t.timeoutHandle=ke(Tf.bind(null,t),u);break}}Tf(t);break;default:throw Error(n(329))}Z(t);if(t.callbackNode===i)return Lf.bind(null,t)}}return null}function If(t){var i=t.lastExpiredTime;i=0!==i?i:1073741823;if((lr&(Yn|Jn))!==Zn)throw Error(n(327));Nf();t===ur&&i===cr||Of(t,i);if(null!==or){var a=lr;lr|=Yn;var u=Pf();do{try{Uf();break}catch(i){Rf(t,i);}}while(1);rc();lr=a;Gn.current=u;if(fr===tr)throw a=sr,Of(t,i),De(t,i),Z(t),a;if(null!==or)throw Error(n(261));t.finishedWork=t.current.alternate;t.finishedExpirationTime=i;ur=null;Tf(t);Z(t);}return null}function Vf(t,i){Mf(t,i);Z(t);(lr&(Yn|Jn))===Zn&&H();}function Wf(){if(null!==wr){var t=wr;wr=null;t.forEach((function(t,i){Mf(i,t);Z(i);}));H();}}function Xf(t,i){var a=lr;lr|=1;try{return t(i)}finally{lr=a,lr===Zn&&H();}}function Yf(t,i){if((lr&(Yn|Jn))!==Zn)throw Error(n(187));var a=lr;lr|=1;try{return dc(99,t.bind(null,i))}finally{lr=a,H();}}function Of(t,i){t.finishedWork=null;t.finishedExpirationTime=0;var a=t.timeoutHandle;a!==ze&&(t.timeoutHandle=ze,_e(a));if(null!==or)for(a=or.return;null!==a;){var u=a;switch(u.tag){case 1:u=u.type.childContextTypes;null!==u&&void 0!==u&&Fb();break;case 3:id();B(Lt);B(Ft);break;case 5:kd(u);break;case 4:id();break;case 13:B(Cn);break;case 19:B(Cn);break;case 10:tc(u);}a=a.return;}ur=t;or=Xc(t.current,null);cr=i;fr=er;sr=null;pr=dr=1073741823;mr=null;hr=0;vr=!1;}function Rf(t,i){do{try{rc();kn.current=In;if(Nn)for(var a=_n.memoizedState;null!==a;){var u=a.queue;null!==u&&(u.pending=null);a=a.next;}wn=0;zn=Pn=_n=null;Nn=!1;if(null===or||null===or.return)return fr=tr,sr=i,or=null;e:{var o=t,s=or.return,p=or,m=i;i=cr;p.effectTag|=2048;p.firstEffect=p.lastEffect=null;if(null!==m&&"object"===typeof m&&"function"===typeof m.then){var v=m;if(0===(2&p.mode)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.expirationTime=y.expirationTime):(p.updateQueue=null,p.memoizedState=null);}var x=0!==(1&Cn.current),T=s;do{var E;if(E=13===T.tag){var S=T.memoizedState;if(null!==S)E=null!==S.dehydrated;else {var _=T.memoizedProps;E=void 0!==_.fallback&&(!0!==_.unstable_avoidThisFallback||!x);}}if(E){var N=T.updateQueue;if(null===N){var M=new Set;M.add(v);T.updateQueue=M;}else N.add(v);if(0===(2&T.mode)){T.effectTag|=64;p.effectTag&=-2981;if(1===p.tag)if(null===p.alternate)p.tag=17;else {var j=Ac(1073741823,null);j.tag=2;Bc(p,j);}p.expirationTime=1073741823;break e}m=void 0;p=i;var O=o.pingCache;null===O?(O=o.pingCache=new $n,m=new Set,O.set(v,m)):(m=O.get(v),void 0===m&&(m=new Set,O.set(v,m)));if(!m.has(p)){m.add(p);var L=cg.bind(null,o,v,p);v.then(L,L);}T.effectTag|=4096;T.expirationTime=i;break e}T=T.return;}while(null!==T);m=Error((ua(p.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+zb(p));}fr!==ar&&(fr=nr);m=Ge(m,p);T=s;do{switch(T.tag){case 3:v=m;T.effectTag|=4096;T.expirationTime=i;var D=ff(T,v,i);Cc(T,D);break e;case 1:v=m;var U=T.type,W=T.stateNode;if(0===(64&T.effectTag)&&("function"===typeof U.getDerivedStateFromError||null!==W&&"function"===typeof W.componentDidCatch&&(null===Er||!Er.has(W)))){T.effectTag|=4096;T.expirationTime=i;var V=jf(T,v,i);Cc(T,V);break e}}T=T.return;}while(null!==T)}or=dg(or);}catch(t){i=t;continue}break}while(1)}function Pf(){var t=Gn.current;Gn.current=In;return null===t?In:t}function Ec(t,i){t<dr&&2<t&&(dr=t);null!==i&&t<pr&&2<t&&(pr=t,mr=i);}function Gc(t){t>hr&&(hr=t);}function Uf(){for(;null!==or;)or=eg(or);}function Qf(){for(;null!==or&&!Xt();)or=eg(or);}function eg(t){var i=Nr(t.alternate,t,cr);t.memoizedProps=t.pendingProps;null===i&&(i=dg(t));Kn.current=null;return i}function dg(t){or=t;do{var i=or.alternate;t=or.return;if(0===(2048&or.effectTag)){i=ye(i,or,cr);if(1===cr||1!==or.childExpirationTime){for(var a=0,u=or.child;null!==u;){var o=u.expirationTime,s=u.childExpirationTime;o>a&&(a=o);s>a&&(a=s);u=u.sibling;}or.childExpirationTime=a;}if(null!==i)return i;null!==t&&0===(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=or.firstEffect),null!==or.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=or.firstEffect),t.lastEffect=or.lastEffect),1<or.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=or:t.firstEffect=or,t.lastEffect=or));}else {i=Fe(or);if(null!==i)return i.effectTag&=2047,i;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048);}i=or.sibling;if(null!==i)return i;or=t;}while(null!==or);fr===er&&(fr=ar);return null}function Sf(t){var i=t.expirationTime;t=t.childExpirationTime;return i>t?i:t}function Tf(t){var i=bc();dc(99,gg.bind(null,t,i));return null}function gg(t,i){do{Nf();}while(null!==kr);if((lr&(Yn|Jn))!==Zn)throw Error(n(327));var a=t.finishedWork,u=t.finishedExpirationTime;if(null===a)return null;t.finishedWork=null;t.finishedExpirationTime=0;if(a===t.current)throw Error(n(177));t.callbackNode=null;t.callbackExpirationTime=0;t.callbackPriority=90;t.nextKnownPendingLevel=0;var o=Sf(a);t.firstPendingTime=o;u<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:u<=t.firstSuspendedTime&&(t.firstSuspendedTime=u-1);u<=t.lastPingedTime&&(t.lastPingedTime=0);u<=t.lastExpiredTime&&(t.lastExpiredTime=0);t===ur&&(or=ur=null,cr=0);1<a.effectTag?null!==a.lastEffect?(a.lastEffect.nextEffect=a,o=a.firstEffect):o=a:o=a.firstEffect;if(null!==o){var s=lr;lr|=Jn;Kn.current=null;G(t.containerInfo);yr=o;do{try{hg();}catch(t){if(null===yr)throw Error(n(330));Ke(yr,t);yr=yr.nextEffect;}}while(null!==yr);yr=o;do{try{for(var p=t,m=i;null!==yr;){var v=yr.effectTag;16&v&&Ae&&ct(yr.stateNode);if(128&v){var y=yr.alternate;if(null!==y){var x=y.ref;null!==x&&("function"===typeof x?x(null):x.current=null);}}switch(1038&v){case 2:Xe(yr);yr.effectTag&=-3;break;case 6:Xe(yr);yr.effectTag&=-3;$e(yr.alternate,yr);break;case 1024:yr.effectTag&=-1025;break;case 1028:yr.effectTag&=-1025;$e(yr.alternate,yr);break;case 4:$e(yr.alternate,yr);break;case 8:var T=p,E=yr,S=m;Ae?Se(T,E,S):Ue(T,E,S);Ve(E);}yr=yr.nextEffect;}}catch(t){if(null===yr)throw Error(n(330));Ke(yr,t);yr=yr.nextEffect;}}while(null!==yr);K(t.containerInfo);t.current=a;yr=o;do{try{for(v=t;null!==yr;){var _=yr.effectTag;36&_&&Pe(v,yr.alternate,yr);if(128&_){y=void 0;var N=yr.ref;if(null!==N){var M=yr.stateNode;switch(yr.tag){case 5:y=W(M);break;default:y=M;}"function"===typeof N?N(y):N.current=y;}}yr=yr.nextEffect;}}catch(t){if(null===yr)throw Error(n(330));Ke(yr,t);yr=yr.nextEffect;}}while(null!==yr);yr=null;Yt();lr=s;}else t.current=a;if(Cr)Cr=!1,kr=t,Sr=i;else for(yr=o;null!==yr;)i=yr.nextEffect,yr.nextEffect=null,yr=i;i=t.firstPendingTime;0===i&&(Er=null);1073741823===i?t===Pr?_r++:(_r=0,Pr=t):_r=0;"function"===typeof Rr&&Rr(a.stateNode,u);Z(t);if(xr)throw xr=!1,t=Tr,Tr=null,t;if((lr&Xn)!==Zn)return null;H();return null}function hg(){for(;null!==yr;){var t=yr.effectTag;0!==(256&t)&&Me(yr.alternate,yr);0===(512&t)||Cr||(Cr=!0,ec(97,(function(){Nf();return null})));yr=yr.nextEffect;}}function Nf(){if(90!==Sr){var t=97<Sr?97:Sr;Sr=90;return dc(t,jg)}}function jg(){if(null===kr)return !1;var t=kr;kr=null;if((lr&(Yn|Jn))!==Zn)throw Error(n(331));var i=lr;lr|=Jn;for(t=t.current.firstEffect;null!==t;){try{var a=t;if(0!==(512&a.effectTag))switch(a.tag){case 0:case 11:case 15:case 22:Ne(5,a),Oe(5,a);}}catch(i){if(null===t)throw Error(n(330));Ke(t,i);}a=t.nextEffect;t.nextEffect=null;t=a;}lr=i;H();return !0}function kg(t,i,a){i=Ge(a,i);i=ff(t,i,1073741823);Bc(t,i);t=Hf(t,1073741823);null!==t&&Z(t);}function Ke(t,i){if(3===t.tag)kg(t,t,i);else for(var a=t.return;null!==a;){if(3===a.tag){kg(a,t,i);break}if(1===a.tag){var u=a.stateNode;if("function"===typeof a.type.getDerivedStateFromError||"function"===typeof u.componentDidCatch&&(null===Er||!Er.has(u))){t=Ge(i,t);t=jf(a,t,1073741823);Bc(a,t);a=Hf(a,1073741823);null!==a&&Z(a);break}}a=a.return;}}function cg(t,i,a){var u=t.pingCache;null!==u&&u.delete(i);ur===t&&cr===a?fr===ir||fr===rr&&1073741823===dr&&rn()-gr<br?Of(t,cr):vr=!0:Kf(t,a)&&(i=t.lastPingedTime,0!==i&&i<a||(t.lastPingedTime=a,Z(t)));}function df(t,i){var a=t.stateNode;null!==a&&a.delete(i);i=0;0===i&&(i=Lc(),i=Mc(i,t,null));t=Hf(t,i);null!==t&&Z(t);}var Nr;Nr=function(t,i,a){var u=i.expirationTime;if(null!==t){var o=i.pendingProps;if(t.memoizedProps!==o||Lt.current)Dn=!0;else {if(u<a){Dn=!1;switch(i.tag){case 3:le(i);$d();break;case 5:jd(i);if(4&i.mode&&1!==a&&ve(i.type,o))return i.expirationTime=i.childExpirationTime=1,null;break;case 1:F(i.type)&&Ib(i);break;case 4:hd(i,i.stateNode.containerInfo);break;case 10:sc(i,i.memoizedProps.value);break;case 13:if(null!==i.memoizedState){u=i.child.childExpirationTime;if(0!==u&&u>=a)return ne(t,i,a);C(Cn,1&Cn.current);i=ce(t,i,a);return null!==i?i.sibling:null}C(Cn,1&Cn.current);break;case 19:u=i.childExpirationTime>=a;if(0!==(64&t.effectTag)){if(u)return qe(t,i,a);i.effectTag|=64;}o=i.memoizedState;null!==o&&(o.rendering=null,o.tail=null);C(Cn,Cn.current);if(!u)return null}return ce(t,i,a)}Dn=!1;}}else Dn=!1;i.expirationTime=0;switch(i.tag){case 2:u=i.type;null!==t&&(t.alternate=null,i.alternate=null,i.effectTag|=2);t=i.pendingProps;o=Eb(i,Ft.current);vc(i,a);o=rd(null,i,u,t,o,a);i.effectTag|=1;if("object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof){i.tag=1;i.memoizedState=null;i.updateQueue=null;if(F(u)){var s=!0;Ib(i);}else s=!1;i.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;yc(i);var p=u.getDerivedStateFromProps;"function"===typeof p&&Kc(i,u,p,t);o.updater=hn;i.stateNode=o;o._reactInternalFiber=i;Sc(i,u,t,a);i=je(null,i,u,!0,s,a);}else i.tag=0,R(null,i,o,a),i=i.child;return i;case 16:e:{o=i.elementType;null!==t&&(t.alternate=null,i.alternate=null,i.effectTag|=2);t=i.pendingProps;ta(o);if(1!==o._status)throw o._result;o=o._result;i.type=o;s=i.tag=lg(o);t=mc(o,t);switch(s){case 0:i=ge(null,i,o,t,a);break e;case 1:i=ie(null,i,o,t,a);break e;case 11:i=be(null,i,o,t,a);break e;case 14:i=de(null,i,o,mc(o.type,t),u,a);break e}throw Error(n(306,o,""))}return i;case 0:return u=i.type,o=i.pendingProps,o=i.elementType===u?o:mc(u,o),ge(t,i,u,o,a);case 1:return u=i.type,o=i.pendingProps,o=i.elementType===u?o:mc(u,o),ie(t,i,u,o,a);case 3:le(i);u=i.updateQueue;if(null===t||null===u)throw Error(n(282));u=i.pendingProps;o=i.memoizedState;o=null!==o?o.element:null;zc(t,i);Dc(i,u,null,a);u=i.memoizedState.element;if(u===o)$d(),i=ce(t,i,a);else {(o=i.stateNode.hydrate)&&(Be?(Fn=wt(i.stateNode.containerInfo),On=i,o=Ln=!0):o=!1);if(o)for(a=bn(i,null,u,a),i.child=a;a;)a.effectTag=-3&a.effectTag|1024,a=a.sibling;else R(t,i,u,a),$d();i=i.child;}return i;case 5:return jd(i),null===t&&Xd(i),u=i.type,o=i.pendingProps,s=null!==t?t.memoizedProps:null,p=o.children,me(u,o)?p=null:null!==s&&me(u,s)&&(i.effectTag|=16),he(t,i),4&i.mode&&1!==a&&ve(u,o)?(i.expirationTime=i.childExpirationTime=1,i=null):(R(t,i,p,a),i=i.child),i;case 6:return null===t&&Xd(i),null;case 13:return ne(t,i,a);case 4:return hd(i,i.stateNode.containerInfo),u=i.pendingProps,null===t?i.child=gn(i,null,u,a):R(t,i,u,a),i.child;case 11:return u=i.type,o=i.pendingProps,o=i.elementType===u?o:mc(u,o),be(t,i,u,o,a);case 7:return R(t,i,i.pendingProps,a),i.child;case 8:return R(t,i,i.pendingProps.children,a),i.child;case 12:return R(t,i,i.pendingProps.children,a),i.child;case 10:e:{u=i.type._context;o=i.pendingProps;p=i.memoizedProps;s=o.value;sc(i,s);if(null!==p){var m=p.value;s=an(m,s)?0:0|("function"===typeof u._calculateChangedBits?u._calculateChangedBits(m,s):1073741823);if(0===s){if(p.children===o.children&&!Lt.current){i=ce(t,i,a);break e}}else for(m=i.child,null!==m&&(m.return=i);null!==m;){var v=m.dependencies;if(null!==v){p=m.child;for(var y=v.firstContext;null!==y;){if(y.context===u&&0!==(y.observedBits&s)){1===m.tag&&(y=Ac(a,null),y.tag=2,Bc(m,y));m.expirationTime<a&&(m.expirationTime=a);y=m.alternate;null!==y&&y.expirationTime<a&&(y.expirationTime=a);uc(m.return,a);v.expirationTime<a&&(v.expirationTime=a);break}y=y.next;}}else p=10===m.tag&&m.type===i.type?null:m.child;if(null!==p)p.return=m;else for(p=m;null!==p;){if(p===i){p=null;break}m=p.sibling;if(null!==m){m.return=p.return;p=m;break}p=p.return;}m=p;}}R(t,i,o.children,a);i=i.child;}return i;case 9:return o=i.type,s=i.pendingProps,u=s.children,vc(i,a),o=I(o,s.unstable_observedBits),u=u(o),i.effectTag|=1,R(t,i,u,a),i.child;case 14:return o=i.type,s=mc(o,i.pendingProps),s=mc(o.type,s),de(t,i,o,s,u,a);case 15:return fe(t,i,i.type,i.pendingProps,u,a);case 17:return u=i.type,o=i.pendingProps,o=i.elementType===u?o:mc(u,o),null!==t&&(t.alternate=null,i.alternate=null,i.effectTag|=2),i.tag=1,F(u)?(t=!0,Ib(i)):t=!1,vc(i,a),Qc(i,u,o),Sc(i,u,o,a),je(null,i,u,!0,t,a);case 19:return qe(t,i,a)}throw Error(n(156,i.tag))};var Ir={current:!1},Rr=null,Mr=null;function ng(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return !1;var i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(i.isDisabled||!i.supportsFiber)return !0;try{var a=i.inject(t);Rr=function(t){try{i.onCommitFiberRoot(a,t,void 0,64===(64&t.current.effectTag));}catch(t){}};Mr=function(t){try{i.onCommitFiberUnmount(a,t);}catch(t){}};}catch(t){}return !0}function og(t,i,a,u){this.tag=t;this.key=a;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=i;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=u;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childExpirationTime=this.expirationTime=0;this.alternate=null;}function Vd(t,i,a,u){return new og(t,i,a,u)}function ee(t){t=t.prototype;return !(!t||!t.isReactComponent)}function lg(t){if("function"===typeof t)return ee(t)?1:0;if(void 0!==t&&null!==t){t=t.$$typeof;if(t===N)return 11;if(t===O)return 14}return 2}function Xc(t,i){var a=t.alternate;null===a?(a=Vd(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.effectTag=0,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null);a.childExpirationTime=t.childExpirationTime;a.expirationTime=t.expirationTime;a.child=t.child;a.memoizedProps=t.memoizedProps;a.memoizedState=t.memoizedState;a.updateQueue=t.updateQueue;i=t.dependencies;a.dependencies=null===i?null:{expirationTime:i.expirationTime,firstContext:i.firstContext,responders:i.responders};a.sibling=t.sibling;a.index=t.index;a.ref=t.ref;return a}function Zc(t,i,a,u,o,s){var p=2;u=t;if("function"===typeof t)ee(t)&&(p=1);else if("string"===typeof t)p=5;else e:switch(t){case y:return ad(a.children,o,s,i);case _:p=8;o|=7;break;case x:p=8;o|=1;break;case T:return t=Vd(12,a,i,8|o),t.elementType=T,t.type=T,t.expirationTime=s,t;case M:return t=Vd(13,a,i,o),t.type=M,t.elementType=M,t.expirationTime=s,t;case j:return t=Vd(19,a,i,o),t.elementType=j,t.expirationTime=s,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case E:p=10;break e;case S:p=9;break e;case N:p=11;break e;case O:p=14;break e;case L:p=16;u=null;break e;case D:p=22;break e}throw Error(n(130,null==t?t:typeof t,""))}i=Vd(p,a,i,o);i.elementType=t;i.type=u;i.expirationTime=s;return i}function ad(t,i,a,u){t=Vd(7,t,u,i);t.expirationTime=a;return t}function Yc(t,i,a){t=Vd(6,t,null,i);t.expirationTime=a;return t}function $c(t,i,a){i=Vd(4,null!==t.children?t.children:[],t.key,i);i.expirationTime=a;i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation};return i}function pg(t,i,a){this.tag=i;this.current=null;this.containerInfo=t;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=ze;this.pendingContext=this.context=null;this.hydrate=a;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0;}function Kf(t,i){var a=t.firstSuspendedTime;t=t.lastSuspendedTime;return 0!==a&&a>=i&&t<=i}function De(t,i){var a=t.firstSuspendedTime,u=t.lastSuspendedTime;a<i&&(t.firstSuspendedTime=i);(u>i||0===a)&&(t.lastSuspendedTime=i);i<=t.lastPingedTime&&(t.lastPingedTime=0);i<=t.lastExpiredTime&&(t.lastExpiredTime=0);}function Ee(t,i){i>t.firstPendingTime&&(t.firstPendingTime=i);var a=t.firstSuspendedTime;0!==a&&(i>=a?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:i>=t.lastSuspendedTime&&(t.lastSuspendedTime=i+1),i>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=i));}function Mf(t,i){var a=t.lastExpiredTime;(0===a||a>i)&&(t.lastExpiredTime=i);}var jr=null;function rg(i){if(null===jr)try{var a=("require"+Math.random()).slice(0,7);jr=(t&&t[a])("timers").setImmediate;}catch(t){jr=function(t){var i=new MessageChannel;i.port1.onmessage=t;i.port2.postMessage(void 0);};}return jr(i)}function sg(t){var i=t._reactInternalFiber;if(void 0===i){if("function"===typeof t.render)throw Error(n(188));throw Error(n(268,Object.keys(t)))}t=ya(i);return null===t?null:t.stateNode}function tg(t,i){t=t.memoizedState;null!==t&&null!==t.dehydrated&&t.retryTime<i&&(t.retryTime=i);}function ug(t,i){tg(t,i);(t=t.alternate)&&tg(t,i);}var Or=s.IsSomeRendererActing,Fr="function"===typeof o.unstable_flushAllWithoutAsserting,Lr=o.unstable_flushAllWithoutAsserting||function(){for(var t=!1;Nf();)t=!0;return t};function yg(t){try{Lr(),rg((function(){Lr()?yg(t):t();}));}catch(i){t(i);}}var Ar=0,Dr=!1,Ur={__proto__:null,createContainer:function(t,i,a){t=new pg(t,i,a);i=Vd(3,null,null,2===i?7:1===i?3:0);t.current=i;i.stateNode=t;yc(i);return t},updateContainer:function(t,i,a,u){var o=i.current,s=Lc(),p=pn.suspense;s=Mc(s,o,p);e:if(a){a=a._reactInternalFiber;t:{if(va(a)!==a||1!==a.tag)throw Error(n(170));var m=a;do{switch(m.tag){case 3:m=m.stateNode.context;break t;case 1:if(F(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break t}}m=m.return;}while(null!==m);throw Error(n(171))}if(1===a.tag){var v=a.type;if(F(v)){a=Hb(a,v,m);break e}}a=m;}else a=Ot;null===i.context?i.context=a:i.pendingContext=a;i=Ac(s,p);i.payload={element:t};u=void 0===u?null:u;null!==u&&(i.callback=u);Bc(o,i);Nc(o,s);return s},batchedEventUpdates:function(t,i){var a=lr;lr|=2;try{return t(i)}finally{lr=a,lr===Zn&&H();}},batchedUpdates:Xf,unbatchedUpdates:function(t,i){var a=lr;lr&=-2;lr|=Xn;try{return t(i)}finally{lr=a,lr===Zn&&H();}},deferredUpdates:function(t){return dc(97,t)},syncUpdates:function(t,i,a,u){return dc(99,t.bind(null,i,a,u))},discreteUpdates:function(t,i,a,u,o){var s=lr;lr|=4;try{return dc(98,t.bind(null,i,a,u,o))}finally{lr=s,lr===Zn&&H();}},flushDiscreteUpdates:function(){(lr&(1|Yn|Jn))===Zn&&(Wf(),Nf());},flushControlled:function(t){var i=lr;lr|=1;try{dc(99,t);}finally{lr=i,lr===Zn&&H();}},flushSync:Yf,flushPassiveEffects:Nf,IsThisRendererActing:Ir,getPublicRootInstance:function(t){t=t.current;if(!t.child)return null;switch(t.child.tag){case 5:return W(t.child.stateNode);default:return t.child.stateNode}},attemptSynchronousHydration:function(t){switch(t.tag){case 3:var i=t.stateNode;i.hydrate&&Vf(i,i.firstPendingTime);break;case 13:Yf((function(){return Nc(t,1073741823)})),i=hc(Lc(),150,100),ug(t,i);}},attemptUserBlockingHydration:function(t){if(13===t.tag){var i=hc(Lc(),150,100);Nc(t,i);ug(t,i);}},attemptContinuousHydration:function(t){13===t.tag&&(Nc(t,3),ug(t,3));},attemptHydrationAtCurrentPriority:function(t){if(13===t.tag){var i=Lc();i=Mc(i,t,null);Nc(t,i);ug(t,i);}},findHostInstance:sg,findHostInstanceWithWarning:function(t){return sg(t)},findHostInstanceWithNoPortals:function(t){t=za(t);return null===t?null:20===t.tag?t.stateNode.instance:t.stateNode},shouldSuspend:function(){return !1},injectIntoDevTools:function(t){var i=t.findFiberByHostInstance;return ng(a({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){t=ya(t);return null===t?null:t.stateNode},findFiberByHostInstance:function(t){return i?i(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))},act:function(t){function b(){Ar--;Or.current=i;Ir.current=a;}!1===Dr&&(Dr=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected."));Ar++;var i=Or.current;var a=Ir.current;Or.current=!0;Ir.current=!0;try{var u=Xf(t);}catch(t){throw b(),t}if(null!==u&&"object"===typeof u&&"function"===typeof u.then)return {then:function(t,a){u.then((function(){1<Ar||!0===Fr&&!0===i?(b(),t()):yg((function(i){b();i?a(i):t();}));}),(function(t){b();a(t);}));}};try{1!==Ar||!1!==Fr&&!1!==i||Lr(),b();}catch(t){throw b(),t}return {then:function(t){t();}}}},Hr=Ur&&Ur["default"]||Ur;t.exports=Hr.default||Hr;var Br=t.exports;t.exports=$$$reconciler;return Br};}));var ve=new Map;var Ce={};var ke={obj:function obj(t){return t===Object(t)&&!ke.arr(t)},fun:function fun(t){return "function"===typeof t},str:function str(t){return "string"===typeof t},num:function num(t){return "number"===typeof t},und:function und(t){return void 0===t},arr:function arr(t){return Array.isArray(t)},equ:function equ(t,i){if(typeof t!==typeof i||!!t!==!!i)return false;if(ke.str(t)||ke.num(t)||ke.obj(t))return t===i;if(ke.arr(t)&&t==i)return true;var a;for(a in t)if(!(a in i))return false;for(a in i)if(t[a]!==i[a])return false;return !ke.und(a)||t===i}};function createSubs(t,i){var a=i.length;i.push(t);return function(){i.splice(a,1);}}var _e=[];var ze=[];var Re=[];var Ae=function addEffect(t){return createSubs(t,_e)};var He=function addAfterEffect(t){return createSubs(t,ze)};var Be=function addTail(t){return createSubs(t,Re)};function renderGl(t,i,a,u){void 0===a&&(a=0);void 0===u&&(u=false);var o;if(u)for(o=0;o<_e.length;o++){_e[o](i);a++;}var s=t.current.clock.getDelta();for(o=0;o<t.current.subscribers.length;o++)t.current.subscribers[o].ref.current(t.current,s);t.current.frames=Math.max(0,t.current.frames-1);a+=t.current.invalidateFrameloop?t.current.frames:1;t.current.manual||t.current.gl.render(t.current.scene,t.current.camera);if(u)for(o=0;o<ze.length;o++)ze[o](i);return a}var et=false;function renderLoop(t){et=true;var i=0;var a;for(a=0;a<_e.length;a++){_e[a](t);i++;}ve.forEach((function(a){var u=a.containerInfo.__state;u.current.active&&u.current.ready&&(!u.current.invalidateFrameloop||u.current.frames>0)&&(i=renderGl(u,t,i));}));for(a=0;a<ze.length;a++)ze[a](t);if(0!==i)return requestAnimationFrame(renderLoop);for(a=0;a<Re.length;a++)Re[a](t);et=false;}function invalidate(t,i){void 0===t&&(t=true);void 0===i&&(i=2);if(true===t)ve.forEach((function(t){return t.containerInfo.__state.current.frames=i}));else if(t&&t.current){if(t.current.vr)return;t.current.frames=i;}if(!et){et=true;requestAnimationFrame(renderLoop);}}function forceResize(){ve.forEach((function(t){return t.containerInfo.__state.current.forceResize()}));}var tt={};var nt=function extend(t){tt=G["default"]({},tt,t);};function applyProps(t,i,a,u){void 0===a&&(a={});void 0===u&&(u=false);var o=t.__container;var s=[];var p=[];var m;var v=Object.keys(i);for(m=0;m<v.length;m++){ke.equ(i[v[m]],a[v[m]])&&s.push(v[m]);ke.fun(i[v[m]])&&v[m].startsWith("on")&&(v[m].includes("Pointer")||v[m].includes("Click")||v[m].includes("ContextMenu")||v[m].includes("Wheel"))&&p.push(v[m]);}var y=[];v=Object.keys(a);if(u)for(m=0;m<v.length;m++)void 0===i[v[m]]&&y.push(v[m]);var x=[].concat(s,["children","key","ref"]);t.__instance&&x.push("object");var T=G["default"]({},i);v=Object.keys(T);for(m=0;m<v.length;m++)x.indexOf(v[m])>-1&&delete T[v[m]];v=Object.keys(y);for(m=0;m<v.length;m++)"children"!==v[m]&&(T[v[m]]=void 0);var E=Object.entries(T);if(E.length>0){E.forEach((function(i){var a=i[0],u=i[1];if(!p.includes(a)){var o;var s=t;var m=s[a];if(a.includes("-")){var v=a.split("-");m=v.reduce((function(t,i){return t[i]}),t);if(!(m&&m.set)){var y=v.reverse(),x=y[0],T=y.slice(1);s=T.reverse().reduce((function(t,i){return t[i]}),t);a=x;}}var E=null==(o=t.__container)?void 0:o.__state.current.colorManagement;if(m&&m.set&&(m.copy||m instanceof M.Layers)){if(Array.isArray(u)){var S;(S=m).set.apply(S,u);}else if(m.copy&&u&&u.constructor&&m.constructor.name===u.constructor.name)m.copy(u);else if(void 0!==u){m.set(u);E&&m instanceof M.Color&&m.convertSRGBToLinear();}}else {s[a]=u;E&&s[a]instanceof M.Texture&&(s[a].encoding=M.sRGBEncoding);}invalidateInstance(t);}}));if(u&&o&&t.raycast&&t.__handlers){t.__handlers=void 0;var S=o.__interaction.indexOf(t);S>-1&&o.__interaction.splice(S,1);}if(p.length){o&&t.raycast&&o.__interaction.push(t);t.__handlers=p.reduce((function(t,a){t[a.charAt(2).toLowerCase()+a.substr(3)]=i[a];return t}),{});}t.parent&&updateInstance(t);}}function invalidateInstance(t){t.__container&&t.__container.__state&&invalidate(t.__container.__state);}function updateInstance(t){t.onUpdate&&t.onUpdate(t);}function createInstance(t,i,a,u,o){var s=i.args,p=void 0===s?[]:s,m=K["default"](i,["args"]);var v=""+t[0].toUpperCase()+t.slice(1);var y;if("primitive"===t){m=G["default"]({dispose:null},m);y=m.object;y.__instance=true;y.__dispose=y.dispose;}else if("new"===t)y=new m.object(p);else {var x=tt[v]||Y[v];if(!x)throw '"'+v+'" is not part of the THREE namespace! Did you forget to extend it? See: https://github.com/react-spring/react-three-fiber/blob/master/api.md#putting-already-existing-objects-into-the-scene-graph';y=ke.arr(p)?X["default"](x,p):new x(p);}while(a.__container)a=a.__container;if(!ve.has(a)){var T=function fn(t){return t["return"]?fn(t["return"]):t.stateNode&&t.stateNode.containerInfo};a=T(o);}y.__objects=[];y.__container=a;v.endsWith("Geometry")?m=G["default"]({attach:"geometry"},m):v.endsWith("Material")&&(m=G["default"]({attach:"material"},m));applyProps(y,m,{});return y}function appendChild(t,i){if(i){if(i.isObject3D)t.add(i);else {t.__objects.push(i);i.parent=t;if(i.attachArray){ke.arr(t[i.attachArray])||(t[i.attachArray]=[]);t[i.attachArray].push(i);}else if(i.attachObject){ke.obj(t[i.attachObject[0]])||(t[i.attachObject[0]]={});t[i.attachObject[0]][i.attachObject[1]]=i;}else i.attach&&(t[i.attach]=i);}updateInstance(i);invalidateInstance(i);}}function insertBefore(t,i,a){if(i){if(i.isObject3D){i.parent=t;i.dispatchEvent({type:"added"});var u=t.children.filter((function(t){return t!==i}));var o=u.indexOf(a);t.children=[].concat(u.slice(0,o),[i],u.slice(o));updateInstance(i);}else appendChild(t,i);invalidateInstance(i);}}function removeRecursive(t,i,a){void 0===a&&(a=false);if(t){var u=a?[].concat(t):t;u.forEach((function(t){return removeChild(i,t)}));}}function removeChild(t,i){if(i){if(i.isObject3D)t.remove(i);else {i.parent=null;t.__objects&&(t.__objects=t.__objects.filter((function(t){return t!==i})));i.attachArray?t[i.attachArray]=t[i.attachArray].filter((function(t){return t!==i})):i.attachObject?delete t[i.attachObject[0]][i.attachObject[1]]:i.attach&&(t[i.attach]=null);}invalidateInstance(i);null!==i.dispose&&L.unstable_runWithPriority(L.unstable_IdlePriority,(function(){i.__container&&(i.__container.__interaction=i.__container.__interaction.filter((function(t){return t!==i})));removeRecursive(i.__objects,i);removeRecursive(i.children,i,true);i.dispose?i.dispose():i.__dispose&&i.__dispose();delete i.__container;delete i.__objects;}));}}function switchInstance(t,i,a,u){var o=t.parent;var s=createInstance(i,a,t.__container,null,u);removeChild(o,t);appendChild(o,s);[u,u.alternate].forEach((function(t){if(null!==t){t.stateNode=s;t.ref&&(ke.fun(t.ref)?t.ref(s):t.ref.current=s);}}));}var rt=me({now:L.unstable_now,createInstance:createInstance,removeChild:removeChild,appendChild:appendChild,insertBefore:insertBefore,warnsIfNotActing:true,supportsMutation:true,isPrimaryRenderer:false,scheduleTimeout:ke.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ke.fun(clearTimeout)?clearTimeout:void 0,setTimeout:ke.fun(setTimeout)?setTimeout:void 0,clearTimeout:ke.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendInitialChild:appendChild,appendChildToContainer:appendChild,removeChildFromContainer:removeChild,insertInContainerBefore:insertBefore,commitUpdate:function commitUpdate(t,i,a,u,o,s){if(t.__instance&&o.object&&o.object!==t)switchInstance(t,a,o,s);else {var p=o.args,m=void 0===p?[]:p,v=K["default"](o,["args"]);var y=u.args,x=void 0===y?[]:y,T=K["default"](u,["args"]);var E=m.some((function(t,i){return ke.obj(t)?Object.entries(t).some((function(t){var a=t[0],u=t[1];return u!==x[i][a]})):t!==x[i]}));E?switchInstance(t,a,o,s):applyProps(t,v,T,true);}},hideInstance:function hideInstance(t){if(t.isObject3D){t.visible=false;invalidateInstance(t);}},unhideInstance:function unhideInstance(t,i){if(t.isObject3D&&null==i.visible||i.visible){t.visible=true;invalidateInstance(t);}},hideTextInstance:function hideTextInstance(){throw new Error("Text is not allowed in the react-three-fibre tree. You may have extraneous whitespace between components.")},getPublicInstance:function getPublicInstance(t){return t},getRootHostContext:function getRootHostContext(){return Ce},getChildHostContext:function getChildHostContext(){return Ce},createTextInstance:function createTextInstance(){},finalizeInitialChildren:function finalizeInitialChildren(){return false},prepareUpdate:function prepareUpdate(){return Ce},shouldDeprioritizeSubtree:function shouldDeprioritizeSubtree(){return false},prepareForCommit:function prepareForCommit(){return null},preparePortalMount:function preparePortalMount(){return null},resetAfterCommit:function resetAfterCommit(){},shouldSetTextContent:function shouldSetTextContent(){return false},clearContainer:function clearContainer(){return false}});var it=ke.fun(Symbol)&&Symbol["for"];var at=it?Symbol["for"]("react.portal"):60106;function render(t,i,a){var u=ve.get(i);if(!u){i.__state=a;var o=u=rt.createContainer(i,void 0!==a&&a.current.concurrent?2:0,false,null);ve.set(i,o);}rt.updateContainer(t,u,null,(function(){}));return rt.getPublicRootInstance(u)}function unmountComponentAtNode(t,i){var a=ve.get(t);a&&rt.updateContainer(null,a,null,(function(){ve["delete"](t);i&&i(t);}));}function createPortal(t,i,a,u){void 0===u&&(u=null);i.__objects||(i.__objects=[]);return {$$typeof:at,key:null==u?null:""+u,children:t,containerInfo:i,implementation:a}}rt.injectIntoDevTools({bundleType:1,findHostInstanceByFiber:function findHostInstanceByFiber(){return null},version:J["default"].version,rendererPackageName:"react-three-fiber"});function _createForOfIteratorHelperLoose(t,i){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||i&&t&&"number"===typeof t.length){a&&(t=a);var u=0;return function(){return u>=t.length?{done:true}:{done:false,value:t[u++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}a=t[Symbol.iterator]();return a.next.bind(a)}function _unsupportedIterableToArray(t,i){if(t){if("string"===typeof t)return _arrayLikeToArray(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);return "Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,i):void 0}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var a=0,u=new Array(i);a<i;a++)u[a]=t[a];return u}function isOrthographicCamera(t){return t.isOrthographicCamera}function makeId(t){return (t.eventObject||t.object).uuid+"/"+t.index}var lt=j.createContext({});var ut=function useCanvas(t){var i=t.children,a=t.gl,u=t.camera,o=t.orthographic,s=t.raycaster,p=t.size,m=t.pixelRatio,v=t.vr,y=void 0!==v&&v,x=t.concurrent,T=void 0!==x&&x,E=t.shadowMap,S=void 0!==E&&E,_=t.colorManagement,N=void 0===_||_,O=t.invalidateFrameloop,L=void 0!==O&&O,U=t.updateDefaultCamera,W=void 0===U||U,V=t.noEvents,$=void 0!==V&&V,X=t.onCreated,Y=t.onPointerMissed,te=t.forceResize;var ae=j.useState(false),ue=ae[0],se=ae[1];var me=j.useState((function(){return new M.Vector2})),ve=me[0];var Ce=j.useState((function(){var t=new M.Raycaster;if(s){var i=s.filter,a=K["default"](s,["filter"]);applyProps(t,a,{});}return t})),ke=Ce[0];var _e=j.useState((function(){var t=new M.Scene;t.__interaction=[];t.__objects=[];return t})),ze=_e[0];var Re=j.useState((function(){var t=o?new M.OrthographicCamera(0,0,0,0,.1,1e3):new M.PerspectiveCamera(75,0,.1,1e3);t.position.z=5;u&&applyProps(t,u,{});t.lookAt(0,0,0);return t})),Ae=Re[0],He=Re[1];var Be=j.useState((function(){return new M.Clock})),et=Be[0];var tt=j.useRef({ready:false,active:true,manual:0,colorManagement:N,vr:y,concurrent:T,noEvents:$,invalidateFrameloop:false,frames:0,aspect:0,subscribers:[],camera:Ae,scene:ze,raycaster:ke,mouse:ve,clock:et,gl:a,size:p,viewport:null,initialClick:[0,0],initialHits:[],pointer:new D.TinyEmitter,captured:void 0,events:void 0,subscribe:function subscribe(t,i){void 0===i&&(i=0);i&&tt.current.manual++;tt.current.subscribers.push({ref:t,priority:i});tt.current.subscribers=tt.current.subscribers.sort((function(t,i){return t.priority-i.priority}));return function(){var a;if(null==(a=tt.current)?void 0:a.subscribers){i&&tt.current.manual--;tt.current.subscribers=tt.current.subscribers.filter((function(i){return i.ref!==t}));}}},setDefaultCamera:function setDefaultCamera(t){return He(t)},invalidate:function invalidate$1(){return invalidate(tt)},intersect:function intersect(t,i){void 0===t&&(t={});void 0===i&&(i=true);return st(t,i)},forceResize:te});var nt=j.useCallback((function(t,i){void 0===t&&(t=tt.current.camera);void 0===i&&(i=new M.Vector3(0,0,0));var a=tt.current.size,u=a.width,o=a.height;var s=t.position.distanceTo(i);if(isOrthographicCamera(t))return {width:u/t.zoom,height:o/t.zoom,factor:1,distance:s};var p=t.fov*Math.PI/180;var m=2*Math.tan(p/2)*s;var v=m*(u/o);return {width:v,height:m,factor:u/v,distance:s}}),[]);j.useMemo((function(){tt.current.ready=ue;tt.current.size=p;tt.current.camera=Ae;tt.current.invalidateFrameloop=L;tt.current.vr=y;tt.current.gl=a;tt.current.concurrent=T;tt.current.noEvents=$;tt.current.viewport=nt;}),[L,y,T,$,ue,p,Ae,a]);j.useMemo((function(){tt.current.aspect=p.width/p.height;Object.assign(tt.current.viewport,nt());if(W){if(isOrthographicCamera(Ae)){Ae.left=p.width/-2;Ae.right=p.width/2;Ae.top=p.height/2;Ae.bottom=p.height/-2;}else Ae.aspect=tt.current.aspect;Ae.updateProjectionMatrix();Ae.updateMatrixWorld();}a.setSize(p.width,p.height);ue&&invalidate(tt);}),[Ae,a,p,W]);var rt=j.useCallback((function(t){var i=t.clientX,a=t.clientY;if(void 0!==i){var u=tt.current.size,o=u.left,s=u.right,p=u.top,m=u.bottom;ve.set((i-o)/(s-o)*2-1,-(a-p)/(m-p)*2+1);ke.setFromCamera(ve,tt.current.camera);}}),[]);var it=j.useCallback((function(t,i){if(tt.current.noEvents)return [];var a=new Set;var u=[];var o=i?i(tt.current.scene.__interaction):tt.current.scene.__interaction;var p=ke.intersectObjects(o,true).filter((function(t){var i=makeId(t);if(a.has(i))return false;a.add(i);return true}));s&&s.filter&&pt.current&&(p=s.filter(p,pt.current));for(var m=_createForOfIteratorHelperLoose(p),v;!(v=m()).done;){var y=v.value;var x=y.object;while(x){var T=x.__handlers;T&&u.push(G["default"]({},y,{eventObject:x}));x=x.parent;}}return u}),[]);var at=j.useCallback((function(t){var i=t.clientX-tt.current.initialClick[0];var a=t.clientY-tt.current.initialClick[1];return Math.round(Math.sqrt(i*i+a*a))}),[]);var ut=j.useMemo((function(){return new Map}),[]);var ot=j.useCallback((function(t,i,a){void 0===a&&(a=true);tt.current.pointer.emit("pointerCancel",t);a&&rt(t);Array.from(ut.values()).forEach((function(t){if(i&&(!i.length||!i.find((function(i){return i.eventObject===t.eventObject})))){var a=t.eventObject;var u=a.__handlers;if(u){u.pointerOut&&u.pointerOut(G["default"]({},t,{type:"pointerout"}));u.pointerLeave&&u.pointerLeave(G["default"]({},t,{type:"pointerleave"}));}ut["delete"](makeId(t));}}));}),[]);var ct=new M.Vector3;var ft=j.useCallback((function(t,i,a){var u=it(t,a);tt.current.captured&&"click"!==t.type&&"wheel"!==t.type&&tt.current.captured.forEach((function(t){u.find((function(i){return i.eventObject===t.eventObject}))||u.push(t);}));u.length&&function(){var a=ct.set(ve.x,ve.y,0).unproject(tt.current.camera);var o="click"===t.type?at(t):0;var s=function releasePointerCapture(i){return t.target.releasePointerCapture(i)};var p={stopped:false,captured:false};var m=function _loop(){var m=y.value;var v=function setPointerCapture(i){if(!p.captured){p.captured=true;tt.current.captured=[];}tt.current.captured&&tt.current.captured.push(m);t.target.setPointerCapture(i);};var x=G["default"]({},t,m,{intersections:u,stopped:p.stopped,delta:o,unprojectedPoint:a,ray:ke.ray,camera:tt.current.camera,stopPropagation:function stopPropagation(){var t=tt.current.captured;t&&!t.find((function(t){return t.eventObject.id===m.eventObject.id}))||(x.stopped=p.stopped=true);},target:G["default"]({},t.target,{setPointerCapture:v,releasePointerCapture:s}),currentTarget:G["default"]({},t.currentTarget,{setPointerCapture:v,releasePointerCapture:s}),sourceEvent:t});i(x);if(true===p.stopped){ut.size&&Array.from(ut.values()).find((function(t){return t.object===m.object}))&&ot(x,[m]);return "break"}};for(var v=_createForOfIteratorHelperLoose(u),y;!(y=v()).done;){var x=m();if("break"===x)break}}();return u}),[]);var st=j.useCallback((function(t,i){void 0===i&&(i=true);tt.current.pointer.emit("pointerMove",t);i&&rt(t);var a=ft(t,(function(t){var i=t.eventObject;var a=i.__handlers;if(a){a.pointerMove&&a.pointerMove(t);if(a.pointerOver||a.pointerEnter||a.pointerOut||a.pointerLeave){var u=makeId(t);var o=ut.get(u);if(o)o.stopped&&t.stopPropagation();else {ut.set(u,t);a.pointerOver&&a.pointerOver(G["default"]({},t,{type:"pointerover"}));a.pointerEnter&&a.pointerEnter(G["default"]({},t,{type:"pointerenter"}));}}}}),(function(t){return t.filter((function(t){return ["Move","Over","Enter","Out","Leave"].some((function(i){return t.__handlers["pointer"+i]}))}))}));ot(t,a,i);return a}),[]);var dt=j.useCallback((function(t){return function(i,a){void 0===a&&(a=true);tt.current.pointer.emit(t,i);a&&rt(i);var u=ft(i,(function(i){var a=i.eventObject;var u=a.__handlers;u&&u[t]&&("click"!==t&&"contextMenu"!==t&&"doubleClick"!==t||tt.current.initialHits.includes(a))&&u[t](i);}));if("pointerDown"===t){tt.current.initialClick=[i.clientX,i.clientY];tt.current.initialHits=u.map((function(t){return t.eventObject}));}"click"!==t&&"contextMenu"!==t&&"doubleClick"!==t||u.length||!Y||at(i)<=2&&Y();}}),[Y]);j.useMemo((function(){tt.current.events={onClick:dt("click"),onContextMenu:dt("contextMenu"),onDoubleClick:dt("doubleClick"),onWheel:dt("wheel"),onPointerDown:dt("pointerDown"),onPointerUp:dt("pointerUp"),onPointerLeave:function onPointerLeave(t){return ot(t,[])},onPointerMove:st,onGotPointerCaptureLegacy:function onGotPointerCaptureLegacy(t){return tt.current.captured=it(t)},onLostPointerCapture:function onLostPointerCapture(t){return tt.current.captured=void 0,ot(t)}};}),[Y]);var pt=j.useRef();j.useMemo((function(){var t=tt.current,i=t.ready,a=t.manual,u=t.vr,o=t.noEvents,s=t.invalidateFrameloop,p=t.frames,m=t.subscribers,v=t.captured,y=t.initialClick,x=t.initialHits,T=K["default"](t,["ready","manual","vr","noEvents","invalidateFrameloop","frames","subscribers","captured","initialClick","initialHits"]);pt.current=T;}),[p,Ae]);j.useLayoutEffect((function(){m&&(Array.isArray(m)?a.setPixelRatio(Math.max(Math.min(m[0],window.devicePixelRatio),m[1])):a.setPixelRatio(m));}),[a,m]);j.useLayoutEffect((function(){if(S){a.shadowMap.enabled=true;"object"===typeof S?Object.assign(a.shadowMap,S):a.shadowMap.type=M.PCFSoftShadowMap;}if(N){a.toneMapping=M.ACESFilmicToneMapping;a.outputEncoding=M.sRGBEncoding;}}),[S,N]);var mt=j.useCallback((function Canvas(t){var i=function activate(){return se(true)};j.useEffect((function(){var t=X&&X(tt.current);t&&t.then?t.then(i):i();}),[]);return t.children}),[]);j.useLayoutEffect((function(){render(J["default"].createElement(mt,null,J["default"].createElement(lt.Provider,{value:pt.current},"function"===typeof i?i(tt.current):i)),ze,tt);}),[ue,i,pt.current]);j.useLayoutEffect((function(){if(ue)if(tt.current.vr)if((a.xr||a.vr)&&a.setAnimationLoop){(a.xr||a.vr).enabled=true;a.setAnimationLoop((function(t){return renderGl(tt,t,0,true)}));}else console.warn("the gl instance does not support VR!");else invalidate(tt);}),[ue,L]);j.useEffect((function(){return function(){if(tt.current.gl){tt.current.gl.renderLists.dispose();tt.current.gl.forceContextLoss&&tt.current.gl.forceContextLoss();dispose(tt.current.gl);}unmountComponentAtNode(tt.current.scene,(function(){dispose(tt.current.scene);dispose(tt.current.raycaster);dispose(tt.current.camera);dispose(tt.current);}));}}),[]);return tt.current.events};function dispose(t){t.dispose&&t.dispose();for(var i in t){"object"===typeof i&&i.dispose&&i.dispose();delete t[i];}}function useContext$1(t){var i=j.useContext(t);i||console.warn("hooks can only be used within the canvas! https://github.com/react-spring/react-three-fiber#hooks");return i}function useFrame(t,i){void 0===i&&(i=0);var a=useContext$1(lt),u=a.subscribe;var o=j.useRef(t);j.useLayoutEffect((function(){o.current=t;}),[t]);j.useEffect((function(){var t=u(o,i);return function(){return t()}}),[i,u]);return null}function useThree(){return useContext$1(lt)}function useUpdate(t,i,a){var u=useContext$1(lt),o=u.invalidate;var s=j.useRef();var p=a||s;j.useLayoutEffect((function(){if(p.current){t(p.current);o();}}),i);return p}function useResource(t){var i=j.useState(false),a=i[0],u=i[1];var o=j.useRef(void 0);var s=t||o;j.useLayoutEffect((function(){u((function(t){return !t}));}),[]);return s}function loadingFn(t,i){return function(a,u){var o=new a;t&&t(o);var s=Array.isArray(u)?u:[u];return Promise.all(s.map((function(t){return new Promise((function(a,u){return o.load(t,(function(t){if(t.scene){t.nodes={};t.materials={};t.scene.traverse((function(i){i.name&&(t.nodes[i.name]=i);i.material&&!t.materials[i.material.name]&&(t.materials[i.material.name]=i.material);}));}a(t);}),i,(function(t){return u(t.message)}))}))})))}}function useLoader(t,i,a,u){var o=U.useAsset(loadingFn(a,u),[t,i]);return Array.isArray(i)?o:o[0]}useLoader.preload=function(t,i,a){return U.useAsset.preload(loadingFn(a),t,i)};var ot={position:"relative",width:"100%",height:"100%",overflow:"hidden"};function Content(t){var i=t.children,a=t.setEvents,u=t.container,o=t.renderer,s=t.effects,p=K["default"](t,["children","setEvents","container","renderer","effects"]);var m=j.useState(o),v=m[0];v||console.warn("No renderer created!");j.useEffect((function(){s&&s(v,u);}),[u,s,v]);var y=ut(G["default"]({},p,{children:i,gl:v}));j.useEffect((function(){a(y);}),[y,a]);return null}var ct=J["default"].memo((function ResizeContainer(t){var i=t.renderer,a=t.effects,u=t.children,o=t.vr,s=t.webgl1,p=t.concurrent,m=t.shadowMap,v=t.colorManagement,y=t.orthographic,x=t.invalidateFrameloop,T=t.updateDefaultCamera,E=t.noEvents,S=t.gl,_=t.camera,N=t.raycaster,M=t.pixelRatio,O=t.onCreated,L=t.onPointerMissed,D=t.preRender,U=t.resize,W=t.style,$=K["default"](t,["renderer","effects","children","vr","webgl1","concurrent","shadowMap","colorManagement","orthographic","invalidateFrameloop","updateDefaultCamera","noEvents","gl","camera","raycaster","pixelRatio","onCreated","onPointerMissed","preRender","resize","style"]);var X=j.useRef();var Y=j.useState({}),te=Y[0],ae=te.onGotPointerCaptureLegacy,me=K["default"](te,["onGotPointerCaptureLegacy"]),ve=Y[1];var Ce=ue["default"](U||{scroll:true,debounce:{scroll:50,resize:0},polyfill:"undefined"!==typeof window&&window.ResizeObserver?void 0:V.ResizeObserver}),ke=Ce[0],_e=Ce[1],ze=Ce[2];var Re=j.useRef(false);var Ae=j.useMemo((function(){return Re.current=Re.current||!!_e.width&&!!_e.height}),[_e]);var He=j.useMemo((function(){return {size:_e,forceResize:ze,setEvents:ve,container:X.current}}),[ze,_e]);return "undefined"===typeof window?J["default"].createElement("div",G["default"]({style:G["default"]({},ot,W)},$),D):J["default"].createElement("div",G["default"]({ref:se["default"]([ke,X]),style:G["default"]({},ot,W)},me,$),D,Ae&&J["default"].createElement(Content,G["default"]({},t,He)))}));var ft=J["default"].memo((function Canvas(t){var i=t.children,a=K["default"](t,["children"]);var u=j.useRef();var o=a.webgl1?M.WebGL1Renderer:M.WebGLRenderer;return J["default"].createElement(ct,G["default"]({},a,{renderer:function renderer(){if(u.current){var t=G["default"]({antialias:true,alpha:true},a.gl);var i=new o(G["default"]({powerPreference:"high-performance",canvas:u.current},t));return i}},preRender:J["default"].createElement("canvas",{ref:u,style:{display:"block"}})}),i)}));E$1.Canvas=ft;E$1.Renderer=rt;E$1.addAfterEffect=He;E$1.addEffect=Ae;E$1.addTail=Be;E$1.applyProps=applyProps;E$1.createPortal=createPortal;E$1.extend=nt;E$1.forceResize=forceResize;E$1.invalidate=invalidate;E$1.isOrthographicCamera=isOrthographicCamera;E$1.render=render;E$1.renderGl=renderGl;E$1.stateContext=lt;E$1.unmountComponentAtNode=unmountComponentAtNode;E$1.useCanvas=ut;E$1.useFrame=useFrame;E$1.useLoader=useLoader;E$1.useResource=useResource;E$1.useThree=useThree;E$1.useUpdate=useUpdate;const dt=E$1.Canvas,Pt=E$1.useFrame;
var t$9="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var s$2={};!function(){var n=function(t,s,r,u){var a;s[0]=0;for(var h=1;h<s.length;h++){var l=s[h++],f=s[h]?(s[0]|=l?1:2,r[s[h++]]):s[++h];3===l?u[0]=f:4===l?u[1]=Object.assign(u[1]||{},f):5===l?(u[1]=u[1]||{})[s[++h]]=f:6===l?u[1][s[++h]]+=f+"":l?(a=t.apply(f,n(t,f,r,["",null])),u.push(a),f[0]?s[0]|=2:(s[h-2]=0,s[h]=a)):u.push(f);}return u},r=new Map,e=function(s){var u=r.get(this||t$9);return u||(u=new Map,r.set(this||t$9,u)),(u=n(this||t$9,u.get(s)||(u.set(s,u=function(t){for(var s,r,u=1,a="",h="",l=[0],p=function(t){1===u&&(t||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,t,a):3===u&&(t||a)?(l.push(3,t,a),u=2):2===u&&"..."===a&&t?l.push(4,t,0):2===u&&a&&!t?l.push(5,0,!0,a):u>=5&&((a||!t&&5===u)&&(l.push(u,0,a,r),u=6),t&&(l.push(u,t,0,r),u=6)),a="";},f=0;f<t.length;f++){f&&(1===u&&p(),p(f));for(var o=0;o<t[f].length;o++)s=t[f][o],1===u?"<"===s?(p(),l=[l],u=3):a+=s:4===u?"--"===a&&">"===s?(u=1,a=""):a=s+a[0]:h?s===h?h="":a+=s:'"'===s||"'"===s?h=s:">"===s?(p(),u=1):u&&("="===s?(u=5,r=a,a=""):"/"===s&&(u<5||">"===t[f][o+1])?(p(),3===u&&(l=l[0]),u=l,(l=l[0]).push(2,0,u),u=0):" "===s||"\t"===s||"\n"===s||"\r"===s?(p(),u=2):a+=s),3===u&&"!--"===a&&(u=4,l=l[0]);}return p(),l}(s)),u),arguments,[])).length>1?u:u[0]};s$2=e;}();var r$3=s$2;const jsx=r$3.bind(React.createElement);function Box(e){const t=useRef(),[o,r]=useState(!1),[n,a]=useState(!1);return Pt((()=>t.current.rotation.x=t.current.rotation.y+=.02)),jsx`
    <mesh
      ...${e}
      ref=${t}
      scale=${n?[1.5,1.5,1.5]:[1,1,1]}
      onClick=${e=>a(!n)}
      onPointerOver=${e=>r(!0)}
      onPointerOut=${e=>r(!1)}
    >
      <boxBufferGeometry args=${[1,1,1]} />
      <meshStandardMaterial color=${o?"hotpink":"orange"} />
    </mesh>
  `}ReactDOM.render(jsx`
    <${dt}>
      <ambientLight />
      <pointLight position=${[10,10,10]} />
      <${Box} position=${[-1.2,0,0]} />
      <${Box} position=${[1.2,0,0]} />
    <//>
  `,document.getElementById("app"));